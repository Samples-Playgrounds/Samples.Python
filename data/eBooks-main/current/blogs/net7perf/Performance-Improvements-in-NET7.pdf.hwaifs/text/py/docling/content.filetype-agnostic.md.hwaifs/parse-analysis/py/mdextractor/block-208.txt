private static readonly string s_haystack = new HttpClient().GetStringAsync("https://www.gutenberg.org/files/1661/1661-0.txt").Result; [Benchmark] [Arguments("Sherlock")] [Arguments("elementary")] public int Count(string needle) { ReadOnlySpan<char> haystack = s_haystack; int count = 0, pos; while ((pos = haystack.IndexOf(needle)) >= 0) { haystack = haystack.Slice(pos + needle.Length); count++; } return count; }