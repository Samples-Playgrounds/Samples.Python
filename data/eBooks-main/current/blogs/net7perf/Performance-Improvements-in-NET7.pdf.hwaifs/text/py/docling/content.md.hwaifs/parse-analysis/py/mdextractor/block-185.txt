private readonly byte[][] _nestedArrays = new byte[8][]; private const int Iterations = 100_000; private static byte IterateAll(byte[] arr) { byte ret = default ; foreach (byte item in arr) ret = item; return ret; } [Benchmark(OperationsPerInvoke = Iterations)] public async Task MultipleSerial() { for (int i = 0; i < Iterations; i++) { for (int j = 0; j < _nestedArrays.Length; j++) { _nestedArrays[j] = ArrayPool<byte>.Shared.Rent(4096); _nestedArrays[j].AsSpan().Clear(); } await Task.Yield(); for (int j = _nestedArrays.Length - 1; j >= 0; j--) { IterateAll(_nestedArrays[j]); ArrayPool<byte>.Shared.Return(_nestedArrays[j]); } } }