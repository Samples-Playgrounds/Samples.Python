private static readonly string s_haystack = new HttpClient().GetStringAsync("https://www.gutenberg.org/files/1661/1661-0.txt").Result; private Regex _interpreter = new Regex(@"^.*elementary.*$", RegexOptions.Multiline); private Regex _compiled = new Regex(@"^.*elementary.*$", RegexOptions.Compiled | RegexOptions.Multiline); [GeneratedRegex(@"^.*elementary.*$", RegexOptions.Multiline)] private partial Regex SG(); [Benchmark(Baseline = true )] public int Interpreter() => _interpreter.Count(s_haystack); [Benchmark] public int Compiled() => _compiled.Count(s_haystack); [Benchmark] public int SourceGenerator() => SG().Count(s_haystack);