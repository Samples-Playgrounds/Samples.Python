public static void Work(Stream s) => A(s, useAsyunc: false).GetAwaiter().GetResult(); // GetResult() to propagate any exceptions public static Task WorkAsync(Stream S) => A(s, useAsync: true); internal static async Task A(Stream s, bool useAsync) { ... await B(s, useAsync); ... } private static async Task B(Stream s, bool useAsync) { ... int bytesRead = useAsync ? await s.ReadAsync(buffer) : s.Read(buffer.Span); ... }