static bool Contains(ReadOnlySpan<byte> haystack, byte needle) { if (Vector.IsHardwareAccelerated && haystack.Length >= Vector<byte>.Count) { // ... } else { for (int i = 0; i < haystack.Length; i++) { if (haystack[i] == needle) { return true; } } } return false; }