,0
0,private IntPtr _mem;
1,
2,[GlobalSetup]
3,public void Setup()
4,{
5,_mem = Marshal.AllocHGlobal(8);
6,"Marshal.StructureToPtr(new SimpleType { Value1 = 42, Value2 = 84 }, _mem, false);"
7,}
8,
9,[GlobalCleanup]
10,public void Cleanup() => Marshal.FreeHGlobal(_mem);
11,
12,public struct SimpleType
13,{
14,public int Value1;
15,public int Value2;
16,}
17,
18,[Benchmark(Baseline = true)]
19,public SimpleType PtrToStructure() => Marshal.PtrToStructure<SimpleType>(_mem);
20,
21,[Benchmark]
22,public unsafe SimpleType Cast() => *(SimpleType*)_mem;
