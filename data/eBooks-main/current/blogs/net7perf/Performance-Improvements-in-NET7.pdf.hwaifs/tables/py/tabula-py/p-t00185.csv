,private static readonly string s_haystack = new
0,"HttpClient().GetStringAsync(""https://www.gutenberg.org/files/1661/1661-0.txt"").Result;"
1,
2,[Benchmark]
3,"[Arguments(""Sherlock"")]"
4,"[Arguments(""elementary"")]"
5,public int Count(string needle)
6,{
7,ReadOnlySpan<char> haystack = s_haystack;
8,"int count = 0, pos;"
9,while ((pos = haystack.IndexOf(needle)) >= 0)
10,{
11,haystack = haystack.Slice(pos + needle.Length);
12,count++;
13,}
14,
15,return count;
16,}
