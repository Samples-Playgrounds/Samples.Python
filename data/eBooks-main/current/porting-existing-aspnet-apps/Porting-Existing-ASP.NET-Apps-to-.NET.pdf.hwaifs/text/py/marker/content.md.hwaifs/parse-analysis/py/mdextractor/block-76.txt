protected IContainer RegisterContainer()
{
 var builder = new ContainerBuilder();
 var thisAssembly = Assembly.GetExecutingAssembly();
 builder.RegisterControllers(thisAssembly); // MVC controllers
 builder.RegisterApiControllers(thisAssembly); // Web API controllers
 var mockData = bool.Parse(ConfigurationManager.AppSettings["UseMockData"]);
 builder.RegisterModule(new ApplicationModule(mockData));
 var container = builder.Build();
 // set mvc resolver
 DependencyResolver.SetResolver(new AutofacDependencyResolver(container));
 // set webapi resolver
 var resolver = new AutofacWebApiDependencyResolver(container);
 GlobalConfiguration.Configuration.DependencyResolver = resolver;
 return container;
}