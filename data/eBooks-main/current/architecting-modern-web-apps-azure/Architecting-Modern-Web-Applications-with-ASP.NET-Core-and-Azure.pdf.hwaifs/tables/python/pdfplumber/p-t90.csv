,0
0,public class CachedCatalogService : ICatalogService
1,{
2,private readonly IMemoryCache _cache;
3,private readonly CatalogService _catalogService;
4,"private static readonly string _brandsKey = ""brands"";"
5,"private static readonly string _typesKey = ""types"";"
6,private static readonly TimeSpan _defaultCacheDuration = TimeSpan.FromSeconds(30);
7,
8,public CachedCatalogService(
9,"IMemoryCache cache,"
10,CatalogService catalogService)
11,{
12,_cache = cache;
13,_catalogService = catalogService;
14,}
15,
16,public async Task<IEnumerable<SelectListItem>> GetBrands()
17,{
18,"return await _cache.GetOrCreateAsync(_brandsKey, async entry =>"
19,{
20,entry.SlidingExpiration = _defaultCacheDuration;
21,return await _catalogService.GetBrands();
22,});
23,}
24,
25,"public async Task<Catalog> GetCatalogItems(int pageIndex, int itemsPage, int? brandID,"
