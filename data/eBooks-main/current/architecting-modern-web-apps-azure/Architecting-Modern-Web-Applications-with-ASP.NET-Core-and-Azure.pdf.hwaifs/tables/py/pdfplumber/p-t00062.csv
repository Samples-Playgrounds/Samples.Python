,0
0,public class FeatureConvention : IControllerModelConvention
1,{
2,public void Apply(ControllerModel controller)
3,{
4,"controller.Properties.Add(""feature"","
5,GetFeatureName(controller.ControllerType));
6,}
7,
8,private string GetFeatureName(TypeInfo controllerType)
9,{
10,string[] tokens = controllerType.FullName.Split('.');
11,"if (!tokens.Any(t => t == ""Features"")) return """";"
12,string featureName = tokens
13,".SkipWhile(t => !t.Equals(""features"","
14,StringComparison.CurrentCultureIgnoreCase))
15,.Skip(1)
16,.Take(1)
17,.FirstOrDefault();
18,return featureName;
19,}
20,}
