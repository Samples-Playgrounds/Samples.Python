,0
0,{
1,UITextField control;
2,
3,protected override void OnAttached()
4,{
5,try
6,{
7,control = Control as UITextField;
8,UpdateLineColor();
9,}
10,catch (Exception ex)
11,{
12,"Console.WriteLine(""Can't set property on attached control. Error: "", ex.Message);"
13,}
14,}
15,
16,protected override void OnDetached()
17,{
18,control = null;
19,}
20,
21,protected override void OnElementPropertyChanged(PropertyChangedEventArgs args)
22,{
23,base.OnElementPropertyChanged(args);
24,
25,if (args.PropertyName == LineColorBehavior.LineColorProperty.PropertyName ||
26,"args.PropertyName == ""Height"")"
27,{
28,Initialize();
29,UpdateLineColor();
30,}
31,}
32,
33,private void Initialize()
34,{
35,var entry = Element as Entry;
36,if (entry != null)
37,{
38,"Control.Bounds = new CGRect(0, 0, entry.Width, entry.Height);"
39,}
40,}
41,
42,private void UpdateLineColor()
43,{
44,BorderLineLayer lineLayer = control.Layer.Sublayers.OfType<BorderLineLayer>()
45,.FirstOrDefault();
46,
47,if (lineLayer == null)
48,{
49,lineLayer = new BorderLineLayer();
50,lineLayer.MasksToBounds = true;
51,lineLayer.BorderWidth = 1.0f;
52,control.Layer.AddSublayer(lineLayer);
53,control.BorderStyle = UITextBorderStyle.None;
54,}
55,
56,"lineLayer.Frame = new CGRect(0f, Control.Frame.Height-1f, Control.Bounds.Width, 1f);"
57,lineLayer.BorderColor = LineColorBehavior.GetLineColor(Element).ToCGColor();
58,control.TintColor = control.TextColor;
59,}
60,
61,private class BorderLineLayer : CALayer
62,{
63,}
