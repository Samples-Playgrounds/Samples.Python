{'Code block': [{'start_line': 820, 'content': 'var viewType = view.GetType();\nvar viewName = viewType.FullName.Replace(".Views.", ".ViewModels.");\nvar viewAssemblyName = viewType.GetTypeInfo().Assembly.FullName;\nvar viewModelName = string.Format(\n    CultureInfo.InvariantCulture, "{0}Model, {1}", viewName, viewAssemblyName);', 'language': None}, {'start_line': 826, 'content': 'var viewModelType = Type.GetType(viewModelName);\nif (viewModelType == null)\n{\n    return;\n}\nvar viewModel = _container.Resolve(viewModelType);\nview.BindingContext = viewModel;', 'language': None}, {'start_line': 921, 'content': 'private MemberInfo GetMemberInfo(Expression expression)\n{\n    ...\n}', 'language': None}, {'start_line': 1093, 'content': '    var events = AssociatedObject.GetType().GetRuntimeEvents().ToArray();\n    if (events.Any())\n    {\n        _eventInfo = events.FirstOrDefault(e => e.Name == EventName);\n        if (_eventInfo == null)\n            throw new ArgumentException(string.Format(\n                    "EventToCommand: Can\'t find any event named \'{0}\' on attached type",\n                    EventName));', 'language': None}, {'start_line': 1102, 'content': '        AddEventHandler(_eventInfo, AssociatedObject, OnFired);\n    }\n}', 'language': None}, {'start_line': 1106, 'content': 'protected override void OnDetachingFrom(View view)\n{\n    if (_handler != null)\n        _eventInfo.RemoveEventHandler(AssociatedObject, _handler);', 'language': None}, {'start_line': 1111, 'content': '    base.OnDetachingFrom(view);\n}', 'language': None}, {'start_line': 1114, 'content': 'private void AddEventHandler(\n        EventInfo eventInfo, object item, Action<object, EventArgs> action)\n{\n    ...\n}', 'language': None}, {'start_line': 1120, 'content': 'private void OnFired(object sender, EventArgs eventArgs)\n{\n    ...\n}', 'language': None}, {'start_line': 1217, 'content': 'public ProfileViewModel(IOrderService orderService)\n{\n    _orderService = orderService;\n}\n...', 'language': None}, {'start_line': 1598, 'content': '// Filter\npublic const string Filter = "Filter";', 'language': None}, {'start_line': 1601, 'content': '// Change selected Tab programmatically\npublic const string ChangeTab = "ChangeTab";', 'language': None}, {'start_line': 1650, 'content': 'await AddCatalogItemAsync(arg);', 'language': None}, {'start_line': 1848, 'content': 'public CustomNavigationView(Page root) : base(root)\n{\n    InitializeComponent();\n}', 'language': None}, {'start_line': 1893, 'content': 'if (page is LoginView)\n{\n    Application.Current.MainPage = new CustomNavigationView(page);\n}\nelse\n{\n    var navigationPage = Application.Current.MainPage as CustomNavigationView;\n    if (navigationPage != null)\n    {\n        await navigationPage.PushAsync(page);\n    }\n    else\n    {\n        Application.Current.MainPage = new CustomNavigationView(page);\n    }\n}', 'language': None}, {'start_line': 1910, 'content': 'await (page.BindingContext as ViewModelBase).InitializeAsync(parameter);', 'language': None}, {'start_line': 2188, 'content': 'public bool Check(T value)\n{\n    if (value == null)\n    {\n        return false;\n    }', 'language': None}, {'start_line': 2195, 'content': '    var str = value as string;\n    return !string.IsNullOrWhiteSpace(str);\n}', 'language': None}, {'start_line': 2210, 'content': 'public bool Check(T value)\n{\n    if (value == null)', 'language': None}, {'start_line': 2222, 'content': '    var str = value as string;\n    Regex regex = new Regex(@"^([\\w\\.\\-]+)@([\\w\\-]+)((\\.(\\w){2,3})+)$");\n    Match match = regex.Match(str);', 'language': None}, {'start_line': 2226, 'content': '    return match.Success;\n}', 'language': None}, {'start_line': 2335, 'content': 'IEnumerable<string> errors = _validations\n    .Where(v => !v.Check(Value))\n    .Select(v => v.ValidationMessage);', 'language': None}, {'start_line': 2346, 'content': 'return this.IsValid;', 'language': None}, {'start_line': 2447, 'content': '    bool hasLine = (bool)newValue;\n    if (hasLine)\n    {\n        view.Effects.Add(new EntryLineColorEffect());\n    }\n    else\n    {\n        var entryLineColorEffectToRemove =\n                view.Effects.FirstOrDefault(e => e is EntryLineColorEffect);\n        if (entryLineColorEffectToRemove != null)\n        {\n            view.Effects.Remove(entryLineColorEffectToRemove);\n        }\n    }\n}', 'language': None}, {'start_line': 2502, 'content': '    protected override void OnAttached()\n    {\n        try\n        {\n            control = Control as UITextField;\n            UpdateLineColor();\n        }\n        catch (Exception ex)\n        {\n            Console.WriteLine("Can\'t set property on attached control. Error: ", ex.Message);\n        }\n    }', 'language': None}, {'start_line': 2515, 'content': '    protected override void OnDetached()\n    {\n        control = null;\n    }', 'language': None}, {'start_line': 2520, 'content': '    protected override void OnElementPropertyChanged(PropertyChangedEventArgs args)\n    {\n        base.OnElementPropertyChanged(args);', 'language': None}, {'start_line': 2524, 'content': '        if (args.PropertyName == LineColorBehavior.LineColorProperty.PropertyName ||\n            args.PropertyName == "Height")\n        {\n            Initialize();\n            UpdateLineColor();\n        }\n    }', 'language': None}, {'start_line': 2532, 'content': '    private void Initialize()\n    {\n        var entry = Element as Entry;\n        if (entry != null)\n        {\n            Control.Bounds = new CGRect(0, 0, entry.Width, entry.Height);\n        }\n    }', 'language': None}, {'start_line': 2541, 'content': '    private void UpdateLineColor()\n    {\n        BorderLineLayer lineLayer = control.Layer.Sublayers.OfType<BorderLineLayer>()\n                                                         .FirstOrDefault();', 'language': None}, {'start_line': 2546, 'content': '        if (lineLayer == null)\n        {\n            lineLayer = new BorderLineLayer();\n            lineLayer.MasksToBounds = true;\n            lineLayer.BorderWidth = 1.0f;\n            control.Layer.AddSublayer(lineLayer);\n            control.BorderStyle = UITextBorderStyle.None;\n        }', 'language': None}, {'start_line': 2555, 'content': '        lineLayer.Frame = new CGRect(0f, Control.Frame.Height-1f, Control.Bounds.Width, 1f);\n        lineLayer.BorderColor = LineColorBehavior.GetLineColor(Element).ToCGColor();\n        control.TintColor = control.TextColor;\n    }', 'language': None}, {'start_line': 2560, 'content': '    private class BorderLineLayer : CALayer\n    {\n    }', 'language': None}, {'start_line': 2725, 'content': 'public static string UrlBase\n{\n    get\n    {\n        return AppSettings.GetValueOrDefault<string>(IdUrlBase, UrlBaseDefault);\n    }\n    set\n    {\n        AppSettings.AddOrUpdateValue<string>(IdUrlBase, value);\n    }\n}', 'language': None}, {'start_line': 2770, 'content': 'private void UpdateEndpoint(string baseEndpoint)\n{\n    RegisterWebsite = string.Format("{0}:5105/Account/Register", baseEndpoint);\n    CatalogEndpoint = string.Format("{0}:5101", baseEndpoint);\n    OrdersEndpoint = string.Format("{0}:5102", baseEndpoint);\n    BasketEndpoint = string.Format("{0}:5103", baseEndpoint);\n    IdentityEndpoint = string.Format("{0}:5105/connect/authorize", baseEndpoint);\n    UserInfoEndpoint = string.Format("{0}:5105/connect/userinfo", baseEndpoint);\n    TokenEndpoint = string.Format("{0}:5105/connect/token", baseEndpoint);\n    LogoutEndpoint = string.Format("{0}:5105/connect/endsession", baseEndpoint);\n    IdentityCallback = string.Format("{0}:5105/xamarincallback", baseEndpoint);\n    LogoutCallback = string.Format("{0}:5105/Account/Redirecting", baseEndpoint);\n}', 'language': None}, {'start_line': 2826, 'content': '    if(!string.IsNullOrEmpty(_endpoint))\n    {\n        UpdateEndpoint(_endpoint);\n    }', 'language': None}, {'start_line': 2831, 'content': '    RaisePropertyChanged(() => Endpoint);\n}', 'language': None}, {'start_line': 3561, 'content': '// Dictionary with values for the authorize request\nvar dic = new Dictionary<string, string>();\ndic.Add("client_id", GlobalSetting.Instance.ClientId);\ndic.Add("client_secret", GlobalSetting.Instance.ClientSecret);\ndic.Add("response_type", "code id_token");\ndic.Add("scope", "openid profile basket orders locations marketing offline_access");\ndic.Add("redirect_uri", GlobalSetting.Instance.IdentityCallback);\ndic.Add("nonce", Guid.NewGuid().ToString("N"));\ndic.Add("code_challenge", CreateCodeChallenge());\ndic.Add("code_challenge_method", "S256");', 'language': None}, {'start_line': 3580, 'content': 'var authorizeUri = authorizeRequest.Create(dic);\nreturn authorizeUri;', 'language': None}, {'start_line': 3621, 'content': '    if (!string.IsNullOrWhiteSpace(accessToken))\n    {\n        Settings.AuthAccessToken = accessToken;\n        Settings.AuthIdToken = authResponse.IdentityToken;', 'language': None}, {'start_line': 3626, 'content': '        await NavigationService.NavigateToAsync<MainViewModel>();\n        await NavigationService.RemoveLastFromBackStackAsync();\n    }\n}\n...', 'language': None}, {'start_line': 3680, 'content': 'if (!string.IsNullOrEmpty(logoutRequest))\n{\n    // Logout\n    LoginUrl = logoutRequest;\n}\n...', 'language': None}, {'start_line': 3998, 'content': 'CatalogRoot catalog = await _requestProvider.GetAsync<CatalogRoot>(uri);\n...', 'language': None}, {'start_line': 4023, 'content': 'await HandleResponse(response);\nstring serialized = await response.Content.ReadAsStringAsync();', 'language': None}, {'start_line': 4026, 'content': 'TResult result = await Task.Run(() =>\n    JsonConvert.DeserializeObject<TResult>(serialized, _serializerSettings));', 'language': None}, {'start_line': 4029, 'content': 'return result;', 'language': None}, {'start_line': 4047, 'content': 'if (!string.IsNullOrEmpty(token))\n{\n    httpClient.DefaultRequestHeaders.Authorization =\n        new AuthenticationHeaderValue("Bearer", token);\n}\nreturn httpClient;', 'language': None}, {'start_line': 4078, 'content': 'var itemsOnPage = await _catalogContext.CatalogItems\n    .OrderBy(c=>c.Name)\n    .Skip(pageSize * pageIndex)\n    .Take(pageSize)\n    .ToListAsync();', 'language': None}, {'start_line': 4084, 'content': 'itemsOnPage = ComposePicUri(itemsOnPage);\nvar model = new PaginatedItemsViewModel<CatalogItem>(\n    pageIndex, pageSize, totalItems, itemsOnPage);', 'language': None}, {'start_line': 4088, 'content': 'return Ok(model);', 'language': None}, {'start_line': 4162, 'content': 'await HandleResponse(response);\nstring serialized = await response.Content.ReadAsStringAsync();', 'language': None}, {'start_line': 4165, 'content': 'TResult result = await Task.Run(() =>\n    JsonConvert.DeserializeObject<TResult>(serialized, _serializerSettings));', 'language': None}, {'start_line': 4168, 'content': 'return result;', 'language': None}, {'start_line': 4351, 'content': '<ffimageloading:CachedImage.LoadingPlaceholder>\n    <OnPlatform\n        x:TypeArguments="ImageSource"', 'language': None}, {'start_line': 4363, 'content': '<ffimageloading:CachedImage.ErrorPlaceholder>\n    <OnPlatform\n        x:TypeArguments="ImageSource"\n        iOS="noimage"\n        Android="noimage"\n        WinPhone="Assets/noimage.png"/>\n</ffimageloading:CachedImage.ErrorPlaceholder>', 'language': None}, {'start_line': 4567, 'content': 'public OrderDetailViewModel(IOrderService ordersService)', 'language': None}, {'start_line': 4636, 'content': 'var order = await orderService.GetOrderAsync(1, GlobalSetting.Instance.AuthToken);\nawait orderViewModel.InitializeAsync(order);', 'language': None}, {'start_line': 4639, 'content': 'Assert.NotNull(orderViewModel.Order);', 'language': None}, {'start_line': 4672, 'content': 'orderViewModel.PropertyChanged += (sender, e) =>\n{', 'language': None}, {'start_line': 4685, 'content': 'Assert.True(invoked);', 'language': None}, {'start_line': 4705, 'content': 'Xamarin.Forms.MessagingCenter.Subscribe<CatalogViewModel, CatalogItem>(\n    this, MessageKeys.AddProduct, (sender, arg) =>\n{\n    messageReceived = true;\n});\ncatalogViewModel.AddCatalogItemCommand.Execute(null);', 'language': None}, {'start_line': 4712, 'content': 'Assert.True(messageReceived);', 'language': None}, {'start_line': 4735, 'content': 'Assert.Throws<ArgumentException>(() => listView.Behaviors.Add(behavior));', 'language': None}, {'start_line': 4770, 'content': 'bool isValid = mockViewModel.Validate();', 'language': None}, {'start_line': 4772, 'content': 'Assert.True(isValid);', 'language': None}, {'start_line': 4788, 'content': 'bool isValid = mockViewModel.Validate();', 'language': None}, {'start_line': 4790, 'content': 'Assert.False(isValid);\nAssert.NotNull(mockViewModel.Forename.Value);\nAssert.Null(mockViewModel.Surname.Value);\nAssert.True(mockViewModel.Forename.IsValid);\nAssert.False(mockViewModel.Surname.IsValid);\nAssert.Empty(mockViewModel.Forename.Errors);\nAssert.NotEmpty(mockViewModel.Surname.Errors);', 'language': None}]}