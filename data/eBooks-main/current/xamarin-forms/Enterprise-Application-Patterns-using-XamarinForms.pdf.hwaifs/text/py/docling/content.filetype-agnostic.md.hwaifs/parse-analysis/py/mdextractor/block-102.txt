[Fact] public void AddCatalogItemCommandSendsAddProductMessageTest() { bool messageReceived = false; var catalogService = new CatalogMockService(); var catalogViewModel = new CatalogViewModel(catalogService); Xamarin.Forms.MessagingCenter.Subscribe<CatalogViewModel , CatalogItem>( this , MessageKeys.AddProduct, (sender, arg) => { messageReceived = true; }); catalogViewModel.AddCatalogItemCommand.Execute(null); Assert.True(messageReceived); }