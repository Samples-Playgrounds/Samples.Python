{'Code block': [{'start_line': 1073, 'content': 'private MemberInfo GetMemberInfo(Expression expression)\n{\n    // Omitted for brevity ...\n}', 'language': None}, {'start_line': 1301, 'content': '/// <inheritdoc/>\nprotected override void OnAttachedTo(VisualElement bindable)\n{\n    base.OnAttachedTo(bindable);\n    RegisterEvent();\n}', 'language': None}, {'start_line': 1308, 'content': '/// <inheritdoc/>\nprotected override void OnDetachingFrom(VisualElement bindable)\n{\n    UnregisterEvent();\n    base.OnDetachingFrom(bindable);\n}', 'language': None}, {'start_line': 1315, 'content': 'static void OnEventNamePropertyChanged(BindableObject bindable, object oldValue, object', 'language': None}, {'start_line': 1319, 'content': 'void RegisterEvent()\n{', 'language': None}, {'start_line': 1328, 'content': '    var eventName = EventName;\n    if (View is null || string.IsNullOrWhiteSpace(eventName))\n    {\n        return;\n    }', 'language': None}, {'start_line': 1334, 'content': '    eventInfo = View.GetType()?.GetRuntimeEvent(eventName) ??\n        throw new ArgumentException($"{nameof(EventToCommandBehavior)}: Couldn\'t', 'language': None}, {'start_line': 1338, 'content': '    ArgumentNullException.ThrowIfNull(eventInfo.EventHandlerType);\n    ArgumentNullException.ThrowIfNull(eventHandlerMethodInfo);', 'language': None}, {'start_line': 1341, 'content': '    eventHandler = eventHandlerMethodInfo.CreateDelegate(eventInfo.EventHandlerType,', 'language': None}, {'start_line': 1346, 'content': '    eventInfo.AddEventHandler(View, eventHandler);\n}', 'language': None}, {'start_line': 1349, 'content': 'void UnregisterEvent()\n{\n    if (eventInfo is not null && eventHandler is not null)\n    {\n        eventInfo.RemoveEventHandler(View, eventHandler);\n    }', 'language': None}, {'start_line': 1356, 'content': '    eventInfo = null;\n    eventHandler = null;\n}', 'language': None}, {'start_line': 1360, 'content': '/// <summary>\n/// Virtual method that executes when a Command is invoked\n/// </summary>\n/// <param name="sender"></param>\n/// <param name="eventArgs"></param>\n[Microsoft.Maui.Controls.Internals.Preserve(Conditional = true)]\nprotected virtual void OnTriggerHandled(object? sender = null, object? eventArgs =', 'language': None}, {'start_line': 1372, 'content': '    var command = Command;\n    if (command?.CanExecute(parameter) ?? false)\n    {\n        command.Execute(parameter);\n    }\n}', 'language': None}, {'start_line': 1402, 'content': '<!-- Omitted for brevity... -->\n<Entry.Behaviors>\n    <mct:EventToCommandBehavior\n        EventName="TextChanged"\n        Command="{Binding ValidateCommand}" />\n</Entry.Behaviors>\n<!-- Omitted for brevity... -->', 'language': None}, {'start_line': 1475, 'content': '// Omitted for brevity', 'language': None}, {'start_line': 1621, 'content': 'return mauiAppBuilder;', 'language': None}, {'start_line': 1743, 'content': '    InitializeComponent();\n}', 'language': None}, {'start_line': 2047, 'content': 'Task NavigateToAsync(string route, IDictionary<string, object> routeParameters = null);', 'language': None}, {'start_line': 2049, 'content': 'Task PopAsync();', 'language': None}, {'start_line': 2160, 'content': '<!-- Omitted for brevity -->', 'language': None}, {'start_line': 2162, 'content': '<FlyoutItem >\n    <ShellContent x:Name="login" ContentTemplate="{DataTemplate views:LoginView}"', 'language': None}, {'start_line': 2167, 'content': '<TabBar x:Name="main" Route="Main">\n    <ShellContent Title="CATALOG" Route="Catalog" Icon="{StaticResource', 'language': None}, {'start_line': 2210, 'content': 'if (Parent is not null)\n{\n    await _navigationService.InitializeAsync();\n}', 'language': None}, {'start_line': 2249, 'content': 'await NavigationService.NavigateToAsync(\n    "OrderDetail",', 'language': None}, {'start_line': 2448, 'content': 'public bool Check(T value) =>\n    value is string str && !string.IsNullOrWhiteSpace(str);', 'language': None}, {'start_line': 2462, 'content': 'public string ValidationMessage { get; set; }', 'language': None}, {'start_line': 2464, 'content': 'public bool Check(T value) =>\n    value is string str && _regex.IsMatch(str);', 'language': None}, {'start_line': 2502, 'content': 'Password.Validations.Add(new IsNotNullOrEmptyRule<string>\n{\n    ValidationMessage = "A password is required."\n});', 'language': None}, {'start_line': 2558, 'content': 'IsValid = !Errors.Any();', 'language': None}, {'start_line': 2560, 'content': 'return IsValid;', 'language': None}, {'start_line': 2777, 'content': 'private const string IdUseMocks = "use_mocks";\nprivate const bool UseMocksDefault = true;', 'language': None}, {'start_line': 2780, 'content': 'public string AuthAccessToken\n{\n    get => Preferences.Get(AccessToken, AccessTokenDefault);\n    set => Preferences.Set(AccessToken, value);\n}', 'language': None}, {'start_line': 2786, 'content': 'public bool UseMocks\n{\n    get => Preferences.Get(IdUseMocks, UseMocksDefault);\n    set => Preferences.Set(IdUseMocks, value);\n}', 'language': None}, {'start_line': 2836, 'content': '_identityEndpoint = _settingsService.IdentityEndpointBase;', 'language': None}, {'start_line': 2851, 'content': '    if (!string.IsNullOrWhiteSpace(value))\n    {\n        UpdateIdentityEndpoint();\n    }\n}', 'language': None}, {'start_line': 3314, 'content': 'CatalogRoot? catalog = await _requestProvider.GetAsync<CatalogRoot>(uri);', 'language': None}, {'start_line': 3316, 'content': 'return catalog?.Data;', 'language': None}, {'start_line': 3338, 'content': 'await HandleResponse(response);\nTResult result = await response.Content.ReadFromJsonAsync<TResult>();', 'language': None}, {'start_line': 3341, 'content': 'return result;', 'language': None}, {'start_line': 3368, 'content': '    if (!string.IsNullOrEmpty(token))\n    {\n        httpClient.DefaultRequestHeaders.Authorization = new', 'language': None}, {'start_line': 3410, 'content': 'var itemsOnPage = await _catalogContext.CatalogItems\n    .OrderBy(c => c.Name)\n    .Skip(pageSize * pageIndex)\n    .Take(pageSize)\n    .ToListAsync();', 'language': None}, {'start_line': 3416, 'content': 'itemsOnPage = ComposePicUri(itemsOnPage);\nvar model = new PaginatedItemsViewModel<CatalogItem>(\n    pageIndex, pageSize, totalItems, itemsOnPage);', 'language': None}, {'start_line': 3420, 'content': 'return Ok(model);', 'language': None}, {'start_line': 3452, 'content': 'await _basketService.UpdateBasketAsync(\n    new CustomerBasket\n    {\n        BuyerId = userInfo.UserId,\n        Items = BasketItems.ToList()\n    },\n    authToken);', 'language': None}, {'start_line': 3491, 'content': 'var content = new StringContent(JsonSerializer.Serialize(data));\ncontent.Headers.ContentType = new MediaTypeHeaderValue("application/json");\nHttpResponseMessage response = await httpClient.PostAsync(uri, content);', 'language': None}, {'start_line': 3495, 'content': 'await HandleResponse(response);\nTResult result = await response.Content.ReadFromJsonAsync<TResult>();', 'language': None}, {'start_line': 3498, 'content': 'return result;', 'language': None}, {'start_line': 3542, 'content': 'await _basketService.ClearBasketAsync(\n    _shippingAddress.Id.ToString(), authToken);', 'language': None}, {'start_line': 4277, 'content': '        if (loginSuccess)\n        {\n            await NavigationService.NavigateToAsync("//Main/Catalog");\n        }', 'language': None}, {'start_line': 4296, 'content': 'if (response.IsError)\n{\n    return false;\n}', 'language': None}, {'start_line': 4301, 'content': 'await _settingsService\n    .SetUserTokenAsync(\n        new UserToken\n        {\n            AccessToken = response.AccessToken,\n            IdToken = response.IdentityToken,\n            RefreshToken = response.RefreshToken,\n            ExpiresAt = response.AccessTokenExpiration\n        })\n    .ConfigureAwait(false);', 'language': None}, {'start_line': 4312, 'content': 'return !response.IsError;', 'language': None}, {'start_line': 4370, 'content': '_settingsService.UseFakeLocation = false;', 'language': None}, {'start_line': 4372, 'content': 'UserName.Value = string.Empty;\nPassword.Value = string.Empty;', 'language': None}, {'start_line': 4386, 'content': 'if (response.IsError)\n{\n    return false;\n}', 'language': None}, {'start_line': 4391, 'content': 'await _settingsService.SetUserTokenAsync(default);', 'language': None}, {'start_line': 4393, 'content': 'return !response.IsError;', 'language': None}, {'start_line': 4465, 'content': 'var identitySection = configuration.GetSection("Identity");', 'language': None}, {'start_line': 4467, 'content': 'if (!identitySection.Exists())\n{\n    // No identity section, so no authentication\n    return services;\n}', 'language': None}, {'start_line': 4473, 'content': '// prevent from mapping "sub" claim to nameidentifier.\nJsonWebTokenHandler.DefaultInboundClaimTypeMap.Remove("sub");', 'language': None}, {'start_line': 4476, 'content': 'services.AddAuthentication().AddJwtBearer(options =>\n{', 'language': None}, {'start_line': 4486, 'content': '    options.Authority = identityUrl;\n    options.RequireHttpsMetadata = false;\n    options.Audience = audience;\n    options.TokenValidationParameters.ValidIssuers = [identityUrl];\n    options.TokenValidationParameters.ValidateAudience = false;\n});', 'language': None}, {'start_line': 4493, 'content': 'services.AddAuthorization();', 'language': None}, {'start_line': 4495, 'content': 'return services;', 'language': None}, {'start_line': 4514, 'content': 'if (string.IsNullOrEmpty(authToken))\n{\n    return;\n}', 'language': None}, {'start_line': 4519, 'content': 'var uri = $"{UriHelper.CombineUri(_settingsService.GatewayOrdersEndpointBase,', 'language': None}, {'start_line': 4522, 'content': 'var success = await _requestProvider.PostAsync(uri, newOrder, authToken, "x-', 'language': None}, {'start_line': 4536, 'content': 'if (string.IsNullOrEmpty(authToken))\n{\n    return;', 'language': None}, {'start_line': 4546, 'content': 'await GetBasketClient().DeleteBasketAsync(new DeleteBasketRequest(),', 'language': None}, {'start_line': 4609, 'content': 'public event PropertyChangedEventHandler PropertyChanged;', 'language': None}, {'start_line': 4611, 'content': 'public string Name\n{\n    get => _name;\n    set => SetPropertyValue(ref _name, value);\n}', 'language': None}, {'start_line': 4617, 'content': 'public int Value\n{\n    get => _value;\n    set => SetPropertyValue(ref _value, value);\n}', 'language': None}, {'start_line': 4623, 'content': 'protected void SetPropertyValue<T>(ref T storageField, T newValue, [CallerMemberName]', 'language': None}, {'start_line': 4629, 'content': '    storageField = newValue;\n    RaisePropertyChanged(propertyName);\n}', 'language': None}, {'start_line': 4633, 'content': 'protected virtual void RaisePropertyChanged([CallerMemberName] string propertyName =', 'language': None}, {'start_line': 4657, 'content': '[ObservableProperty]\nprivate int _value;', 'language': None}, {'start_line': 4685, 'content': 'public string Name\n{\n    get => _name;\n    set => SetProperty(ref _name, value);\n}', 'language': None}, {'start_line': 4691, 'content': 'public int Value\n{\n    get => _value;\n    set => SetProperty(ref _value, value);', 'language': None}, {'start_line': 4815, 'content': '[ObservableProperty]\nprivate string _name;', 'language': None}, {'start_line': 4818, 'content': '[ObservableProperty]\nbool _isValid;', 'language': None}, {'start_line': 4821, 'content': '[RelayCommand]\nprivate Task SettingsAsync()\n{\n    return NavigationService.NavigateToAsync("Settings");\n}', 'language': None}, {'start_line': 4827, 'content': '[RelayCommand]\nprivate void Validate()\n{\n    IsValid = !string.IsNullOrEmpty(Name);\n}', 'language': None}, {'start_line': 4843, 'content': 'SettingsCommand => settingsCommand ??= new AsyncRelayCommand(SettingsAsync);', 'language': None}, {'start_line': 4850, 'content': 'public IRelayCommand ValidateCommand => validateCommand ??= new RelayCommand(Validate);', 'language': None}, {'start_line': 4942, 'content': 'public OrderDetailViewModel(\n    IAppEnvironmentService appEnvironmentService,\n    IDialogService dialogService, INavigationService navigationService,', 'language': None}, {'start_line': 5027, 'content': '// Act\nvar order = await orderService.GetOrderAsync(1, GlobalSetting.Instance.AuthToken);\nawait orderViewModel.InitializeAsync(order);', 'language': None}, {'start_line': 5031, 'content': '// Assert\nAssert.IsNotNull(orderViewModel.Order);', 'language': None}, {'start_line': 5069, 'content': 'orderViewModel.PropertyChanged += (sender, e) =>\n{\n    if (e.PropertyName.Equals("Order"))\n        invoked = true;\n};\nvar order = await orderService.GetOrderAsync(1, GlobalSetting.Instance.AuthToken);\nawait orderViewModel.InitializeAsync(order);', 'language': None}, {'start_line': 5077, 'content': 'Assert.IsTrue(invoked);', 'language': None}, {'start_line': 5097, 'content': 'MessagingCenter.Subscribe<CatalogViewModel, CatalogItem>(\n    this, MessageKeys.AddProduct, (sender, arg) =>\n{\n    messageReceived = true;\n});\ncatalogViewModel.AddCatalogItemCommand.Execute(null);', 'language': None}, {'start_line': 5131, 'content': 'Assert.Throws<ArgumentException>(() => listView.Behaviors.Add(behavior));', 'language': None}, {'start_line': 5167, 'content': 'var isValid = mockViewModel.Validate();', 'language': None}, {'start_line': 5169, 'content': 'Assert.IsTrue(isValid);', 'language': None}, {'start_line': 5185, 'content': 'bool isValid = mockViewModel.Validate();', 'language': None}, {'start_line': 5187, 'content': 'Assert.IsFalse(isValid);\nAssert.IsNotNull(mockViewModel.Forename.Value);\nAssert.IsNull(mockViewModel.Surname.Value);\nAssert.IsTrue(mockViewModel.Forename.IsValid);\nAssert.IsFalse(mockViewModel.Surname.IsValid);\nAssert.AreEqual(mockViewModel.Forename.Errors.Count(), 0);\nAssert.AreNotEqual(mockViewModel.Surname.Errors.Count(), 0);', 'language': None}]}