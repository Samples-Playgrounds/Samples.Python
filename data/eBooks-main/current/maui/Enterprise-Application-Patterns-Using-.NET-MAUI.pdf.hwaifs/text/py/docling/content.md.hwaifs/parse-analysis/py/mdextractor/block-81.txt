public static IServiceCollection AddDefaultAuthentication( this IHostApplicationBuilder builder) { var services = builder.Services; var configuration = builder.Configuration; var identitySection = configuration.GetSection("Identity"); if (!identitySection.Exists()) { // No identity section, so no authentication return services; } // prevent from mapping "sub" claim to nameidentifier. JsonWebTokenHandler.DefaultInboundClaimTypeMap.Remove("sub"); services.AddAuthentication().AddJwtBearer(options => {