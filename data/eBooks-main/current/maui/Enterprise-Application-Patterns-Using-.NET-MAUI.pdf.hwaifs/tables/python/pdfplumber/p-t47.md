|    | 0                                                               |
|---:|:----------------------------------------------------------------|
|  0 | using CommunityToolkit.Mvvm.ComponentModel;                     |
|  1 | namespace eShop.Validations;                                    |
|  2 | public class ValidatableObject<T> : ObservableObject, IValidity |
|  3 | {                                                               |
|  4 | private IEnumerable<string> _errors;                            |
|  5 | private bool _isValid;                                          |
|  6 | private T _value;                                               |
|  7 | public List<IValidationRule<T>> Validations { get; } = new();   |
|  8 | public IEnumerable<string> Errors                               |
|  9 | {                                                               |
| 10 | get => _errors;                                                 |
| 11 | private set => SetProperty(ref _errors, value);                 |
| 12 | }                                                               |
| 13 | public bool IsValid                                             |
| 14 | {                                                               |
| 15 | get => _isValid;                                                |
| 16 | private set => SetProperty(ref _isValid, value);                |
| 17 | }                                                               |
| 18 | public T Value                                                  |
| 19 | {                                                               |
| 20 | get => _value;                                                  |
| 21 | set => SetProperty(ref _value, value);                          |
| 22 | }                                                               |
| 23 | public ValidatableObject()                                      |
| 24 | {                                                               |
| 25 | _isValid = true;                                                |
| 26 | _errors = Enumerable.Empty<string>();                           |
| 27 | }                                                               |
| 28 | public bool Validate()                                          |
| 29 | {                                                               |
| 30 | Errors = Validations                                            |
| 31 | ?.Where(v => !v.Check(Value))                                   |
| 32 | ?.Select(v => v.ValidationMessage)                              |
| 33 | ?.ToArray()                                                     |
| 34 | ?? Enumerable.Empty<string>();                                  |
| 35 | IsValid = !Errors.Any();                                        |
| 36 | return IsValid;                                                 |
| 37 | }                                                               |
| 38 | }                                                               |