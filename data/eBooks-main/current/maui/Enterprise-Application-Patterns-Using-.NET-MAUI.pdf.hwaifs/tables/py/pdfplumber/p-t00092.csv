,0
0,public static IServiceCollection AddDefaultAuthentication(this IHostApplicationBuilder
1,builder)
2,{
3,var services = builder.Services;
4,var configuration = builder.Configuration;
5,
6,"var identitySection = configuration.GetSection(""Identity"");"
7,
8,if (!identitySection.Exists())
9,{
10,"// No identity section, so no authentication"
11,return services;
12,}
13,
14,"// prevent from mapping ""sub"" claim to nameidentifier."
15,"JsonWebTokenHandler.DefaultInboundClaimTypeMap.Remove(""sub"");"
16,
17,services.AddAuthentication().AddJwtBearer(options =>
18,{
