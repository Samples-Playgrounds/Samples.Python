"[\"<!-- image -->\\n\\nArchitecture, patterns, and Azure implementation\\n\\n<!-- image -->\\n\\nJeremy Likness Cec\", \"il Phillip\\n\\nEDITION v4.0 - Updated to Azure Functions v4\\n\\nDOWNLOAD available at: https://aka.ms/serv\", \"erlessbookpdf\\n\\nPUBLISHED BY\\n\\nMicrosoft Developer Division, .NET, and Visual Studio product teams\\n\\nA \", \"division of Microsoft Corporation\\n\\nOne Microsoft Way\\n\\nRedmond, Washington 98052-6399\\n\\nCopyright \\u00a9 20\", \"18-2023 by Microsoft Corporation\\n\\nAll rights reserved. No part of the contents of this book may be r\", \"eproduced or transmitted in any form or by any means without the written permission of the publisher\", \".\\n\\nThis book is provided 'as -is' and expresses the author's views and opinions. The views, opinions\", \" and information expressed in this book, including URL and other Internet website references, may ch\", \"ange without notice.\\n\\nSome examples depicted herein are provided for illustration only and are ficti\", \"tious. No real association or connection is intended or should be inferred.\\n\\nMicrosoft and the trade\", \"marks listed at https://www.microsoft.com on the 'Trademarks' webpage are trademarks of the Microsof\", \"t group of companies.\\n\\nMac and macOS are trademarks of Apple Inc.\\n\\nAll other marks and logos are pro\", \"perty of their respective owners.\\n\\nAuthor:\\n\\nJeremy Likness , Senior .NET Data Program Manager, Micro\", \"soft Corp.\\n\\nContributor:\\n\\nCecil Phillip , Senior Cloud Advocate, Microsoft Corp.\\n\\nEditors:\\n\\nBill Wag\", \"ner , Senior Content Developer, Microsoft Corp.\\n\\nMaira Wenzel , Senior Content Developer, Microsoft \", \"Corp.\\n\\nParticipants and reviewers:\\n\\nSteve Smith , Architect/Trainer, NimblePros.\\n\\n## Introduction\\n\\nS\", \"erverless is the evolution of cloud platforms in the direction of pure cloud native code. Serverless\", \" brings developers closer to business logic while insulating them from infrastructure concerns. It's\", \" a pattern that doesn't imply 'no server' but rather, 'less server.' Serverless code is event -drive\", \"n. Code\\n\\n<!-- image -->\\n\\nMicrosoft\\n\\n<!-- image -->\\n\\nmay be triggered by anything from a traditional \", \"HTTP web request to a timer or the result of uploading a file. The infrastructure behind serverless \", \"allows for instant scale to meet elastic demands and offers microbilling to truly 'pay for what you \", \"use.' Serverless requires a new way of thinking and approach to building applications and isn't the \", \"right solution for every problem. As a developer, you must decide:\\n\\n- What are the pros and cons of \", \"serverless?\\n- Why should you consider serverless for your own applications?\\n- How can you build, tes\", \"t, deploy, and maintain your serverless code?\\n- Where does it make sense to migrate code to serverle\", \"ss in existing applications, and what is the best way to accomplish this transformation?\\n\\n## About t\", \"his guide\\n\\nThis guide focuses on cloud native development of applications that use serverless. The b\", \"ook highlights the benefits and exposes the potential drawbacks of developing serverless apps and pr\", \"ovides a survey of serverless architectures. Many examples of how serverless can be used are illustr\", \"ated along with various serverless design patterns.\\n\\nThis guide explains the components of the Azure\", \" serverless platform and focuses specifically on implementation of serverless using Azure Functions \", \". You'll learn about triggers and bindings as well as how to implement serverless apps that rely on \", \"state using durable functions. Finally, business examples and case studies will help provide context\", \" and a frame of reference to determine whether serverless is the right approach for your projects.\\n\\n\", \"## Evolution of cloud platforms\\n\\nServerless is the culmination of several iterations of cloud platfo\", \"rms. The evolution began with physical metal in the data center and progressed through Infrastructur\", \"e as a Service (IaaS) and Platform as a Service (PaaS).\\n\\n<!-- image -->\\n\\nBefore the cloud, a discern\", \"ible boundary existed between development and operations. Deploying an application meant answering m\", \"yriad questions like:\\n\\n- What hardware should be installed?\\n- How is physical access to the machine \", \"secured?\\n- Does the data center require an Uninterruptible Power Supply (UPS)?\\n- Where are storage b\", \"ackups sent?\\n- Should there be redundant power?\\n\\nThe list goes on and the overhead was enormous. In \", \"many situations, IT departments were forced to deal with incredible waste. The waste was due to over\", \"-allocation of servers as backup machines for disaster recovery and standby servers to enable scale-\", \"out. Fortunately, the introduction of virtualization technology (like Hyper-V) with Virtual Machines\", \" (VMs) gave rise to Infrastructure as a Service (IaaS). Virtualized infrastructure allowed operation\", \"s to set up a standard set of servers as the backbone, leading to a flexible environment capable of \", \"provisioning unique servers 'on demand.' More important, virtualization set the stage for using the \", \"cloud to provide virtual machines 'as a service.' Companies could easily get out of the business of \", \"worrying about redundant power or physical machines. Instead, they focused on the virtual environmen\", \"t.\\n\\nIaaS still requires heavy overhead because operations is still responsible for various tasks. Th\", \"ese tasks include:\\n\\n- Patching and backing up servers.\\n- Installing packages.\\n- Keeping the operatin\", \"g system up-to-date.\\n- Monitoring the application.\\n\\nThe next evolution reduced the overhead by provi\", \"ding Platform as a Service (PaaS). With PaaS, the cloud provider handles operating systems, security\", \" patches, and even the required packages to support a specific platform. Instead of building a VM th\", \"en configuring .NET and standing up Internet Information Services (IIS) servers, developers simply c\", \"hoose a 'platform target' such as 'web application' or 'API endpoint' and deploy code directly. The \", \"infrastructure questions are reduced to:\\n\\n- What size services are needed?\\n- How do the services sca\", \"le out (add more servers or nodes)?\\n- How do the services scale up (increase the capacity of hosting\", \" servers or nodes)?\\n\\nServerless further abstracts servers by focusing on event-driven code. Instead \", \"of a platform, developers can focus on a microservice that does one thing. The two key questions for\", \" building the serverless code are:\\n\\n- What triggers the code?\\n- What does the code do?\\n\\nWith serverl\", \"ess, infrastructure is abstracted. In some cases, the developer no longer worries about the host at \", \"all. Whether or not an instance of IIS, Kestrel, Apache, or some other web server is running to mana\", \"ge web requests, the developer focuses on an HTTP trigger. The trigger provides the standard, cross-\", \"platform payload for the request. The payload not only simplifies the development process, but facil\", \"itates testing and in some cases, makes the code easily portable across platforms.\\n\\nAnother feature \", \"of serverless is microbilling. It's common for web applications to host Web API endpoints. In tradit\", \"ional bare metal, IaaS and even PaaS implementations, the resources to host the APIs are paid for co\", \"ntinuously. That means you pay to host the endpoints even when they aren't being accessed. Often you\", \"'ll find one API is called more than others, so the entire system is scaled\\n\\n<!-- image -->\\n\\n<!-- im\", \"age -->\\n\\nbased on supporting the popular endpoints. Serverless enables you to scale each endpoint in\", \"dependently and pay for usage, so no costs are incurred when the APIs aren't being called. Migration\", \" may in many circumstances dramatically reduce the ongoing cost to support the endpoints.\\n\\n## What t\", \"his guide doesn't cover\\n\\nThis guide specifically emphasizes architecture approaches and design patte\", \"rns and isn't a deep dive into the implementation details of Azure Functions, Logic Apps, or other s\", \"erverless platforms. This guide doesn't cover, for example, advanced workflows with Logic Apps or fe\", \"atures of Azure Functions such as configuring Cross-Origin Resource Sharing (CORS), applying custom \", \"domains, or uploading SSL certificates. These details are available through the online Azure Functio\", \"ns documentation.\\n\\n## Additional resources\\n\\n- Azure Architecture center\\n- Best practices for cloud a\", \"pplications\\n\\n## Who should use the guide\\n\\nThis guide was written for developers and solution archite\", \"cts who want to build enterprise applications with .NET that may use serverless components either on\", \" premises or in the cloud. It's useful to developers, architects, and technical decision makers inte\", \"rested in:\\n\\n- Understanding the pros and cons of serverless development\\n- Learning how to approach s\", \"erverless architecture\\n- Example implementations of serverless apps\\n\\n## How to use the guide\\n\\nThe fi\", \"rst part of this guide examines why serverless is a viable option by comparing several different arc\", \"hitecture approaches. It examines both the technology and development lifecycle, because all aspects\", \" of software development are impacted by architecture decisions. The guide then examines use cases a\", \"nd design patterns and includes reference implementations using Azure Functions. Each section contai\", \"ns additional resources to learn more about a particular area. The guide concludes with resources fo\", \"r walkthroughs and hands-on exploration of serverless implementation.\\n\\n## Send your feedback\\n\\nThe gu\", \"ide and related samples are constantly evolving, so your feedback is welcomed! If you have comments \", \"about how this guide can be improved, use the feedback section at the bottom of any page built on Gi\", \"tHub issues.\\n\\n## Contents\\n\\n| Architecture approaches................................................\", \".......................................................................................1            \", \"                    |                                                                               \", \"                                                                                                    \", \"   |\\n|----------------------------------------------------------------------------------------------\", \"--------------------------------------------------------------------------------------------------|-\", \"----------------------------------------------------------------------------------------------------\", \"---------------------------------------------------------------------------------|\\n| Architecture pa\", \"tterns..............................................................................................\", \"................................................................1           |                       \", \"                                                                                                    \", \"                                                           |\\n| Monoliths............................\", \"....................................................................................................\", \"....................................................1 |                                             \", \"                                                                                                    \", \"                                     |\\n| N-Layer applications.......................................\", \"....................................................................................................\", \"....................2           |                                                                   \", \"                                                                                                    \", \"               |\\n| Microservices....................................................................\", \"....................................................................................................\", \".....3    |                                                                                         \", \"                                                                                             |\\n| Arc\", \"hitecture deployment approaches.....................................................................\", \"........................................................4                               |           \", \"                                                                                                    \", \"                                                                       |\\n| N-Tier applications .....\", \"....................................................................................................\", \"....................................................5             |                                 \", \"                                                                                                    \", \"                                                 |\\n| On-premises and Infrastructure as a Service (Ia\", \"aS)...............................................................................................6 \", \"                                            |                                                       \", \"                                                                                                    \", \"                           |\\n| Platform as a Service (PaaS).........................................\", \"...................................................................................................7\", \"                      |                                                                             \", \"                                                                                                    \", \"     |\\n| Software as a Service (SaaS) ..............................................................\", \".............................................................................7                      \", \"|                                                                                                   \", \"                                                                                   |\\n| Containers an\", \"d Functions as a Service (FaaS).....................................................................\", \".....................................8                                        |                     \", \"                                                                                                    \", \"                                                             |\\n| Serverless.........................\", \"....................................................................................................\", \"...................................................9    |                                           \", \"                                                                                                    \", \"                                       |\\n| Summary..................................................\", \"....................................................................................................\", \"........................10        |                                                                 \", \"                                                                                                    \", \"                 |\\n| Recommended resources .........................................................\", \"....................................................................................11              \", \"            |                                                                                       \", \"                                                                                               |\\n| S\", \"erverless architecture..............................................................................\", \"...........................................................12                             |         \", \"                                                                                                    \", \"                                                                         |\\n| Full serverless back en\", \"d...................................................................................................\", \"...................................................                 | 13                            \", \"                                                                                                    \", \"                                                   |\\n| Monoliths and 'starving the beast' ..........\", \"....................................................................................................\", \".................                             | 13                                                  \", \"                                                                                                    \", \"                             |\\n| Web apps...........................................................\", \"....................................................................................................\", \"..................      | 14                                                                        \", \"                                                                                                    \", \"       |\\n| Mobile back ends.........................................................................\", \".........................................................................................           \", \"  | 14                                                                                              \", \"                                                                                     |\\n| Internet of\", \" Things (IoT).......................................................................................\", \"................................................................                | 15                \", \"                                                                                                    \", \"                                                               |\\n| Serverless architecture considera\", \"tions...............................................................................................\", \"..........................                                | 16                                      \", \"                                                                                                    \", \"                                         |\\n| Managing state.........................................\", \"....................................................................................................\", \"....................16              |                                                               \", \"                                                                                                    \", \"                   |\\n| Long-running processes.......................................................\", \".........................................................................................16         \", \"              |                                                                                     \", \"                                                                                                 |\\n|\", \" Startup time.......................................................................................\", \".................................................................................17         |       \", \"                                                                                                    \", \"                                                                           |\\n| Database updates and \", \"migrations .........................................................................................\", \"...................................17                                 |                             \", \"                                                                                                    \", \"                                                     |\\n| Scaling                                    \", \"                                                                                                    \", \"                                                | ..................................................\", \"....................................................................................................\", \"............................17 |\\n| Monitoring, tracing, and logging.................................\", \"..............................................................................................18    \", \"                          |                                                                         \", \"                                                                                                    \", \"         |\\n| Inter-service dependencies.............................................................\", \".............................................................................18                     \", \"    |                                                                                               \", \"                                                                                       |\\n\\n| Managing\", \" failure and providing resiliency ..................................................................\", \"..........................................18                                    |                   \", \"                                                                                                    \", \" |\\n|------------------------------------------------------------------------------------------------\", \"---------------------------------------------------------------------------------------------|------\", \"----------------------------------------------------------------------------------------------------\", \"--------------|\\n| Versioning and green/blue deployments.............................................\", \"..................................................................19                                \", \"      |                                                                                             \", \"                           |\\n| Serverless design examples...........................................\", \"................................................................................................... \", \"                   | 19                                                                             \", \"                                        |\\n| Scheduling .............................................\", \"....................................................................................................\", \".........................19     |                                                                   \", \"                                                     |\\n| Command and Query Responsibility Segregatio\", \"n (CQRS)..............................................................................19            \", \"                                             |                                                      \", \"                                                                  |\\n| Event-based processing .......\", \"....................................................................................................\", \".....................................20                   |                                         \", \"                                                                               |\\n| File triggers and\", \" transformations....................................................................................\", \"...........................................20                          |                            \", \"                                                                                            |\\n| Asyn\", \"chronous background processing and messaging........................................................\", \"...........................21                                                       |               \", \"                                                                                                    \", \"     |\\n| Web apps and APIs .........................................................................\", \"................................................................................21               |  \", \"                                                                                                    \", \"                  |\\n| Data pipeline.................................................................\", \"....................................................................................................\", \".22       |                                                                                         \", \"                               |\\n| Stream processing ...............................................\", \"....................................................................................................\", \"........22             |                                                                            \", \"                                            |\\n| API gateway.........................................\", \"....................................................................................................\", \"...........................23       |                                                               \", \"                                                         |\\n| Recommended resources .................\", \"....................................................................................................\", \"........................23                       |                                                  \", \"                                                                      |\\n| Azure serverless platform.\", \"....................................................................................................\", \"..............................24                              |                                     \", \"                                                                                   |\\n| Azure Functio\", \"ns..................................................................................................\", \"...................................................................        | 24                     \", \"                                                                                                |\\n| \", \"Programming language support .......................................................................\", \"........................................................25                              |           \", \"                                                                                                    \", \"         |\\n| App service plans .....................................................................\", \"........................................................................................25          \", \" |                                                                                                  \", \"                      |\\n| Create your first function ...............................................\", \"...............................................................................................25   \", \"              |                                                                                     \", \"                                   |\\n| Understand triggers and bindings ............................\", \"................................................................................................26  \", \"                           |                                                                        \", \"                                                |\\n| Telemetry with Application Insights.............\", \"....................................................................................................\", \".............                           | 27                                                        \", \"                                                             |\\n| Azure Logic Apps...................\", \"....................................................................................................\", \"...........................................          | 29                                           \", \"                                                                          |\\n| Event Grid............\", \"....................................................................................................\", \"................................................................. | 31                              \", \"                                                                                       |\\n| Scenarios\", \"....................................................................................................\", \"..........................................................................32   |                    \", \"                                                                                                    \", \"|\\n| Event Grid vs. other Azure messaging services...................................................\", \".................................................33                                         |       \", \"                                                                                                    \", \"             |\\n| Performance targets................................................................\", \"........................................................................................34          \", \"     |                                                                                              \", \"                          |\\n| Event Grid schema.....................................................\", \"....................................................................................................\", \"..34              |                                                                                 \", \"                                       |\\n| Azure resources .........................................\", \"....................................................................................................\", \"...................35          |                                                                    \", \"                                                    |\\n| Conclusion .................................\", \"....................................................................................................\", \".....................................36     |                                                       \", \"                                                                 |\\n| Recommended resources .........\", \"....................................................................................................\", \"................................36                       |                                          \", \"                                                                              |\\n| Durable Azure Func\", \"tions ..............................................................................................\", \"......................................37                              |                             \", \"                                                                                           |\\n| Trigg\", \"ering a stateful workflow...........................................................................\", \"..............................................................                     | 37             \", \"                                                                                                    \", \"    |\\n| Working with the Orchestration client                                                       \", \"                                                                                                | ..\", \"....................................................................................................\", \"..............37 |\\n\\n| The orchestrator function ....................................................\", \".........................................................................................38         \", \"          |    |\\n|----------------------------------------------------------------------------------\", \"----------------------------------------------------------------------------------------------------\", \"-------|----|\\n| The activity functions..............................................................\", \"........................................................................................39          \", \"    |    |\\n| Recommended resources..................................................................\", \"................................................................................                    \", \" | 39 |\\n| Orchestration patterns....................................................................\", \"....................................................................................              | \", \"39 |\\n| Function chaining............................................................................\", \".................................................................................40            |    \", \"|\\n| Asynchronous HTTP APIs..........................................................................\", \"....................................................................40                      |    |\\n|\", \" Monitoring.........................................................................................\", \".................................................................................41      |    |\\n| Re\", \"commended resources ................................................................................\", \".............................................................42                       |    |\\n| Serve\", \"rless business scenarios and use cases .............................................................\", \".................................43                                                |    |\\n| Big data\", \" processing.........................................................................................\", \".....................................................................           | 43 |\\n| Create serv\", \"erless applications: hands-on lab ..................................................................\", \"..........................................                                   | 43 |\\n| Customer revie\", \"ws..................................................................................................\", \"................................................................          | 43 |\\n| File processing a\", \"nd validation ......................................................................................\", \"...................................................                    | 44 |\\n| Game data visualizat\", \"ion ................................................................................................\", \".....................................................               | 44 |\\n| GraphQL ...............\", \"....................................................................................................\", \"................................................................ | 44 |\\n| Internet of Things (IoT) r\", \"eliable edge relay .................................................................................\", \"...............................                               | 44 |\\n| Microservices reference archi\", \"tecture ............................................................................................\", \"................................                           | 44 |\\n| Serverless for mobile...........\", \"....................................................................................................\", \"............................................            | 45 |\\n| Serverless messaging ..............\", \"....................................................................................................\", \"........................................             | 45 |\\n| Recommended resources.................\", \"....................................................................................................\", \".............................                     | 45 |\\n| Conclusion...............................\", \"....................................................................................................\", \".............................46                |    |\\n\\n## Architecture approaches\\n\\nUnderstanding exi\", \"sting approaches to architecting enterprise apps helps clarify the role played by serverless. There \", \"are many approaches and patterns that evolved over decades of software development, and all have the\", \"ir own pros and cons. In many cases, the ultimate solution may not involve deciding on a single appr\", \"oach but may integrate several approaches. Migration scenarios often involve shifting from one archi\", \"tecture approach to another through a hybrid approach.\\n\\nThis chapter provides an overview of both lo\", \"gical and physical architecture patterns for enterprise applications.\\n\\n## Architecture patterns\\n\\nMod\", \"ern business applications follow a variety of architecture patterns. This section represents a surve\", \"y of common patterns. The patterns listed here aren't necessarily all best practices, but illustrate\", \" different approaches.\\n\\nFor more information, see Azure application architecture guide.\\n\\n## Monolith\", \"s\\n\\nMany business applications follow a monolith pattern. Legacy applications are often implemented a\", \"s monoliths. In the monolith pattern, all application concerns are contained in a single deployment.\", \" Everything from user interface to database calls is included in the same codebase.\\n\\n<!-- image -->\\n\", \"\\nThere are several advantages to the monolith approach. It's often easy to pull down a single code b\", \"ase and start working. Ramp up time may be less, and creating test environments is as simple as prov\", \"iding a new copy. The monolith may be designed to include multiple components and applications.\\n\\nUnf\", \"ortunately, the monolith pattern tends to break down at scale. Major disadvantages of the monolith a\", \"pproach include:\\n\\n- Difficult to work in parallel in the same code base.\\n- Any change, no matter how\", \" trivial, requires deploying a new version of the entire application.\\n- Refactoring potentially impa\", \"cts the entire application.\\n- Often the only solution to scale is to create multiple, resource-inten\", \"sive copies of the monolith.\\n- As systems expand or other systems are acquired, integration can be d\", \"ifficult.\\n- It may be difficult to test due to the need to configure the entire monolith.\\n- Code reu\", \"se is challenging and often other apps end up having their own copies of code.\\n\\nMany businesses look\", \" to the cloud as an opportunity to migrate monolith applications and at the same time refactor them \", \"to more usable patterns. It's common to break out the individual applications and components to allo\", \"w them to be maintained, deployed, and scaled separately.\\n\\n## N-Layer applications\\n\\nN-layer applicat\", \"ion partition application logic into specific layers. The most common layers include:\\n\\n- User interf\", \"ace\\n- Business logic\\n- Data access\\n\\nUl Layer\\n\\n\\u2022 Web Pages\\n\\n\\u2022 Mobile App\\n\\nOther layers may include mi\", \"ddleware, batch processing, and API. It's important to note the layers are logical. Although they're\", \" developed in isolation, they may all be deployed to the same target platform.\\n\\n<!-- image -->\\n\\nTher\", \"e are several advantages to the N-Layer approach, including:\\n\\n- Refactoring is isolated to a layer.\\n\", \"- Teams can independently build, test, deploy, and maintain separate layers.\\n- Layers can be swapped\", \" out, for example the data layer may access multiple databases without requiring changes to the UI l\", \"ayer.\\n\\nServerless may be used to implement one or more layers.\\n\\n## Microservices\\n\\nMicroservices arch\", \"itectures contain common characteristics that include:\\n\\n- Applications are composed of several small\", \" services.\\n- Each service runs in its own process.\\n- Services are aligned around business domains.\\n-\", \" Services communicate over lightweight APIs, typically using HTTP as the transport.\\n- Services can b\", \"e deployed and upgraded independently.\\n- Services aren't dependent on a single data store.\\n- The sys\", \"tem is designed with failure in mind, and the app may still run even when certain services fail.\\n\\nMi\", \"croservices don't have to be mutually exclusive to other architecture approaches. For example, an NT\", \"ier architecture may use microservices for the middle tier. It's also possible to implement\\n\\nBrowser\", \"\\n\\nService\\n\\n1\\n\\nmicroservices in a variety of ways, from virtual directories on IIS hosts to container\", \"s. The characteristics of microservices make them especially ideal for serverless implementations.\\n\\n\", \"<!-- image -->\\n\\nThe pros of microservices architectures include:\\n\\n- Refactoring is often isolated to\", \" a single service.\\n- Services can be upgraded independently of each other.\\n- Resiliency and elastici\", \"ty can be tuned to the demands of individual services.\\n- Development can happen in parallel across d\", \"isparate teams and platforms.\\n- It's easier to write comprehensive tests for isolated services.\\n\\nMic\", \"roservices come with their own challenges, including:\\n\\n- Determining what services are available and\", \" how to call them.\\n- Managing the lifecycle of services.\\n- Understanding how services fit together i\", \"n the overall application.\\n- Full system testing of calls made across disparate services.\\n\\nUltimatel\", \"y there are solutions to address all of these challenges, including tapping into the benefits of ser\", \"verless that are discussed later.\\n\\n## Architecture deployment approaches\\n\\nRegardless of the architec\", \"ture approach used to design a business application, the implementation, or deployment of those appl\", \"ications may vary. Businesses host applications on everything from physical hardware to serverless f\", \"unctions.\\n\\n## N-Tier applications\\n\\nThe N-Tier architecture pattern is a mature architecture and simp\", \"ly refers to applications that separate various logical layers into separate physical tiers. N-Tier \", \"architecture is a physical implementation of N-Layer architecture. The most common implementation of\", \" this architecture includes:\\n\\n- A presentation tier, for example a web app.\\n- An API or data access \", \"tier, such as a REST API.\\n- A data tier, such as a SQL database.\\n\\nBrowser\\n\\nDatabase\\n\\n/ Backend\\n\\n<!--\", \" image -->\\n\\n(Tier 2)\\n\\nN-tier solutions have the following characteristics:\\n\\n- Projects are typically\", \" aligned with tiers.\\n- Testing may be approached differently by tier.\\n- Tiers provide layers of abst\", \"raction, for example the presentation tier is typically ignorant of the implementation details of th\", \"e data tier.\\n- Typically, layers only interact with adjacent layers.\\n- Releases are often managed at\", \" the project, and therefore tier, level. A simple API change may require a new release of an entire \", \"middle tier.\\n\\nThis approach provides several benefits, including:\\n\\n- Isolation of the database (ofte\", \"n the front end doesn't have direct access to the database back end).\\n- Reuse of the API (for exampl\", \"e, mobile, desktop, and web app clients can all reuse the same APIs).\\n\\nBrowser\\n\\nWeb server\\n\\nAPI\\n\\nser\", \"ver\\n\\n- Ability to scale out tiers independent of each other.\\n- Refactoring isolation: one tier may b\", \"e refactored without impacting other tiers.\\n\\nLoad\\n\\nLoad\\n\\nDatabase\\n\\n## On-premises and Infrastructure\", \" as a Service (IaaS)\\n\\nThe traditional approach to hosting applications requires buying hardware and \", \"managing all of the software installations, including the operating system. Originally this involved\", \" expensive data centers and physical hardware. The challenges that come with operating physical hard\", \"ware are many, including: server server\\n\\n- The need to buy excess for 'just in case' or peak demand \", \"scenarios.\\n- Securing physical access to the hardware.\\n- Responsibility for hardware failure (such a\", \"s disk failure).\\n- Cooling.\\n- Configuring routers and load balancers.\\n- Power redundancy.\\n- Securing\", \" software access.\\n\\n<!-- image -->\\n\\nVirtualization of hardware, via 'virtual machines' enables Infras\", \"tructure as a Service (IaaS). Host machines are effectively partitioned to provide resources to inst\", \"ances with allocations for their own memory, CPU, and storage. The team provisions the necessary VMs\", \" and configures the associated networks and access to storage.\\n\\nFor more information, see virtual ma\", \"chine N-tier reference architecture.\\n\\nAlthough virtualization and Infrastructure as a Service (IaaS)\", \" address many concerns, it still leaves much responsibility in the hands of the infrastructure team.\", \" The team maintains operating system versions, applies security patches, and installs third-party de\", \"pendencies on the target machines. Apps often behave differently on production machines compared to \", \"the test environment. Issues arise due to different dependency versions and/or OS SKU levels. Althou\", \"gh many organizations deploy N-Tier applications to these targets, many companies benefit from deplo\", \"ying to a more cloud native model\\n\\nBrowser such as Platform as a Service. Architectures with microse\", \"rvices are more challenging because of the requirements to scale out for elasticity and resiliency. \", \"Static Website REST API Database\\n\\nFor more information, see virtual machines.\\n\\n## Platform as a Serv\", \"ice (PaaS)\\n\\nPlatform as a Service (PaaS) offers configured solutions that developers can plug into d\", \"irectly. PaaS is another term for managed hosting. It eliminates the need to manage the base operati\", \"ng system, security patches and in many cases any third-party dependencies. Examples of platforms in\", \"clude web applications, databases, and mobile back ends.\\n\\nPaaS addresses the challenges common to Ia\", \"aS. PaaS allows the developer to focus on the code or database schema rather than how it gets deploy\", \"ed. Benefits of PaaS include:\\n\\n- Pay for use models that eliminate the overhead of investing in idle\", \" machines.\\n- Direct deployment and improved DevOps, continuous integration (CI), and continuous deli\", \"very (CD) pipelines.\\n- Automatic upgrades, updates, and security patches.\\n- Push-button scale out an\", \"d scale up (elastic scale).\\n\\nThe main disadvantage of PaaS traditionally has been vendor lock-in. Fo\", \"r example, some PaaS providers only support ASP.NET, Node.js, or other specific languages and platfo\", \"rms. Products like Azure App Service have evolved to address multiple platforms and support a variet\", \"y of languages and frameworks for hosting web apps.\\n\\n<!-- image -->\\n\\n## Software as a Service (SaaS)\", \"\\n\\nSoftware as a Service or SaaS is centrally hosted and available without local installation or prov\", \"isioning. SaaS often is hosted on top of PaaS as a platform for deploying software. SaaS provides se\", \"rvices to run and connect with existing software. SaaS is often industry and vertical specific. SaaS\", \" is often licensed and typically provides a client/server model. Most modern SaaS offerings use web-\", \"\\n\\nbased apps for the client. Companies typically consider SaaS as a business solution to license off\", \"erings. It isn't often implemented as architecture consideration for scalability and maintainability\", \" of an application. Indeed, most SaaS solutions are built on IaaS, PaaS, and/or serverless back ends\", \".\\n\\nLearn more about SaaS through a sample application.\\n\\n## Containers and Functions as a Service (Fa\", \"aS)\\n\\nContainers are an interesting solution that enables PaaS-like benefits without the IaaS overhea\", \"d. A container is essentially a runtime that contains the bare essentials needed to run a unique app\", \"lication. The kernel or core part of the host operating system and services such as storage are shar\", \"ed across a host. The shared kernel enables containers to be lightweight (some are mere megabytes in\", \" size, compared to the gigabyte size of typical virtual machines). With hosts already running, conta\", \"iners can be started quickly, facilitating high availability. The ability to spin up containers quic\", \"kly also provides extra layers of resiliency. Docker is one of the more popular implementations of c\", \"ontainers.\\n\\n## Benefits of containers include:\\n\\n- Lightweight and portable\\n- Self-contained so no ne\", \"ed to install dependencies\\n- Provide a consistent environment regardless of the host (runs exactly s\", \"ame on a laptop as on a cloud server)\\n- Can be provisioned quickly for scale-out\\n- Can be restarted \", \"quickly to recover from failure\\n\\nA container runs on a container host (that in turn may run on a bar\", \"e metal machine or a virtual machine). Multiple containers or instances of the same containers may r\", \"un on a single host. For true failover and resiliency, containers must be scaled across hosts.\\n\\nFor \", \"more information about Docker containers, see What is Docker.\\n\\nManaging containers across hosts typi\", \"cally requires an orchestration tool such as Kubernetes. Configuring and managing orchestration solu\", \"tions may add additional overhead and complexity to projects. Fortunately, many cloud providers prov\", \"ide orchestration services through PaaS solutions to simplify the management of containers.\\n\\nThe fol\", \"lowing image illustrates an example Kubernetes installation. Nodes in the installation address scale\", \" out and failover. They run Docker container instances that are managed by the primary server. The k\", \"ubelet is the client that relays commands from Kubernetes to Docker.\\n\\nKubelet\\n\\nKubernetes Master Ser\", \"ver\\n\\nScheduler\\n\\nController\\n\\n<!-- image -->\\n\\nFor more information about orchestration, see Kubernetes\", \" on Azure.\\n\\nFunctions as a Service (FaaS) is a specialized container service that is similar to serv\", \"erless. A specific implementation of FaaS, called OpenFaaS, sits on top of containers to provide ser\", \"verless capabilities. OpenFaaS provides templates that package all of the container dependencies nec\", \"essary to run a piece of code. Using templates simplifies the process of deploying code as a functio\", \"nal unit. OpenFaaS targets architectures that already include containers and orchestrators because i\", \"t can use the existing infrastructure. Although it provides serverless functionality, it specificall\", \"y requires you to use Docker and an orchestrator.\\n\\n## Serverless\\n\\nA serverless architecture provides\", \" a clear separation between the code and its hosting environment. You implement code in a function t\", \"hat is invoked by a trigger . After that function exits, all its needed resources may be freed. The \", \"trigger might be manual, a timed process, an HTTP request, or a file upload. The result of the trigg\", \"er is the execution of code. Although serverless platforms vary, most provide access to pre-defined \", \"APIs and bindings to streamline tasks such as writing to a database or queueing results.\\n\\nServerless\", \" is an architecture that relies heavily on abstracting away the host environment to focus on code. I\", \"t can be thought of as less server .\\n\\nContainer solutions provide developers existing build scripts \", \"to publish code to serverless-ready images. Other implementations use existing PaaS solutions to pro\", \"vide a scalable architecture.\\n\\nThe abstraction means the DevOps team doesn't have to provision or ma\", \"nage servers, nor specific containers. The serverless platform hosts code, either as script or packa\", \"ged executables built with a related SDK, and allocates the necessary resources for the code to scal\", \"e.\\n\\nThe following diagram illustrates four serverless components. An HTTP request causes the Checkou\", \"t API code to run. The Checkout API inserts code into a database, and the insert triggers several ot\", \"her functions to run to perform tasks like computing tasks and fulfilling the order.\\n\\nHTTP Trigger\\n\\n\", \"<!-- image -->\\n\\nThe advantages of serverless include:\\n\\n- High density. Many instances of the same se\", \"rverless code can run on the same host compared to containers or virtual machines. The instances sca\", \"le across multiple hosts addressing scale out and resiliency.\\n- Micro-billing. Most serverless provi\", \"ders bill based on serverless executions, enabling massive cost savings in certain scenarios.\\n- Inst\", \"ant scale. Serverless can scale to match workloads automatically and quickly.\\n- Faster time to marke\", \"t. Developers focus on code and deploy directly to the serverless platform. Components can be releas\", \"ed independently of each other.\\n\\nServerless is most often discussed in the context of compute, but c\", \"an also apply to data. For example, Azure SQL and Cosmos DB both provide cloud databases that don't \", \"require you to configure host machines or clusters. This book focuses on serverless compute.\\n\\n## Sum\", \"mary\\n\\nThere's a broad spectrum of available choices for architecture, including a hybrid approach. S\", \"erverless simplifies the approach, management, and cost of application features at the expense of co\", \"ntrol and portability. However, many serverless platforms do expose configuration to help fine-tune \", \"the solution. Good programming practices can also lead to more portable code and less serverless pla\", \"tform lock-in. The following table illustrates the architecture approaches side by side. Choose serv\", \"erless based on your scale needs, whether or not you want to manage the runtime, and how well you ca\", \"n break your workloads into small components. You'll learn about potential challenges with serverles\", \"s and other decision points in the next chapter.\\n\\n|           | IaaS     | PaaS     | Container   | \", \"Serverless   |\\n|-----------|----------|----------|-------------|--------------|\\n| Scale     | VM    \", \"   | Instance | App         | Function     |\\n| Abstracts | Hardware | Platform | OS Host     | Runti\", \"me      |\\n| Unit      | VM       | Project  | Image       | Code         |\\n\\n|                | IaaS \", \"                                                     | PaaS                          | Container    \", \"                           | Serverless              |\\n|----------------|---------------------------\", \"--------------------------------|-------------------------------|-----------------------------------\", \"------|-------------------------|\\n| Lifetime       | Months                                         \", \"           | Days to Months                | Minutes to Days                         | Milliseconds \", \"to Minutes |\\n| Responsibility | Applications, dependencies, runtime, and operating system | Applicat\", \"ions and dependencies | Applications, dependencies, and runtime | Function                |\\n\\n- Scale\", \" refers to the unit that is used to scale the application\\n- Abstracts refers to the layer that is ab\", \"stracted by the implementation\\n- Unit refers to the scope of what is deployed\\n- Lifetime refers to t\", \"he typical runtime of a specific instance\\n- Responsibility refers to the overhead to build, deploy, \", \"and maintain the application\\n\\nThe next chapter will focus on serverless architecture, use cases, and\", \" design patterns.\\n\\n## Recommended resources\\n\\n- Azure application architecture guide\\n- Azure Cosmos D\", \"B\\n- Azure SQL\\n- N-Tier architecture pattern\\n- Kubernetes on Azure\\n- Microservices\\n- Virtual machine \", \"N-tier reference architecture\\n- Virtual machines\\n- What is Docker?\\n- Wingtip Tickets SaaS applicatio\", \"n\\n\\nFunction Code\\n\\nFunction\\n\\nConfiguration\\n\\n## Serverless architecture\\n\\nWebJobs Core\\n\\nThere are many \", \"approaches to using serverless architectures. This chapter explores examples of common architectures\", \" that integrate serverless. It also covers concerns that may pose additional challenges or require e\", \"xtra consideration when implementing serverless. Finally, several design examples are provided that \", \"illustrate various serverless use cases.\\n\\nServerless hosts often use an existing container-based or \", \"PaaS layer to manage the serverless instances. For example, Azure Functions is based on Azure App Se\", \"rvice. The App Service is used to scale out instances and manage the runtime that executes Azure Fun\", \"ctions code. For Windows-based functions, the host runs as PaaS and scales out the .NET runtime. For\", \" Linux-based functions, the host leverages containers.\\n\\n<!-- image -->\\n\\nThe WebJobs Core provides an\", \" execution context for the function. The Language Runtime runs scripts, executes libraries and hosts\", \" the framework for the target language. For example, Node.js is used to run JavaScript functions and\", \" the .NET Framework is used to run C# functions. You'll learn more about language and platform optio\", \"ns later in this chapter.\\n\\nSome projects may benefit from taking an 'all -in' approach to serverless\", \". Applications that rely heavily on microservices may implement all microservices using serverless t\", \"echnology. The majority of apps are hybrid, following an N-tier design and using serverless for the \", \"components that make sense\\n\\nbecause the components are modular and independently scalable. To help m\", \"ake sense of these scenarios, this section walks through some common architecture examples that use \", \"serverless.\\n\\n## Full serverless back end\\n\\nThe full serverless back end is ideal for several types of\", \" scenarios, especially when building new or 'green field' applications. An application with a large \", \"surface area of APIs may benefit from implementing each API as a serverless function. Apps that are \", \"based on microservices architecture are another example that could be implemented as a full serverle\", \"ss back end. The microservices communicate over various protocols with each other. Specific scenario\", \"s include:\\n\\n- API-based SaaS products (example: financial payments processor).\\n- Message-driven appl\", \"ications (example: device monitoring solution).\\n- Apps focused on integration between services (exam\", \"ple: airline booking application).\\n- Processes that run periodically (example: timer-based database \", \"clean-up).\\n- Apps focused on data transformation (example: import triggered by file upload).\\n- Extra\", \"ct Transform and Load (ETL) processes.\\n\\nThere are other, more specific use cases that are covered la\", \"ter in this document.\\n\\n## Monoliths and 'starving the beast'\\n\\nA common challenge is migrating an exi\", \"sting monolithic application to the cloud. The least risky approach is to 'lift and shift' entirely \", \"onto virtual machines. Many shops prefer to use the migration as an opportunity to modernize their c\", \"ode base. A practical approach to migration is called 'starving the beast.' In this scenario, the mo\", \"nolith is migrated 'as is' to start with. Then, selected services are modernized. In some cases, the\", \" signature of the service is identical to the original: it simply is hosted as a function. Clients a\", \"re updated to use the new service rather than the monolith endpoint. In the interim, steps such as d\", \"atabase replication enable microservices to host their own storage even when transactions are still \", \"handled by the monolith. Eventually, all clients are migrated onto the new services. The monolith is\", \" 'starved' (its services no longer called) until all functionality has been replaced. The combinatio\", \"n of serverless and proxies can facilitate much of this migration.\\n\\nBrowser\\n\\nFunction\\n\\n1\\n\\n<!-- image\", \" -->\\n\\nFunction\\n\\nTo learn more about this approach, watch the video: Bring your app to the cloud with\", \" serverless Azure Functions.\\n\\n## Web apps\\n\\nWeb apps are great candidates for serverless applications\", \". There are two common approaches to web apps today: server-driven, and client-driven (such as Singl\", \"e Page Application or SPA). Server-driven web apps typically use a middleware layer to issue API cal\", \"ls to render the web UI. SPA applications make REST API calls directly from the browser. In both sce\", \"narios, serverless can accommodate the middleware or REST API request by providing the necessary bus\", \"iness logic. A common architecture is to stand up a lightweight static web server. The Single Page A\", \"pplication (SPA) serves HTML, CSS, JavaScript, and other browser assets. The web app then connects t\", \"o a microservices back end.\\n\\n## Mobile back ends\\n\\nThe event-driven paradigm of serverless apps makes\", \" them ideal as mobile back ends. The mobile device triggers the events and the serverless code execu\", \"tes to satisfy requests. Taking advantage of a serverless model enables developers to enhance busine\", \"ss logic without having to deploy a full application update. The serverless approach also enables te\", \"ams to share endpoints and work in parallel.\\n\\nMobile developers can build business logic without bec\", \"oming experts on the server side. Traditionally, mobile apps connected to on-premises services. Buil\", \"ding the service layer required understanding the server platform and programming paradigm. Develope\", \"rs worked with operations to provision servers\\n\\nPhoto taken and\\n\\nWebHook called and configure them a\", \"ppropriately. Sometimes days or even weeks were spent on building a deployment pipeline. All of thes\", \"e challenges are addressed by serverless.\\n\\nServerless abstracts the server-side dependencies and ena\", \"bles the developer to focus on business logic. For example, a mobile developer who builds apps using\", \" a JavaScript framework can build serverless functions with JavaScript as well. The serverless host \", \"manages the operating system, a Node.js instance to host the code, package dependencies, and more. T\", \"he developer is provided a simple set of inputs and a standard template for outputs. They then can f\", \"ocus on building and testing the business logic. They're therefore able to use existing skills to bu\", \"ild the back -end logic for the mobile app without having to learn new platforms or become a 'server\", \" -side developer.'\\n\\n<!-- image -->\\n\\nMost cloud providers offer mobile-based serverless products that\", \" simplify the entire mobile development lifecycle. The products may automate the provisioning of dat\", \"abases to persist data, handle DevOps concerns, provide cloud-based builds and testing frameworks an\", \"d the ability to script business processes using the developer's preferred language. Following a mob\", \"ile -centric serverless approach can streamline the process. Serverless removes the tremendous overh\", \"ead of provisioning, configuring, and maintaining servers for the mobile back end.\\n\\n## Internet of T\", \"hings (IoT)\\n\\nIoT refers to physical objects that are networked together. They're sometimes referred \", \"to as 'connected devices' or 'smart devices.' Everything from cars and vending machines may be conne\", \"cted and send information ranging from inventory to sensor data such as temperature and humidity. In\", \" the enterprise, IoT provides business process improvements through monitoring and automation. IoT d\", \"ata may be used to regulate the climate in a large warehouse or track inventory through the supply c\", \"hain. IoT can sense chemical spills and call the fire department when smoke is detected.\\n\\nThe sheer \", \"volume of devices and information often dictates an event-driven architecture to route and process m\", \"essages. Serverless is an ideal solution for several reasons:\\n\\n- Enables scale as the volume of devi\", \"ces and data increases.\\n- Accommodates adding new endpoints to support new devices and sensors.\\n- Fa\", \"cilitates independent versioning so developers can update the business logic for a specific device w\", \"ithout having to deploy the entire system.\\n- Resiliency and less downtime.\\n\\nThe pervasiveness of IoT\", \" has resulted in several serverless products that focus specifically on IoT concerns, such as Azure \", \"IoT Hub. Serverless automates tasks such as device registration, policy enforcement, tracking, and e\", \"ven deployment of code to devices at the edge . The edge refers to devices like sensors and actuator\", \"s that are connected to, but not an active part of, the Internet.\\n\\n## Serverless architecture consid\", \"erations\\n\\nAdopting a serverless architecture does come with certain challenges. This section explore\", \"s some of the more common considerations to be aware of. All of these challenges have solutions. As \", \"with all architecture choices, the decision to go serverless should be made only after carefully con\", \"sidering the pros and cons. Depending on the needs of your application, you may decide a serverless \", \"implementation isn't the right solution for certain components.\\n\\n## Managing state\\n\\nServerless funct\", \"ions, as with microservices in general, are stateless by default. Avoiding state enables serverless \", \"to be ephemeral, to scale out, and to provide resiliency without a central point of failure. In some\", \" circumstances, business processes require state. If your process requires state, you have two optio\", \"ns. You can adopt a model other than serverless, or interact with a separate service that provides s\", \"tate. Adding state can complicate the solution and make it harder to scale, and potentially create a\", \" single point of failure. Carefully consider whether your function absolutely requires state. If the\", \" answer is 'yes,' determine whether it still makes sense to implement it with serverless.\\n\\nThere are\", \" several solutions to adopt state without compromising the benefits of serverless. Some of the more \", \"popular solutions include:\\n\\n- Use a temporary data store or distributed cache, like Redis\\n- Store st\", \"ate in a database, like SQL or CosmosDB\\n- Handle state through a workflow engine like durable functi\", \"ons\\n\\nThe bottom line is that you should be aware of the need for any state management within process\", \"es you're considering to implement with serverless.\\n\\n## Long-running processes\\n\\nMany benefits of ser\", \"verless rely on the processes being ephemeral. Short run times make it easier for the serverless pro\", \"vider to free up resources as functions end and share functions across hosts. Most cloud providers l\", \"imit the total time your function can run to around 10 minutes. If your process may take longer, you\", \" might consider an alternative implementation.\\n\\nThere are a few exceptions and solutions. One soluti\", \"on may be to break your process into smaller components that individually take less time to run. If \", \"your process runs long because of dependencies, you can also consider an asynchronous workflow using\", \" a solution like durable functions. Durable functions pause and maintain the state of your process w\", \"hile it's waiting on an external process to finish. Asynchronous handling reduces the time the actua\", \"l process runs.\\n\\n## Startup time\\n\\nOne potential concern with serverless implementations is startup t\", \"ime. To conserve resources, many serverless providers create infrastructure 'on demand.' When a serv\", \"erless function is triggered after a period of time, the resources to host the function may need to \", \"be created or restarted. In some situations, cold starts may result in delays of several seconds. St\", \"artup time varies across providers and service levels. There are a few approaches to address startup\", \" time if it's important to minimize for the success of the app.\\n\\n- Some providers allow users to pay\", \" for service levels that guarantee infrastructure is 'always on'.\\n- Implement a keepalive mechanism \", \"(ping the endpoint to keep it 'awake').\\n- Use orchestration like Kubernetes with a containerized fun\", \"ction approach (the host is already running so spinning up new instances is extremely fast).\\n\\n## Dat\", \"abase updates and migrations\\n\\nAn advantage of serverless code is that you can release new functions \", \"without having to redeploy the entire application. This advantage can become a disadvantage when the\", \"re's a relational database involved. Changes to database schemas are difficult to synchronize with s\", \"erverless updates. Additional challenges are posed when things go wrong and the changes must be roll\", \"ed back. Data integrity is one reason that a best practice for microservices and serverless function\", \"s is that they own their own data. It is possible to deploy changes as a single unit of compute and \", \"data. The reality is that many legacy systems feature a large back-end database that must be reconci\", \"led with the serverless architecture.\\n\\nA popular approach to solve schema versioning is to never mod\", \"ify existing properties and columns, but instead add new information. For example, consider a change\", \" to move from a Boolean 'completed' flag for a todo list to a 'completed date.' Instead of removing \", \"the old field, the database change will:\\n\\n1. Add a new 'completed date' field.\\n2. Transform the 'com\", \"pleted' Boolean field to a computed function that evaluates whether the completed date is after the \", \"current date.\\n3. Add a trigger to set the completed date to the current date when the completed Bool\", \"ean is set to true.\\n\\nThe sequence of changes ensures that legacy code continues to run 'as is' while\", \" newer serverless functions can take advantage of the new field.\\n\\nFor more information about data in\", \" serverless architectures, see Challenges and solutions for distributed data management.\\n\\n## Scaling\", \"\\n\\nIt's a common misconception that serverless means 'no server.' It's in fact 'less server.' The fac\", \"t there is a backing infrastructure is important to understand when it comes to scaling. Most server\", \"less platforms provide a set of controls to handle how the infrastructure should scale when event de\", \"nsity increases. You can choose from a variety of options, but your strategy may vary depending on t\", \"he\\n\\nfunction. Furthermore, functions are typically run under a related host, so that functions on th\", \"e same host have the same scale options. Therefore it is necessary to organize and strategize which \", \"functions are hosted together based on scale requirements.\\n\\nRules often specify how to scale-up (inc\", \"rease the host resources) and scale-out (increase the number of host instances) based on varying par\", \"ameters. Triggers for scales may include schedule, request rates, CPU utilization, and memory usage.\", \" Higher performance often comes at a greater cost. The less expensive, consumption-based approaches \", \"may not scale as quickly when the request rate suddenly increases. There is a tradeoff between payin\", \"g up front 'insurance cost' versus paying strictly 'as you go' and risking slower responses due to s\", \"udden increases in demand.\\n\\n## Monitoring, tracing, and logging\\n\\nAn often overlooked aspect of DevOp\", \"s is monitoring applications once deployed. It's important to have a strategy for monitoring serverl\", \"ess functions. The biggest challenge is often correlation, or recognizing when a user calls multiple\", \" functions as part of the same interaction. Most serverless platforms allow console logging that can\", \" be imported into third-party tools. There are also options to automate collection of telemetry, gen\", \"erate and track correlation IDs, and monitor specific actions to provide detailed insights. Azure pr\", \"ovides the advanced Application Insights platform for monitoring and analytics.\\n\\n## Inter-service de\", \"pendencies\\n\\nA serverless architecture may include functions that rely on other functions. In fact, i\", \"t isn't uncommon in a serverless architecture to have multiple services call each other as part of a\", \"n interaction or distributed transaction. To avoid strong coupling, it's recommended that services d\", \"on't reference each other directly. When the endpoint for a service needs to change, direct referenc\", \"es could result in major refactoring. A suggested solution is to provide a service discovery mechani\", \"sm, such as a registry, that provides the appropriate end point for a request type. Another solution\", \" is to leverage messaging services like queues or topics for communication between services.\\n\\n## Man\", \"aging failure and providing resiliency\\n\\nIt's also important to consider the circuit-breaker pattern \", \": If, for some reason, a service continues to fail, it isn't advisable to call that service repeated\", \"ly. Instead, an alternative service is called or a message returned until the health of the dependen\", \"t service is re-established. The serverless architecture needs to take into account the strategy for\", \" resolving and managing inter-service dependencies.\\n\\nTo continue the circuit-breaker pattern, servic\", \"es need to be fault tolerant and resilient. Fault tolerance refers to the ability of your applicatio\", \"n to continue running even after unexpected exceptions or invalid states are encountered. Fault tole\", \"rance is typically a function of the code itself and how it's written to handle exceptions. Resilien\", \"cy refers to how capable the app is at recovering from failures. Resiliency is often managed by the \", \"serverless platform. The platform should be able to spin up a new serverless function instance when \", \"the existing one fails. The platform should also be intelligent enough to stop spinning up new insta\", \"nces when every new instance fails.\\n\\nEvery 15 minutes\\n\\nFor more information, see Implementing the Ci\", \"rcuit Breaker pattern.\\n\\n## Versioning and green/blue deployments\\n\\nA major benefit of serverless is t\", \"he ability to upgrade a specific function without having to redeploy the entire application. For upg\", \"rades to be successful, functions must be versioned so that services calling them are routed to the \", \"correct version of code. A strategy for deploying new versions is also important. A common approach \", \"is to use 'green/blue deployments.' The green deployment is the current function. A new 'blue' versi\", \"on is deployed to production and tested. When testing passes, the green and blue versions are swappe\", \"d so the new version comes live. If any issues are encountered, they can be swapped back. Supporting\", \" versioning and green/blue deployments requires a combination of authoring the functions to accommod\", \"ate version changes and working with the serverless platform to handle deployments.\\n\\n## Serverless d\", \"esign examples\\n\\nThere are many design patterns that exist for serverless. This section captures some\", \" common scenarios that use serverless. What all of the examples have in common is the fundamental co\", \"mbination of an event trigger and business logic.\\n\\n## Scheduling\\n\\nScheduling tasks is a common funct\", \"ion. The following diagram shows a legacy database that doesn't have appropriate integrity checks. T\", \"he database must be scrubbed periodically. The serverless function finds invalid data and cleans it.\", \" The trigger is a timer that runs the code on a schedule.\\n\\n<!-- image -->\\n\\n## Command and Query Resp\", \"onsibility Segregation (CQRS)\\n\\nCommand and Query Responsibility Segregation (CQRS) is a pattern that\", \" provides different interfaces for reading (or querying) data and operations that modify data. It ad\", \"dresses several common problems. In traditional Create Read Update Delete (CRUD) based systems, conf\", \"licts can arise from high volume of both reads and writes to the same data store. Locking may freque\", \"ntly occur and dramatically slow down reads. Often, data is presented as a composite of several doma\", \"in objects and read operations must combine data from different entities.\\n\\nUsing CQRS, a read might \", \"involve a special 'flattened' entity that models data the way it's consumed. The read is handled dif\", \"ferently than how it's stored. For example, although the database may store a contact as a header re\", \"cord with a child address record, the read could involve an entity with both\\n\\nQuery\\n\\n&gt;\\n\\nheader an\", \"d address properties. There are myriad approaches to creating the read model. It might be materializ\", \"ed from views. Update operations could be encapsulated as isolated events that then trigger updates \", \"to two different models. Separate models exist for reading and writing.\\n\\n<!-- image -->\\n\\nServerless \", \"can accommodate the CQRS pattern by providing the segregated endpoints. One serverless function acco\", \"mmodates queries or reads, and a different serverless function or set of functions handles update op\", \"erations. A serverless function may also be responsible for keeping the read model up-todate, and ca\", \"n be triggered by the database's change feed. Front-end development is simplified to connecting to t\", \"he necessary endpoints. Processing of events is handled on the back end. This model also scales well\", \" for large projects because different teams may work on different operations.\\n\\n## Event-based proces\", \"sing\\n\\nIn message-based systems, events are often collected in queues or publisher/subscriber topics \", \"to be acted upon. These events can trigger serverless functions to execute a piece of business logic\", \". An example of event-based processing is eventsourced systems. An 'event' is raised to mark a task \", \"as complete. A serverless function triggered by the event updates the appropriate database document.\", \" A second serverless function may use the event to update the read model for the system. Azure Event\", \" Grid provides a way to integrate events with functions as subscribers.\\n\\nEvents are informational me\", \"ssages. For more information, see Event Sourcing pattern.\\n\\n## File triggers and transformations\\n\\nExt\", \"ract, Transform, and Load (ETL) is a common business function. Serverless is a great solution for ET\", \"L because it allows code to be triggered as part of a pipeline. Individual code components can addre\", \"ss various aspects. One serverless function may download the file, another applies the transformatio\", \"n, and another loads the data. The code can be tested and deployed independently, making it easier t\", \"o maintain and scale where needed.\\n\\nFlat Table Read\\n\\nFTP Download\\n\\nManager Function\\n\\nSingle Folder\\n\\n\", \"FTP\\n\\nAbnormal behavior\\n\\n<!-- image -->\\n\\nIn the diagram, 'cool storage' provides data that is parsed \", \"in Azure Stream Analytics. Any issues encountered in the data stream trigger an Azure Function to ad\", \"dress the anomaly.\\n\\n## Asynchronous background processing and messaging\\n\\nAsynchronous messaging and \", \"background processing allow applications to kick off processes without having to wait. An example of\", \" asynchronous processing is an OCR app. An image is submitted and queued for processing. Scanning th\", \"e image to extract text may take time, and once it's finished a notification is sent. Serverless can\", \" handle both the invocation and the result in this scenario.\\n\\n## Web apps and APIs\\n\\nA popular scenar\", \"io for serverless is N-tier applications, most commonly ones where the UI layer is a web app. The po\", \"pularity of Single Page Applications (SPA) has surged recently. SPA apps render a single page, then \", \"rely on API calls and the returned data to dynamically render new UI without reloading a full page. \", \"Client-side rendering provides a much faster, more responsive application to the end user.\\n\\nServerle\", \"ss endpoints triggered by HTTP calls can be used to handle the API requests. For example, an ad serv\", \"ices company may call a serverless function with user profile information to request custom advertis\", \"ing. The serverless function returns the custom ad and the web page renders it.\\n\\n10'\\n\\n01\\n\\nLoaded web\", \" page calls WebHook\\n\\nFile added to\\n\\nBlob Storage\\n\\n<!-- image -->\\n\\n## Data pipeline\\n\\nServerless funct\", \"ions can be used to facilitate a data pipeline. In this example, a file triggers a function to trans\", \"late data in a CSV file to data rows in a table. The organized table allows a Power BI dashboard to \", \"present analytics to the end user.\\n\\n<!-- image -->\\n\\n## Stream processing\\n\\nDevices and sensors often \", \"generate streams of data that must be processed in real time. There are a number of technologies tha\", \"t can capture messages and streams from Event Hubs and IoT Hub to Service Bus. Regardless of transpo\", \"rt, serverless is an ideal mechanism for processing the messages and streams of data as they come in\", \". Serverless can scale quickly to meet the demand of large volumes of data. The serverless code can \", \"apply business logic to parse the data and output in a structured format for action and analytics.\\n\\n\", \"1. ..\\n\\nMillions of devices feed into Stream Analytics\\n\\nFunction app B\\n\\nSQL\\n\\n\\u2192 /products\\n\\n<!-- image \", \"-->\\n\\n## API gateway\\n\\n\\u2192 /orders\\n\\nFunction2\\n\\nFunction3\\n\\nAn API gateway provides a single point of entr\", \"y for clients and then intelligently routes requests to backend services. It's useful to manage larg\", \"e sets of services. It can also handle versioning and simplify development by easily connecting clie\", \"nts to disparate environments. Serverless can handle back-end scaling of individual microservices wh\", \"ile presenting a single front end via an API gateway.\\n\\n<!-- image -->\\n\\n## Recommended resources\\n\\n- A\", \"zure Event Grid\\n- Azure IoT Hub\\n- Challenges and solutions for distributed data management\\n- Designi\", \"ng microservices: identifying microservice boundaries\\n- Event Hubs\\n- Event Sourcing pattern\\n- Implem\", \"enting the Circuit Breaker pattern\\n- IoT Hub\\n- Service Bus\\n- Working with the change feed support in\", \" Azure Cosmos DB\\n\\nEvent Grid\\n\\n3\\n\\n{02}\\n\\nPlatform\\n\\nLogic Apps\\n\\n&lt;5&gt;\\n\\nCHAPTER\\n\\nFunctions\\n\\n## Azure\", \" serverless platform\\n\\nThe Azure serverless platform includes Azure Functions, Logic Apps, and Event \", \"Grid. These services work together and connect with myriad other resources. The serverless platform \", \"works with everything from databases and storage to analytics and machine learning/artificial intell\", \"igence.\\n\\nYou can also use Application Insights, a serverless platform for capturing diagnostic trace\", \"s and telemetry. Application Insights are available to applications of all types (desktop, mobile, o\", \"r web) as well as serverless implementations. The platform is visualized in the following diagram:\\n\\n\", \"<!-- image -->\\n\\nThis chapter breaks down the fundamentals of each component.\\n\\n## Azure Functions\\n\\nAz\", \"ure Functions provide a serverless compute experience. A function is invoked by a trigger (such as a\", \"ccess to an HTTP endpoint or a timer) and executes a block of code or business logic. Functions also\", \" support specialized bindings that connect to resources like storage and queues.\\n\\nDatabase\\n\\n<!-- ima\", \"ge -->\\n\\nThe current runtime version 4.0 supports cross-platform .NET 7.0 applications. Additional la\", \"nguages besides C# such as JavaScript, F#, and Java are supported. Functions created in the portal p\", \"rovide a rich scripting syntax. Functions created as standalone projects can be deployed with full p\", \"latform support and capabilities.\\n\\nFor more information, see Azure Functions documentation.\\n\\n## Prog\", \"ramming language support\\n\\nThe following languages are all supported in general availability (GA).\\n\\n|\", \" Language   | Supported runtimes for 4.x        |\\n|------------|-----------------------------------|\", \"\\n| C#         | .NET 6.0, 7.0, .NET Framework 4.8 |\\n| JavaScript | Node 14, 16, 18                  \", \" |\\n| F#         | .NET 6.0, 7.0                     |\\n| Java       | Java 8, 11, 17                 \", \"   |\\n| Python     | Python 3.7, 3.8, 3.9, 3.10        |\\n| TypeScript | Node 14, 16, 18 (via JavaScri\", \"pt)  |\\n| PowerShell | PowerShell Core 7.2               |\\n\\nFor more information on other runtime ver\", \"sions, see Supported languages.\\n\\n## App service plans\\n\\nFunctions are backed by an app service plan .\", \" The plan defines the resources used by the functions app. You can assign plans to a region, determi\", \"ne the size and number of virtual machines that will be used, and pick a pricing tier. For a true se\", \"rverless approach, function apps may use the consumption plan. The consumption plan will scale the b\", \"ack end automatically based on load.\\n\\nAnother hosting option for function apps is the Premium plan .\", \" This plan provides an 'always on' instance to avoid cold start, supports advanced features like VNe\", \"t connectivity, and runs on premium hardware.\\n\\nFor more information, see App service plans.\\n\\n## Crea\", \"te your first function\\n\\nThere are three common ways you can create function apps.\\n\\n- Script function\", \"s in the portal.\\n- Create the necessary resources using the Azure CLI.\\n- Build functions locally usi\", \"ng your favorite IDE and publish them to Azure.\\n\\nFor more information on creating a scripted functio\", \"n in the portal, see Create your first function in the Azure portal.\\n\\nTo build from the Azure CLI, s\", \"ee Create your first function using the Azure CLI.\\n\\nTo create a function from Visual Studio, see Cre\", \"ate your first function using Visual Studio.\\n\\n## Understand triggers and bindings\\n\\nFunctions are inv\", \"oked by a trigger and can have exactly one. In addition to invoking the function, certain triggers a\", \"lso serve as bindings. You may also define multiple bindings in addition to the trigger. Bindings pr\", \"ovide a declarative way to connect data to your code. They can be passed in (input) or receive data \", \"(output). Triggers and bindings make functions easy to work with. Bindings remove the overhead of ma\", \"nually creating database or file system connections. All of the information needed for the bindings \", \"is contained in a special functions.json file for scripts or declared with attributes in code.\\n\\nSome\", \" common triggers include:\\n\\n- Blob Storage: invoke your function when a file or folder is uploaded or\", \" changed in storage.\\n- HTTP: invoke your function like a REST API.\\n- Queue: invoke your function whe\", \"n items exist in a queue.\\n- Timer: invoke your function on a regular cadence.\\n\\nExamples of bindings \", \"include:\\n\\n- CosmosDB: easily connect to the database to load or save files.\\n- Table Storage: work wi\", \"th key/value storage from your function app.\\n- Queue Storage: easily retrieve items from a queue, or\", \" place new items on the queue.\\n\\nThe following example functions.json file defines a trigger and a bi\", \"nding:\\n\\n```\\n{ \\\"bindings\\\": [ { \\\"name\\\": \\\"myBlob\\\", \\\"type\\\": \\\"blobTrigger\\\", \\\"direction\\\": \\\"in\\\", \\\"path\\\": \\\"i\", \"mages/{name}\\\", \\\"connection\\\": \\\"AzureWebJobsStorage\\\" }, { \\\"name\\\": \\\"$return\\\", \\\"type\\\": \\\"queue\\\", \\\"directi\", \"on\\\": \\\"out\\\", \\\"queueName\\\": \\\"images\\\", \\\"connection\\\": \\\"AzureWebJobsStorage\\\" } ], \\\"disabled\\\": false }\\n```\\n\", \"\\nIn this example, the function is triggered by a change to blob storage in the images container. The\", \" information for the file is passed in, so the trigger also acts as a binding. Another binding exist\", \"s to put information onto a queue named images .\\n\\nHere is the C# script for the function:\\n\\n```\\npubli\", \"c static string Run(Stream myBlob, string name, TraceWriter log) { log.Info($\\\"C# Blob trigger functi\", \"on Processed blob\\\\n Name:{name} \\\\n Size: {myBlob.Length} Bytes\\\"); return name; }\\n```\\n\\nThe example is\", \" a simple function that takes the name of the file that was modified or uploaded to blob storage, an\", \"d places it on a queue for later processing.\\n\\nFor a full list of triggers and bindings, see Azure Fu\", \"nctions triggers and bindings concepts.\\n\\n## Telemetry with Application Insights\\n\\nApplication Insight\", \"s is a serverless diagnostics platform that enables developers to detect, triage, and diagnose issue\", \"s in web apps, mobile apps, desktop apps, and microservices. You can turn on Application Insights fo\", \"r function apps simply by flipping a switch in the portal. Application Insights provides all of thes\", \"e capabilities without you having to configure a server or set up your own database. All of Applicat\", \"ion Insights' capabilities are provided as a service that automatically integrates with your apps.\\n\\n\", \"<!-- image -->\\n\\nAdding Application Insights to existing apps is as easy as adding an instrumentation\", \" key to your application's settings. With Application Insights you can:\\n\\n- Create custom charts and \", \"alerts based on metrics such as number of function invocations, the time it takes to run a function,\", \" and exceptions\\n- Analyze failures and server exceptions\\n- Drill into performance by operation and m\", \"easure the time it takes to call third-party dependencies\\n- Monitor CPU usage, memory, and rates acr\", \"oss all servers that host your function apps\\n- View a live stream of metrics including request count\", \" and latency for your function apps\\n- Use Analytics to search, query, and create custom charts over \", \"your function data\\n\\n=\\n\\nfunctionapp0915 - Metrics Explorer\\n\\nApplication Insights\\n\\nO Search (Ctri+/)\\n\\n\", \"@ Overview\\n\\n\\u2022 Activity log iM Access control (IAM)\\n\\nTags\\n\\nINVESTIGATE\\n\\n\\u2022 Application map\\n\\n@ Smart De\", \"tection\\n\\n1- Live Metrics Stream i Metrics Explorer\\n\\nP Search\\n\\nAvailability\\n\\nFailures\\n\\nPerformance\\n\\nS\", \"ervers\\n\\nBrowser\\n\\nUSAGE (PREVIEW)\\n\\nUsers\\n\\n+ Add chart\\n\\n\\u2022 Time range\\n\\nY Filters\\n\\n\\u00a9 Refresh\\n\\nAlert rule\", \"s\\n\\n* \\u00d7\\n\\n\\u2022\\u2022\\u2022 More\\n\\n# *\\n\\n<!-- image -->\\n\\nIn addition to builtin telemetry, it's also possible to gener\", \"ate custom telemetry. The following code snippet creates a custom telemetry client using the instrum\", \"entation key set for the function app:\\n\\n```\\npublic static TelemetryClient telemetry = new TelemetryC\", \"lient() { InstrumentationKey = Environment.GetEnvironmentVariable(\\\"APPINSIGHTS_INSTRUMENTATIONKEY\\\") \", \"};\\n```\\n\\nThe following code measures how long it takes to insert a new row into an Azure Table Storag\", \"e instance:\\n\\n```\\nvar startTime = DateTime.UtcNow; var timer = System.Diagnostics.Stopwatch.StartNew(\", \"); await tableClient.AddEntityAsync(entry); telemetry.TrackDependency(\\\"AzureTableStorageInsert\\\", \\\"In\", \"sert\\\", startTime, timer.Elapsed, true );\\n```\\n\\nThe resulting performance graph is shown:\\n\\nOperations\\n\", \"\\nDependencies\\n\\nDependency response time\\n\\n100 ms\\n\\n50 ms\\n\\n0.0ms\\n\\nDependency count\\n\\n12 PM\\n\\nSelect opera\", \"tion\\n\\nDEPENDENCY NAME\\n\\nOverall\\n\\nOther: AzureTableStoragelnsert\\n\\nOther: Azure TableStorage\\n\\nOther: Az\", \"ure TableStorageUpdate\\n\\nView in Analytics\\n\\nFeedback\\n\\nOther: Azure TableStorageinsert\\n\\nDistribution o\", \"f durations: zoom into a range\\n\\n* Profiler\\n\\nScale\\n\\nHIII\\n\\n<!-- image -->\\n\\nThe custom telemetry reveal\", \"s the average time to insert a new row is 32.6 milliseconds.\\n\\nApplication Insights provides a powerf\", \"ul, convenient way to log detailed telemetry about your serverless applications. You have full contr\", \"ol over the level of tracing and logging that is provided. You can track custom statistics such as e\", \"vents, dependencies, and page view. Finally, the powerful analytics enable you to write queries that\", \" ask important questions and generate charts and advanced insights.\\n\\nFor more information, see Monit\", \"or Azure Functions.\\n\\n## Azure Logic Apps\\n\\nAzure Logic Apps provides a serverless engine to build aut\", \"omated workflows to integrate apps and data between cloud services and on-premises systems. You buil\", \"d workflows using a visual designer. You can trigger workflows based on events or timers and leverag\", \"e connectors to integration applications and facilitate business-to-business (B2B) communication. Lo\", \"gic Apps integrates seamlessly with Azure Functions.\\n\\nLogic Apps can do more than just connect your \", \"cloud services (like functions) with cloud resources (like queues and databases). You can also orche\", \"strate on-premises workflows with the on-premises gateway. For example, you can use the Logic App to\", \" trigger an on-premises SQL stored procedure in response to a cloud-based event or conditional logic\", \" in your workflow. Learn more about Connecting to on-premises data sources with Azure On-premises Da\", \"ta Gateway.\\n\\n08:30\\n\\n03 PM\\n\\nAvg\\n\\n50\\u2122H\\n\\n95\\u2122H\\n\\n99\\u2122H\\n\\nRefresh\\n\\nStart with a common trigger\\n\\nPick from on\", \"e of the most commonly used triggers, then orchestrate any number of actions using the rich collecti\", \"on of connectors\\n\\nAzure Functions\\n\\nWhen a message is received in a Service\\n\\nBus queue\\n\\nService bus\\n\\n\", \"Recurrence\\n\\n9S Cognitive services\\n\\n/ Machine learning\\n\\n5 &gt; SharePoint\\n\\n<!-- image -->\\n\\nLike Azure\", \" Functions, you kick off Logic App workflows with a trigger. There are many triggers for you to choo\", \"se from. The following capture shows just a few of the more popular ones out of hundreds that are av\", \"ailable.\\n\\n<!-- image -->\\n\\nOnce the app is triggered, you can use the visual designer to build out st\", \"eps, loops, conditions, and actions. Any data ingested in a previous step is available for you to us\", \"e in subsequent steps. The following workflow loads URLs from a CosmosDB database. It finds the ones\", \" with a host of t.co then searches for them on Twitter. If it finds corresponding tweets, it updates\", \" the documents with the related tweets by calling a function.\\n\\nWhen a HTTP\\n\\nrequest is received\\n\\nSQL\", \"\\n\\nWhen a new tweet is posted\\n\\nWhen a Event Grid event occurs\\n\\n\\u2022 Office 365\\n\\nIf true\\n\\nFor each\\n\\n\\\"Sele\", \"ct an output from previous steps\\n\\nScope\\n\\n{x}\\n\\n{x}\\n\\nRecurrence\\n\\nInitialize variable\\n\\nInitialize varia\", \"ble 2\\n\\n<!-- image -->\\n\\nI Add anaction II Add a condition\\n\\nThe Logic Apps dashboard shows the history\", \" of running your workflows and whether each run completed successfully or not. You can navigate into\", \" any given run and inspect the data used by each step for troubleshooting. Logic Apps also provides \", \"existing templates you can edit and are well suited for complex enterprise workflows.\\n\\nTo learn more\", \", see Azure Logic Apps.\\n\\n## Event Grid\\n\\nAzure Event Grid provides serverless infrastructure for even\", \"t-based applications. You can publish to Event Grid from any source and consume messages from any pl\", \"atform. Event Grid also has built-in support for events from Azure resources to streamline integrati\", \"on with your applications. For example, you can subscribe to blob storage events to notify your app \", \"when a file is uploaded. Your application can then publish a custom event grid message that is consu\", \"med by other cloud or on-premises applications. Event Grid was built to reliably handle massive scal\", \"e. You get the benefits of publishing and subscribing to messages without the overhead of setting up\", \" the necessary infrastructure.\\n\\nC: \\\\\\n\\n<!-- image -->\\n\\nThe major features of event grid include:\\n\\n- F\", \"ully managed event routing.\\n- Near real-time event delivery at scale.\\n- Broad coverage both inside a\", \"nd outside of Azure.\\n\\n## Scenarios\\n\\nEvent Grid addresses several different scenarios. This section c\", \"overs three of the most common ones.\\n\\n## Ops automation\\n\\n<!-- image -->\\n\\nEvent Grid can help speed a\", \"utomation and simplify policy enforcement by notifying Azure Automation when infrastructure is provi\", \"sioned.\\n\\n## Application integration\\n\\n<!-- image -->\\n\\nYou can use Event Grid to connect your app to o\", \"ther services. Using standard HTTP protocols, even legacy apps can be easily modified to publish Eve\", \"nt Grid messages. Web hooks are available for other services and platforms to consume Event Grid mes\", \"sages.\\n\\n## Serverless apps\\n\\n<!-- image -->\\n\\nEvent Grid can trigger Azure Functions, Logic Apps, or y\", \"our own custom code. A major benefit of using Event Grid is that it uses a push mechanism to send me\", \"ssages when events occur. The push architecture consumes fewer resources and scales better than poll\", \"ing mechanisms. Polling must check for updates on a regular interval.\\n\\n## Event Grid vs. other Azure\", \" messaging services\\n\\nAzure provides several messaging services, including Event Hubs and Service Bus\", \". Each is designed to address a specific set of use cases. The following diagram provides a high-lev\", \"el overview of the differences between the services.\\n\\nEvent Hubs\\n\\n\\u2022 \\\"Point in time\\\" data\\n\\n\\u2022 Fast pul\", \"l\\n\\n\\u2022 Replay / strict ordering\\n\\n\\u2022 Big data streams\\n\\n<!-- image -->\\n\\nFor a more in-depth comparison, s\", \"ee Compare messaging services.\\n\\n## Performance targets\\n\\nUsing Event Grid you can take advantage of t\", \"he following performance guarantees:\\n\\n- Subsecond end-to-end latency in the 99th percentile.\\n- 99.99\", \"% availability.\\n- 10 million events per second per region.\\n- 100 million subscriptions per region.\\n-\", \" 50-ms publisher latency.\\n- 24-hour retry with exponential back-off for guaranteed delivery in the 1\", \"-day window.\\n- Transparent regional failover.\\n\\n## Event Grid schema\\n\\nEvent Grid uses a standard sche\", \"ma to wrap custom events. The schema is like an envelope that wraps your custom data element. Here i\", \"s an example Event Grid message:\\n\\n```\\n[{ \\\"id\\\": \\\"03e24f21-a955-43cc-8921-1f61a6081ce0\\\", \\\"eventType\\\": \", \"\\\"myCustomEvent\\\", \\\"subject\\\": \\\"foo/bar/12\\\", \\\"eventTime\\\": \\\"2018-09-22T10:36:01+00:00\\\", \\\"data\\\": { \\\"favor\", \"iteColor\\\": \\\"blue\\\", \\\"favoriteAnimal\\\": \\\"panther\\\", \\\"favoritePlanet\\\": \\\"Jupiter\\\" }, \\\"dataVersion\\\": \\\"1.0\\\" \", \"}]\\n```\\n\\nEverything about the message is standard except the data property. You can inspect the messa\", \"ge and use the eventType and dataVersion to de-serialize the custom portion of the payload.\\n\\n## Azur\", \"e resources\\n\\nA major benefit of using Event Grid is the automatic messages produced by Azure. In Azu\", \"re, resources automatically publish to a topic that allows you to subscribe for various events. The \", \"following table lists the resource types, message types, and events that are available automatically\", \".\\n\\n| Azure resource     | Event type                                | Description                   \", \"                                                                                  |\\n|---------------\", \"-----|-------------------------------------------|--------------------------------------------------\", \"---------------------------------------------------------------|\\n| Azure subscription | Microsoft.Re\", \"sources.ResourceWriteSuccess  | Raised when a resource create or update operation succeeds.         \", \"                                            |\\n|                    | Microsoft.Resources.ResourceWri\", \"teFailure  | Raised when a resource create or update operation fails.                               \", \"                         |\\n|                    | Microsoft.Resources.ResourceWriteCancel   | Raised\", \" when a resource create or update operation is canceled.                                            \", \"      |\\n|                    | Microsoft.Resources.ResourceDeleteSuccess | Raised when a resource de\", \"lete operation succeeds.                                                               |\\n|          \", \"          | Microsoft.Resources.ResourceDeleteFailure | Raised when a resource delete operation fail\", \"s.                                                                  |\\n|                    | Microso\", \"ft.Resources.ResourceDeleteCancel  | Raised when a resource delete operation is canceled. This event\", \" happens when a template deployment is canceled. |\\n| Blob storage       | Microsoft.Storage.BlobCrea\", \"ted             | Raised when a blob is created.                                                    \", \"                              |\\n|                    | Microsoft.Storage.BlobDeleted             | R\", \"aised when a blob is deleted.                                                                       \", \"           |\\n| Event hubs         | Microsoft.EventHub.CaptureFileCreated     | Raised when a captur\", \"e file is created.                                                                          |\\n| IoT \", \"Hub            | Microsoft.Devices.DeviceCreated           | Published when a device is registered t\", \"o an IoT hub.                                                            |\\n|                    | Mi\", \"crosoft.Devices.DeviceDeleted           | Published when a device is deleted from an IoT hub.       \", \"                                                      |\\n| Resource groups    | Microsoft.Resources.R\", \"esourceWriteSuccess  | Raised when a resource create or update operation succeeds.                  \", \"                                   |\\n|                    | Microsoft.Resources.ResourceWriteFailure\", \"  | Raised when a resource create or update operation fails.                                        \", \"                |\\n|                    | Microsoft.Resources.ResourceWriteCancel   | Raised when a r\", \"esource create or update operation is canceled.                                                  |\\n|\", \"                    | Microsoft.Resources.ResourceDeleteSuccess | Raised when a resource delete oper\", \"ation succeeds.                                                               |\\n|                   \", \" | Microsoft.Resources.ResourceDeleteFailure | Raised when a resource delete operation fails.       \", \"                                                           |\\n\\n| Azure resource   | Event type       \", \"                        | Description                                                               \", \"                                      |\\n|------------------|----------------------------------------\", \"--|-------------------------------------------------------------------------------------------------\", \"----------------|\\n|                  | Microsoft.Resources.ResourceDeleteCancel | Raised when a reso\", \"urce delete operation is canceled. This event happens when a template deployment is canceled. |\\n\\nFor\", \" more information, see Azure Event Grid event schema.\\n\\nYou can access Event Grid from any type of ap\", \"plication, even one that runs on-premises.\\n\\n## Conclusion\\n\\nIn this chapter you learned about the Azu\", \"re serverless platform that is composed of Azure Functions, Logic Apps, and Event Grid. You can use \", \"these resources to build an entirely serverless app architecture, or create a hybrid solution that i\", \"nteracts with other cloud resources and on-premises servers. Combined with a serverless data platfor\", \"m such as Azure SQL or CosmosDB, you can build fully managed cloud native applications.\\n\\n## Recommen\", \"ded resources\\n\\n- App service plans\\n- Application Insights\\n- Application Insights Analytics\\n- Azure: \", \"Bring your app to the cloud with serverless Azure Functions\\n- Azure Event Grid\\n- Azure Event Grid ev\", \"ent schema\\n- Azure Event Hubs\\n- Azure Functions documentation\\n- Azure Functions triggers and binding\", \"s concepts\\n- Azure Logic Apps\\n- Azure Service Bus\\n- Azure Table Storage\\n- Connecting to on-premises \", \"data sources with Azure On-premises Data Gateway\\n- Create your first function in the Azure portal\\n- \", \"Create your first function using the Azure CLI\\n- Create your first function using Visual Studio\\n- Fu\", \"nctions supported languages\\n- Monitor Azure Functions\\n\\nCHAPTER\\n\\n4\\n\\n## Durable Azure Functions\\n\\nWhen \", \"creating serverless applications with Azure Functions, your operations will typically be designed to\", \" run in a stateless manner. The reason for this design choice is because as the platform scales, it \", \"becomes difficult to know what servers the code is running on. It also becomes difficult to know how\", \" many instances are active at any given point. However, there are classes of applications that requi\", \"re the current state of a process to be known. Consider the process of submitting an order to an onl\", \"ine store. The checkout operation might be a workflow that is composed of multiple operations that n\", \"eed to know the state of the process. Such information may include the product inventory, if the cus\", \"tomer has any credits on their account, and also the results of processing the credit card. These op\", \"erations could easily be their own internal workflows or even services from third-party systems.\\n\\nVa\", \"rious patterns exist today that assist with the coordination of application state between internal a\", \"nd external systems. It's common to come across solutions that rely on centralized queuing systems, \", \"distributed key-value stores, or shared databases to manage that state. However, these are all addit\", \"ional resources that now need to be provisioned and managed. In a serverless environment, your code \", \"could become cumbersome trying to coordinate with these resources manually. Azure Functions offers a\", \"n alternative for creating stateful functions called Durable Functions.\\n\\nDurable Functions is an ext\", \"ension to the Azure Functions runtime that enables the definition of stateful workflows in code. By \", \"breaking down workflows into activities, the Durable Functions extension can manage state, create pr\", \"ogress checkpoints, and handle the distribution of function calls across servers. In the background,\", \" it makes use of an Azure Storage account to persist execution history, schedule activity functions \", \"and retrieve responses. Your serverless code should never interact with persisted information in tha\", \"t storage account, and is typically not something with which developers need to interact.\\n\\n## Trigge\", \"ring a stateful workflow\\n\\nStateful workflows in Durable Functions can be broken down into two intrin\", \"sic components; orchestration and activity triggers. Triggers and bindings are core components used \", \"by Azure Functions to enable your serverless functions to be notified when to start, receive input, \", \"and return results.\\n\\n## Working with the Orchestration client\\n\\nOrchestrations are unique when compar\", \"ed to other styles of triggered operations in Azure Functions. Durable Functions enables the executi\", \"on of functions that may take hours or even days to complete. That type of behavior comes with the n\", \"eed to able to check the status of a running orchestration, preemptively terminate, or send notifica\", \"tions of external events.\\n\\nFor such cases, the Durable Functions extension provides the DurableOrche\", \"strationClient class that allows you to interact with orchestrated functions. You get access to the \", \"orchestration client by using the OrchestrationClientAttribute binding. Generally, you would include\", \" this attribute with another trigger type, such as an HttpTrigger or ServiceBusTrigger . Once the so\", \"urce function has been triggered, the orchestration client can be used to start an orchestrator func\", \"tion.\\n\\n```\\n[FunctionName(\\\"KickOff\\\")] public static async Task<HttpResponseMessage> Run( [HttpTrigger\", \"(AuthorizationLevel.Function, \\\"POST\\\")]HttpRequestMessage req, [OrchestrationClient ] DurableOrchestr\", \"ationClient<orchestrationClient>) { OrderRequestData data = await req.Content.ReadAsAsync<OrderReque\", \"stData>(); string instanceId = await orchestrationClient.StartNewAsync(\\\"PlaceOrder\\\", data); return o\", \"rchestrationClient.CreateCheckStatusResponse(req, instanceId); }\\n```\\n\\n## The orchestrator function\\n\\n\", \"Annotating a function with the OrchestrationTriggerAttribute in Azure Functions marks that function \", \"as an orchestrator function. It's responsible for managing the various activities that make up your \", \"stateful workflow.\\n\\nOrchestrator functions are unable to make use of bindings other than the Orchest\", \"rationTriggerAttribute. This attribute can only be used with a parameter type of DurableOrchestratio\", \"nContext. No other inputs can be used since deserialization of inputs in the function signature isn'\", \"t supported. To get inputs provided by the orchestration client, the GetInput&lt;T&gt; method must b\", \"e used.\\n\\nAlso, the return types of orchestration functions must be either void, Task, or a JSON seri\", \"alizable value.\\n\\nError handling code has been left out for brevity\\n\\n```\\n[FunctionName(\\\"PlaceOrder\\\")]\", \" public static async Task<string> PlaceOrder([OrchestrationTrigger] DurableOrchestrationContext cont\", \"ext) { OrderRequestData orderData = context.GetInput<OrderRequestData>(); await context.CallActivity\", \"Async<bool>(\\\"CheckAndReserveInventory\\\", orderData); await context.CallActivityAsync<string>(\\\"Process\", \"Payment\\\", orderData); string trackingNumber = await context.CallActivityAsync<string>(\\\"ScheduleShipp\", \"ing\\\", orderData); await context.CallActivityAsync<string>(\\\"EmailCustomer\\\", trackingNumber); return t\", \"rackingNumber; }\\n```\\n\\nMultiple instances of an orchestration can be started and running at the same \", \"time. Calling the StartNewAsync method on the DurableOrchestrationClient launches a new instance of \", \"the orchestration. The method returns a Task&lt;string&gt; that completes when the orchestration has\", \" started.\\n\\nAn exception of type TimeoutException gets thrown if the orchestration hasn't started wit\", \"hin 30 seconds.\\n\\nThe completed Task&lt;string&gt; from StartNewAsync should contain the unique ID of\", \" the orchestration instance. This instance ID can be used to invoke operations on that specific orch\", \"estration. The orchestration can be queried for the status or sent event notifications.\\n\\n## The acti\", \"vity functions\\n\\nActivity functions are the discrete operations that get composed together within an \", \"orchestration function to create the workflow. Here is where most of actual work would take place. T\", \"hey represent the business logic, long running processes, and the puzzle pieces to a larger solution\", \".\\n\\nThe ActivityTriggerAttribute is used to annotate a function parameter of type DurableActivityCont\", \"ext . Using the annotation informs the runtime that the function is intended to be used as an activi\", \"ty function. Input values to activity functions are retrieved using the GetInput&lt;T&gt; method of \", \"the DurableActivityContext parameter.\\n\\nSimilar to orchestration functions, the return types of activ\", \"ity functions must be either void, Task, or a JSON serializable value.\\n\\nAny unhandled exceptions tha\", \"t get thrown within activity functions will get sent up to the calling orchestrator function and pre\", \"sented as a TaskFailedException . At this point, the error can be caught and logged in the orchestra\", \"tor, and the activity can be retried.\\n\\n```\\n[FunctionName(\\\"CheckAndReserveInventory\\\")] public static \", \"bool CheckAndReserveInventory([ActivityTrigger] DurableActivityContext context) { OrderRequestData o\", \"rderData = context.GetInput<OrderRequestData>(); // Connect to inventory system and try to reserve i\", \"tems return true ; }\\n```\\n\\n## Recommended resources\\n\\n- Durable Functions\\n- Bindings for Durable Funct\", \"ions\\n- Manage instances in Durable Functions\\n\\n## Orchestration patterns\\n\\nDurable Functions makes it \", \"easier to create stateful workflows that are composed of discrete, long running activities in a serv\", \"erless environment. Since Durable Functions can track the progress of your workflows and periodicall\", \"y checkpoints the execution history, it lends itself to implementing some interesting patterns.\\n\\n## \", \"Function chaining\\n\\nIn a typical sequential process, activities need to execute one after the other i\", \"n a particular order. Optionally, the upcoming activity may require some output from the previous fu\", \"nction. This dependency on the ordering of activities creates a function chain of execution.\\n\\nThe be\", \"nefit of using Durable Functions to implement this workflow pattern comes from its ability to do che\", \"ckpointing. If the server crashes, the network times out or some other issue occurs, Durable functio\", \"ns can resume from the last known state and continue running your workflow even if it's on another s\", \"erver.\\n\\n```\\n[FunctionName(\\\"PlaceOrder\\\")] public static async Task<string> PlaceOrder([OrchestrationT\", \"rigger] DurableOrchestrationContext context) { OrderRequestData orderData = context.GetInput<OrderRe\", \"questData>(); await context.CallActivityAsync<bool>(\\\"CheckAndReserveInventory\\\", orderData); await co\", \"ntext.CallActivityAsync<bool>(\\\"ProcessPayment\\\", orderData); string trackingNumber = await context.Ca\", \"llActivityAsync<string>(\\\"ScheduleShipping\\\", orderData); await context.CallActivityAsync<string>(\\\"Ema\", \"ilCustomer\\\", trackingNumber); return trackingNumber; }\\n```\\n\\nIn the preceding code sample, the CallAc\", \"tivityAsync function is responsible for running a given activity on a virtual machine in the data ce\", \"nter. When the await returns and the underlying Task completes, the execution will be recorded to th\", \"e history table. The code in the orchestrator function can make use of any of the familiar construct\", \"s of the Task Parallel Library and the async/await keywords.\\n\\nThe following code is a simplified exa\", \"mple of what the ProcessPayment method may look like:\\n\\n```\\n[FunctionName(\\\"ProcessPayment\\\")] public s\", \"tatic bool ProcessPayment([ActivityTrigger] DurableActivityContext context) { OrderRequestData order\", \"Data = context.GetInput<OrderRequestData>(); ApplyCoupons(orderData); if (IssuePaymentRequest(orderD\", \"ata)) { return true ; } return false ; }\\n```\\n\\n## Asynchronous HTTP APIs\\n\\nIn some cases, workflows ma\", \"y contain activities that take a relatively long period of time to complete. Imagine a process that \", \"kicks off the backup of media files into blob storage. Depending on the size and quantity of the med\", \"ia files, this backup process may take hours to complete.\\n\\nIn this scenario, the DurableOrchestratio\", \"nClient 's ability to check the status of a running workflow becomes useful. When using an HttpTrigg\", \"er to start a workflow, the CreateCheckStatusResponse method can be used to return an instance of Ht\", \"tpResponseMessage . This response provides the client with a URI in the payload that can be used to \", \"check the status of the running process.\\n\\n```\\n[FunctionName(\\\"OrderWorkflow\\\")] public static async Ta\", \"sk<HttpResponseMessage> Run( [HttpTrigger(AuthorizationLevel.Function, \\\"POST\\\")]HttpRequestMessage re\", \"q, [OrchestrationClient ] DurableOrchestrationClient orchestrationClient) { OrderRequestData data = \", \"await req.Content.ReadAsAsync<OrderRequestData>(); string instanceId = await orchestrationClient.Sta\", \"rtNewAsync(\\\"PlaceOrder\\\", data); return orchestrationClient.CreateCheckStatusResponse(req, instanceId\", \"); }\\n```\\n\\nThe sample result below shows the structure of the response payload.\\n\\n```\\n{ \\\"id\\\": \\\"instanc\", \"eId\\\", \\\"statusQueryGetUri\\\": \\\"http://host/statusUri\\\", \\\"sendEventPostUri\\\": \\\"http://host/eventUri\\\", \\\"ter\", \"minatePostUri\\\": \\\"http://host/terminateUri\\\" }\\n```\\n\\nUsing your preferred HTTP client, GET requests can\", \" be made to the URI in statusQueryGetUri to inspect the status of the running workflow. The returned\", \" status response should resemble the following code.\\n\\n```\\n{ \\\"runtimeStatus\\\": \\\"Running\\\", \\\"input\\\": { \\\"\", \"$type\\\": \\\"DurableFunctionsDemos.OrderRequestData, DurableFunctionsDemos\\\" }, \\\"output\\\": null , \\\"created\", \"Time\\\": \\\"2018-01-01T00:22:05Z\\\", \\\"lastUpdatedTime\\\": \\\"2018-01-01T00:22:09Z\\\" }\\n```\\n\\nAs the process conti\", \"nues, the status response will change to either Failed or Completed . On successful completion, the \", \"output property in the payload will contain any returned data.\\n\\n## Monitoring\\n\\nFor simple recurring \", \"tasks, Azure Functions provides the TimerTrigger that can be scheduled based on a CRON expression. T\", \"he timer works well for simple, short-lived tasks, but there might be scenarios where more flexible \", \"scheduling is needed. This scenario is when the monitoring pattern and Durable Functions can help.\\n\\n\", \"Durable Functions allows for flexible scheduling intervals, lifetime management, and the creation of\", \" multiple monitor processes from a single orchestration function. One use case for this functionalit\", \"y might be to create watchers for stock price changes that complete once a certain threshold is met.\", \"\\n\\n```\\n[FunctionName(\\\"CheckStockPrice\\\")] public static async Task CheckStockPrice([OrchestrationTrigg\", \"er] DurableOrchestrationContext context) { StockWatcherInfo stockInfo = context.GetInput<StockWatche\", \"rInfo>(); const int checkIntervalSeconds = 120; StockPrice initialStockPrice = null ; DateTime fireA\", \"t; DateTime exitTime = context.CurrentUtcDateTime.Add(stockInfo.TimeLimit); while (context.CurrentUt\", \"cDateTime < exitTime) { StockPrice currentStockPrice = await context.CallActivityAsync<StockPrice>(\\\"\", \"GetStockPrice\\\", stockInfo); if (initialStockPrice == null ) { initialStockPrice = currentStockPrice;\", \" fireAt = context.CurrentUtcDateTime.AddSeconds(checkIntervalSeconds); await context.CreateTimer(fir\", \"eAt, CancellationToken.None); continue ; } decimal percentageChange = (initialStockPrice.Price - cur\", \"rentStockPrice.Price) / ((initialStockPrice.Price + currentStockPrice.Price) / 2); if (Math.Abs(perc\", \"entageChange) >= stockInfo.PercentageChange) { // Change threshold detected await context.CallActivi\", \"tyAsync(\\\"NotifyStockPercentageChange\\\", currentStockPrice); break ; } // Sleep til next polling inter\", \"val fireAt = context.CurrentUtcDateTime.AddSeconds(checkIntervalSeconds); await context.CreateTimer(\", \"fireAt, CancellationToken.None); } }\\n```\\n\\nDurableOrchestrationContext 's CreateTimer method sets up \", \"the schedule for the next invocation of the loop to check for stock price changes. DurableOrchestrat\", \"ionContext also has a CurrentUtcDateTime property to get the current DateTime value in UTC. It's bet\", \"ter to use this property instead of DateTime.UtcNow because it's easily mocked for testing.\\n\\n## Reco\", \"mmended resources\\n\\n- Azure Durable Functions\\n- Unit Testing in .NET Core and .NET Standard\\n\\nCHAPTER\\n\", \"\\n5\\n\\n## Serverless business scenarios and use cases\\n\\nThere are many use cases and scenarios for serve\", \"rless applications. This chapter includes samples that illustrate the different scenarios. The scena\", \"rios include links to related documentation and public source code repositories. The samples in this\", \" chapter enable you to get started on your own building and implementing serverless solutions.\\n\\n## B\", \"ig data processing\\n\\nThis example uses serverless to do a map/reduce operation on a big data set. It \", \"determines the average speed of New York Yellow taxi trips per day in 2017.\\n\\nBig Data Processing: Se\", \"rverless MapReduce on Azure\\n\\n## Create serverless applications: hands-on lab\\n\\nLearn how to use funct\", \"ions to execute server-side logic and build serverless architectures.\\n\\n- Choosing the best Azure ser\", \"vice for your business\\n- Creating Azure Functions\\n- Using triggers\\n- Chaining functions\\n- Long-runni\", \"ng workflows\\n- Monitoring\\n- Development, testing, and deployment\\n\\nCreate serverless applications\\n\\n##\", \" Customer reviews\\n\\nThis sample showcases the new Azure Functions tooling for C# Class Libraries in V\", \"isual Studio. Create a website where customers submit product reviews that are stored in Azure stora\", \"ge blobs and\\n\\nCosmosDB. Add an Azure Function to perform automated moderation of the customer review\", \"s using Azure Cognitive Services. Use an Azure storage queue to decouple the website from the functi\", \"on.\\n\\nCustomer Reviews App with Cognitive Services\\n\\n## File processing and validation\\n\\nThis example p\", \"arses a set of CSV files from hypothetical customers. It ensures that all files required for a custo\", \"mer 'batch' are ready, then validates the structure of each file. Different solutions are presented \", \"using Azure Functions, Logic Apps, and Durable Functions.\\n\\nFile processing and validation using Azur\", \"e Functions, Logic Apps, and Durable Functions\\n\\n## Game data visualization\\n\\nAn example of how a deve\", \"loper could implement an in-editor data visualization solution for their game. In fact, an Unreal En\", \"gine 4 Plugin and Unity Plugin were developed using this sample as its backend. The service componen\", \"t is game engine agnostic.\\n\\nIn-editor game telemetry visualization\\n\\n## GraphQL\\n\\nCreate a serverless \", \"function that exposes a GraphQL API.\\n\\nServerless functions for GraphQL\\n\\n## Internet of Things (IoT) \", \"reliable edge relay\\n\\nThis sample implements a new communication protocol to enable reliable upstream\", \" communication from IoT devices. It automates data gap detection and backfill.\\n\\nIoT Reliable Edge Re\", \"lay\\n\\n## Microservices reference architecture\\n\\nA reference architecture that walks you through the de\", \"cision-making process involved in designing, developing, and delivering the Rideshare by Relecloud a\", \"pplication (a fictitious company). It includes handson instructions for configuring and deploying al\", \"l of the architecture's components.\\n\\n## Serverless for mobile\\n\\nAzure Functions are easy to implement\", \" and maintain, and accessible through HTTP. They are a great way to implement an API for a mobile ap\", \"plication. Microsoft offers great cross-platform tools for iOS, Android, and Windows with Xamarin. A\", \"s such, Xamarin and Azure Functions are working great together. This article shows how to implement \", \"an Azure Function in the Azure portal or in Visual Studio at first, and build a cross-platform clien\", \"t with Xamarin.Forms running on Android, iOS, and Windows.\\n\\nImplementing a simple Azure Function wit\", \"h a Xamarin.Forms client\\n\\n## Serverless messaging\\n\\nThis sample shows how to utilize Durable Function\", \"s' fan -out pattern to load an arbitrary number of messages across any number of sessions/partitions\", \". It targets Service Bus, Event Hubs, or Storage Queues. The sample also adds the ability to consume\", \" those messages with another Azure Function and load the resulting timing data in to another Event H\", \"ub. The data is then ingested into analytics services like Azure Data Explorer.\\n\\nProduce and Consume\", \" messages through Service Bus, Event Hubs, and Storage Queues with Azure Functions\\n\\n## Recommended r\", \"esources\\n\\n- Big Data Processing: Serverless MapReduce on Azure\\n- Create serverless applications\\n- Cu\", \"stomer Reviews App with Cognitive Services\\n- File processing and validation using Azure Functions, L\", \"ogic Apps, and Durable Functions\\n- Implementing a simple Azure Function with a Xamarin.Forms client\\n\", \"- In-editor game telemetry visualization\\n- IoT Reliable Edge Relay\\n- Produce and Consume messages th\", \"rough Service Bus, Event Hubs, and Storage Queues with Azure Functions\\n- Serverless functions for Gr\", \"aphQL\\n- Serverless Microservices reference architecture\\n\\n## Conclusion\\n\\nThe following key takeaways \", \"are the most important conclusions from this guide.\\n\\nBenefits of using serverless. Serverless soluti\", \"ons provide the important benefit of cost savings because serverless is implemented in a pay-per-use\", \" model. Serverless makes it possible to independently scale, test, and deploy individual components \", \"of your application. Serverless is uniquely suited to implement microservices architectures and inte\", \"grates fully into a DevOps pipeline.\\n\\nCode as a unit of deployment. Serverless abstracts the hardwar\", \"e, OS, and runtime away from the application. Serverless enables focusing on business logic in code \", \"as the unit of deployment.\\n\\nTriggers and bindings. Serverless eases integration with storage, APIs, \", \"and other cloud resources. Azure Functions provides triggers to execute code and bindings to interac\", \"t with resources.\\n\\nMicroservices. The microservices architecture is becoming the preferred approach \", \"for distributed and large or complex mission-critical applications that are based on multiple indepe\", \"ndent subsystems in the form of autonomous services. In a microservice-based architecture, the appli\", \"cation is built as a collection of services that can be developed, tested, versioned, deployed, and \", \"scaled independently. Serverless is an architecture well-suited for building these services.\\n\\nServer\", \"less platforms. Serverless isn't just about the code. Platforms that support serverless architecture\", \"s include serverless workflows and orchestration, serverless messaging and event services, and serve\", \"rless databases.\\n\\nServerless challenges. Serverless introduces challenges related to distributed app\", \"lication development, such as fragmented and independent data models, resiliency, versioning, and se\", \"rvice discovery. Serverless may not be ideally suited to long running processes or components that b\", \"enefit from tighter coupling.\\n\\nServerless as a tool, not the toolbox. Serverless is not the exclusiv\", \"e solution to application architecture. It is a tool that can be leveraged as part of a hybrid appli\", \"cation that may contain traditional tiers, monolith back ends, and containers. Serverless can be use\", \"d to enhance existing solutions and is not an all-or-nothing approach to application development.\\n\\nC\", \"HAPTER\\n\\n6\"]"