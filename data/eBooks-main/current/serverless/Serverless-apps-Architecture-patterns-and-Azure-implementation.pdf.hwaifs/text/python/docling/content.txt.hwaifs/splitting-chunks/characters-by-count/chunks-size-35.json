"[\"Architecture, patterns, and Azure implementation\\n\\nJeremy Likness Cecil Phillip\\n\\nEDITION v4.0 - Updat\", \"ed to Azure Functions v4\\n\\nDOWNLOAD available at: https://aka.ms/serverlessbookpdf\\n\\nPUBLISHED BY\\n\\nMic\", \"rosoft Developer Division, .NET, and Visual Studio product teams\\n\\nA division of Microsoft Corporatio\", \"n\\n\\nOne Microsoft Way\\n\\nRedmond, Washington 98052-6399\\n\\nCopyright \\u00a9 2018-2023 by Microsoft Corporation\", \"\\n\\nAll rights reserved. No part of the contents of this book may be reproduced or transmitted in any \", \"form or by any means without the written permission of the publisher.\\n\\nThis book is provided 'as -is\", \"' and expresses the author's views and opinions. The views, opinions and information expressed in th\", \"is book, including URL and other Internet website references, may change without notice.\\n\\nSome examp\", \"les depicted herein are provided for illustration only and are fictitious. No real association or co\", \"nnection is intended or should be inferred.\\n\\nMicrosoft and the trademarks listed at https://www.micr\", \"osoft.com on the 'Trademarks' webpage are trademarks of the Microsoft group of companies.\\n\\nMac and m\", \"acOS are trademarks of Apple Inc.\\n\\nAll other marks and logos are property of their respective owners\", \".\\n\\nAuthor:\\n\\nJeremy Likness , Senior .NET Data Program Manager, Microsoft Corp.\\n\\nContributor:\\n\\nCecil \", \"Phillip , Senior Cloud Advocate, Microsoft Corp.\\n\\nEditors:\\n\\nBill Wagner , Senior Content Developer, \", \"Microsoft Corp.\\n\\nMaira Wenzel , Senior Content Developer, Microsoft Corp.\\n\\nParticipants and reviewer\", \"s:\\n\\nSteve Smith , Architect/Trainer, NimblePros.\\n\\n## Introduction\\n\\nServerless is the evolution of cl\", \"oud platforms in the direction of pure cloud native code. Serverless brings developers closer to bus\", \"iness logic while insulating them from infrastructure concerns. It's a pattern that doesn't imply 'n\", \"o server' but rather, 'less server.' Serverless code is event -driven. Code\\n\\nMicrosoft\\n\\nmay be trigg\", \"ered by anything from a traditional HTTP web request to a timer or the result of uploading a file. T\", \"he infrastructure behind serverless allows for instant scale to meet elastic demands and offers micr\", \"obilling to truly 'pay for what you use.' Serverless requires a new way of thinking and approach to \", \"building applications and isn't the right solution for every problem. As a developer, you must decid\", \"e:\\n\\n- What are the pros and cons of serverless?\\n- Why should you consider serverless for your own ap\", \"plications?\\n- How can you build, test, deploy, and maintain your serverless code?\\n- Where does it ma\", \"ke sense to migrate code to serverless in existing applications, and what is the best way to accompl\", \"ish this transformation?\\n\\n## About this guide\\n\\nThis guide focuses on cloud native development of app\", \"lications that use serverless. The book highlights the benefits and exposes the potential drawbacks \", \"of developing serverless apps and provides a survey of serverless architectures. Many examples of ho\", \"w serverless can be used are illustrated along with various serverless design patterns.\\n\\nThis guide \", \"explains the components of the Azure serverless platform and focuses specifically on implementation \", \"of serverless using Azure Functions . You'll learn about triggers and bindings as well as how to imp\", \"lement serverless apps that rely on state using durable functions. Finally, business examples and ca\", \"se studies will help provide context and a frame of reference to determine whether serverless is the\", \" right approach for your projects.\\n\\n## Evolution of cloud platforms\\n\\nServerless is the culmination o\", \"f several iterations of cloud platforms. The evolution began with physical metal in the data center \", \"and progressed through Infrastructure as a Service (IaaS) and Platform as a Service (PaaS).\\n\\nBefore \", \"the cloud, a discernible boundary existed between development and operations. Deploying an applicati\", \"on meant answering myriad questions like:\\n\\n- What hardware should be installed?\\n- How is physical ac\", \"cess to the machine secured?\\n- Does the data center require an Uninterruptible Power Supply (UPS)?\\n-\", \" Where are storage backups sent?\\n- Should there be redundant power?\\n\\nThe list goes on and the overhe\", \"ad was enormous. In many situations, IT departments were forced to deal with incredible waste. The w\", \"aste was due to over-allocation of servers as backup machines for disaster recovery and standby serv\", \"ers to enable scale-out. Fortunately, the introduction of virtualization technology (like Hyper-V) w\", \"ith Virtual Machines (VMs) gave rise to Infrastructure as a Service (IaaS). Virtualized infrastructu\", \"re allowed operations to set up a standard set of servers as the backbone, leading to a flexible env\", \"ironment capable of provisioning unique servers 'on demand.' More important, virtualization set the \", \"stage for using the cloud to provide virtual machines 'as a service.' Companies could easily get out\", \" of the business of worrying about redundant power or physical machines. Instead, they focused on th\", \"e virtual environment.\\n\\nIaaS still requires heavy overhead because operations is still responsible f\", \"or various tasks. These tasks include:\\n\\n- Patching and backing up servers.\\n- Installing packages.\\n- \", \"Keeping the operating system up-to-date.\\n- Monitoring the application.\\n\\nThe next evolution reduced t\", \"he overhead by providing Platform as a Service (PaaS). With PaaS, the cloud provider handles operati\", \"ng systems, security patches, and even the required packages to support a specific platform. Instead\", \" of building a VM then configuring .NET and standing up Internet Information Services (IIS) servers,\", \" developers simply choose a 'platform target' such as 'web application' or 'API endpoint' and deploy\", \" code directly. The infrastructure questions are reduced to:\\n\\n- What size services are needed?\\n- How\", \" do the services scale out (add more servers or nodes)?\\n- How do the services scale up (increase the\", \" capacity of hosting servers or nodes)?\\n\\nServerless further abstracts servers by focusing on event-d\", \"riven code. Instead of a platform, developers can focus on a microservice that does one thing. The t\", \"wo key questions for building the serverless code are:\\n\\n- What triggers the code?\\n- What does the co\", \"de do?\\n\\nWith serverless, infrastructure is abstracted. In some cases, the developer no longer worrie\", \"s about the host at all. Whether or not an instance of IIS, Kestrel, Apache, or some other web serve\", \"r is running to manage web requests, the developer focuses on an HTTP trigger. The trigger provides \", \"the standard, cross-platform payload for the request. The payload not only simplifies the developmen\", \"t process, but facilitates testing and in some cases, makes the code easily portable across platform\", \"s.\\n\\nAnother feature of serverless is microbilling. It's common for web applications to host Web API \", \"endpoints. In traditional bare metal, IaaS and even PaaS implementations, the resources to host the \", \"APIs are paid for continuously. That means you pay to host the endpoints even when they aren't being\", \" accessed. Often you'll find one API is called more than others, so the entire system is scaled\\n\\nbas\", \"ed on supporting the popular endpoints. Serverless enables you to scale each endpoint independently \", \"and pay for usage, so no costs are incurred when the APIs aren't being called. Migration may in many\", \" circumstances dramatically reduce the ongoing cost to support the endpoints.\\n\\n## What this guide do\", \"esn't cover\\n\\nThis guide specifically emphasizes architecture approaches and design patterns and isn'\", \"t a deep dive into the implementation details of Azure Functions, Logic Apps, or other serverless pl\", \"atforms. This guide doesn't cover, for example, advanced workflows with Logic Apps or features of Az\", \"ure Functions such as configuring Cross-Origin Resource Sharing (CORS), applying custom domains, or \", \"uploading SSL certificates. These details are available through the online Azure Functions documenta\", \"tion.\\n\\n## Additional resources\\n\\n- Azure Architecture center\\n- Best practices for cloud applications\\n\", \"\\n## Who should use the guide\\n\\nThis guide was written for developers and solution architects who want\", \" to build enterprise applications with .NET that may use serverless components either on premises or\", \" in the cloud. It's useful to developers, architects, and technical decision makers interested in:\\n\\n\", \"- Understanding the pros and cons of serverless development\\n- Learning how to approach serverless ar\", \"chitecture\\n- Example implementations of serverless apps\\n\\n## How to use the guide\\n\\nThe first part of \", \"this guide examines why serverless is a viable option by comparing several different architecture ap\", \"proaches. It examines both the technology and development lifecycle, because all aspects of software\", \" development are impacted by architecture decisions. The guide then examines use cases and design pa\", \"tterns and includes reference implementations using Azure Functions. Each section contains additiona\", \"l resources to learn more about a particular area. The guide concludes with resources for walkthroug\", \"hs and hands-on exploration of serverless implementation.\\n\\n## Send your feedback\\n\\nThe guide and rela\", \"ted samples are constantly evolving, so your feedback is welcomed! If you have comments about how th\", \"is guide can be improved, use the feedback section at the bottom of any page built on GitHub issues.\", \"\\n\\n## Contents\\n\\n| Architecture approaches............................................................\", \"...........................................................................1                        \", \"        |                                                                                           \", \"                                                                                           |\\n|------\", \"----------------------------------------------------------------------------------------------------\", \"--------------------------------------------------------------------------------------|-------------\", \"----------------------------------------------------------------------------------------------------\", \"---------------------------------------------------------------------|\\n| Architecture patterns......\", \"....................................................................................................\", \"....................................................1           |                                   \", \"                                                                                                    \", \"                                               |\\n| Monoliths........................................\", \"....................................................................................................\", \"........................................1 |                                                         \", \"                                                                                                    \", \"                         |\\n| N-Layer applications...................................................\", \"....................................................................................................\", \"........2           |                                                                               \", \"                                                                                                    \", \"   |\\n| Microservices................................................................................\", \".............................................................................................3    | \", \"                                                                                                    \", \"                                                                                 |\\n| Architecture de\", \"ployment approaches.................................................................................\", \"............................................4                               |                       \", \"                                                                                                    \", \"                                                           |\\n| N-Tier applications .................\", \"....................................................................................................\", \"........................................5             |                                             \", \"                                                                                                    \", \"                                     |\\n| On-premises and Infrastructure as a Service (IaaS).........\", \"......................................................................................6             \", \"                                |                                                                   \", \"                                                                                                    \", \"               |\\n| Platform as a Service (PaaS).....................................................\", \".......................................................................................7            \", \"          |                                                                                         \", \"                                                                                             |\\n| Sof\", \"tware as a Service (SaaS) ..........................................................................\", \".................................................................7                      |           \", \"                                                                                                    \", \"                                                                       |\\n| Containers and Functions \", \"as a Service (FaaS).................................................................................\", \".........................8                                        |                                 \", \"                                                                                                    \", \"                                                 |\\n| Serverless.....................................\", \"....................................................................................................\", \".......................................9    |                                                       \", \"                                                                                                    \", \"                           |\\n| Summary..............................................................\", \"....................................................................................................\", \"............10        |                                                                             \", \"                                                                                                    \", \"     |\\n| Recommended resources .....................................................................\", \"........................................................................11                          \", \"|                                                                                                   \", \"                                                                                   |\\n| Serverless ar\", \"chitecture..........................................................................................\", \"...............................................12                             |                     \", \"                                                                                                    \", \"                                                             |\\n| Full serverless back end...........\", \"....................................................................................................\", \".......................................                 | 13                                        \", \"                                                                                                    \", \"                                       |\\n| Monoliths and 'starving the beast' ......................\", \"....................................................................................................\", \".....                             | 13                                                              \", \"                                                                                                    \", \"                 |\\n| Web apps.......................................................................\", \"....................................................................................................\", \"......      | 14                                                                                    \", \"                                                                                               |\\n| M\", \"obile back ends.....................................................................................\", \".............................................................................             | 14      \", \"                                                                                                    \", \"                                                                         |\\n| Internet of Things (IoT\", \")...................................................................................................\", \"....................................................                | 15                            \", \"                                                                                                    \", \"                                                   |\\n| Serverless architecture considerations.......\", \"....................................................................................................\", \"..............                                | 16                                                  \", \"                                                                                                    \", \"                             |\\n| Managing state.....................................................\", \"....................................................................................................\", \"........16              |                                                                           \", \"                                                                                                    \", \"       |\\n| Long-running processes...................................................................\", \".............................................................................16                     \", \"  |                                                                                                 \", \"                                                                                     |\\n| Startup tim\", \"e...................................................................................................\", \".....................................................................17         |                   \", \"                                                                                                    \", \"                                                               |\\n| Database updates and migrations .\", \"....................................................................................................\", \".......................17                                 |                                         \", \"                                                                                                    \", \"                                         |\\n| Scaling                                                \", \"                                                                                                    \", \"                                    | ..............................................................\", \"....................................................................................................\", \"................17 |\\n| Monitoring, tracing, and logging.............................................\", \"..................................................................................18                \", \"              |                                                                                     \", \"                                                                                                 |\\n|\", \" Inter-service dependencies.........................................................................\", \".................................................................18                         |       \", \"                                                                                                    \", \"                                                                           |\\n\\n| Managing failure and\", \" providing resiliency ..............................................................................\", \"..............................18                                    |                               \", \"                                                                                         |\\n|--------\", \"----------------------------------------------------------------------------------------------------\", \"---------------------------------------------------------------------------------|------------------\", \"----------------------------------------------------------------------------------------------------\", \"--|\\n| Versioning and green/blue deployments.........................................................\", \"......................................................19                                      |     \", \"                                                                                                    \", \"               |\\n| Serverless design examples.......................................................\", \".......................................................................................             \", \"       | 19                                                                                         \", \"                            |\\n| Scheduling .........................................................\", \"....................................................................................................\", \".............19     |                                                                               \", \"                                         |\\n| Command and Query Responsibility Segregation (CQRS)....\", \"..........................................................................19                        \", \"                                 |                                                                  \", \"                                                      |\\n| Event-based processing ...................\", \"....................................................................................................\", \".........................20                   |                                                     \", \"                                                                   |\\n| File triggers and transformat\", \"ions................................................................................................\", \"...............................20                          |                                        \", \"                                                                                |\\n| Asynchronous bac\", \"kground processing and messaging....................................................................\", \"...............21                                                       |                           \", \"                                                                                             |\\n| Web\", \" apps and APIs .....................................................................................\", \"....................................................................21               |              \", \"                                                                                                    \", \"      |\\n| Data pipeline.............................................................................\", \".........................................................................................22       | \", \"                                                                                                    \", \"                   |\\n| Stream processing ...........................................................\", \"................................................................................................22  \", \"           |                                                                                        \", \"                                |\\n| API gateway.....................................................\", \"....................................................................................................\", \"...............23       |                                                                           \", \"                                             |\\n| Recommended resources .............................\", \"....................................................................................................\", \"............23                       |                                                              \", \"                                                          |\\n| Azure serverless platform.............\", \"....................................................................................................\", \"..................24                              |                                                 \", \"                                                                       |\\n| Azure Functions..........\", \"....................................................................................................\", \".......................................................        | 24                                 \", \"                                                                                    |\\n| Programming \", \"language support ...................................................................................\", \"............................................25                              |                       \", \"                                                                                                 |\\n|\", \" App service plans .................................................................................\", \"............................................................................25           |          \", \"                                                                                                    \", \"          |\\n| Create your first function ...........................................................\", \"...................................................................................25               \", \"  |                                                                                                 \", \"                       |\\n| Understand triggers and bindings ........................................\", \"....................................................................................26              \", \"               |                                                                                    \", \"                                    |\\n| Telemetry with Application Insights.........................\", \"....................................................................................................\", \".                           | 27                                                                    \", \"                                                 |\\n| Azure Logic Apps...............................\", \"....................................................................................................\", \"...............................          | 29                                                       \", \"                                                              |\\n| Event Grid........................\", \"....................................................................................................\", \"..................................................... | 31                                          \", \"                                                                           |\\n| Scenarios............\", \"....................................................................................................\", \"..............................................................32   |                                \", \"                                                                                        |\\n| Event Gr\", \"id vs. other Azure messaging services...............................................................\", \".....................................33                                         |                   \", \"                                                                                                    \", \" |\\n| Performance targets............................................................................\", \"............................................................................34               |      \", \"                                                                                                    \", \"              |\\n| Event Grid schema.................................................................\", \"..........................................................................................34        \", \"      |                                                                                             \", \"                           |\\n| Azure resources .....................................................\", \"....................................................................................................\", \".......35          |                                                                                \", \"                                        |\\n| Conclusion .............................................\", \"....................................................................................................\", \".........................36     |                                                                   \", \"                                                     |\\n| Recommended resources .....................\", \"....................................................................................................\", \"....................36                       |                                                      \", \"                                                                  |\\n| Durable Azure Functions ......\", \"....................................................................................................\", \"..........................37                              |                                         \", \"                                                                               |\\n| Triggering a stat\", \"eful workflow.......................................................................................\", \"..................................................                     | 37                         \", \"                                                                                            |\\n| Work\", \"ing with the Orchestration client                                                                   \", \"                                                                                    | ..............\", \"....................................................................................................\", \"..37 |\\n\\n| The orchestrator function ................................................................\", \".............................................................................38                   | \", \"   |\\n|----------------------------------------------------------------------------------------------\", \"-----------------------------------------------------------------------------------------------|----\", \"|\\n| The activity functions..........................................................................\", \"............................................................................39              |    |\\n|\", \" Recommended resources..............................................................................\", \"....................................................................                     | 39 |\\n| Or\", \"chestration patterns................................................................................\", \"........................................................................              | 39 |\\n| Funct\", \"ion chaining........................................................................................\", \".....................................................................40            |    |\\n| Asynchro\", \"nous HTTP APIs......................................................................................\", \"........................................................40                      |    |\\n| Monitoring.\", \"....................................................................................................\", \".....................................................................41      |    |\\n| Recommended re\", \"sources ............................................................................................\", \".................................................42                       |    |\\n| Serverless busine\", \"ss scenarios and use cases .........................................................................\", \".....................43                                                |    |\\n| Big data processing.\", \"....................................................................................................\", \".........................................................           | 43 |\\n| Create serverless appli\", \"cations: hands-on lab ..............................................................................\", \"..............................                                   | 43 |\\n| Customer reviews..........\", \"....................................................................................................\", \"....................................................          | 43 |\\n| File processing and validatio\", \"n ..................................................................................................\", \".......................................                    | 44 |\\n| Game data visualization ........\", \"....................................................................................................\", \".........................................               | 44 |\\n| GraphQL ...........................\", \"....................................................................................................\", \".................................................... | 44 |\\n| Internet of Things (IoT) reliable edge\", \" relay .............................................................................................\", \"...................                               | 44 |\\n| Microservices reference architecture ....\", \"....................................................................................................\", \"....................                           | 44 |\\n| Serverless for mobile.......................\", \"....................................................................................................\", \"................................            | 45 |\\n| Serverless messaging ..........................\", \"....................................................................................................\", \"............................             | 45 |\\n| Recommended resources.............................\", \"....................................................................................................\", \".................                     | 45 |\\n| Conclusion...........................................\", \"....................................................................................................\", \".................46                |    |\\n\\n## Architecture approaches\\n\\nUnderstanding existing approa\", \"ches to architecting enterprise apps helps clarify the role played by serverless. There are many app\", \"roaches and patterns that evolved over decades of software development, and all have their own pros \", \"and cons. In many cases, the ultimate solution may not involve deciding on a single approach but may\", \" integrate several approaches. Migration scenarios often involve shifting from one architecture appr\", \"oach to another through a hybrid approach.\\n\\nThis chapter provides an overview of both logical and ph\", \"ysical architecture patterns for enterprise applications.\\n\\n## Architecture patterns\\n\\nModern business\", \" applications follow a variety of architecture patterns. This section represents a survey of common \", \"patterns. The patterns listed here aren't necessarily all best practices, but illustrate different a\", \"pproaches.\\n\\nFor more information, see Azure application architecture guide.\\n\\n## Monoliths\\n\\nMany busi\", \"ness applications follow a monolith pattern. Legacy applications are often implemented as monoliths.\", \" In the monolith pattern, all application concerns are contained in a single deployment. Everything \", \"from user interface to database calls is included in the same codebase.\\n\\nThere are several advantage\", \"s to the monolith approach. It's often easy to pull down a single code base and start working. Ramp \", \"up time may be less, and creating test environments is as simple as providing a new copy. The monoli\", \"th may be designed to include multiple components and applications.\\n\\nUnfortunately, the monolith pat\", \"tern tends to break down at scale. Major disadvantages of the monolith approach include:\\n\\n- Difficul\", \"t to work in parallel in the same code base.\\n- Any change, no matter how trivial, requires deploying\", \" a new version of the entire application.\\n- Refactoring potentially impacts the entire application.\\n\", \"- Often the only solution to scale is to create multiple, resource-intensive copies of the monolith.\", \"\\n- As systems expand or other systems are acquired, integration can be difficult.\\n- It may be diffic\", \"ult to test due to the need to configure the entire monolith.\\n- Code reuse is challenging and often \", \"other apps end up having their own copies of code.\\n\\nMany businesses look to the cloud as an opportun\", \"ity to migrate monolith applications and at the same time refactor them to more usable patterns. It'\", \"s common to break out the individual applications and components to allow them to be maintained, dep\", \"loyed, and scaled separately.\\n\\n## N-Layer applications\\n\\nN-layer application partition application lo\", \"gic into specific layers. The most common layers include:\\n\\n- User interface\\n- Business logic\\n- Data \", \"access\\n\\nUl Layer\\n\\n\\u2022 Web Pages\\n\\n\\u2022 Mobile App\\n\\nOther layers may include middleware, batch processing, \", \"and API. It's important to note the layers are logical. Although they're developed in isolation, the\", \"y may all be deployed to the same target platform.\\n\\nThere are several advantages to the N-Layer appr\", \"oach, including:\\n\\n- Refactoring is isolated to a layer.\\n- Teams can independently build, test, deplo\", \"y, and maintain separate layers.\\n- Layers can be swapped out, for example the data layer may access \", \"multiple databases without requiring changes to the UI layer.\\n\\nServerless may be used to implement o\", \"ne or more layers.\\n\\n## Microservices\\n\\nMicroservices architectures contain common characteristics tha\", \"t include:\\n\\n- Applications are composed of several small services.\\n- Each service runs in its own pr\", \"ocess.\\n- Services are aligned around business domains.\\n- Services communicate over lightweight APIs,\", \" typically using HTTP as the transport.\\n- Services can be deployed and upgraded independently.\\n- Ser\", \"vices aren't dependent on a single data store.\\n- The system is designed with failure in mind, and th\", \"e app may still run even when certain services fail.\\n\\nMicroservices don't have to be mutually exclus\", \"ive to other architecture approaches. For example, an NTier architecture may use microservices for t\", \"he middle tier. It's also possible to implement\\n\\nBrowser\\n\\nService\\n\\n1\\n\\nmicroservices in a variety of \", \"ways, from virtual directories on IIS hosts to containers. The characteristics of microservices make\", \" them especially ideal for serverless implementations.\\n\\nThe pros of microservices architectures incl\", \"ude:\\n\\n- Refactoring is often isolated to a single service.\\n- Services can be upgraded independently \", \"of each other.\\n- Resiliency and elasticity can be tuned to the demands of individual services.\\n- Dev\", \"elopment can happen in parallel across disparate teams and platforms.\\n- It's easier to write compreh\", \"ensive tests for isolated services.\\n\\nMicroservices come with their own challenges, including:\\n\\n- Det\", \"ermining what services are available and how to call them.\\n- Managing the lifecycle of services.\\n- U\", \"nderstanding how services fit together in the overall application.\\n- Full system testing of calls ma\", \"de across disparate services.\\n\\nUltimately there are solutions to address all of these challenges, in\", \"cluding tapping into the benefits of serverless that are discussed later.\\n\\n## Architecture deploymen\", \"t approaches\\n\\nRegardless of the architecture approach used to design a business application, the imp\", \"lementation, or deployment of those applications may vary. Businesses host applications on everythin\", \"g from physical hardware to serverless functions.\\n\\n## N-Tier applications\\n\\nThe N-Tier architecture p\", \"attern is a mature architecture and simply refers to applications that separate various logical laye\", \"rs into separate physical tiers. N-Tier architecture is a physical implementation of N-Layer archite\", \"cture. The most common implementation of this architecture includes:\\n\\n- A presentation tier, for exa\", \"mple a web app.\\n- An API or data access tier, such as a REST API.\\n- A data tier, such as a SQL datab\", \"ase.\\n\\nBrowser\\n\\nDatabase\\n\\n/ Backend\\n\\n(Tier 2)\\n\\nN-tier solutions have the following characteristics:\\n\\n\", \"- Projects are typically aligned with tiers.\\n- Testing may be approached differently by tier.\\n- Tier\", \"s provide layers of abstraction, for example the presentation tier is typically ignorant of the impl\", \"ementation details of the data tier.\\n- Typically, layers only interact with adjacent layers.\\n- Relea\", \"ses are often managed at the project, and therefore tier, level. A simple API change may require a n\", \"ew release of an entire middle tier.\\n\\nThis approach provides several benefits, including:\\n\\n- Isolati\", \"on of the database (often the front end doesn't have direct access to the database back end).\\n- Reus\", \"e of the API (for example, mobile, desktop, and web app clients can all reuse the same APIs).\\n\\nBrows\", \"er\\n\\nWeb server\\n\\nAPI\\n\\nserver\\n\\n- Ability to scale out tiers independent of each other.\\n- Refactoring i\", \"solation: one tier may be refactored without impacting other tiers.\\n\\nLoad\\n\\nLoad\\n\\nDatabase\\n\\n## On-pre\", \"mises and Infrastructure as a Service (IaaS)\\n\\nThe traditional approach to hosting applications requi\", \"res buying hardware and managing all of the software installations, including the operating system. \", \"Originally this involved expensive data centers and physical hardware. The challenges that come with\", \" operating physical hardware are many, including: server server\\n\\n- The need to buy excess for 'just \", \"in case' or peak demand scenarios.\\n- Securing physical access to the hardware.\\n- Responsibility for \", \"hardware failure (such as disk failure).\\n- Cooling.\\n- Configuring routers and load balancers.\\n- Powe\", \"r redundancy.\\n- Securing software access.\\n\\nVirtualization of hardware, via 'virtual machines' enable\", \"s Infrastructure as a Service (IaaS). Host machines are effectively partitioned to provide resources\", \" to instances with allocations for their own memory, CPU, and storage. The team provisions the neces\", \"sary VMs and configures the associated networks and access to storage.\\n\\nFor more information, see vi\", \"rtual machine N-tier reference architecture.\\n\\nAlthough virtualization and Infrastructure as a Servic\", \"e (IaaS) address many concerns, it still leaves much responsibility in the hands of the infrastructu\", \"re team. The team maintains operating system versions, applies security patches, and installs third-\", \"party dependencies on the target machines. Apps often behave differently on production machines comp\", \"ared to the test environment. Issues arise due to different dependency versions and/or OS SKU levels\", \". Although many organizations deploy N-Tier applications to these targets, many companies benefit fr\", \"om deploying to a more cloud native model\\n\\nBrowser such as Platform as a Service. Architectures with\", \" microservices are more challenging because of the requirements to scale out for elasticity and resi\", \"liency. Static Website REST API Database\\n\\nFor more information, see virtual machines.\\n\\n## Platform a\", \"s a Service (PaaS)\\n\\nPlatform as a Service (PaaS) offers configured solutions that developers can plu\", \"g into directly. PaaS is another term for managed hosting. It eliminates the need to manage the base\", \" operating system, security patches and in many cases any third-party dependencies. Examples of plat\", \"forms include web applications, databases, and mobile back ends.\\n\\nPaaS addresses the challenges comm\", \"on to IaaS. PaaS allows the developer to focus on the code or database schema rather than how it get\", \"s deployed. Benefits of PaaS include:\\n\\n- Pay for use models that eliminate the overhead of investing\", \" in idle machines.\\n- Direct deployment and improved DevOps, continuous integration (CI), and continu\", \"ous delivery (CD) pipelines.\\n- Automatic upgrades, updates, and security patches.\\n- Push-button scal\", \"e out and scale up (elastic scale).\\n\\nThe main disadvantage of PaaS traditionally has been vendor loc\", \"k-in. For example, some PaaS providers only support ASP.NET, Node.js, or other specific languages an\", \"d platforms. Products like Azure App Service have evolved to address multiple platforms and support \", \"a variety of languages and frameworks for hosting web apps.\\n\\n## Software as a Service (SaaS)\\n\\nSoftwa\", \"re as a Service or SaaS is centrally hosted and available without local installation or provisioning\", \". SaaS often is hosted on top of PaaS as a platform for deploying software. SaaS provides services t\", \"o run and connect with existing software. SaaS is often industry and vertical specific. SaaS is ofte\", \"n licensed and typically provides a client/server model. Most modern SaaS offerings use web-\\n\\nbased \", \"apps for the client. Companies typically consider SaaS as a business solution to license offerings. \", \"It isn't often implemented as architecture consideration for scalability and maintainability of an a\", \"pplication. Indeed, most SaaS solutions are built on IaaS, PaaS, and/or serverless back ends.\\n\\nLearn\", \" more about SaaS through a sample application.\\n\\n## Containers and Functions as a Service (FaaS)\\n\\nCon\", \"tainers are an interesting solution that enables PaaS-like benefits without the IaaS overhead. A con\", \"tainer is essentially a runtime that contains the bare essentials needed to run a unique application\", \". The kernel or core part of the host operating system and services such as storage are shared acros\", \"s a host. The shared kernel enables containers to be lightweight (some are mere megabytes in size, c\", \"ompared to the gigabyte size of typical virtual machines). With hosts already running, containers ca\", \"n be started quickly, facilitating high availability. The ability to spin up containers quickly also\", \" provides extra layers of resiliency. Docker is one of the more popular implementations of container\", \"s.\\n\\n## Benefits of containers include:\\n\\n- Lightweight and portable\\n- Self-contained so no need to in\", \"stall dependencies\\n- Provide a consistent environment regardless of the host (runs exactly same on a\", \" laptop as on a cloud server)\\n- Can be provisioned quickly for scale-out\\n- Can be restarted quickly \", \"to recover from failure\\n\\nA container runs on a container host (that in turn may run on a bare metal \", \"machine or a virtual machine). Multiple containers or instances of the same containers may run on a \", \"single host. For true failover and resiliency, containers must be scaled across hosts.\\n\\nFor more inf\", \"ormation about Docker containers, see What is Docker.\\n\\nManaging containers across hosts typically re\", \"quires an orchestration tool such as Kubernetes. Configuring and managing orchestration solutions ma\", \"y add additional overhead and complexity to projects. Fortunately, many cloud providers provide orch\", \"estration services through PaaS solutions to simplify the management of containers.\\n\\nThe following i\", \"mage illustrates an example Kubernetes installation. Nodes in the installation address scale out and\", \" failover. They run Docker container instances that are managed by the primary server. The kubelet i\", \"s the client that relays commands from Kubernetes to Docker.\\n\\nKubelet\\n\\nKubernetes Master Server\\n\\nSch\", \"eduler\\n\\nController\\n\\nFor more information about orchestration, see Kubernetes on Azure.\\n\\nFunctions as\", \" a Service (FaaS) is a specialized container service that is similar to serverless. A specific imple\", \"mentation of FaaS, called OpenFaaS, sits on top of containers to provide serverless capabilities. Op\", \"enFaaS provides templates that package all of the container dependencies necessary to run a piece of\", \" code. Using templates simplifies the process of deploying code as a functional unit. OpenFaaS targe\", \"ts architectures that already include containers and orchestrators because it can use the existing i\", \"nfrastructure. Although it provides serverless functionality, it specifically requires you to use Do\", \"cker and an orchestrator.\\n\\n## Serverless\\n\\nA serverless architecture provides a clear separation betw\", \"een the code and its hosting environment. You implement code in a function that is invoked by a trig\", \"ger . After that function exits, all its needed resources may be freed. The trigger might be manual,\", \" a timed process, an HTTP request, or a file upload. The result of the trigger is the execution of c\", \"ode. Although serverless platforms vary, most provide access to pre-defined APIs and bindings to str\", \"eamline tasks such as writing to a database or queueing results.\\n\\nServerless is an architecture that\", \" relies heavily on abstracting away the host environment to focus on code. It can be thought of as l\", \"ess server .\\n\\nContainer solutions provide developers existing build scripts to publish code to serve\", \"rless-ready images. Other implementations use existing PaaS solutions to provide a scalable architec\", \"ture.\\n\\nThe abstraction means the DevOps team doesn't have to provision or manage servers, nor specif\", \"ic containers. The serverless platform hosts code, either as script or packaged executables built wi\", \"th a related SDK, and allocates the necessary resources for the code to scale.\\n\\nThe following diagra\", \"m illustrates four serverless components. An HTTP request causes the Checkout API code to run. The C\", \"heckout API inserts code into a database, and the insert triggers several other functions to run to \", \"perform tasks like computing tasks and fulfilling the order.\\n\\nHTTP Trigger\\n\\nThe advantages of server\", \"less include:\\n\\n- High density. Many instances of the same serverless code can run on the same host c\", \"ompared to containers or virtual machines. The instances scale across multiple hosts addressing scal\", \"e out and resiliency.\\n- Micro-billing. Most serverless providers bill based on serverless executions\", \", enabling massive cost savings in certain scenarios.\\n- Instant scale. Serverless can scale to match\", \" workloads automatically and quickly.\\n- Faster time to market. Developers focus on code and deploy d\", \"irectly to the serverless platform. Components can be released independently of each other.\\n\\nServerl\", \"ess is most often discussed in the context of compute, but can also apply to data. For example, Azur\", \"e SQL and Cosmos DB both provide cloud databases that don't require you to configure host machines o\", \"r clusters. This book focuses on serverless compute.\\n\\n## Summary\\n\\nThere's a broad spectrum of availa\", \"ble choices for architecture, including a hybrid approach. Serverless simplifies the approach, manag\", \"ement, and cost of application features at the expense of control and portability. However, many ser\", \"verless platforms do expose configuration to help fine-tune the solution. Good programming practices\", \" can also lead to more portable code and less serverless platform lock-in. The following table illus\", \"trates the architecture approaches side by side. Choose serverless based on your scale needs, whethe\", \"r or not you want to manage the runtime, and how well you can break your workloads into small compon\", \"ents. You'll learn about potential challenges with serverless and other decision points in the next \", \"chapter.\\n\\n|           | IaaS     | PaaS     | Container   | Serverless   |\\n|-----------|----------|-\", \"---------|-------------|--------------|\\n| Scale     | VM       | Instance | App         | Function  \", \"   |\\n| Abstracts | Hardware | Platform | OS Host     | Runtime      |\\n| Unit      | VM       | Proje\", \"ct  | Image       | Code         |\\n\\n|                | IaaS                                         \", \"             | PaaS                          | Container                               | Serverless \", \"             |\\n|----------------|-----------------------------------------------------------|-------\", \"------------------------|-----------------------------------------|-------------------------|\\n| Life\", \"time       | Months                                                    | Days to Months             \", \"   | Minutes to Days                         | Milliseconds to Minutes |\\n| Responsibility | Applicat\", \"ions, dependencies, runtime, and operating system | Applications and dependencies | Applications, de\", \"pendencies, and runtime | Function                |\\n\\n- Scale refers to the unit that is used to scal\", \"e the application\\n- Abstracts refers to the layer that is abstracted by the implementation\\n- Unit re\", \"fers to the scope of what is deployed\\n- Lifetime refers to the typical runtime of a specific instanc\", \"e\\n- Responsibility refers to the overhead to build, deploy, and maintain the application\\n\\nThe next c\", \"hapter will focus on serverless architecture, use cases, and design patterns.\\n\\n## Recommended resour\", \"ces\\n\\n- Azure application architecture guide\\n- Azure Cosmos DB\\n- Azure SQL\\n- N-Tier architecture patt\", \"ern\\n- Kubernetes on Azure\\n- Microservices\\n- Virtual machine N-tier reference architecture\\n- Virtual \", \"machines\\n- What is Docker?\\n- Wingtip Tickets SaaS application\\n\\nFunction Code\\n\\nFunction\\n\\nConfiguratio\", \"n\\n\\n## Serverless architecture\\n\\nWebJobs Core\\n\\nThere are many approaches to using serverless architect\", \"ures. This chapter explores examples of common architectures that integrate serverless. It also cove\", \"rs concerns that may pose additional challenges or require extra consideration when implementing ser\", \"verless. Finally, several design examples are provided that illustrate various serverless use cases.\", \"\\n\\nServerless hosts often use an existing container-based or PaaS layer to manage the serverless inst\", \"ances. For example, Azure Functions is based on Azure App Service. The App Service is used to scale \", \"out instances and manage the runtime that executes Azure Functions code. For Windows-based functions\", \", the host runs as PaaS and scales out the .NET runtime. For Linux-based functions, the host leverag\", \"es containers.\\n\\nThe WebJobs Core provides an execution context for the function. The Language Runtim\", \"e runs scripts, executes libraries and hosts the framework for the target language. For example, Nod\", \"e.js is used to run JavaScript functions and the .NET Framework is used to run C# functions. You'll \", \"learn more about language and platform options later in this chapter.\\n\\nSome projects may benefit fro\", \"m taking an 'all -in' approach to serverless. Applications that rely heavily on microservices may im\", \"plement all microservices using serverless technology. The majority of apps are hybrid, following an\", \" N-tier design and using serverless for the components that make sense\\n\\nbecause the components are m\", \"odular and independently scalable. To help make sense of these scenarios, this section walks through\", \" some common architecture examples that use serverless.\\n\\n## Full serverless back end\\n\\nThe full serve\", \"rless back end is ideal for several types of scenarios, especially when building new or 'green field\", \"' applications. An application with a large surface area of APIs may benefit from implementing each \", \"API as a serverless function. Apps that are based on microservices architecture are another example \", \"that could be implemented as a full serverless back end. The microservices communicate over various \", \"protocols with each other. Specific scenarios include:\\n\\n- API-based SaaS products (example: financia\", \"l payments processor).\\n- Message-driven applications (example: device monitoring solution).\\n- Apps f\", \"ocused on integration between services (example: airline booking application).\\n- Processes that run \", \"periodically (example: timer-based database clean-up).\\n- Apps focused on data transformation (exampl\", \"e: import triggered by file upload).\\n- Extract Transform and Load (ETL) processes.\\n\\nThere are other,\", \" more specific use cases that are covered later in this document.\\n\\n## Monoliths and 'starving the be\", \"ast'\\n\\nA common challenge is migrating an existing monolithic application to the cloud. The least ris\", \"ky approach is to 'lift and shift' entirely onto virtual machines. Many shops prefer to use the migr\", \"ation as an opportunity to modernize their code base. A practical approach to migration is called 's\", \"tarving the beast.' In this scenario, the monolith is migrated 'as is' to start with. Then, selected\", \" services are modernized. In some cases, the signature of the service is identical to the original: \", \"it simply is hosted as a function. Clients are updated to use the new service rather than the monoli\", \"th endpoint. In the interim, steps such as database replication enable microservices to host their o\", \"wn storage even when transactions are still handled by the monolith. Eventually, all clients are mig\", \"rated onto the new services. The monolith is 'starved' (its services no longer called) until all fun\", \"ctionality has been replaced. The combination of serverless and proxies can facilitate much of this \", \"migration.\\n\\nBrowser\\n\\nFunction\\n\\n1\\n\\nFunction\\n\\nTo learn more about this approach, watch the video: Brin\", \"g your app to the cloud with serverless Azure Functions.\\n\\n## Web apps\\n\\nWeb apps are great candidates\", \" for serverless applications. There are two common approaches to web apps today: server-driven, and \", \"client-driven (such as Single Page Application or SPA). Server-driven web apps typically use a middl\", \"eware layer to issue API calls to render the web UI. SPA applications make REST API calls directly f\", \"rom the browser. In both scenarios, serverless can accommodate the middleware or REST API request by\", \" providing the necessary business logic. A common architecture is to stand up a lightweight static w\", \"eb server. The Single Page Application (SPA) serves HTML, CSS, JavaScript, and other browser assets.\", \" The web app then connects to a microservices back end.\\n\\n## Mobile back ends\\n\\nThe event-driven parad\", \"igm of serverless apps makes them ideal as mobile back ends. The mobile device triggers the events a\", \"nd the serverless code executes to satisfy requests. Taking advantage of a serverless model enables \", \"developers to enhance business logic without having to deploy a full application update. The serverl\", \"ess approach also enables teams to share endpoints and work in parallel.\\n\\nMobile developers can buil\", \"d business logic without becoming experts on the server side. Traditionally, mobile apps connected t\", \"o on-premises services. Building the service layer required understanding the server platform and pr\", \"ogramming paradigm. Developers worked with operations to provision servers\\n\\nPhoto taken and\\n\\nWebHook\", \" called and configure them appropriately. Sometimes days or even weeks were spent on building a depl\", \"oyment pipeline. All of these challenges are addressed by serverless.\\n\\nServerless abstracts the serv\", \"er-side dependencies and enables the developer to focus on business logic. For example, a mobile dev\", \"eloper who builds apps using a JavaScript framework can build serverless functions with JavaScript a\", \"s well. The serverless host manages the operating system, a Node.js instance to host the code, packa\", \"ge dependencies, and more. The developer is provided a simple set of inputs and a standard template \", \"for outputs. They then can focus on building and testing the business logic. They're therefore able \", \"to use existing skills to build the back -end logic for the mobile app without having to learn new p\", \"latforms or become a 'server -side developer.'\\n\\nMost cloud providers offer mobile-based serverless p\", \"roducts that simplify the entire mobile development lifecycle. The products may automate the provisi\", \"oning of databases to persist data, handle DevOps concerns, provide cloud-based builds and testing f\", \"rameworks and the ability to script business processes using the developer's preferred language. Fol\", \"lowing a mobile -centric serverless approach can streamline the process. Serverless removes the trem\", \"endous overhead of provisioning, configuring, and maintaining servers for the mobile back end.\\n\\n## I\", \"nternet of Things (IoT)\\n\\nIoT refers to physical objects that are networked together. They're sometim\", \"es referred to as 'connected devices' or 'smart devices.' Everything from cars and vending machines \", \"may be connected and send information ranging from inventory to sensor data such as temperature and \", \"humidity. In the enterprise, IoT provides business process improvements through monitoring and autom\", \"ation. IoT data may be used to regulate the climate in a large warehouse or track inventory through \", \"the supply chain. IoT can sense chemical spills and call the fire department when smoke is detected.\", \"\\n\\nThe sheer volume of devices and information often dictates an event-driven architecture to route a\", \"nd process messages. Serverless is an ideal solution for several reasons:\\n\\n- Enables scale as the vo\", \"lume of devices and data increases.\\n- Accommodates adding new endpoints to support new devices and s\", \"ensors.\\n- Facilitates independent versioning so developers can update the business logic for a speci\", \"fic device without having to deploy the entire system.\\n- Resiliency and less downtime.\\n\\nThe pervasiv\", \"eness of IoT has resulted in several serverless products that focus specifically on IoT concerns, su\", \"ch as Azure IoT Hub. Serverless automates tasks such as device registration, policy enforcement, tra\", \"cking, and even deployment of code to devices at the edge . The edge refers to devices like sensors \", \"and actuators that are connected to, but not an active part of, the Internet.\\n\\n## Serverless archite\", \"cture considerations\\n\\nAdopting a serverless architecture does come with certain challenges. This sec\", \"tion explores some of the more common considerations to be aware of. All of these challenges have so\", \"lutions. As with all architecture choices, the decision to go serverless should be made only after c\", \"arefully considering the pros and cons. Depending on the needs of your application, you may decide a\", \" serverless implementation isn't the right solution for certain components.\\n\\n## Managing state\\n\\nServ\", \"erless functions, as with microservices in general, are stateless by default. Avoiding state enables\", \" serverless to be ephemeral, to scale out, and to provide resiliency without a central point of fail\", \"ure. In some circumstances, business processes require state. If your process requires state, you ha\", \"ve two options. You can adopt a model other than serverless, or interact with a separate service tha\", \"t provides state. Adding state can complicate the solution and make it harder to scale, and potentia\", \"lly create a single point of failure. Carefully consider whether your function absolutely requires s\", \"tate. If the answer is 'yes,' determine whether it still makes sense to implement it with serverless\", \".\\n\\nThere are several solutions to adopt state without compromising the benefits of serverless. Some \", \"of the more popular solutions include:\\n\\n- Use a temporary data store or distributed cache, like Redi\", \"s\\n- Store state in a database, like SQL or CosmosDB\\n- Handle state through a workflow engine like du\", \"rable functions\\n\\nThe bottom line is that you should be aware of the need for any state management wi\", \"thin processes you're considering to implement with serverless.\\n\\n## Long-running processes\\n\\nMany ben\", \"efits of serverless rely on the processes being ephemeral. Short run times make it easier for the se\", \"rverless provider to free up resources as functions end and share functions across hosts. Most cloud\", \" providers limit the total time your function can run to around 10 minutes. If your process may take\", \" longer, you might consider an alternative implementation.\\n\\nThere are a few exceptions and solutions\", \". One solution may be to break your process into smaller components that individually take less time\", \" to run. If your process runs long because of dependencies, you can also consider an asynchronous wo\", \"rkflow using a solution like durable functions. Durable functions pause and maintain the state of yo\", \"ur process while it's waiting on an external process to finish. Asynchronous handling reduces the ti\", \"me the actual process runs.\\n\\n## Startup time\\n\\nOne potential concern with serverless implementations \", \"is startup time. To conserve resources, many serverless providers create infrastructure 'on demand.'\", \" When a serverless function is triggered after a period of time, the resources to host the function \", \"may need to be created or restarted. In some situations, cold starts may result in delays of several\", \" seconds. Startup time varies across providers and service levels. There are a few approaches to add\", \"ress startup time if it's important to minimize for the success of the app.\\n\\n- Some providers allow \", \"users to pay for service levels that guarantee infrastructure is 'always on'.\\n- Implement a keepaliv\", \"e mechanism (ping the endpoint to keep it 'awake').\\n- Use orchestration like Kubernetes with a conta\", \"inerized function approach (the host is already running so spinning up new instances is extremely fa\", \"st).\\n\\n## Database updates and migrations\\n\\nAn advantage of serverless code is that you can release ne\", \"w functions without having to redeploy the entire application. This advantage can become a disadvant\", \"age when there's a relational database involved. Changes to database schemas are difficult to synchr\", \"onize with serverless updates. Additional challenges are posed when things go wrong and the changes \", \"must be rolled back. Data integrity is one reason that a best practice for microservices and serverl\", \"ess functions is that they own their own data. It is possible to deploy changes as a single unit of \", \"compute and data. The reality is that many legacy systems feature a large back-end database that mus\", \"t be reconciled with the serverless architecture.\\n\\nA popular approach to solve schema versioning is \", \"to never modify existing properties and columns, but instead add new information. For example, consi\", \"der a change to move from a Boolean 'completed' flag for a todo list to a 'completed date.' Instead \", \"of removing the old field, the database change will:\\n\\n1. Add a new 'completed date' field.\\n2. Transf\", \"orm the 'completed' Boolean field to a computed function that evaluates whether the completed date i\", \"s after the current date.\\n3. Add a trigger to set the completed date to the current date when the co\", \"mpleted Boolean is set to true.\\n\\nThe sequence of changes ensures that legacy code continues to run '\", \"as is' while newer serverless functions can take advantage of the new field.\\n\\nFor more information a\", \"bout data in serverless architectures, see Challenges and solutions for distributed data management.\", \"\\n\\n## Scaling\\n\\nIt's a common misconception that serverless means 'no server.' It's in fact 'less serv\", \"er.' The fact there is a backing infrastructure is important to understand when it comes to scaling.\", \" Most serverless platforms provide a set of controls to handle how the infrastructure should scale w\", \"hen event density increases. You can choose from a variety of options, but your strategy may vary de\", \"pending on the\\n\\nfunction. Furthermore, functions are typically run under a related host, so that fun\", \"ctions on the same host have the same scale options. Therefore it is necessary to organize and strat\", \"egize which functions are hosted together based on scale requirements.\\n\\nRules often specify how to s\", \"cale-up (increase the host resources) and scale-out (increase the number of host instances) based on\", \" varying parameters. Triggers for scales may include schedule, request rates, CPU utilization, and m\", \"emory usage. Higher performance often comes at a greater cost. The less expensive, consumption-based\", \" approaches may not scale as quickly when the request rate suddenly increases. There is a tradeoff b\", \"etween paying up front 'insurance cost' versus paying strictly 'as you go' and risking slower respon\", \"ses due to sudden increases in demand.\\n\\n## Monitoring, tracing, and logging\\n\\nAn often overlooked asp\", \"ect of DevOps is monitoring applications once deployed. It's important to have a strategy for monito\", \"ring serverless functions. The biggest challenge is often correlation, or recognizing when a user ca\", \"lls multiple functions as part of the same interaction. Most serverless platforms allow console logg\", \"ing that can be imported into third-party tools. There are also options to automate collection of te\", \"lemetry, generate and track correlation IDs, and monitor specific actions to provide detailed insigh\", \"ts. Azure provides the advanced Application Insights platform for monitoring and analytics.\\n\\n## Inte\", \"r-service dependencies\\n\\nA serverless architecture may include functions that rely on other functions\", \". In fact, it isn't uncommon in a serverless architecture to have multiple services call each other \", \"as part of an interaction or distributed transaction. To avoid strong coupling, it's recommended tha\", \"t services don't reference each other directly. When the endpoint for a service needs to change, dir\", \"ect references could result in major refactoring. A suggested solution is to provide a service disco\", \"very mechanism, such as a registry, that provides the appropriate end point for a request type. Anot\", \"her solution is to leverage messaging services like queues or topics for communication between servi\", \"ces.\\n\\n## Managing failure and providing resiliency\\n\\nIt's also important to consider the circuit-brea\", \"ker pattern : If, for some reason, a service continues to fail, it isn't advisable to call that serv\", \"ice repeatedly. Instead, an alternative service is called or a message returned until the health of \", \"the dependent service is re-established. The serverless architecture needs to take into account the \", \"strategy for resolving and managing inter-service dependencies.\\n\\nTo continue the circuit-breaker pat\", \"tern, services need to be fault tolerant and resilient. Fault tolerance refers to the ability of you\", \"r application to continue running even after unexpected exceptions or invalid states are encountered\", \". Fault tolerance is typically a function of the code itself and how it's written to handle exceptio\", \"ns. Resiliency refers to how capable the app is at recovering from failures. Resiliency is often man\", \"aged by the serverless platform. The platform should be able to spin up a new serverless function in\", \"stance when the existing one fails. The platform should also be intelligent enough to stop spinning \", \"up new instances when every new instance fails.\\n\\nEvery 15 minutes\\n\\nFor more information, see Impleme\", \"nting the Circuit Breaker pattern.\\n\\n## Versioning and green/blue deployments\\n\\nA major benefit of ser\", \"verless is the ability to upgrade a specific function without having to redeploy the entire applicat\", \"ion. For upgrades to be successful, functions must be versioned so that services calling them are ro\", \"uted to the correct version of code. A strategy for deploying new versions is also important. A comm\", \"on approach is to use 'green/blue deployments.' The green deployment is the current function. A new \", \"'blue' version is deployed to production and tested. When testing passes, the green and blue version\", \"s are swapped so the new version comes live. If any issues are encountered, they can be swapped back\", \". Supporting versioning and green/blue deployments requires a combination of authoring the functions\", \" to accommodate version changes and working with the serverless platform to handle deployments.\\n\\n## \", \"Serverless design examples\\n\\nThere are many design patterns that exist for serverless. This section c\", \"aptures some common scenarios that use serverless. What all of the examples have in common is the fu\", \"ndamental combination of an event trigger and business logic.\\n\\n## Scheduling\\n\\nScheduling tasks is a \", \"common function. The following diagram shows a legacy database that doesn't have appropriate integri\", \"ty checks. The database must be scrubbed periodically. The serverless function finds invalid data an\", \"d cleans it. The trigger is a timer that runs the code on a schedule.\\n\\n## Command and Query Responsi\", \"bility Segregation (CQRS)\\n\\nCommand and Query Responsibility Segregation (CQRS) is a pattern that pro\", \"vides different interfaces for reading (or querying) data and operations that modify data. It addres\", \"ses several common problems. In traditional Create Read Update Delete (CRUD) based systems, conflict\", \"s can arise from high volume of both reads and writes to the same data store. Locking may frequently\", \" occur and dramatically slow down reads. Often, data is presented as a composite of several domain o\", \"bjects and read operations must combine data from different entities.\\n\\nUsing CQRS, a read might invo\", \"lve a special 'flattened' entity that models data the way it's consumed. The read is handled differe\", \"ntly than how it's stored. For example, although the database may store a contact as a header record\", \" with a child address record, the read could involve an entity with both\\n\\nQuery\\n\\n&gt;\\n\\nheader and ad\", \"dress properties. There are myriad approaches to creating the read model. It might be materialized f\", \"rom views. Update operations could be encapsulated as isolated events that then trigger updates to t\", \"wo different models. Separate models exist for reading and writing.\\n\\nServerless can accommodate the \", \"CQRS pattern by providing the segregated endpoints. One serverless function accommodates queries or \", \"reads, and a different serverless function or set of functions handles update operations. A serverle\", \"ss function may also be responsible for keeping the read model up-todate, and can be triggered by th\", \"e database's change feed. Front-end development is simplified to connecting to the necessary endpoin\", \"ts. Processing of events is handled on the back end. This model also scales well for large projects \", \"because different teams may work on different operations.\\n\\n## Event-based processing\\n\\nIn message-bas\", \"ed systems, events are often collected in queues or publisher/subscriber topics to be acted upon. Th\", \"ese events can trigger serverless functions to execute a piece of business logic. An example of even\", \"t-based processing is eventsourced systems. An 'event' is raised to mark a task as complete. A serve\", \"rless function triggered by the event updates the appropriate database document. A second serverless\", \" function may use the event to update the read model for the system. Azure Event Grid provides a way\", \" to integrate events with functions as subscribers.\\n\\nEvents are informational messages. For more inf\", \"ormation, see Event Sourcing pattern.\\n\\n## File triggers and transformations\\n\\nExtract, Transform, and\", \" Load (ETL) is a common business function. Serverless is a great solution for ETL because it allows \", \"code to be triggered as part of a pipeline. Individual code components can address various aspects. \", \"One serverless function may download the file, another applies the transformation, and another loads\", \" the data. The code can be tested and deployed independently, making it easier to maintain and scale\", \" where needed.\\n\\nFlat Table Read\\n\\nFTP Download\\n\\nManager Function\\n\\nSingle Folder\\n\\nFTP\\n\\nAbnormal behavi\", \"or\\n\\nIn the diagram, 'cool storage' provides data that is parsed in Azure Stream Analytics. Any issue\", \"s encountered in the data stream trigger an Azure Function to address the anomaly.\\n\\n## Asynchronous \", \"background processing and messaging\\n\\nAsynchronous messaging and background processing allow applicat\", \"ions to kick off processes without having to wait. An example of asynchronous processing is an OCR a\", \"pp. An image is submitted and queued for processing. Scanning the image to extract text may take tim\", \"e, and once it's finished a notification is sent. Serverless can handle both the invocation and the \", \"result in this scenario.\\n\\n## Web apps and APIs\\n\\nA popular scenario for serverless is N-tier applicat\", \"ions, most commonly ones where the UI layer is a web app. The popularity of Single Page Applications\", \" (SPA) has surged recently. SPA apps render a single page, then rely on API calls and the returned d\", \"ata to dynamically render new UI without reloading a full page. Client-side rendering provides a muc\", \"h faster, more responsive application to the end user.\\n\\nServerless endpoints triggered by HTTP calls\", \" can be used to handle the API requests. For example, an ad services company may call a serverless f\", \"unction with user profile information to request custom advertising. The serverless function returns\", \" the custom ad and the web page renders it.\\n\\n10'\\n\\n01\\n\\nLoaded web page calls WebHook\\n\\nFile added to\\n\\n\", \"Blob Storage\\n\\n## Data pipeline\\n\\nServerless functions can be used to facilitate a data pipeline. In t\", \"his example, a file triggers a function to translate data in a CSV file to data rows in a table. The\", \" organized table allows a Power BI dashboard to present analytics to the end user.\\n\\n## Stream proces\", \"sing\\n\\nDevices and sensors often generate streams of data that must be processed in real time. There \", \"are a number of technologies that can capture messages and streams from Event Hubs and IoT Hub to Se\", \"rvice Bus. Regardless of transport, serverless is an ideal mechanism for processing the messages and\", \" streams of data as they come in. Serverless can scale quickly to meet the demand of large volumes o\", \"f data. The serverless code can apply business logic to parse the data and output in a structured fo\", \"rmat for action and analytics.\\n\\n1. ..\\n\\nMillions of devices feed into Stream Analytics\\n\\nFunction app \", \"B\\n\\nSQL\\n\\n\\u2192 /products\\n\\n## API gateway\\n\\n\\u2192 /orders\\n\\nFunction2\\n\\nFunction3\\n\\nAn API gateway provides a sing\", \"le point of entry for clients and then intelligently routes requests to backend services. It's usefu\", \"l to manage large sets of services. It can also handle versioning and simplify development by easily\", \" connecting clients to disparate environments. Serverless can handle back-end scaling of individual \", \"microservices while presenting a single front end via an API gateway.\\n\\n## Recommended resources\\n\\n- A\", \"zure Event Grid\\n- Azure IoT Hub\\n- Challenges and solutions for distributed data management\\n- Designi\", \"ng microservices: identifying microservice boundaries\\n- Event Hubs\\n- Event Sourcing pattern\\n- Implem\", \"enting the Circuit Breaker pattern\\n- IoT Hub\\n- Service Bus\\n- Working with the change feed support in\", \" Azure Cosmos DB\\n\\nEvent Grid\\n\\n3\\n\\n{02}\\n\\nPlatform\\n\\nLogic Apps\\n\\n&lt;5&gt;\\n\\nCHAPTER\\n\\nFunctions\\n\\n## Azure\", \" serverless platform\\n\\nThe Azure serverless platform includes Azure Functions, Logic Apps, and Event \", \"Grid. These services work together and connect with myriad other resources. The serverless platform \", \"works with everything from databases and storage to analytics and machine learning/artificial intell\", \"igence.\\n\\nYou can also use Application Insights, a serverless platform for capturing diagnostic trace\", \"s and telemetry. Application Insights are available to applications of all types (desktop, mobile, o\", \"r web) as well as serverless implementations. The platform is visualized in the following diagram:\\n\\n\", \"This chapter breaks down the fundamentals of each component.\\n\\n## Azure Functions\\n\\nAzure Functions pr\", \"ovide a serverless compute experience. A function is invoked by a trigger (such as access to an HTTP\", \" endpoint or a timer) and executes a block of code or business logic. Functions also support special\", \"ized bindings that connect to resources like storage and queues.\\n\\nDatabase\\n\\nThe current runtime vers\", \"ion 4.0 supports cross-platform .NET 7.0 applications. Additional languages besides C# such as JavaS\", \"cript, F#, and Java are supported. Functions created in the portal provide a rich scripting syntax. \", \"Functions created as standalone projects can be deployed with full platform support and capabilities\", \".\\n\\nFor more information, see Azure Functions documentation.\\n\\n## Programming language support\\n\\nThe fo\", \"llowing languages are all supported in general availability (GA).\\n\\n| Language   | Supported runtimes\", \" for 4.x        |\\n|------------|-----------------------------------|\\n| C#         | .NET 6.0, 7.0, .\", \"NET Framework 4.8 |\\n| JavaScript | Node 14, 16, 18                   |\\n| F#         | .NET 6.0, 7.0 \", \"                    |\\n| Java       | Java 8, 11, 17                    |\\n| Python     | Python 3.7, \", \"3.8, 3.9, 3.10        |\\n| TypeScript | Node 14, 16, 18 (via JavaScript)  |\\n| PowerShell | PowerShell\", \" Core 7.2               |\\n\\nFor more information on other runtime versions, see Supported languages.\\n\", \"\\n## App service plans\\n\\nFunctions are backed by an app service plan . The plan defines the resources \", \"used by the functions app. You can assign plans to a region, determine the size and number of virtua\", \"l machines that will be used, and pick a pricing tier. For a true serverless approach, function apps\", \" may use the consumption plan. The consumption plan will scale the back end automatically based on l\", \"oad.\\n\\nAnother hosting option for function apps is the Premium plan . This plan provides an 'always o\", \"n' instance to avoid cold start, supports advanced features like VNet connectivity, and runs on prem\", \"ium hardware.\\n\\nFor more information, see App service plans.\\n\\n## Create your first function\\n\\nThere ar\", \"e three common ways you can create function apps.\\n\\n- Script functions in the portal.\\n- Create the ne\", \"cessary resources using the Azure CLI.\\n- Build functions locally using your favorite IDE and publish\", \" them to Azure.\\n\\nFor more information on creating a scripted function in the portal, see Create your\", \" first function in the Azure portal.\\n\\nTo build from the Azure CLI, see Create your first function us\", \"ing the Azure CLI.\\n\\nTo create a function from Visual Studio, see Create your first function using Vi\", \"sual Studio.\\n\\n## Understand triggers and bindings\\n\\nFunctions are invoked by a trigger and can have e\", \"xactly one. In addition to invoking the function, certain triggers also serve as bindings. You may a\", \"lso define multiple bindings in addition to the trigger. Bindings provide a declarative way to conne\", \"ct data to your code. They can be passed in (input) or receive data (output). Triggers and bindings \", \"make functions easy to work with. Bindings remove the overhead of manually creating database or file\", \" system connections. All of the information needed for the bindings is contained in a special functi\", \"ons.json file for scripts or declared with attributes in code.\\n\\nSome common triggers include:\\n\\n- Blo\", \"b Storage: invoke your function when a file or folder is uploaded or changed in storage.\\n- HTTP: inv\", \"oke your function like a REST API.\\n- Queue: invoke your function when items exist in a queue.\\n- Time\", \"r: invoke your function on a regular cadence.\\n\\nExamples of bindings include:\\n\\n- CosmosDB: easily con\", \"nect to the database to load or save files.\\n- Table Storage: work with key/value storage from your f\", \"unction app.\\n- Queue Storage: easily retrieve items from a queue, or place new items on the queue.\\n\\n\", \"The following example functions.json file defines a trigger and a binding:\\n\\n```\\n{ \\\"bindings\\\": [ { \\\"n\", \"ame\\\": \\\"myBlob\\\", \\\"type\\\": \\\"blobTrigger\\\", \\\"direction\\\": \\\"in\\\", \\\"path\\\": \\\"images/{name}\\\", \\\"connection\\\": \\\"Az\", \"ureWebJobsStorage\\\" }, { \\\"name\\\": \\\"$return\\\", \\\"type\\\": \\\"queue\\\", \\\"direction\\\": \\\"out\\\", \\\"queueName\\\": \\\"images\", \"\\\", \\\"connection\\\": \\\"AzureWebJobsStorage\\\" } ], \\\"disabled\\\": false }\\n```\\n\\nIn this example, the function i\", \"s triggered by a change to blob storage in the images container. The information for the file is pas\", \"sed in, so the trigger also acts as a binding. Another binding exists to put information onto a queu\", \"e named images .\\n\\nHere is the C# script for the function:\\n\\n```\\npublic static string Run(Stream myBlo\", \"b, string name, TraceWriter log) { log.Info($\\\"C# Blob trigger function Processed blob\\\\n Name:{name} \", \"\\\\n Size: {myBlob.Length} Bytes\\\"); return name; }\\n```\\n\\nThe example is a simple function that takes th\", \"e name of the file that was modified or uploaded to blob storage, and places it on a queue for later\", \" processing.\\n\\nFor a full list of triggers and bindings, see Azure Functions triggers and bindings co\", \"ncepts.\\n\\n## Telemetry with Application Insights\\n\\nApplication Insights is a serverless diagnostics pl\", \"atform that enables developers to detect, triage, and diagnose issues in web apps, mobile apps, desk\", \"top apps, and microservices. You can turn on Application Insights for function apps simply by flippi\", \"ng a switch in the portal. Application Insights provides all of these capabilities without you havin\", \"g to configure a server or set up your own database. All of Application Insights' capabilities are p\", \"rovided as a service that automatically integrates with your apps.\\n\\nAdding Application Insights to e\", \"xisting apps is as easy as adding an instrumentation key to your application's settings. With Applic\", \"ation Insights you can:\\n\\n- Create custom charts and alerts based on metrics such as number of functi\", \"on invocations, the time it takes to run a function, and exceptions\\n- Analyze failures and server ex\", \"ceptions\\n- Drill into performance by operation and measure the time it takes to call third-party dep\", \"endencies\\n- Monitor CPU usage, memory, and rates across all servers that host your function apps\\n- V\", \"iew a live stream of metrics including request count and latency for your function apps\\n- Use Analyt\", \"ics to search, query, and create custom charts over your function data\\n\\n=\\n\\nfunctionapp0915 - Metrics\", \" Explorer\\n\\nApplication Insights\\n\\nO Search (Ctri+/)\\n\\n@ Overview\\n\\n\\u2022 Activity log iM Access control (IA\", \"M)\\n\\nTags\\n\\nINVESTIGATE\\n\\n\\u2022 Application map\\n\\n@ Smart Detection\\n\\n1- Live Metrics Stream i Metrics Explor\", \"er\\n\\nP Search\\n\\nAvailability\\n\\nFailures\\n\\nPerformance\\n\\nServers\\n\\nBrowser\\n\\nUSAGE (PREVIEW)\\n\\nUsers\\n\\n+ Add c\", \"hart\\n\\n\\u2022 Time range\\n\\nY Filters\\n\\n\\u00a9 Refresh\\n\\nAlert rules\\n\\n* \\u00d7\\n\\n\\u2022\\u2022\\u2022 More\\n\\n# *\\n\\nIn addition to builtin te\", \"lemetry, it's also possible to generate custom telemetry. The following code snippet creates a custo\", \"m telemetry client using the instrumentation key set for the function app:\\n\\n```\\npublic static Teleme\", \"tryClient telemetry = new TelemetryClient() { InstrumentationKey = Environment.GetEnvironmentVariabl\", \"e(\\\"APPINSIGHTS_INSTRUMENTATIONKEY\\\") };\\n```\\n\\nThe following code measures how long it takes to insert \", \"a new row into an Azure Table Storage instance:\\n\\n```\\nvar startTime = DateTime.UtcNow; var timer = Sy\", \"stem.Diagnostics.Stopwatch.StartNew(); await tableClient.AddEntityAsync(entry); telemetry.TrackDepen\", \"dency(\\\"AzureTableStorageInsert\\\", \\\"Insert\\\", startTime, timer.Elapsed, true );\\n```\\n\\nThe resulting perf\", \"ormance graph is shown:\\n\\nOperations\\n\\nDependencies\\n\\nDependency response time\\n\\n100 ms\\n\\n50 ms\\n\\n0.0ms\\n\\nD\", \"ependency count\\n\\n12 PM\\n\\nSelect operation\\n\\nDEPENDENCY NAME\\n\\nOverall\\n\\nOther: AzureTableStoragelnsert\\n\\n\", \"Other: Azure TableStorage\\n\\nOther: Azure TableStorageUpdate\\n\\nView in Analytics\\n\\nFeedback\\n\\nOther: Azur\", \"e TableStorageinsert\\n\\nDistribution of durations: zoom into a range\\n\\n* Profiler\\n\\nScale\\n\\nHIII\\n\\nThe cus\", \"tom telemetry reveals the average time to insert a new row is 32.6 milliseconds.\\n\\nApplication Insigh\", \"ts provides a powerful, convenient way to log detailed telemetry about your serverless applications.\", \" You have full control over the level of tracing and logging that is provided. You can track custom \", \"statistics such as events, dependencies, and page view. Finally, the powerful analytics enable you t\", \"o write queries that ask important questions and generate charts and advanced insights.\\n\\nFor more in\", \"formation, see Monitor Azure Functions.\\n\\n## Azure Logic Apps\\n\\nAzure Logic Apps provides a serverless\", \" engine to build automated workflows to integrate apps and data between cloud services and on-premis\", \"es systems. You build workflows using a visual designer. You can trigger workflows based on events o\", \"r timers and leverage connectors to integration applications and facilitate business-to-business (B2\", \"B) communication. Logic Apps integrates seamlessly with Azure Functions.\\n\\nLogic Apps can do more tha\", \"n just connect your cloud services (like functions) with cloud resources (like queues and databases)\", \". You can also orchestrate on-premises workflows with the on-premises gateway. For example, you can \", \"use the Logic App to trigger an on-premises SQL stored procedure in response to a cloud-based event \", \"or conditional logic in your workflow. Learn more about Connecting to on-premises data sources with \", \"Azure On-premises Data Gateway.\\n\\n08:30\\n\\n03 PM\\n\\nAvg\\n\\n50\\u2122H\\n\\n95\\u2122H\\n\\n99\\u2122H\\n\\nRefresh\\n\\nStart with a common t\", \"rigger\\n\\nPick from one of the most commonly used triggers, then orchestrate any number of actions usi\", \"ng the rich collection of connectors\\n\\nAzure Functions\\n\\nWhen a message is received in a Service\\n\\nBus \", \"queue\\n\\nService bus\\n\\nRecurrence\\n\\n9S Cognitive services\\n\\n/ Machine learning\\n\\n5 &gt; SharePoint\\n\\nLike A\", \"zure Functions, you kick off Logic App workflows with a trigger. There are many triggers for you to \", \"choose from. The following capture shows just a few of the more popular ones out of hundreds that ar\", \"e available.\\n\\nOnce the app is triggered, you can use the visual designer to build out steps, loops, \", \"conditions, and actions. Any data ingested in a previous step is available for you to use in subsequ\", \"ent steps. The following workflow loads URLs from a CosmosDB database. It finds the ones with a host\", \" of t.co then searches for them on Twitter. If it finds corresponding tweets, it updates the documen\", \"ts with the related tweets by calling a function.\\n\\nWhen a HTTP\\n\\nrequest is received\\n\\nSQL\\n\\nWhen a new\", \" tweet is posted\\n\\nWhen a Event Grid event occurs\\n\\n\\u2022 Office 365\\n\\nIf true\\n\\nFor each\\n\\n\\\"Select an output\", \" from previous steps\\n\\nScope\\n\\n{x}\\n\\n{x}\\n\\nRecurrence\\n\\nInitialize variable\\n\\nInitialize variable 2\\n\\nI Add\", \" anaction II Add a condition\\n\\nThe Logic Apps dashboard shows the history of running your workflows a\", \"nd whether each run completed successfully or not. You can navigate into any given run and inspect t\", \"he data used by each step for troubleshooting. Logic Apps also provides existing templates you can e\", \"dit and are well suited for complex enterprise workflows.\\n\\nTo learn more, see Azure Logic Apps.\\n\\n## \", \"Event Grid\\n\\nAzure Event Grid provides serverless infrastructure for event-based applications. You ca\", \"n publish to Event Grid from any source and consume messages from any platform. Event Grid also has \", \"built-in support for events from Azure resources to streamline integration with your applications. F\", \"or example, you can subscribe to blob storage events to notify your app when a file is uploaded. You\", \"r application can then publish a custom event grid message that is consumed by other cloud or on-pre\", \"mises applications. Event Grid was built to reliably handle massive scale. You get the benefits of p\", \"ublishing and subscribing to messages without the overhead of setting up the necessary infrastructur\", \"e.\\n\\nC: \\\\\\n\\nThe major features of event grid include:\\n\\n- Fully managed event routing.\\n- Near real-time\", \" event delivery at scale.\\n- Broad coverage both inside and outside of Azure.\\n\\n## Scenarios\\n\\nEvent Gr\", \"id addresses several different scenarios. This section covers three of the most common ones.\\n\\n## Ops\", \" automation\\n\\nEvent Grid can help speed automation and simplify policy enforcement by notifying Azure\", \" Automation when infrastructure is provisioned.\\n\\n## Application integration\\n\\nYou can use Event Grid \", \"to connect your app to other services. Using standard HTTP protocols, even legacy apps can be easily\", \" modified to publish Event Grid messages. Web hooks are available for other services and platforms t\", \"o consume Event Grid messages.\\n\\n## Serverless apps\\n\\nEvent Grid can trigger Azure Functions, Logic Ap\", \"ps, or your own custom code. A major benefit of using Event Grid is that it uses a push mechanism to\", \" send messages when events occur. The push architecture consumes fewer resources and scales better t\", \"han polling mechanisms. Polling must check for updates on a regular interval.\\n\\n## Event Grid vs. oth\", \"er Azure messaging services\\n\\nAzure provides several messaging services, including Event Hubs and Ser\", \"vice Bus. Each is designed to address a specific set of use cases. The following diagram provides a \", \"high-level overview of the differences between the services.\\n\\nEvent Hubs\\n\\n\\u2022 \\\"Point in time\\\" data\\n\\n\\u2022 \", \"Fast pull\\n\\n\\u2022 Replay / strict ordering\\n\\n\\u2022 Big data streams\\n\\nFor a more in-depth comparison, see Compa\", \"re messaging services.\\n\\n## Performance targets\\n\\nUsing Event Grid you can take advantage of the follo\", \"wing performance guarantees:\\n\\n- Subsecond end-to-end latency in the 99th percentile.\\n- 99.99% availa\", \"bility.\\n- 10 million events per second per region.\\n- 100 million subscriptions per region.\\n- 50-ms p\", \"ublisher latency.\\n- 24-hour retry with exponential back-off for guaranteed delivery in the 1-day win\", \"dow.\\n- Transparent regional failover.\\n\\n## Event Grid schema\\n\\nEvent Grid uses a standard schema to wr\", \"ap custom events. The schema is like an envelope that wraps your custom data element. Here is an exa\", \"mple Event Grid message:\\n\\n```\\n[{ \\\"id\\\": \\\"03e24f21-a955-43cc-8921-1f61a6081ce0\\\", \\\"eventType\\\": \\\"myCusto\", \"mEvent\\\", \\\"subject\\\": \\\"foo/bar/12\\\", \\\"eventTime\\\": \\\"2018-09-22T10:36:01+00:00\\\", \\\"data\\\": { \\\"favoriteColor\", \"\\\": \\\"blue\\\", \\\"favoriteAnimal\\\": \\\"panther\\\", \\\"favoritePlanet\\\": \\\"Jupiter\\\" }, \\\"dataVersion\\\": \\\"1.0\\\" }]\\n```\\n\\n\", \"Everything about the message is standard except the data property. You can inspect the message and u\", \"se the eventType and dataVersion to de-serialize the custom portion of the payload.\\n\\n## Azure resour\", \"ces\\n\\nA major benefit of using Event Grid is the automatic messages produced by Azure. In Azure, reso\", \"urces automatically publish to a topic that allows you to subscribe for various events. The followin\", \"g table lists the resource types, message types, and events that are available automatically.\\n\\n| Azu\", \"re resource     | Event type                                | Description                           \", \"                                                                          |\\n|--------------------|--\", \"-----------------------------------------|----------------------------------------------------------\", \"-------------------------------------------------------|\\n| Azure subscription | Microsoft.Resources.\", \"ResourceWriteSuccess  | Raised when a resource create or update operation succeeds.                 \", \"                                    |\\n|                    | Microsoft.Resources.ResourceWriteFailur\", \"e  | Raised when a resource create or update operation fails.                                       \", \"                 |\\n|                    | Microsoft.Resources.ResourceWriteCancel   | Raised when a \", \"resource create or update operation is canceled.                                                  |\\n\", \"|                    | Microsoft.Resources.ResourceDeleteSuccess | Raised when a resource delete ope\", \"ration succeeds.                                                               |\\n|                  \", \"  | Microsoft.Resources.ResourceDeleteFailure | Raised when a resource delete operation fails.      \", \"                                                            |\\n|                    | Microsoft.Resou\", \"rces.ResourceDeleteCancel  | Raised when a resource delete operation is canceled. This event happens\", \" when a template deployment is canceled. |\\n| Blob storage       | Microsoft.Storage.BlobCreated     \", \"        | Raised when a blob is created.                                                            \", \"                      |\\n|                    | Microsoft.Storage.BlobDeleted             | Raised wh\", \"en a blob is deleted.                                                                               \", \"   |\\n| Event hubs         | Microsoft.EventHub.CaptureFileCreated     | Raised when a capture file i\", \"s created.                                                                          |\\n| IoT Hub     \", \"       | Microsoft.Devices.DeviceCreated           | Published when a device is registered to an IoT\", \" hub.                                                            |\\n|                    | Microsoft.\", \"Devices.DeviceDeleted           | Published when a device is deleted from an IoT hub.               \", \"                                              |\\n| Resource groups    | Microsoft.Resources.ResourceW\", \"riteSuccess  | Raised when a resource create or update operation succeeds.                          \", \"                           |\\n|                    | Microsoft.Resources.ResourceWriteFailure  | Rais\", \"ed when a resource create or update operation fails.                                                \", \"        |\\n|                    | Microsoft.Resources.ResourceWriteCancel   | Raised when a resource \", \"create or update operation is canceled.                                                  |\\n|        \", \"            | Microsoft.Resources.ResourceDeleteSuccess | Raised when a resource delete operation su\", \"cceeds.                                                               |\\n|                    | Micro\", \"soft.Resources.ResourceDeleteFailure | Raised when a resource delete operation fails.               \", \"                                                   |\\n\\n| Azure resource   | Event type               \", \"                | Description                                                                       \", \"                              |\\n|------------------|------------------------------------------|-----\", \"----------------------------------------------------------------------------------------------------\", \"--------|\\n|                  | Microsoft.Resources.ResourceDeleteCancel | Raised when a resource del\", \"ete operation is canceled. This event happens when a template deployment is canceled. |\\n\\nFor more in\", \"formation, see Azure Event Grid event schema.\\n\\nYou can access Event Grid from any type of applicatio\", \"n, even one that runs on-premises.\\n\\n## Conclusion\\n\\nIn this chapter you learned about the Azure serve\", \"rless platform that is composed of Azure Functions, Logic Apps, and Event Grid. You can use these re\", \"sources to build an entirely serverless app architecture, or create a hybrid solution that interacts\", \" with other cloud resources and on-premises servers. Combined with a serverless data platform such a\", \"s Azure SQL or CosmosDB, you can build fully managed cloud native applications.\\n\\n## Recommended reso\", \"urces\\n\\n- App service plans\\n- Application Insights\\n- Application Insights Analytics\\n- Azure: Bring yo\", \"ur app to the cloud with serverless Azure Functions\\n- Azure Event Grid\\n- Azure Event Grid event sche\", \"ma\\n- Azure Event Hubs\\n- Azure Functions documentation\\n- Azure Functions triggers and bindings concep\", \"ts\\n- Azure Logic Apps\\n- Azure Service Bus\\n- Azure Table Storage\\n- Connecting to on-premises data sou\", \"rces with Azure On-premises Data Gateway\\n- Create your first function in the Azure portal\\n- Create y\", \"our first function using the Azure CLI\\n- Create your first function using Visual Studio\\n- Functions \", \"supported languages\\n- Monitor Azure Functions\\n\\nCHAPTER\\n\\n4\\n\\n## Durable Azure Functions\\n\\nWhen creating\", \" serverless applications with Azure Functions, your operations will typically be designed to run in \", \"a stateless manner. The reason for this design choice is because as the platform scales, it becomes \", \"difficult to know what servers the code is running on. It also becomes difficult to know how many in\", \"stances are active at any given point. However, there are classes of applications that require the c\", \"urrent state of a process to be known. Consider the process of submitting an order to an online stor\", \"e. The checkout operation might be a workflow that is composed of multiple operations that need to k\", \"now the state of the process. Such information may include the product inventory, if the customer ha\", \"s any credits on their account, and also the results of processing the credit card. These operations\", \" could easily be their own internal workflows or even services from third-party systems.\\n\\nVarious pa\", \"tterns exist today that assist with the coordination of application state between internal and exter\", \"nal systems. It's common to come across solutions that rely on centralized queuing systems, distribu\", \"ted key-value stores, or shared databases to manage that state. However, these are all additional re\", \"sources that now need to be provisioned and managed. In a serverless environment, your code could be\", \"come cumbersome trying to coordinate with these resources manually. Azure Functions offers an altern\", \"ative for creating stateful functions called Durable Functions.\\n\\nDurable Functions is an extension t\", \"o the Azure Functions runtime that enables the definition of stateful workflows in code. By breaking\", \" down workflows into activities, the Durable Functions extension can manage state, create progress c\", \"heckpoints, and handle the distribution of function calls across servers. In the background, it make\", \"s use of an Azure Storage account to persist execution history, schedule activity functions and retr\", \"ieve responses. Your serverless code should never interact with persisted information in that storag\", \"e account, and is typically not something with which developers need to interact.\\n\\n## Triggering a s\", \"tateful workflow\\n\\nStateful workflows in Durable Functions can be broken down into two intrinsic comp\", \"onents; orchestration and activity triggers. Triggers and bindings are core components used by Azure\", \" Functions to enable your serverless functions to be notified when to start, receive input, and retu\", \"rn results.\\n\\n## Working with the Orchestration client\\n\\nOrchestrations are unique when compared to ot\", \"her styles of triggered operations in Azure Functions. Durable Functions enables the execution of fu\", \"nctions that may take hours or even days to complete. That type of behavior comes with the need to a\", \"ble to check the status of a running orchestration, preemptively terminate, or send notifications of\", \" external events.\\n\\nFor such cases, the Durable Functions extension provides the DurableOrchestration\", \"Client class that allows you to interact with orchestrated functions. You get access to the orchestr\", \"ation client by using the OrchestrationClientAttribute binding. Generally, you would include this at\", \"tribute with another trigger type, such as an HttpTrigger or ServiceBusTrigger . Once the source fun\", \"ction has been triggered, the orchestration client can be used to start an orchestrator function.\\n\\n`\", \"``\\n[FunctionName(\\\"KickOff\\\")] public static async Task<HttpResponseMessage> Run( [HttpTrigger(Authori\", \"zationLevel.Function, \\\"POST\\\")]HttpRequestMessage req, [OrchestrationClient ] DurableOrchestrationCli\", \"ent<orchestrationClient>) { OrderRequestData data = await req.Content.ReadAsAsync<OrderRequestData>(\", \"); string instanceId = await orchestrationClient.StartNewAsync(\\\"PlaceOrder\\\", data); return orchestra\", \"tionClient.CreateCheckStatusResponse(req, instanceId); }\\n```\\n\\n## The orchestrator function\\n\\nAnnotati\", \"ng a function with the OrchestrationTriggerAttribute in Azure Functions marks that function as an or\", \"chestrator function. It's responsible for managing the various activities that make up your stateful\", \" workflow.\\n\\nOrchestrator functions are unable to make use of bindings other than the OrchestrationTr\", \"iggerAttribute. This attribute can only be used with a parameter type of DurableOrchestrationContext\", \". No other inputs can be used since deserialization of inputs in the function signature isn't suppor\", \"ted. To get inputs provided by the orchestration client, the GetInput&lt;T&gt; method must be used.\\n\", \"\\nAlso, the return types of orchestration functions must be either void, Task, or a JSON serializable\", \" value.\\n\\nError handling code has been left out for brevity\\n\\n```\\n[FunctionName(\\\"PlaceOrder\\\")] public \", \"static async Task<string> PlaceOrder([OrchestrationTrigger] DurableOrchestrationContext context) { O\", \"rderRequestData orderData = context.GetInput<OrderRequestData>(); await context.CallActivityAsync<bo\", \"ol>(\\\"CheckAndReserveInventory\\\", orderData); await context.CallActivityAsync<string>(\\\"ProcessPayment\\\"\", \", orderData); string trackingNumber = await context.CallActivityAsync<string>(\\\"ScheduleShipping\\\", or\", \"derData); await context.CallActivityAsync<string>(\\\"EmailCustomer\\\", trackingNumber); return trackingN\", \"umber; }\\n```\\n\\nMultiple instances of an orchestration can be started and running at the same time. Ca\", \"lling the StartNewAsync method on the DurableOrchestrationClient launches a new instance of the orch\", \"estration. The method returns a Task&lt;string&gt; that completes when the orchestration has started\", \".\\n\\nAn exception of type TimeoutException gets thrown if the orchestration hasn't started within 30 s\", \"econds.\\n\\nThe completed Task&lt;string&gt; from StartNewAsync should contain the unique ID of the orc\", \"hestration instance. This instance ID can be used to invoke operations on that specific orchestratio\", \"n. The orchestration can be queried for the status or sent event notifications.\\n\\n## The activity fun\", \"ctions\\n\\nActivity functions are the discrete operations that get composed together within an orchestr\", \"ation function to create the workflow. Here is where most of actual work would take place. They repr\", \"esent the business logic, long running processes, and the puzzle pieces to a larger solution.\\n\\nThe A\", \"ctivityTriggerAttribute is used to annotate a function parameter of type DurableActivityContext . Us\", \"ing the annotation informs the runtime that the function is intended to be used as an activity funct\", \"ion. Input values to activity functions are retrieved using the GetInput&lt;T&gt; method of the Dura\", \"bleActivityContext parameter.\\n\\nSimilar to orchestration functions, the return types of activity func\", \"tions must be either void, Task, or a JSON serializable value.\\n\\nAny unhandled exceptions that get th\", \"rown within activity functions will get sent up to the calling orchestrator function and presented a\", \"s a TaskFailedException . At this point, the error can be caught and logged in the orchestrator, and\", \" the activity can be retried.\\n\\n```\\n[FunctionName(\\\"CheckAndReserveInventory\\\")] public static bool Che\", \"ckAndReserveInventory([ActivityTrigger] DurableActivityContext context) { OrderRequestData orderData\", \" = context.GetInput<OrderRequestData>(); // Connect to inventory system and try to reserve items ret\", \"urn true ; }\\n```\\n\\n## Recommended resources\\n\\n- Durable Functions\\n- Bindings for Durable Functions\\n- M\", \"anage instances in Durable Functions\\n\\n## Orchestration patterns\\n\\nDurable Functions makes it easier t\", \"o create stateful workflows that are composed of discrete, long running activities in a serverless e\", \"nvironment. Since Durable Functions can track the progress of your workflows and periodically checkp\", \"oints the execution history, it lends itself to implementing some interesting patterns.\\n\\n## Function\", \" chaining\\n\\nIn a typical sequential process, activities need to execute one after the other in a part\", \"icular order. Optionally, the upcoming activity may require some output from the previous function. \", \"This dependency on the ordering of activities creates a function chain of execution.\\n\\nThe benefit of\", \" using Durable Functions to implement this workflow pattern comes from its ability to do checkpointi\", \"ng. If the server crashes, the network times out or some other issue occurs, Durable functions can r\", \"esume from the last known state and continue running your workflow even if it's on another server.\\n\\n\", \"```\\n[FunctionName(\\\"PlaceOrder\\\")] public static async Task<string> PlaceOrder([OrchestrationTrigger] \", \"DurableOrchestrationContext context) { OrderRequestData orderData = context.GetInput<OrderRequestDat\", \"a>(); await context.CallActivityAsync<bool>(\\\"CheckAndReserveInventory\\\", orderData); await context.Ca\", \"llActivityAsync<bool>(\\\"ProcessPayment\\\", orderData); string trackingNumber = await context.CallActivi\", \"tyAsync<string>(\\\"ScheduleShipping\\\", orderData); await context.CallActivityAsync<string>(\\\"EmailCustom\", \"er\\\", trackingNumber); return trackingNumber; }\\n```\\n\\nIn the preceding code sample, the CallActivityAs\", \"ync function is responsible for running a given activity on a virtual machine in the data center. Wh\", \"en the await returns and the underlying Task completes, the execution will be recorded to the histor\", \"y table. The code in the orchestrator function can make use of any of the familiar constructs of the\", \" Task Parallel Library and the async/await keywords.\\n\\nThe following code is a simplified example of \", \"what the ProcessPayment method may look like:\\n\\n```\\n[FunctionName(\\\"ProcessPayment\\\")] public static bo\", \"ol ProcessPayment([ActivityTrigger] DurableActivityContext context) { OrderRequestData orderData = c\", \"ontext.GetInput<OrderRequestData>(); ApplyCoupons(orderData); if (IssuePaymentRequest(orderData)) { \", \"return true ; } return false ; }\\n```\\n\\n## Asynchronous HTTP APIs\\n\\nIn some cases, workflows may contai\", \"n activities that take a relatively long period of time to complete. Imagine a process that kicks of\", \"f the backup of media files into blob storage. Depending on the size and quantity of the media files\", \", this backup process may take hours to complete.\\n\\nIn this scenario, the DurableOrchestrationClient \", \"'s ability to check the status of a running workflow becomes useful. When using an HttpTrigger to st\", \"art a workflow, the CreateCheckStatusResponse method can be used to return an instance of HttpRespon\", \"seMessage . This response provides the client with a URI in the payload that can be used to check th\", \"e status of the running process.\\n\\n```\\n[FunctionName(\\\"OrderWorkflow\\\")] public static async Task<HttpR\", \"esponseMessage> Run( [HttpTrigger(AuthorizationLevel.Function, \\\"POST\\\")]HttpRequestMessage req, [Orch\", \"estrationClient ] DurableOrchestrationClient orchestrationClient) { OrderRequestData data = await re\", \"q.Content.ReadAsAsync<OrderRequestData>(); string instanceId = await orchestrationClient.StartNewAsy\", \"nc(\\\"PlaceOrder\\\", data); return orchestrationClient.CreateCheckStatusResponse(req, instanceId); }\\n```\", \"\\n\\nThe sample result below shows the structure of the response payload.\\n\\n```\\n{ \\\"id\\\": \\\"instanceId\\\", \\\"s\", \"tatusQueryGetUri\\\": \\\"http://host/statusUri\\\", \\\"sendEventPostUri\\\": \\\"http://host/eventUri\\\", \\\"terminatePo\", \"stUri\\\": \\\"http://host/terminateUri\\\" }\\n```\\n\\nUsing your preferred HTTP client, GET requests can be made\", \" to the URI in statusQueryGetUri to inspect the status of the running workflow. The returned status \", \"response should resemble the following code.\\n\\n```\\n{ \\\"runtimeStatus\\\": \\\"Running\\\", \\\"input\\\": { \\\"$type\\\": \", \"\\\"DurableFunctionsDemos.OrderRequestData, DurableFunctionsDemos\\\" }, \\\"output\\\": null , \\\"createdTime\\\": \\\"\", \"2018-01-01T00:22:05Z\\\", \\\"lastUpdatedTime\\\": \\\"2018-01-01T00:22:09Z\\\" }\\n```\\n\\nAs the process continues, th\", \"e status response will change to either Failed or Completed . On successful completion, the output p\", \"roperty in the payload will contain any returned data.\\n\\n## Monitoring\\n\\nFor simple recurring tasks, A\", \"zure Functions provides the TimerTrigger that can be scheduled based on a CRON expression. The timer\", \" works well for simple, short-lived tasks, but there might be scenarios where more flexible scheduli\", \"ng is needed. This scenario is when the monitoring pattern and Durable Functions can help.\\n\\nDurable \", \"Functions allows for flexible scheduling intervals, lifetime management, and the creation of multipl\", \"e monitor processes from a single orchestration function. One use case for this functionality might \", \"be to create watchers for stock price changes that complete once a certain threshold is met.\\n\\n```\\n[F\", \"unctionName(\\\"CheckStockPrice\\\")] public static async Task CheckStockPrice([OrchestrationTrigger] Dura\", \"bleOrchestrationContext context) { StockWatcherInfo stockInfo = context.GetInput<StockWatcherInfo>()\", \"; const int checkIntervalSeconds = 120; StockPrice initialStockPrice = null ; DateTime fireAt; DateT\", \"ime exitTime = context.CurrentUtcDateTime.Add(stockInfo.TimeLimit); while (context.CurrentUtcDateTim\", \"e < exitTime) { StockPrice currentStockPrice = await context.CallActivityAsync<StockPrice>(\\\"GetStock\", \"Price\\\", stockInfo); if (initialStockPrice == null ) { initialStockPrice = currentStockPrice; fireAt \", \"= context.CurrentUtcDateTime.AddSeconds(checkIntervalSeconds); await context.CreateTimer(fireAt, Can\", \"cellationToken.None); continue ; } decimal percentageChange = (initialStockPrice.Price - currentStoc\", \"kPrice.Price) / ((initialStockPrice.Price + currentStockPrice.Price) / 2); if (Math.Abs(percentageCh\", \"ange) >= stockInfo.PercentageChange) { // Change threshold detected await context.CallActivityAsync(\", \"\\\"NotifyStockPercentageChange\\\", currentStockPrice); break ; } // Sleep til next polling interval fire\", \"At = context.CurrentUtcDateTime.AddSeconds(checkIntervalSeconds); await context.CreateTimer(fireAt, \", \"CancellationToken.None); } }\\n```\\n\\nDurableOrchestrationContext 's CreateTimer method sets up the sche\", \"dule for the next invocation of the loop to check for stock price changes. DurableOrchestrationConte\", \"xt also has a CurrentUtcDateTime property to get the current DateTime value in UTC. It's better to u\", \"se this property instead of DateTime.UtcNow because it's easily mocked for testing.\\n\\n## Recommended \", \"resources\\n\\n- Azure Durable Functions\\n- Unit Testing in .NET Core and .NET Standard\\n\\nCHAPTER\\n\\n5\\n\\n## S\", \"erverless business scenarios and use cases\\n\\nThere are many use cases and scenarios for serverless ap\", \"plications. This chapter includes samples that illustrate the different scenarios. The scenarios inc\", \"lude links to related documentation and public source code repositories. The samples in this chapter\", \" enable you to get started on your own building and implementing serverless solutions.\\n\\n## Big data \", \"processing\\n\\nThis example uses serverless to do a map/reduce operation on a big data set. It determin\", \"es the average speed of New York Yellow taxi trips per day in 2017.\\n\\nBig Data Processing: Serverless\", \" MapReduce on Azure\\n\\n## Create serverless applications: hands-on lab\\n\\nLearn how to use functions to \", \"execute server-side logic and build serverless architectures.\\n\\n- Choosing the best Azure service for\", \" your business\\n- Creating Azure Functions\\n- Using triggers\\n- Chaining functions\\n- Long-running workf\", \"lows\\n- Monitoring\\n- Development, testing, and deployment\\n\\nCreate serverless applications\\n\\n## Custome\", \"r reviews\\n\\nThis sample showcases the new Azure Functions tooling for C# Class Libraries in Visual St\", \"udio. Create a website where customers submit product reviews that are stored in Azure storage blobs\", \" and\\n\\nCosmosDB. Add an Azure Function to perform automated moderation of the customer reviews using \", \"Azure Cognitive Services. Use an Azure storage queue to decouple the website from the function.\\n\\nCus\", \"tomer Reviews App with Cognitive Services\\n\\n## File processing and validation\\n\\nThis example parses a \", \"set of CSV files from hypothetical customers. It ensures that all files required for a customer 'bat\", \"ch' are ready, then validates the structure of each file. Different solutions are presented using Az\", \"ure Functions, Logic Apps, and Durable Functions.\\n\\nFile processing and validation using Azure Functi\", \"ons, Logic Apps, and Durable Functions\\n\\n## Game data visualization\\n\\nAn example of how a developer co\", \"uld implement an in-editor data visualization solution for their game. In fact, an Unreal Engine 4 P\", \"lugin and Unity Plugin were developed using this sample as its backend. The service component is gam\", \"e engine agnostic.\\n\\nIn-editor game telemetry visualization\\n\\n## GraphQL\\n\\nCreate a serverless function\", \" that exposes a GraphQL API.\\n\\nServerless functions for GraphQL\\n\\n## Internet of Things (IoT) reliable\", \" edge relay\\n\\nThis sample implements a new communication protocol to enable reliable upstream communi\", \"cation from IoT devices. It automates data gap detection and backfill.\\n\\nIoT Reliable Edge Relay\\n\\n## \", \"Microservices reference architecture\\n\\nA reference architecture that walks you through the decision-m\", \"aking process involved in designing, developing, and delivering the Rideshare by Relecloud applicati\", \"on (a fictitious company). It includes handson instructions for configuring and deploying all of the\", \" architecture's components.\\n\\n## Serverless for mobile\\n\\nAzure Functions are easy to implement and mai\", \"ntain, and accessible through HTTP. They are a great way to implement an API for a mobile applicatio\", \"n. Microsoft offers great cross-platform tools for iOS, Android, and Windows with Xamarin. As such, \", \"Xamarin and Azure Functions are working great together. This article shows how to implement an Azure\", \" Function in the Azure portal or in Visual Studio at first, and build a cross-platform client with X\", \"amarin.Forms running on Android, iOS, and Windows.\\n\\nImplementing a simple Azure Function with a Xama\", \"rin.Forms client\\n\\n## Serverless messaging\\n\\nThis sample shows how to utilize Durable Functions' fan -\", \"out pattern to load an arbitrary number of messages across any number of sessions/partitions. It tar\", \"gets Service Bus, Event Hubs, or Storage Queues. The sample also adds the ability to consume those m\", \"essages with another Azure Function and load the resulting timing data in to another Event Hub. The \", \"data is then ingested into analytics services like Azure Data Explorer.\\n\\nProduce and Consume message\", \"s through Service Bus, Event Hubs, and Storage Queues with Azure Functions\\n\\n## Recommended resources\", \"\\n\\n- Big Data Processing: Serverless MapReduce on Azure\\n- Create serverless applications\\n- Customer R\", \"eviews App with Cognitive Services\\n- File processing and validation using Azure Functions, Logic App\", \"s, and Durable Functions\\n- Implementing a simple Azure Function with a Xamarin.Forms client\\n- In-edi\", \"tor game telemetry visualization\\n- IoT Reliable Edge Relay\\n- Produce and Consume messages through Se\", \"rvice Bus, Event Hubs, and Storage Queues with Azure Functions\\n- Serverless functions for GraphQL\\n- \", \"Serverless Microservices reference architecture\\n\\n## Conclusion\\n\\nThe following key takeaways are the \", \"most important conclusions from this guide.\\n\\nBenefits of using serverless. Serverless solutions prov\", \"ide the important benefit of cost savings because serverless is implemented in a pay-per-use model. \", \"Serverless makes it possible to independently scale, test, and deploy individual components of your \", \"application. Serverless is uniquely suited to implement microservices architectures and integrates f\", \"ully into a DevOps pipeline.\\n\\nCode as a unit of deployment. Serverless abstracts the hardware, OS, a\", \"nd runtime away from the application. Serverless enables focusing on business logic in code as the u\", \"nit of deployment.\\n\\nTriggers and bindings. Serverless eases integration with storage, APIs, and othe\", \"r cloud resources. Azure Functions provides triggers to execute code and bindings to interact with r\", \"esources.\\n\\nMicroservices. The microservices architecture is becoming the preferred approach for dist\", \"ributed and large or complex mission-critical applications that are based on multiple independent su\", \"bsystems in the form of autonomous services. In a microservice-based architecture, the application i\", \"s built as a collection of services that can be developed, tested, versioned, deployed, and scaled i\", \"ndependently. Serverless is an architecture well-suited for building these services.\\n\\nServerless pla\", \"tforms. Serverless isn't just about the code. Platforms that support serverless architectures includ\", \"e serverless workflows and orchestration, serverless messaging and event services, and serverless da\", \"tabases.\\n\\nServerless challenges. Serverless introduces challenges related to distributed application\", \" development, such as fragmented and independent data models, resiliency, versioning, and service di\", \"scovery. Serverless may not be ideally suited to long running processes or components that benefit f\", \"rom tighter coupling.\\n\\nServerless as a tool, not the toolbox. Serverless is not the exclusive soluti\", \"on to application architecture. It is a tool that can be leveraged as part of a hybrid application t\", \"hat may contain traditional tiers, monolith back ends, and containers. Serverless can be used to enh\", \"ance existing solutions and is not an all-or-nothing approach to application development.\\n\\nCHAPTER\\n\\n\", \"6\"]"