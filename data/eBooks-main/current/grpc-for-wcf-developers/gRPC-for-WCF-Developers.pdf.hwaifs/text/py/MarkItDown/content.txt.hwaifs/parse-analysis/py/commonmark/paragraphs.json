[
    "EDITION v7.0 - Updated to ASP.NET Core 7.0",
    "EDITION v7.0 - Updated to ASP.NET Core 7.0",
    "Refer changelog for the book updates and community contributions.",
    "Refer changelog for the book updates and community contributions.",
    "PUBLISHED BY",
    "PUBLISHED BY",
    "Microsoft Developer Division, .NET, and Visual Studio product teams",
    "Microsoft Developer Division, .NET, and Visual Studio product teams",
    "A division of Microsoft Corporation",
    "A division of Microsoft Corporation",
    "One Microsoft Way",
    "One Microsoft Way",
    "Redmond, Washington 98052-6399",
    "Redmond, Washington 98052-6399",
    "Copyright \u00a9 2023 by Microsoft Corporation",
    "Copyright \u00a9 2023 by Microsoft Corporation",
    "All rights reserved. No part of the contents of this book may be reproduced or transmitted in any",
    "All rights reserved. No part of the contents of this book may be reproduced or transmitted in any",
    "This book is provided \u201cas-is\u201d and expresses the author\u2019s views and opinions. The views, opinions and",
    "This book is provided \u201cas-is\u201d and expresses the author\u2019s views and opinions. The views, opinions and",
    "Some examples depicted herein are provided for illustration only and are fictitious. No real association",
    "Some examples depicted herein are provided for illustration only and are fictitious. No real association",
    "Microsoft and the trademarks listed at https://www.microsoft.com on the \u201cTrademarks\u201d webpage are",
    "Microsoft and the trademarks listed at https://www.microsoft.com on the \u201cTrademarks\u201d webpage are",
    "The Docker whale logo is a registered trademark of Docker, Inc. Used by permission.",
    "The Docker whale logo is a registered trademark of Docker, Inc. Used by permission.",
    "All other marks and logos are property of their respective owners.",
    "All other marks and logos are property of their respective owners.",
    "Authors:",
    "Authors:",
    "Mark Rendle - Chief Technical Officer - Visual Recode",
    "Mark Rendle - Chief Technical Officer - Visual Recode",
    "Miranda Steiner - Technical Author",
    "Miranda Steiner - Technical Author",
    "Editor:",
    "Editor:",
    "Maira Wenzel - Sr. Content Developer - Microsoft",
    "Maira Wenzel - Sr. Content Developer - Microsoft",
    "Introduction",
    "Introduction",
    "gRPC is a modern framework for building networked services and distributed applications. Imagine",
    "gRPC is a modern framework for building networked services and distributed applications. Imagine",
    "Who should use this guide",
    "Who should use this guide",
    "This guide was written for developers working in .NET Framework or .NET who have previously used",
    "This guide was written for developers working in .NET Framework or .NET who have previously used",
    "How you can use this guide",
    "How you can use this guide",
    "This is a short introduction to building gRPC Services in ASP.NET Core 7.0, with particular reference to",
    "This is a short introduction to building gRPC Services in ASP.NET Core 7.0, with particular reference to",
    "Feel free to forward this guide to your team to help ensure a common understanding of these",
    "Feel free to forward this guide to your team to help ensure a common understanding of these",
    "References",
    "References",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "gRPC website https://grpc.io",
    "gRPC website https://grpc.io",
    "Choosing between .NET 5 and .NET Framework for server apps",
    "Choosing between .NET 5 and .NET Framework for server apps",
    "Contents",
    "Contents",
    "Introduction to gRPC for WCF developers ........................................................................... 1",
    "Introduction to gRPC for WCF developers ........................................................................... 1",
    "History .......................................................................................................................................................................................... 1",
    "History .......................................................................................................................................................................................... 1",
    "Microservices ............................................................................................................................................................................. 2",
    "Microservices ............................................................................................................................................................................. 2",
    "About this guide ....................................................................................................................................................................... 3",
    "About this guide ....................................................................................................................................................................... 3",
    "Who this guide is for .............................................................................................................................................................. 3",
    "Who this guide is for .............................................................................................................................................................. 3",
    "gRPC overview ......................................................................................................................... 4",
    "gRPC overview ......................................................................................................................... 4",
    "Key principles ............................................................................................................................................................................ 4",
    "Key principles ............................................................................................................................................................................ 4",
    "How gRPC approaches RPC ................................................................................................................................................. 5",
    "How gRPC approaches RPC ................................................................................................................................................. 5",
    "Interface Definition Language ............................................................................................................................................ 6",
    "Interface Definition Language ............................................................................................................................................ 6",
    "Network protocols ................................................................................................................................................................... 7",
    "Network protocols ................................................................................................................................................................... 7",
    "Key features of HTTP/2 ..................................................................................................................................................... 7",
    "Key features of HTTP/2 ..................................................................................................................................................... 7",
    "Why we recommend gRPC for WCF developers ......................................................................................................... 8",
    "Why we recommend gRPC for WCF developers ......................................................................................................... 8",
    "Similarity to WCF ................................................................................................................................................................. 8",
    "Similarity to WCF ................................................................................................................................................................. 8",
    "Benefits of gRPC .................................................................................................................................................................. 8",
    "Benefits of gRPC .................................................................................................................................................................. 8",
    "Comparison with CoreWCF ............................................................................................................................................. 9",
    "Comparison with CoreWCF ............................................................................................................................................. 9",
    "Protocol buffers ..................................................................................................................... 11",
    "Protocol buffers ..................................................................................................................... 11",
    "How Protobuf works ............................................................................................................................................................ 11",
    "How Protobuf works ............................................................................................................................................................ 11",
    "Protobuf messages ............................................................................................................................................................... 11",
    "Protobuf messages ............................................................................................................................................................... 11",
    "Declaring a message ....................................................................................................................................................... 11",
    "Declaring a message ....................................................................................................................................................... 11",
    "Field numbers .................................................................................................................................................................... 12",
    "Field numbers .................................................................................................................................................................... 12",
    "Types ..................................................................................................................................................................................... 13",
    "Types ..................................................................................................................................................................................... 13",
    "The generated code ........................................................................................................................................................ 13",
    "The generated code ........................................................................................................................................................ 13",
    "Protobuf scalar data types ................................................................................................................................................ 13",
    "Protobuf scalar data types ................................................................................................................................................ 13",
    "Other .NET primitive types ........................................................................................................................................... 14",
    "Other .NET primitive types ........................................................................................................................................... 14",
    "Decimals ............................................................................................................................................................................... 16",
    "Decimals ............................................................................................................................................................................... 16",
    "Protobuf nested types ........................................................................................................................................................ 17",
    "Protobuf nested types ........................................................................................................................................................ 17",
    "Repeated fields for lists and arrays ................................................................................................................................ 18",
    "Repeated fields for lists and arrays ................................................................................................................................ 18",
    "Protobuf reserved fields ..................................................................................................................................................... 18",
    "Protobuf reserved fields ..................................................................................................................................................... 18",
    "i",
    "i",
    "Contents",
    "Contents",
    "Protobuf Any and Oneof fields for variant types ..................................................................................................... 19",
    "Protobuf Any and Oneof fields for variant types ..................................................................................................... 19",
    "Any ......................................................................................................................................................................................... 19",
    "Any ......................................................................................................................................................................................... 19",
    "Oneof .................................................................................................................................................................................... 20",
    "Oneof .................................................................................................................................................................................... 20",
    "Protobuf enumerations ...................................................................................................................................................... 21",
    "Protobuf enumerations ...................................................................................................................................................... 21",
    "Protobuf maps for dictionaries ........................................................................................................................................ 22",
    "Protobuf maps for dictionaries ........................................................................................................................................ 22",
    "Using MapField properties in code ........................................................................................................................... 22",
    "Using MapField properties in code ........................................................................................................................... 22",
    "Further reading ................................................................................................................................................................. 23",
    "Further reading ................................................................................................................................................................. 23",
    "Comparing WCF to gRPC ...................................................................................................... 24",
    "Comparing WCF to gRPC ...................................................................................................... 24",
    "gRPC example ........................................................................................................................................................................ 24",
    "gRPC example ........................................................................................................................................................................ 24",
    "WCF endpoints and gRPC methods .............................................................................................................................. 25",
    "WCF endpoints and gRPC methods .............................................................................................................................. 25",
    "OperationContract properties ..................................................................................................................................... 25",
    "OperationContract properties ..................................................................................................................................... 25",
    "WCF bindings and transports .......................................................................................................................................... 26",
    "WCF bindings and transports .......................................................................................................................................... 26",
    "NetTCP .................................................................................................................................................................................. 26",
    "NetTCP .................................................................................................................................................................................. 26",
    "HTTP ...................................................................................................................................................................................... 27",
    "HTTP ...................................................................................................................................................................................... 27",
    "Named pipes ...................................................................................................................................................................... 27",
    "Named pipes ...................................................................................................................................................................... 27",
    "MSMQ ................................................................................................................................................................................... 27",
    "MSMQ ................................................................................................................................................................................... 27",
    "WebHttpBinding ............................................................................................................................................................... 27",
    "WebHttpBinding ............................................................................................................................................................... 27",
    "Types of RPC ........................................................................................................................................................................... 27",
    "Types of RPC ........................................................................................................................................................................... 27",
    "Request/reply..................................................................................................................................................................... 28",
    "Request/reply..................................................................................................................................................................... 28",
    "WCF duplex, one way to client ................................................................................................................................... 28",
    "WCF duplex, one way to client ................................................................................................................................... 28",
    "WCF one-way operations and gRPC client streaming ...................................................................................... 30",
    "WCF one-way operations and gRPC client streaming ...................................................................................... 30",
    "WCF full-duplex services ............................................................................................................................................... 31",
    "WCF full-duplex services ............................................................................................................................................... 31",
    "Metadata .................................................................................................................................................................................. 32",
    "Metadata .................................................................................................................................................................................. 32",
    "Error handling ......................................................................................................................................................................... 33",
    "Error handling ......................................................................................................................................................................... 33",
    "Raise errors in ASP.NET Core gRPC .......................................................................................................................... 34",
    "Raise errors in ASP.NET Core gRPC .......................................................................................................................... 34",
    "Catch errors in gRPC clients ......................................................................................................................................... 34",
    "Catch errors in gRPC clients ......................................................................................................................................... 34",
    "gRPC richer error model ................................................................................................................................................ 35",
    "gRPC richer error model ................................................................................................................................................ 35",
    "WS-",
    "WS-",
    "Metadata exchange: WS-Policy, WS-Discovery, and so on ............................................................................. 35",
    "Metadata exchange: WS-Policy, WS-Discovery, and so on ............................................................................. 35",
    "Security: WS-Security, WS-Federation, XML Encryption, and so on ............................................................ 35",
    "Security: WS-Security, WS-Federation, XML Encryption, and so on ............................................................ 35",
    "WS-ReliableMessaging .................................................................................................................................................. 36",
    "WS-ReliableMessaging .................................................................................................................................................. 36",
    "WS-Transaction, WS-Coordination ........................................................................................................................... 36",
    "WS-Transaction, WS-Coordination ........................................................................................................................... 36",
    "ii",
    "ii",
    "Contents",
    "Contents",
    "Migrate a WCF solution to gRPC ......................................................................................... 37",
    "Migrate a WCF solution to gRPC ......................................................................................... 37",
    "Create a new ASP.NET Core gRPC project .................................................................................................................. 37",
    "Create a new ASP.NET Core gRPC project .................................................................................................................. 37",
    "Create the project by using Visual Studio .............................................................................................................. 37",
    "Create the project by using Visual Studio .............................................................................................................. 37",
    "Create the project by using the .NET CLI ................................................................................................................ 40",
    "Create the project by using the .NET CLI ................................................................................................................ 40",
    "Clean up the example code ......................................................................................................................................... 41",
    "Clean up the example code ......................................................................................................................................... 41",
    "Migrate a WCF request-reply service to a gRPC unary RPC ................................................................................ 42",
    "Migrate a WCF request-reply service to a gRPC unary RPC ................................................................................ 42",
    "The WCF solution ............................................................................................................................................................. 42",
    "The WCF solution ............................................................................................................................................................. 42",
    "The portfolios.proto file ................................................................................................................................................. 44",
    "The portfolios.proto file ................................................................................................................................................. 44",
    "Convert the DataContract classes to gRPC messages ....................................................................................... 44",
    "Convert the DataContract classes to gRPC messages ....................................................................................... 44",
    "Convert ServiceContract to a gRPC service ........................................................................................................... 45",
    "Convert ServiceContract to a gRPC service ........................................................................................................... 45",
    "Migrate the PortfolioData library to .NET ............................................................................................................... 46",
    "Migrate the PortfolioData library to .NET ............................................................................................................... 46",
    "Use ASP.NET Core dependency injection ............................................................................................................... 47",
    "Use ASP.NET Core dependency injection ............................................................................................................... 47",
    "Implement the gRPC service........................................................................................................................................ 48",
    "Implement the gRPC service........................................................................................................................................ 48",
    "Generate client code ....................................................................................................................................................... 50",
    "Generate client code ....................................................................................................................................................... 50",
    "Migrate WCF duplex services to gRPC ......................................................................................................................... 53",
    "Migrate WCF duplex services to gRPC ......................................................................................................................... 53",
    "Server streaming RPC ..................................................................................................................................................... 53",
    "Server streaming RPC ..................................................................................................................................................... 53",
    "Bidirectional streaming .................................................................................................................................................. 58",
    "Bidirectional streaming .................................................................................................................................................. 58",
    "gRPC streaming services vs. repeated fields .............................................................................................................. 63",
    "gRPC streaming services vs. repeated fields .............................................................................................................. 63",
    "When to use repeated fields........................................................................................................................................ 63",
    "When to use repeated fields........................................................................................................................................ 63",
    "When to use stream methods ..................................................................................................................................... 64",
    "When to use stream methods ..................................................................................................................................... 64",
    "Create gRPC client libraries ............................................................................................................................................... 64",
    "Create gRPC client libraries ............................................................................................................................................... 64",
    "Useful extensions ............................................................................................................................................................. 65",
    "Useful extensions ............................................................................................................................................................. 65",
    "Summary .............................................................................................................................................................................. 67",
    "Summary .............................................................................................................................................................................. 67",
    "Security in gRPC applications .............................................................................................. 68",
    "Security in gRPC applications .............................................................................................. 68",
    "WCF authentication and authorization ........................................................................................................................ 68",
    "WCF authentication and authorization ........................................................................................................................ 68",
    "gRPC authentication and authorization ....................................................................................................................... 68",
    "gRPC authentication and authorization ....................................................................................................................... 68",
    "Call credentials ....................................................................................................................................................................... 69",
    "Call credentials ....................................................................................................................................................................... 69",
    "WS-Federation .................................................................................................................................................................. 69",
    "WS-Federation .................................................................................................................................................................. 69",
    "JWT Bearer tokens ........................................................................................................................................................... 69",
    "JWT Bearer tokens ........................................................................................................................................................... 69",
    "Add authentication and authorization to the server.......................................................................................... 70",
    "Add authentication and authorization to the server.......................................................................................... 70",
    "Provide call credentials in the client application ................................................................................................. 71",
    "Provide call credentials in the client application ................................................................................................. 71",
    "Channel credentials .............................................................................................................................................................. 72",
    "Channel credentials .............................................................................................................................................................. 72",
    "iii",
    "iii",
    "Contents",
    "Contents",
    "Add certificate authentication to the server .......................................................................................................... 72",
    "Add certificate authentication to the server .......................................................................................................... 72",
    "Provide channel credentials in the client application ........................................................................................ 73",
    "Provide channel credentials in the client application ........................................................................................ 73",
    "Combine ChannelCredentials and CallCredentials ............................................................................................. 74",
    "Combine ChannelCredentials and CallCredentials ............................................................................................. 74",
    "Encryption and network security .................................................................................................................................... 75",
    "Encryption and network security .................................................................................................................................... 75",
    "gRPC in production ............................................................................................................... 77",
    "gRPC in production ............................................................................................................... 77",
    "Self-hosted gRPC applications ........................................................................................................................................ 77",
    "Self-hosted gRPC applications ........................................................................................................................................ 77",
    "Run your app as a Windows service ......................................................................................................................... 77",
    "Run your app as a Windows service ......................................................................................................................... 77",
    "Run your app as a Linux service with systemd ..................................................................................................... 78",
    "Run your app as a Linux service with systemd ..................................................................................................... 78",
    "HTTPS certificates for self-hosted applications .................................................................................................... 80",
    "HTTPS certificates for self-hosted applications .................................................................................................... 80",
    "Create Docker images ......................................................................................................................................................... 81",
    "Create Docker images ......................................................................................................................................................... 81",
    "Microsoft base images for ASP.NET Core applications ..................................................................................... 81",
    "Microsoft base images for ASP.NET Core applications ..................................................................................... 81",
    "Create a Docker image .................................................................................................................................................. 82",
    "Create a Docker image .................................................................................................................................................. 82",
    "Build the image ................................................................................................................................................................. 84",
    "Build the image ................................................................................................................................................................. 84",
    "Run the image in a container on your machine .................................................................................................. 84",
    "Run the image in a container on your machine .................................................................................................. 84",
    "Push the image to a registry ........................................................................................................................................ 84",
    "Push the image to a registry ........................................................................................................................................ 84",
    "Kubernetes ............................................................................................................................................................................... 85",
    "Kubernetes ............................................................................................................................................................................... 85",
    "Kubernetes terminology ................................................................................................................................................ 85",
    "Kubernetes terminology ................................................................................................................................................ 85",
    "Get started with Kubernetes ........................................................................................................................................ 86",
    "Get started with Kubernetes ........................................................................................................................................ 86",
    "Run services on Kubernetes ......................................................................................................................................... 87",
    "Run services on Kubernetes ......................................................................................................................................... 87",
    "Service meshes ....................................................................................................................................................................... 93",
    "Service meshes ....................................................................................................................................................................... 93",
    "Service mesh options ...................................................................................................................................................... 94",
    "Service mesh options ...................................................................................................................................................... 94",
    "Example: Add Linkerd to a deployment .................................................................................................................. 94",
    "Example: Add Linkerd to a deployment .................................................................................................................. 94",
    "Load balancing gRPC .......................................................................................................................................................... 97",
    "Load balancing gRPC .......................................................................................................................................................... 97",
    "L4 load balancers ............................................................................................................................................................. 97",
    "L4 load balancers ............................................................................................................................................................. 97",
    "L7 load balancers ............................................................................................................................................................. 97",
    "L7 load balancers ............................................................................................................................................................. 97",
    "Load balancing within Kubernetes ............................................................................................................................ 98",
    "Load balancing within Kubernetes ............................................................................................................................ 98",
    "Application Performance Management ....................................................................................................................... 98",
    "Application Performance Management ....................................................................................................................... 98",
    "The difference between logging and metrics ....................................................................................................... 98",
    "The difference between logging and metrics ....................................................................................................... 98",
    "Logging in ASP.NET Core gRPC ................................................................................................................................. 98",
    "Logging in ASP.NET Core gRPC ................................................................................................................................. 98",
    "Metrics in ASP.NET Core gRPC ................................................................................................................................... 99",
    "Metrics in ASP.NET Core gRPC ................................................................................................................................... 99",
    "Distributed tracing ......................................................................................................................................................... 101",
    "Distributed tracing ......................................................................................................................................................... 101",
    "Appendix A - Transactions ................................................................................................. 104",
    "Appendix A - Transactions ................................................................................................. 104",
    "iv",
    "iv",
    "Contents",
    "Contents",
    "CHAPTER  1",
    "CHAPTER  1",
    "Introduction to gRPC for",
    "Introduction to gRPC for",
    "Helping machines communicate with each other has been one of the primary preoccupations of the",
    "Helping machines communicate with each other has been one of the primary preoccupations of the",
    "The release of .NET Core 3.0 marks a shift in the way that Microsoft delivers remote communication",
    "The release of .NET Core 3.0 marks a shift in the way that Microsoft delivers remote communication",
    "gRPC is a popular framework in the wider software community. It\u2019s used by developers across many",
    "gRPC is a popular framework in the wider software community. It\u2019s used by developers across many",
    "History",
    "History",
    "The fundamental principle of a computer network as nothing more than a group of computers",
    "The fundamental principle of a computer network as nothing more than a group of computers",
    "During the 1990s, the emphasis was mainly on improving internal networks that used the same",
    "During the 1990s, the emphasis was mainly on improving internal networks that used the same",
    "The focus soon shifted to how best to optimize communication across multiple platforms by",
    "The focus soon shifted to how best to optimize communication across multiple platforms by",
    "The development of web services occurred when all major platforms could access the internet, but",
    "The development of web services occurred when all major platforms could access the internet, but",
    "\u2022",
    "\u2022",
    "XML to tag and code data.",
    "XML to tag and code data.",
    "1",
    "1",
    "CHAPTER 1 | Introduction to gRPC for WCF developers",
    "CHAPTER 1 | Introduction to gRPC for WCF developers",
    "\u2022",
    "\u2022",
    "Simple Object Access Protocol (SOAP) to transfer data.",
    "Simple Object Access Protocol (SOAP) to transfer data.",
    "\u2022  Web Services Definition Language (WSDL) to describe and connect web services to client",
    "\u2022  Web Services Definition Language (WSDL) to describe and connect web services to client",
    "applications.",
    "applications.",
    "\u2022",
    "\u2022",
    "Universal Description, Discovery, and Integration (UDDI) to make web services discoverable by",
    "Universal Description, Discovery, and Integration (UDDI) to make web services discoverable by",
    "SOAP defines the rules by which distributed elements of an application can communicate with each",
    "SOAP defines the rules by which distributed elements of an application can communicate with each",
    "Windows Communication Foundation is a framework for building services. It was designed in the early",
    "Windows Communication Foundation is a framework for building services. It was designed in the early",
    "Microservices",
    "Microservices",
    "In microservice architectures, large applications are built as a collection of smaller modular services.",
    "In microservice architectures, large applications are built as a collection of smaller modular services.",
    "Advantages to microservices include:",
    "Advantages to microservices include:",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Changes and upgrades can be handled independently.",
    "Changes and upgrades can be handled independently.",
    "Error handling becomes more efficient because problems can be traced to specific services",
    "Error handling becomes more efficient because problems can be traced to specific services",
    "Scalability can be confined to specific instances or services rather than the whole application.",
    "Scalability can be confined to specific instances or services rather than the whole application.",
    "Development can happen across multiple teams, with less friction than occurs when many",
    "Development can happen across multiple teams, with less friction than occurs when many",
    "The move towards increasing virtualization, cloud computing, containers, and the Internet of Things",
    "The move towards increasing virtualization, cloud computing, containers, and the Internet of Things",
    "It was into this environment that gRPC was launched, 10 years after Microsoft first released WCF.",
    "It was into this environment that gRPC was launched, 10 years after Microsoft first released WCF.",
    "2",
    "2",
    "CHAPTER 1 | Introduction to gRPC for WCF developers",
    "CHAPTER 1 | Introduction to gRPC for WCF developers",
    "About this guide",
    "About this guide",
    "This guide covers the key features of gRPC. The early chapters take a high-level look at the main",
    "This guide covers the key features of gRPC. The early chapters take a high-level look at the main",
    "Using a set of sample WCF applications, Chapter 5 is a deep-dive look at converting the main types of",
    "Using a set of sample WCF applications, Chapter 5 is a deep-dive look at converting the main types of",
    "The final section of the book looks at how to get the best from gRPC in practice. This section includes",
    "The final section of the book looks at how to get the best from gRPC in practice. This section includes",
    "Who this guide is for",
    "Who this guide is for",
    "This guide was written for developers working in .NET Framework or .NET Core who have used WCF",
    "This guide was written for developers working in .NET Framework or .NET Core who have used WCF",
    "3",
    "3",
    "CHAPTER 1 | Introduction to gRPC for WCF developers",
    "CHAPTER 1 | Introduction to gRPC for WCF developers",
    "CHAPTER  2",
    "CHAPTER  2",
    "gRPC overview",
    "gRPC overview",
    "After looking at the genesis of both Windows Communication Foundation (WCF) and gRPC in the last",
    "After looking at the genesis of both Windows Communication Foundation (WCF) and gRPC in the last",
    "ASP.NET Core 3.0 is the first release of ASP.NET that natively supports gRPC as a first-class citizen,",
    "ASP.NET Core 3.0 is the first release of ASP.NET that natively supports gRPC as a first-class citizen,",
    "Key principles",
    "Key principles",
    "As discussed in chapter 1, Google wanted to use the introduction of HTTP/2 to replace Stubby, its",
    "As discussed in chapter 1, Google wanted to use the introduction of HTTP/2 to replace Stubby, its",
    "To achieve this standardization, the Cloud Native Computing Foundation (CNCF) established a set of",
    "To achieve this standardization, the Cloud Native Computing Foundation (CNCF) established a set of",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Free and open \u2013 All artifacts should be open source, with licensing that doesn\u2019t constrain",
    "Free and open \u2013 All artifacts should be open source, with licensing that doesn\u2019t constrain",
    "Coverage and simplicity \u2013 gRPC should be available across every popular platform, and",
    "Coverage and simplicity \u2013 gRPC should be available across every popular platform, and",
    "Interoperability and reach \u2013 It should be possible to use gRPC on any network, regardless of",
    "Interoperability and reach \u2013 It should be possible to use gRPC on any network, regardless of",
    "General purpose and performant \u2013 The framework should be usable by as broad a range of",
    "General purpose and performant \u2013 The framework should be usable by as broad a range of",
    "Streaming \u2013 The protocol should provide streaming semantics for large datasets or",
    "Streaming \u2013 The protocol should provide streaming semantics for large datasets or",
    "\u2022  Metadata exchange \u2013 The protocol allows non-business data, such as authentication tokens,",
    "\u2022  Metadata exchange \u2013 The protocol allows non-business data, such as authentication tokens,",
    "to be handled separately from actual business data.",
    "to be handled separately from actual business data.",
    "\u2022",
    "\u2022",
    "Standardized status codes \u2013 The variability of error codes should be reduced to make error",
    "Standardized status codes \u2013 The variability of error codes should be reduced to make error",
    "4",
    "4",
    "CHAPTER 2 | gRPC overview",
    "CHAPTER 2 | gRPC overview",
    "How gRPC approaches RPC",
    "How gRPC approaches RPC",
    "Windows Communication Foundation (WCF) and gRPC are both implementations of the Remote",
    "Windows Communication Foundation (WCF) and gRPC are both implementations of the Remote",
    "The following table sets out how the key features of WCF relate to gRPC, and where you can find",
    "The following table sets out how the key features of WCF relate to gRPC, and where you can find",
    "Features",
    "Features",
    "WCF",
    "WCF",
    "gRPC",
    "gRPC",
    "Objective",
    "Objective",
    "Define services and messages (chapters 3-4)",
    "Define services and messages (chapters 3-4)",
    "Language (chapters 3-5)",
    "Language (chapters 3-5)",
    "Wire format (chapter 3)",
    "Wire format (chapter 3)",
    "Interoperability (chapter 4)",
    "Interoperability (chapter 4)",
    "Networking (chapter 4)",
    "Networking (chapter 4)",
    "Separate business",
    "Separate business",
    "Separate business code",
    "Separate business code",
    "Service Contract,",
    "Service Contract,",
    "Contracts written",
    "Contracts written",
    "Configurable,",
    "Configurable,",
    "When using",
    "When using",
    "Configured at run",
    "Configured at run",
    "Uses proto file to",
    "Uses proto file to",
    "Protocol Buffer",
    "Protocol Buffer",
    "Protocol Buffer binary",
    "Protocol Buffer binary",
    "Official support: .NET,",
    "Official support: .NET,",
    "HTTP/2, currently over",
    "HTTP/2, currently over",
    "5",
    "5",
    "CHAPTER 2 | gRPC overview",
    "CHAPTER 2 | gRPC overview",
    "Features",
    "Features",
    "WCF",
    "WCF",
    "gRPC",
    "gRPC",
    "Approach (chapter 4)",
    "Approach (chapter 4)",
    "Security (chapter 6)",
    "Security (chapter 6)",
    "Runtime",
    "Runtime",
    "Authentication,",
    "Authentication,",
    "Build-time generation of",
    "Build-time generation of",
    "Credentials, ASP.NET",
    "Credentials, ASP.NET",
    "Interface Definition Language",
    "Interface Definition Language",
    "With Windows Communication Foundation (WCF), services can expose description metadata by using",
    "With Windows Communication Foundation (WCF), services can expose description metadata by using",
    "gRPC uses the Interface Definition Language (IDL) from Protocol Buffers. The Protocol Buffers IDL is a",
    "gRPC uses the Interface Definition Language (IDL) from Protocol Buffers. The Protocol Buffers IDL is a",
    "One of the advantages of the Protobuf IDL is that as a custom language, it enables gRPC to be",
    "One of the advantages of the Protobuf IDL is that as a custom language, it enables gRPC to be",
    "The Protobuf IDL is also designed for humans to both read and write, whereas WSDL is intended as a",
    "The Protobuf IDL is also designed for humans to both read and write, whereas WSDL is intended as a",
    "When compared with XML, and particularly SOAP, messages encoded by using Protobuf have many",
    "When compared with XML, and particularly SOAP, messages encoded by using Protobuf have many",
    "The potential disadvantage of Protobuf compared to SOAP is that, because the messages aren\u2019t",
    "The potential disadvantage of Protobuf compared to SOAP is that, because the messages aren\u2019t",
    "6",
    "6",
    "CHAPTER 2 | gRPC overview",
    "CHAPTER 2 | gRPC overview",
    "Tip",
    "Tip",
    "gRPC does support server reflection for dynamically accessing services without pre-compiled stubs,",
    "gRPC does support server reflection for dynamically accessing services without pre-compiled stubs,",
    "Note",
    "Note",
    "WCF\u2019s binary format, used with the NetTCP binding, is much closer to Protobuf in terms of",
    "WCF\u2019s binary format, used with the NetTCP binding, is much closer to Protobuf in terms of",
    "Network protocols",
    "Network protocols",
    "Unlike Windows Communication Foundation (WCF), gRPC uses HTTP/2 as a base for its networking.",
    "Unlike Windows Communication Foundation (WCF), gRPC uses HTTP/2 as a base for its networking.",
    "HTTP/2, released by Internet Engineering Task Force in 2015, was derived from the experimental SPDY",
    "HTTP/2, released by Internet Engineering Task Force in 2015, was derived from the experimental SPDY",
    "Key features of HTTP/2",
    "Key features of HTTP/2",
    "This list shows some of the key features and advantages of HTTP/2:",
    "This list shows some of the key features and advantages of HTTP/2:",
    "Binary protocol",
    "Binary protocol",
    "Request/response cycles no longer need text commands. This activity simplifies and speeds up the",
    "Request/response cycles no longer need text commands. This activity simplifies and speeds up the",
    "Streams",
    "Streams",
    "Streams allow you to create long-lived connections between sender and receiver, over which multiple",
    "Streams allow you to create long-lived connections between sender and receiver, over which multiple",
    "Request multiplexing over a single TCP connection",
    "Request multiplexing over a single TCP connection",
    "This feature is one of the most important innovations of HTTP/2. Because it allows multiple parallel",
    "This feature is one of the most important innovations of HTTP/2. Because it allows multiple parallel",
    "7",
    "7",
    "CHAPTER 2 | gRPC overview",
    "CHAPTER 2 | gRPC overview",
    "that are ready must wait to be sent until an earlier request is completed, is also mitigated (although",
    "that are ready must wait to be sent until an earlier request is completed, is also mitigated (although",
    "Net.TCP-like performance, cross-platform",
    "Net.TCP-like performance, cross-platform",
    "Fundamentally, the combination of gRPC and HTTP/2 offers developers at least the equivalent speed",
    "Fundamentally, the combination of gRPC and HTTP/2 offers developers at least the equivalent speed",
    "Why we recommend gRPC for WCF developers",
    "Why we recommend gRPC for WCF developers",
    "Before we dive deeply into the language and techniques of gRPC, it\u2019s worth discussing why gRPC is",
    "Before we dive deeply into the language and techniques of gRPC, it\u2019s worth discussing why gRPC is",
    "Similarity to WCF",
    "Similarity to WCF",
    "Although the implementation and approach are different for gRPC, the experience of developing and",
    "Although the implementation and approach are different for gRPC, the experience of developing and",
    "Both platforms share the principle of declaring and then implementing an interface, even though the",
    "Both platforms share the principle of declaring and then implementing an interface, even though the",
    "Benefits of gRPC",
    "Benefits of gRPC",
    "gRPC stands above other solutions for the following reasons.",
    "gRPC stands above other solutions for the following reasons.",
    "Performance",
    "Performance",
    "Using HTTP/2 rather than HTTP/1.1 removes the requirement for human-readable messages and",
    "Using HTTP/2 rather than HTTP/1.1 removes the requirement for human-readable messages and",
    "Interoperability",
    "Interoperability",
    "There are gRPC tools and libraries for all major programming languages and platforms, including",
    "There are gRPC tools and libraries for all major programming languages and platforms, including",
    "8",
    "8",
    "CHAPTER 2 | gRPC overview",
    "CHAPTER 2 | gRPC overview",
    "Usability and productivity",
    "Usability and productivity",
    "gRPC is a comprehensive RPC solution. It works consistently across multiple languages and platforms.",
    "gRPC is a comprehensive RPC solution. It works consistently across multiple languages and platforms.",
    "Streaming",
    "Streaming",
    "gRPC has full bidirectional streaming, which provides similar functionality to WCF\u2019s full-duplex",
    "gRPC has full bidirectional streaming, which provides similar functionality to WCF\u2019s full-duplex",
    "Deadline/timeouts and cancellation",
    "Deadline/timeouts and cancellation",
    "gRPC allows clients to specify a maximum time for an RPC to finish. If the specified deadline is",
    "gRPC allows clients to specify a maximum time for an RPC to finish. If the specified deadline is",
    "Security",
    "Security",
    "gRPC is implicitly secure when it\u2019s using HTTP/2 over a TLS end-to-end encrypted connection. Support",
    "gRPC is implicitly secure when it\u2019s using HTTP/2 over a TLS end-to-end encrypted connection. Support",
    "Comparison with CoreWCF",
    "Comparison with CoreWCF",
    "A notable alternative to gRPC for replacing WCF services when migrating to .NET is CoreWCF. Both",
    "A notable alternative to gRPC for replacing WCF services when migrating to .NET is CoreWCF. Both",
    "CoreWCF is a community-owned .NET Foundation project supported by Microsoft that implements",
    "CoreWCF is a community-owned .NET Foundation project supported by Microsoft that implements",
    "Services and interfaces can often migrate with few changes. Because of this, a key benefit of CoreWCF",
    "Services and interfaces can often migrate with few changes. Because of this, a key benefit of CoreWCF",
    "On the other hand, gRPC is a modern remote communication solution with a number of features, as",
    "On the other hand, gRPC is a modern remote communication solution with a number of features, as",
    "When deciding whether to use CoreWCF or gRPC to migrate a WCF application to .NET, CoreWCF is",
    "When deciding whether to use CoreWCF or gRPC to migrate a WCF application to .NET, CoreWCF is",
    "9",
    "9",
    "CHAPTER 2 | gRPC overview",
    "CHAPTER 2 | gRPC overview",
    "be a better fit if the goal is to modernize the application while retargeting to .NET. The remainder of",
    "be a better fit if the goal is to modernize the application while retargeting to .NET. The remainder of",
    "10",
    "10",
    "CHAPTER 2 | gRPC overview",
    "CHAPTER 2 | gRPC overview",
    "CHAPTER  3",
    "CHAPTER  3",
    "Protocol buffers",
    "Protocol buffers",
    "gRPC services send and receive data as Protocol Buffer (Protobuf) messages, similar to data contracts in",
    "gRPC services send and receive data as Protocol Buffer (Protobuf) messages, similar to data contracts in",
    "This chapter covers how Protobuf works, and how to define your own Protobuf messages.",
    "This chapter covers how Protobuf works, and how to define your own Protobuf messages.",
    "How Protobuf works",
    "How Protobuf works",
    "Most .NET object serialization techniques, including WCF\u2019s data contracts, work by using reflection to",
    "Most .NET object serialization techniques, including WCF\u2019s data contracts, work by using reflection to",
    "The Protobuf compiler, protoc, is maintained by Google, although alternative implementations are",
    "The Protobuf compiler, protoc, is maintained by Google, although alternative implementations are",
    "The Protobuf wire format is a binary encoding. It uses some clever tricks to minimize the number of",
    "The Protobuf wire format is a binary encoding. It uses some clever tricks to minimize the number of",
    "Protobuf messages",
    "Protobuf messages",
    "This section covers how to declare Protocol Buffer (Protobuf) messages in .proto files. It explains the",
    "This section covers how to declare Protocol Buffer (Protobuf) messages in .proto files. It explains the",
    "The rest of the chapter will look in more detail at how different types of data are represented in",
    "The rest of the chapter will look in more detail at how different types of data are represented in",
    "Declaring a message",
    "Declaring a message",
    "In Windows Communication Foundation (WCF), a Stock class for a stock market trading application",
    "In Windows Communication Foundation (WCF), a Stock class for a stock market trading application",
    "namespace TraderSys;",
    "namespace TraderSys;",
    "11",
    "11",
    "CHAPTER 3 | Protocol buffers",
    "CHAPTER 3 | Protocol buffers",
    "[",
    "[",
    "To implement the equivalent class in Protobuf, you must declare it in the .proto file. The protoc",
    "To implement the equivalent class in Protobuf, you must declare it in the .proto file. The protoc",
    "syntax = ",
    "syntax = ",
    "option csharp",
    "option csharp",
    "message Stock {",
    "message Stock {",
    "}",
    "}",
    "The first line declares the syntax version being used. Version 3 of the language was released in 2016.",
    "The first line declares the syntax version being used. Version 3 of the language was released in 2016.",
    "The option csharp",
    "The option csharp",
    "The Stock message definition specifies four fields. Each has a type, a name, and a field number.",
    "The Stock message definition specifies four fields. Each has a type, a name, and a field number.",
    "Field numbers",
    "Field numbers",
    "Field numbers are an important part of Protobuf. They\u2019re used to identify fields in the binary encoded",
    "Field numbers are an important part of Protobuf. They\u2019re used to identify fields in the binary encoded",
    "In the binary format, the field number is combined with a type identifier. Field numbers from 1 to 15",
    "In the binary format, the field number is combined with a type identifier. Field numbers from 1 to 15",
    "12",
    "12",
    "CHAPTER 3 | Protocol buffers",
    "CHAPTER 3 | Protocol buffers",
    "Types",
    "Types",
    "The type declarations are using Protobuf\u2019s native scalar data types, which are discussed in more detail",
    "The type declarations are using Protobuf\u2019s native scalar data types, which are discussed in more detail",
    "Note",
    "Note",
    "Protobuf doesn\u2019t natively support a decimal type, so double is used instead. For applications that",
    "Protobuf doesn\u2019t natively support a decimal type, so double is used instead. For applications that",
    "The generated code",
    "The generated code",
    "When you build your application, Protobuf creates classes for each of your messages, mapping its",
    "When you build your application, Protobuf creates classes for each of your messages, mapping its",
    "public class Stock",
    "public class Stock",
    "The actual code that\u2019s generated is far more complicated than this. The reason is that each class",
    "The actual code that\u2019s generated is far more complicated than this. The reason is that each class",
    "Property names",
    "Property names",
    "Note that the Protobuf compiler applied PascalCase to the property names, although they were",
    "Note that the Protobuf compiler applied PascalCase to the property names, although they were",
    "Protobuf scalar data types",
    "Protobuf scalar data types",
    "Protocol Buffer (Protobuf) supports a range of native scalar value types. The following table lists them",
    "Protocol Buffer (Protobuf) supports a range of native scalar value types. The following table lists them",
    "Protobuf type",
    "Protobuf type",
    "C# type",
    "C# type",
    "Notes",
    "Notes",
    "double",
    "double",
    "Float",
    "Float",
    "int32",
    "int32",
    "int64",
    "int64",
    "uint32",
    "uint32",
    "uint64",
    "uint64",
    "13",
    "13",
    "double",
    "double",
    "float",
    "float",
    "int",
    "int",
    "long",
    "long",
    "uint",
    "uint",
    "ulong",
    "ulong",
    "1",
    "1",
    "1",
    "1",
    "CHAPTER 3 | Protocol buffers",
    "CHAPTER 3 | Protocol buffers",
    "Protobuf type",
    "Protobuf type",
    "C# type",
    "C# type",
    "Notes",
    "Notes",
    "int",
    "int",
    "long",
    "long",
    "uint",
    "uint",
    "ulong",
    "ulong",
    "int",
    "int",
    "long",
    "long",
    "bool",
    "bool",
    "string",
    "string",
    "ByteString",
    "ByteString",
    "1",
    "1",
    "1",
    "1",
    "2",
    "2",
    "2",
    "2",
    "2",
    "2",
    "2",
    "2",
    "3",
    "3",
    "4",
    "4",
    "sint32",
    "sint32",
    "sint64",
    "sint64",
    "fixed32",
    "fixed32",
    "fixed64",
    "fixed64",
    "sfixed32",
    "sfixed32",
    "sfixed64",
    "sfixed64",
    "bool",
    "bool",
    "string",
    "string",
    "bytes",
    "bytes",
    "Notes:",
    "Notes:",
    "The standard encoding for int32 and int64 is inefficient when you\u2019re working with signed",
    "The standard encoding for int32 and int64 is inefficient when you\u2019re working with signed",
    "The fixed fields always use the same number of bytes no matter what the value is. This",
    "The fixed fields always use the same number of bytes no matter what the value is. This",
    "Protobuf strings are UTF-8 (or 7-bit ASCII) encoded. The encoded length can\u2019t be greater than",
    "Protobuf strings are UTF-8 (or 7-bit ASCII) encoded. The encoded length can\u2019t be greater than",
    "The Protobuf runtime provides a ByteString type that maps easily to and from C# byte",
    "The Protobuf runtime provides a ByteString type that maps easily to and from C# byte",
    "Other .NET primitive types",
    "Other .NET primitive types",
    "Dates and times",
    "Dates and times",
    "The native scalar types don\u2019t provide for date and time values, equivalent to C#\u2019s DateTimeOffset,",
    "The native scalar types don\u2019t provide for date and time values, equivalent to C#\u2019s DateTimeOffset,",
    "The following table shows the date and time types:",
    "The following table shows the date and time types:",
    "C# type",
    "C# type",
    "Protobuf well-known type",
    "Protobuf well-known type",
    "DateTimeOffset",
    "DateTimeOffset",
    "google.protobuf.Timestamp",
    "google.protobuf.Timestamp",
    "DateTime",
    "DateTime",
    "TimeSpan",
    "TimeSpan",
    "google.protobuf.Timestamp",
    "google.protobuf.Timestamp",
    "google.protobuf.Duration",
    "google.protobuf.Duration",
    "syntax = ",
    "syntax = ",
    "import ",
    "import ",
    "message Meeting {",
    "message Meeting {",
    "14",
    "14",
    "CHAPTER 3 | Protocol buffers",
    "CHAPTER 3 | Protocol buffers",
    "string subject = 1;",
    "string subject = 1;",
    "}",
    "}",
    "The generated properties in the C# class aren\u2019t the .NET date and time types. The properties use the",
    "The generated properties in the C# class aren\u2019t the .NET date and time types. The properties use the",
    "// Create Timestamp and Duration from .NET DateTimeOffset and TimeSpan",
    "// Create Timestamp and Duration from .NET DateTimeOffset and TimeSpan",
    "// Convert Timestamp and Duration to .NET DateTimeOffset and TimeSpan",
    "// Convert Timestamp and Duration to .NET DateTimeOffset and TimeSpan",
    "Note",
    "Note",
    "The Timestamp type works with UTC times. DateTimeOffset values always have an offset of zero, and",
    "The Timestamp type works with UTC times. DateTimeOffset values always have an offset of zero, and",
    "System.Guid",
    "System.Guid",
    "Protobuf doesn\u2019t directly support the Guid type, known as UUID on other platforms. There\u2019s no well-",
    "Protobuf doesn\u2019t directly support the Guid type, known as UUID on other platforms. There\u2019s no well-",
    "The best approach is to handle Guid values as a string field, by using the standard 8-4-4-4-12",
    "The best approach is to handle Guid values as a string field, by using the standard 8-4-4-4-12",
    "Don\u2019t use a bytes field for Guid values. Problems with endianness (Wikipedia definition) can result in",
    "Don\u2019t use a bytes field for Guid values. Problems with endianness (Wikipedia definition) can result in",
    "Nullable types",
    "Nullable types",
    "The Protobuf code generation for C# uses the native types, such as int for int32. So the values are",
    "The Protobuf code generation for C# uses the native types, such as int for int32. So the values are",
    "For values that require explicit null, such as using int? in your C# code, Protobuf\u2019s \u201cWell Known Types\u201d",
    "For values that require explicit null, such as using int? in your C# code, Protobuf\u2019s \u201cWell Known Types\u201d",
    "syntax = ",
    "syntax = ",
    "import ",
    "import ",
    "message Person {",
    "message Person {",
    "15",
    "15",
    "CHAPTER 3 | Protocol buffers",
    "CHAPTER 3 | Protocol buffers",
    "...",
    "...",
    "}",
    "}",
    "Protobuf will use the simple T? (for example, int?) for the generated message property.",
    "Protobuf will use the simple T? (for example, int?) for the generated message property.",
    "The following table shows the complete list of wrapper types with their equivalent C# type:",
    "The following table shows the complete list of wrapper types with their equivalent C# type:",
    "C# type",
    "C# type",
    "Well Known Type wrapper",
    "Well Known Type wrapper",
    "double?",
    "double?",
    "google.protobuf.DoubleValue",
    "google.protobuf.DoubleValue",
    "float?",
    "float?",
    "int?",
    "int?",
    "long?",
    "long?",
    "uint?",
    "uint?",
    "ulong?",
    "ulong?",
    "google.protobuf.FloatValue",
    "google.protobuf.FloatValue",
    "google.protobuf.Int32Value",
    "google.protobuf.Int32Value",
    "google.protobuf.Int64Value",
    "google.protobuf.Int64Value",
    "google.protobuf.UInt32Value",
    "google.protobuf.UInt32Value",
    "google.protobuf.UInt64Value",
    "google.protobuf.UInt64Value",
    "The well-known types Timestamp and Duration are represented in .NET as classes. In C# 8 and",
    "The well-known types Timestamp and Duration are represented in .NET as classes. In C# 8 and",
    "Decimals",
    "Decimals",
    "Protobuf doesn\u2019t natively support the .NET decimal type, just double and float. There\u2019s an ongoing",
    "Protobuf doesn\u2019t natively support the .NET decimal type, just double and float. There\u2019s an ongoing",
    "It\u2019s possible to create a message definition to represent the decimal type that would work for safe",
    "It\u2019s possible to create a message definition to represent the decimal type that would work for safe",
    "Creating a custom decimal type for Protobuf",
    "Creating a custom decimal type for Protobuf",
    "A simple implementation might be similar to the nonstandard Money type that some Google APIs",
    "A simple implementation might be similar to the nonstandard Money type that some Google APIs",
    "package CustomTypes;",
    "package CustomTypes;",
    "// Example: 12345.6789 -> { units = 12345, nanos = 678900000 }",
    "// Example: 12345.6789 -> { units = 12345, nanos = 678900000 }",
    "}",
    "}",
    "16",
    "16",
    "CHAPTER 3 | Protocol buffers",
    "CHAPTER 3 | Protocol buffers",
    "The nanos field represents values from 0.999",
    "The nanos field represents values from 0.999",
    "Note",
    "Note",
    "There are multiple other algorithms for encoding decimal values as byte strings, but this message is",
    "There are multiple other algorithms for encoding decimal values as byte strings, but this message is",
    "Conversion between this type and the BCL decimal type might be implemented in C# like this:",
    "Conversion between this type and the BCL decimal type might be implemented in C# like this:",
    "namespace CustomTypes;",
    "namespace CustomTypes;",
    "}",
    "}",
    "Important",
    "Important",
    "Whenever you use custom message types like this, you must document them with comments in",
    "Whenever you use custom message types like this, you must document them with comments in",
    "Protobuf nested types",
    "Protobuf nested types",
    "Just as C# allows you to declare classes inside other classes, Protocol Buffer (Protobuf) allows you to",
    "Just as C# allows you to declare classes inside other classes, Protocol Buffer (Protobuf) allows you to",
    "message Outer {",
    "message Outer {",
    "17",
    "17",
    "CHAPTER 3 | Protocol buffers",
    "CHAPTER 3 | Protocol buffers",
    "Inner inner = 1;",
    "Inner inner = 1;",
    "In the generated C# code, the Inner type will be declared in a nested static Types class within the",
    "In the generated C# code, the Inner type will be declared in a nested static Types class within the",
    "var inner = new Outer.Types.Inner { Text = ",
    "var inner = new Outer.Types.Inner { Text = ",
    "Repeated fields for lists and arrays",
    "Repeated fields for lists and arrays",
    "You specify lists in Protocol Buffer (Protobuf) by using the repeated prefix keyword. The following",
    "You specify lists in Protocol Buffer (Protobuf) by using the repeated prefix keyword. The following",
    "message Person {",
    "message Person {",
    "In the generated code, repeated fields are represented by read-only properties of the",
    "In the generated code, repeated fields are represented by read-only properties of the",
    "The RepeatedField",
    "The RepeatedField",
    "Protobuf reserved fields",
    "Protobuf reserved fields",
    "The backward-compatibility guarantees in Protocol Buffer (Protobuf) rely on field numbers always",
    "The backward-compatibility guarantees in Protocol Buffer (Protobuf) rely on field numbers always",
    "If the displayName and marketId fields were removed from the Stock message defined earlier, their",
    "If the displayName and marketId fields were removed from the Stock message defined earlier, their",
    "syntax ",
    "syntax ",
    "message Stock {",
    "message Stock {",
    "}",
    "}",
    "You can also use the reserved keyword as a placeholder for fields that might be added in the future.",
    "You can also use the reserved keyword as a placeholder for fields that might be added in the future.",
    "syntax ",
    "syntax ",
    "message Info {",
    "message Info {",
    "18",
    "18",
    "CHAPTER 3 | Protocol buffers",
    "CHAPTER 3 | Protocol buffers",
    "reserved 2, 9 to 11, 15;",
    "reserved 2, 9 to 11, 15;",
    "Protobuf Any and Oneof fields for variant types",
    "Protobuf Any and Oneof fields for variant types",
    "Handling dynamic property types (that is, properties of type object) in Windows Communication",
    "Handling dynamic property types (that is, properties of type object) in Windows Communication",
    "Protocol Buffer (Protobuf) provides two simpler options for dealing with values that might be of more",
    "Protocol Buffer (Protobuf) provides two simpler options for dealing with values that might be of more",
    "Any",
    "Any",
    "Any is one of Protobuf\u2019s \u201cwell-known types\u201d: a collection of useful, reusable message types with",
    "Any is one of Protobuf\u2019s \u201cwell-known types\u201d: a collection of useful, reusable message types with",
    "syntax = ",
    "syntax = ",
    "import ",
    "import ",
    "message Stock {",
    "message Stock {",
    "message Currency {",
    "message Currency {",
    "message ChangeNotification {",
    "message ChangeNotification {",
    "In the C# code, the Any class provides methods for setting the field, extracting the message, and",
    "In the C# code, the Any class provides methods for setting the field, extracting the message, and",
    "public void FormatChangeNotification(ChangeNotification change)",
    "public void FormatChangeNotification(ChangeNotification change)",
    "19",
    "19",
    "CHAPTER 3 | Protocol buffers",
    "CHAPTER 3 | Protocol buffers",
    "}",
    "}",
    "Protobuf\u2019s internal reflection code uses the Descriptor static field on each generated type to resolve",
    "Protobuf\u2019s internal reflection code uses the Descriptor static field on each generated type to resolve",
    "Oneof",
    "Oneof",
    "Oneof fields are a language feature: the compiler handles the oneof keyword when it generates the",
    "Oneof fields are a language feature: the compiler handles the oneof keyword when it generates the",
    "message Stock {",
    "message Stock {",
    "message Currency {",
    "message Currency {",
    "message ChangeNotification {",
    "message ChangeNotification {",
    "Fields within the oneof set must have unique field numbers in the overall message declaration.",
    "Fields within the oneof set must have unique field numbers in the overall message declaration.",
    "When you use oneof, the generated C# code includes an enum that specifies which of the fields has",
    "When you use oneof, the generated C# code includes an enum that specifies which of the fields has",
    "public void FormatChangeNotification(ChangeNotification change)",
    "public void FormatChangeNotification(ChangeNotification change)",
    "Setting any field that\u2019s part of a oneof set will automatically clear any other fields in the set. You can\u2019t",
    "Setting any field that\u2019s part of a oneof set will automatically clear any other fields in the set. You can\u2019t",
    "20",
    "20",
    "CHAPTER 3 | Protocol buffers",
    "CHAPTER 3 | Protocol buffers",
    "Protobuf enumerations",
    "Protobuf enumerations",
    "Protobuf supports enumeration types. You saw this support in the previous section, where an enum",
    "Protobuf supports enumeration types. You saw this support in the previous section, where an enum",
    "Because you can use Protobuf with various languages, the naming conventions for enumerations are",
    "Because you can use Protobuf with various languages, the naming conventions for enumerations are",
    "For example, in the following Protobuf enumeration, the fields are prefixed with ACCOUNT",
    "For example, in the following Protobuf enumeration, the fields are prefixed with ACCOUNT",
    "enum AccountStatus {",
    "enum AccountStatus {",
    "The generator creates a C# enum equivalent to the following code:",
    "The generator creates a C# enum equivalent to the following code:",
    "public enum AccountStatus",
    "public enum AccountStatus",
    "Protobuf enumeration definitions must have a zero constant as their first field. As in C#, you can",
    "Protobuf enumeration definitions must have a zero constant as their first field. As in C#, you can",
    "enum AccountStatus {",
    "enum AccountStatus {",
    "You can declare enumerations at the top level in a .proto file, or nested within a message definition.",
    "You can declare enumerations at the top level in a .proto file, or nested within a message definition.",
    "There\u2019s no way to apply the ",
    "There\u2019s no way to apply the ",
    "enum Region {",
    "enum Region {",
    "21",
    "21",
    "CHAPTER 3 | Protocol buffers",
    "CHAPTER 3 | Protocol buffers",
    "REGION",
    "REGION",
    "message Product {",
    "message Product {",
    "If you set product.AvailableIn to Region.NorthAmerica | Region.SouthAmerica, it\u2019s serialized as the",
    "If you set product.AvailableIn to Region.NorthAmerica | Region.SouthAmerica, it\u2019s serialized as the",
    "The best way to work with multiple enum values in Protobuf is to use a repeated field of the enum",
    "The best way to work with multiple enum values in Protobuf is to use a repeated field of the enum",
    "Protobuf maps for dictionaries",
    "Protobuf maps for dictionaries",
    "It\u2019s important to be able to represent arbitrary collections of named values in messages. In .NET, this",
    "It\u2019s important to be able to represent arbitrary collections of named values in messages. In .NET, this",
    "message StockPrices {",
    "message StockPrices {",
    "In the generated code, map fields are represented by read-only properties of the",
    "In the generated code, map fields are represented by read-only properties of the",
    "Map fields can\u2019t be directly repeated in a message definition. But you can create a nested message",
    "Map fields can\u2019t be directly repeated in a message definition. But you can create a nested message",
    "message Order {",
    "message Order {",
    "Using MapField properties in code",
    "Using MapField properties in code",
    "The MapField properties generated from map fields are read-only, and will never be null. To set a map",
    "The MapField properties generated from map fields are read-only, and will never be null. To set a map",
    "public Order CreateOrder(Dictionary",
    "public Order CreateOrder(Dictionary",
    "22",
    "22",
    "CHAPTER 3 | Protocol buffers",
    "CHAPTER 3 | Protocol buffers",
    "return order;",
    "return order;",
    "Further reading",
    "Further reading",
    "For more information about Protobuf, see the official Protobuf documentation.",
    "For more information about Protobuf, see the official Protobuf documentation.",
    "23",
    "23",
    "CHAPTER 3 | Protocol buffers",
    "CHAPTER 3 | Protocol buffers",
    "CHAPTER  4",
    "CHAPTER  4",
    "Comparing WCF to gRPC",
    "Comparing WCF to gRPC",
    "The previous chapter gave you a good look at Protobuf and how gRPC handles messages. Before you",
    "The previous chapter gave you a good look at Protobuf and how gRPC handles messages. Before you",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Operations and methods",
    "Operations and methods",
    "Bindings and transports",
    "Bindings and transports",
    "RPC types",
    "RPC types",
    "\u2022  Metadata",
    "\u2022  Metadata",
    "\u2022",
    "\u2022",
    "Error handling",
    "Error handling",
    "\u2022  WS-",
    "\u2022  WS-",
    "gRPC example",
    "gRPC example",
    "When you create a new ASP.NET Core 7.0 gRPC project from Visual Studio 2022 or the command line,",
    "When you create a new ASP.NET Core 7.0 gRPC project from Visual Studio 2022 or the command line,",
    "syntax = ",
    "syntax = ",
    "option csharp",
    "option csharp",
    "package Greet;",
    "package Greet;",
    "// The greeting service definition.",
    "// The greeting service definition.",
    "// The request message that contains the user",
    "// The request message that contains the user",
    "// The response message that contains the greetings.",
    "// The response message that contains the greetings.",
    "24",
    "24",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "namespace HelloGrpc;",
    "namespace HelloGrpc;",
    "public class GreeterService : Greeter.GreeterBase",
    "public class GreeterService : Greeter.GreeterBase",
    "context)",
    "context)",
    "This chapter will refer to this example code when explaining different concepts and features of gRPC.",
    "This chapter will refer to this example code when explaining different concepts and features of gRPC.",
    "WCF endpoints and gRPC methods",
    "WCF endpoints and gRPC methods",
    "In Windows Communication Foundation (WCF), when you\u2019re writing your application code, you use",
    "In Windows Communication Foundation (WCF), when you\u2019re writing your application code, you use",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "You write the application code in a class and decorate methods with the OperationContract",
    "You write the application code in a class and decorate methods with the OperationContract",
    "You declare an interface for the service and add OperationContract attributes to the interface.",
    "You declare an interface for the service and add OperationContract attributes to the interface.",
    "For example, the WCF equivalent of the greet.proto Greeter service might be written as follows:",
    "For example, the WCF equivalent of the greet.proto Greeter service might be written as follows:",
    "[",
    "[",
    "Chapter 3 showed that Protobuf message definitions are used to generate data classes. Service and",
    "Chapter 3 showed that Protobuf message definitions are used to generate data classes. Service and",
    "OperationContract properties",
    "OperationContract properties",
    "The OperationContract attribute has properties to control or refine how it works. gRPC methods don\u2019t",
    "The OperationContract attribute has properties to control or refine how it works. gRPC methods don\u2019t",
    "25",
    "25",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "OperationContract property",
    "OperationContract property",
    "gRPC",
    "gRPC",
    "Action",
    "Action",
    "AsyncPattern",
    "AsyncPattern",
    "IsInitiating",
    "IsInitiating",
    "IsOneWay",
    "IsOneWay",
    "IsTerminating",
    "IsTerminating",
    "Name",
    "Name",
    "ProtectionLevel",
    "ProtectionLevel",
    "A URI identifies the operation. gRPC uses the name of",
    "A URI identifies the operation. gRPC uses the name of",
    "All gRPC service methods return Task objects.",
    "All gRPC service methods return Task objects.",
    "See the paragraph after this table.",
    "See the paragraph after this table.",
    "One-way gRPC methods return Empty results or use client",
    "One-way gRPC methods return Empty results or use client",
    "See the paragraph after this table.",
    "See the paragraph after this table.",
    "This property is SOAP related and has no meaning in gRPC.",
    "This property is SOAP related and has no meaning in gRPC.",
    "There\u2019s no message encryption. Network encryption is",
    "There\u2019s no message encryption. Network encryption is",
    "ReplyAction",
    "ReplyAction",
    "This property is SOAP related and has no meaning in gRPC.",
    "This property is SOAP related and has no meaning in gRPC.",
    "The IsInitiating property lets you indicate that a method within ServiceContract can\u2019t be the first",
    "The IsInitiating property lets you indicate that a method within ServiceContract can\u2019t be the first",
    "For more information on gRPC security and encryption, see chapter 6.",
    "For more information on gRPC security and encryption, see chapter 6.",
    "WCF bindings and transports",
    "WCF bindings and transports",
    "Windows Communication Foundation (WCF) has built-in bindings that specify different network",
    "Windows Communication Foundation (WCF) has built-in bindings that specify different network",
    "What follows is a short discussion about the most relevant WCF bindings and how they compare to",
    "What follows is a short discussion about the most relevant WCF bindings and how they compare to",
    "NetTCP",
    "NetTCP",
    "WCF\u2019s NetTCP binding allows for persistent connections, small messages, and two-way messaging.",
    "WCF\u2019s NetTCP binding allows for persistent connections, small messages, and two-way messaging.",
    "gRPC has many features of WCF\u2019s NetTCP binding, but they\u2019re not always implemented in the same",
    "gRPC has many features of WCF\u2019s NetTCP binding, but they\u2019re not always implemented in the same",
    "26",
    "26",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "HTTP",
    "HTTP",
    "The WCF binding called BasicHttpBinding is usually text-based and uses SOAP as the wire format. It\u2019s",
    "The WCF binding called BasicHttpBinding is usually text-based and uses SOAP as the wire format. It\u2019s",
    "The equivalent in gRPC uses HTTP/2 as the underlying transport layer with the binary Protobuf wire",
    "The equivalent in gRPC uses HTTP/2 as the underlying transport layer with the binary Protobuf wire",
    "Named pipes",
    "Named pipes",
    "WCF provided a named pipes binding for communication between processes on the same physical",
    "WCF provided a named pipes binding for communication between processes on the same physical",
    "For more information, see Inter-process communication with gRPC.",
    "For more information, see Inter-process communication with gRPC.",
    "MSMQ",
    "MSMQ",
    "MSMQ is a proprietary Windows message queue. WCF\u2019s binding to MSMQ enables \u201cfire and forget\u201d",
    "MSMQ is a proprietary Windows message queue. WCF\u2019s binding to MSMQ enables \u201cfire and forget\u201d",
    "The best alternative is to directly use a messaging system like Azure Service Bus, RabbitMQ, or Kafka.",
    "The best alternative is to directly use a messaging system like Azure Service Bus, RabbitMQ, or Kafka.",
    "WebHttpBinding",
    "WebHttpBinding",
    "WebHttpBinding (also known as WCF REST), with the WebGet and WebInvoke attributes, enabled you",
    "WebHttpBinding (also known as WCF REST), with the WebGet and WebInvoke attributes, enabled you",
    "Types of RPC",
    "Types of RPC",
    "As a Windows Communication Foundation (WCF) developer, you\u2019re probably used to dealing with the",
    "As a Windows Communication Foundation (WCF) developer, you\u2019re probably used to dealing with the",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Request/reply",
    "Request/reply",
    "Duplex:",
    "Duplex:",
    "\u2013",
    "\u2013",
    "\u2013",
    "\u2013",
    "One-way duplex with session",
    "One-way duplex with session",
    "Full duplex with session",
    "Full duplex with session",
    "\u2022",
    "\u2022",
    "One-way",
    "One-way",
    "27",
    "27",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "It\u2019s possible to map these RPC types fairly naturally to existing gRPC concepts. This chapter will look at",
    "It\u2019s possible to map these RPC types fairly naturally to existing gRPC concepts. This chapter will look at",
    "WCF",
    "WCF",
    "gRPC",
    "gRPC",
    "Regular request/reply",
    "Regular request/reply",
    "Unary",
    "Unary",
    "Duplex service with session using a client",
    "Duplex service with session using a client",
    "Server streaming",
    "Server streaming",
    "Full duplex service with session",
    "Full duplex service with session",
    "Bidirectional streaming",
    "Bidirectional streaming",
    "One-way operations",
    "One-way operations",
    "Client streaming",
    "Client streaming",
    "Request/reply",
    "Request/reply",
    "For simple request/reply methods that take and return small amounts of data, use the simplest gRPC",
    "For simple request/reply methods that take and return small amounts of data, use the simplest gRPC",
    "service Things {",
    "service Things {",
    "public class ThingService : Things.ThingsBase",
    "public class ThingService : Things.ThingsBase",
    "public async Task ShowThing(int thingId)",
    "public async Task ShowThing(int thingId)",
    "As you can see, implementing a gRPC unary RPC service method is similar to implementing a WCF",
    "As you can see, implementing a gRPC unary RPC service method is similar to implementing a WCF",
    "WCF duplex, one way to client",
    "WCF duplex, one way to client",
    "WCF applications (with certain bindings) can create a persistent connection between client and server.",
    "WCF applications (with certain bindings) can create a persistent connection between client and server.",
    "gRPC services provide similar functionality with message streams. Streams don\u2019t map exactly to WCF",
    "gRPC services provide similar functionality with message streams. Streams don\u2019t map exactly to WCF",
    "28",
    "28",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "gRPC streaming",
    "gRPC streaming",
    "gRPC supports the creation of persistent streams from client to server, and from server to client. Both",
    "gRPC supports the creation of persistent streams from client to server, and from server to client. Both",
    "You can use streams for arbitrary, asynchronous messaging over time. Or you can use them for",
    "You can use streams for arbitrary, asynchronous messaging over time. Or you can use them for",
    "The following example shows a server-streaming RPC.",
    "The following example shows a server-streaming RPC.",
    "service ClockStreamer {",
    "service ClockStreamer {",
    "public class ClockStreamerService : ClockStreamer.ClockStreamerBase",
    "public class ClockStreamerService : ClockStreamer.ClockStreamerBase",
    "This server stream can be consumed from a client application, as shown in the following code:",
    "This server stream can be consumed from a client application, as shown in the following code:",
    "public async Task TellTheTimeAsync(CancellationToken token)",
    "public async Task TellTheTimeAsync(CancellationToken token)",
    "}",
    "}",
    "Note",
    "Note",
    "Server-streaming RPCs are useful for subscription-style services. They\u2019re also useful for sending large",
    "Server-streaming RPCs are useful for subscription-style services. They\u2019re also useful for sending large",
    "29",
    "29",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "Differences from WCF",
    "Differences from WCF",
    "A WCF duplex service uses a client callback interface that can have multiple methods. A gRPC server-",
    "A WCF duplex service uses a client callback interface that can have multiple methods. A gRPC server-",
    "In WCF, the ServiceContract class with the session is kept alive until the connection is closed. Multiple",
    "In WCF, the ServiceContract class with the session is kept alive until the connection is closed. Multiple",
    "WCF one-way operations and gRPC client streaming",
    "WCF one-way operations and gRPC client streaming",
    "WCF provides one-way operations (marked with ",
    "WCF provides one-way operations (marked with ",
    "thing",
    "thing",
    "service ThingLog {",
    "service ThingLog {",
    "ThingLogService.cs",
    "ThingLogService.cs",
    "public class ThingLogService : Protos.ThingLog.ThingLogBase",
    "public class ThingLogService : Protos.ThingLog.ThingLogBase",
    "requestStream, ServerCallContext context)",
    "requestStream, ServerCallContext context)",
    "ThingLog client example",
    "ThingLog client example",
    "public class ThingLogger : IAsyncDisposable",
    "public class ThingLogger : IAsyncDisposable",
    "30",
    "30",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "{",
    "{",
    "}",
    "}",
    "You can use client-streaming RPCs for fire-and-forget messaging, as shown in the previous example.",
    "You can use client-streaming RPCs for fire-and-forget messaging, as shown in the previous example.",
    "WCF full-duplex services",
    "WCF full-duplex services",
    "WCF duplex binding supports multiple one-way operations on both the service interface and the",
    "WCF duplex binding supports multiple one-way operations on both the service interface and the",
    "chat.proto",
    "chat.proto",
    "service Chatter {",
    "service Chatter {",
    "ChatterService.cs",
    "ChatterService.cs",
    "public class ChatterService : Chatter.ChatterBase",
    "public class ChatterService : Chatter.ChatterBase",
    "IServerStreamWriter",
    "IServerStreamWriter",
    "31",
    "31",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "await ",
    "await ",
    "In the previous example, you can see that the implementation method receives both a request stream",
    "In the previous example, you can see that the implementation method receives both a request stream",
    "Chatter client",
    "Chatter client",
    "public class Chat : IAsyncDisposable",
    "public class Chat : IAsyncDisposable",
    "}",
    "}",
    "Metadata",
    "Metadata",
    "Metadata refers to additional data that might be useful during the processing of requests and",
    "Metadata refers to additional data that might be useful during the processing of requests and",
    "32",
    "32",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "It\u2019s possible to add generic key/value headers to Windows Communication Foundation (WCF)",
    "It\u2019s possible to add generic key/value headers to Windows Communication Foundation (WCF)",
    "gRPC calls and responses can also include metadata that\u2019s similar to HTTP headers. This metadata is",
    "gRPC calls and responses can also include metadata that\u2019s similar to HTTP headers. This metadata is",
    "Metadata is handled by the Metadata class of the Grpc.Core.Api NuGet package. This class can be",
    "Metadata is handled by the Metadata class of the Grpc.Core.Api NuGet package. This class can be",
    "This example shows how to add metadata to a call from a C# client:",
    "This example shows how to add metadata to a call from a C# client:",
    "var metadata = new Metadata",
    "var metadata = new Metadata",
    "var request = new GetPortfolioRequest",
    "var request = new GetPortfolioRequest",
    "var response = await client.GetPortfolioAsync(request, metadata);",
    "var response = await client.GetPortfolioAsync(request, metadata);",
    "gRPC services can access metadata from the ServerCallContext argument\u2019s RequestHeaders property:",
    "gRPC services can access metadata from the ServerCallContext argument\u2019s RequestHeaders property:",
    "public async Task",
    "public async Task",
    "Services can send metadata to clients by using the ResponseTrailers property of ServerCallContext:",
    "Services can send metadata to clients by using the ResponseTrailers property of ServerCallContext:",
    "public async Task",
    "public async Task",
    "Error handling",
    "Error handling",
    "Windows Communication Foundation (WCF) uses FaultException and FaultContract to provide",
    "Windows Communication Foundation (WCF) uses FaultException and FaultContract to provide",
    "33",
    "33",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "Unfortunately, the current version of gRPC lacks the sophistication found with WCF, and only has",
    "Unfortunately, the current version of gRPC lacks the sophistication found with WCF, and only has",
    "Status code",
    "Status code",
    "Problem",
    "Problem",
    "GRPC",
    "GRPC",
    "Method hasn\u2019t been written.",
    "Method hasn\u2019t been written.",
    "GRPC",
    "GRPC",
    "Problem with the whole service.",
    "Problem with the whole service.",
    "GRPC",
    "GRPC",
    "GRPC",
    "GRPC",
    "GRPC",
    "GRPC",
    "GRPC",
    "GRPC",
    "GRPC",
    "GRPC",
    "Invalid response.",
    "Invalid response.",
    "Problem with encoding/decoding.",
    "Problem with encoding/decoding.",
    "Authentication failed.",
    "Authentication failed.",
    "Authorization failed.",
    "Authorization failed.",
    "Call was canceled, usually by the",
    "Call was canceled, usually by the",
    "Raise errors in ASP.NET Core gRPC",
    "Raise errors in ASP.NET Core gRPC",
    "An ASP.NET Core gRPC service can send an error response by throwing an RpcException, which can be",
    "An ASP.NET Core gRPC service can send an error response by throwing an RpcException, which can be",
    "public async Task",
    "public async Task",
    "Catch errors in gRPC clients",
    "Catch errors in gRPC clients",
    "Just like WCF clients can catch FaultException errors, a gRPC client can catch an RpcException to",
    "Just like WCF clients can catch FaultException errors, a gRPC client can catch an RpcException to",
    "try",
    "try",
    "34",
    "34",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "{",
    "{",
    "Important",
    "Important",
    "When you provide additional metadata for errors, be sure to document the relevant keys and values",
    "When you provide additional metadata for errors, be sure to document the relevant keys and values",
    "gRPC richer error model",
    "gRPC richer error model",
    "Google has developed a richer error model that\u2019s more like WCF\u2019s FaultContract, but this model isn\u2019t",
    "Google has developed a richer error model that\u2019s more like WCF\u2019s FaultContract, but this model isn\u2019t",
    "WS-",
    "WS-",
    "One of the real benefits of working with Windows Communication Foundation (WCF) was that it",
    "One of the real benefits of working with Windows Communication Foundation (WCF) was that it",
    "Metadata exchange: WS-Policy, WS-Discovery, and so on",
    "Metadata exchange: WS-Policy, WS-Discovery, and so on",
    "SOAP services expose Web Services Description Language (WSDL) schema documents with",
    "SOAP services expose Web Services Description Language (WSDL) schema documents with",
    "gRPC works best when servers and clients are generated from the same .proto files, but a Server",
    "gRPC works best when servers and clients are generated from the same .proto files, but a Server",
    "The WS-Discovery protocol is used to locate services on a local network. gRPC services are located",
    "The WS-Discovery protocol is used to locate services on a local network. gRPC services are located",
    "Security: WS-Security, WS-Federation, XML Encryption, and so on",
    "Security: WS-Security, WS-Federation, XML Encryption, and so on",
    "Security, authentication, and authorization are covered in much more detail in chapter 6. But it\u2019s worth",
    "Security, authentication, and authorization are covered in much more detail in chapter 6. But it\u2019s worth",
    "35",
    "35",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "WS-ReliableMessaging",
    "WS-ReliableMessaging",
    "gRPC does not provide an equivalent to WS-ReliableMessaging. Retry semantics should be handled in",
    "gRPC does not provide an equivalent to WS-ReliableMessaging. Retry semantics should be handled in",
    "WS-Transaction, WS-Coordination",
    "WS-Transaction, WS-Coordination",
    "WCF\u2019s implementation of distributed transactions uses Microsoft Distributed Transaction Coordinator",
    "WCF\u2019s implementation of distributed transactions uses Microsoft Distributed Transaction Coordinator",
    "36",
    "36",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "CHAPTER 4 | Comparing WCF to gRPC",
    "CHAPTER  5",
    "CHAPTER  5",
    "Migrate a WCF solution to",
    "Migrate a WCF solution to",
    "This chapter will describe how to work with ASP.NET Core 7.0 gRPC projects and demonstrate",
    "This chapter will describe how to work with ASP.NET Core 7.0 gRPC projects and demonstrate",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Create an ASP.NET Core 7.0 gRPC project.",
    "Create an ASP.NET Core 7.0 gRPC project.",
    "Simple request-reply operations to gRPC unary RPC.",
    "Simple request-reply operations to gRPC unary RPC.",
    "One-way operations to gRPC client streaming RPC.",
    "One-way operations to gRPC client streaming RPC.",
    "Full-duplex services to gRPC bidirectional streaming RPC.",
    "Full-duplex services to gRPC bidirectional streaming RPC.",
    "There\u2019s also a comparison of using streaming services versus repeated fields for returning datasets,",
    "There\u2019s also a comparison of using streaming services versus repeated fields for returning datasets,",
    "The sample WCF application is a minimal stub of a set of stock trading services. It uses the open-",
    "The sample WCF application is a minimal stub of a set of stock trading services. It uses the open-",
    "The samples include the WCF and gRPC implementations of each service.",
    "The samples include the WCF and gRPC implementations of each service.",
    "Create a new ASP.NET Core gRPC project",
    "Create a new ASP.NET Core gRPC project",
    "The .NET SDK comes with a powerful CLI tool, dotnet, which enables you to create and manage",
    "The .NET SDK comes with a powerful CLI tool, dotnet, which enables you to create and manage",
    "Create the project by using Visual Studio",
    "Create the project by using Visual Studio",
    "Important",
    "Important",
    "To develop any ASP.NET Core 7.0 app, you need Visual Studio 2022, with the ASP.NET and web",
    "To develop any ASP.NET Core 7.0 app, you need Visual Studio 2022, with the ASP.NET and web",
    "37",
    "37",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "Create an empty solution called TraderSys from the Blank Solution template. Add a solution folder",
    "Create an empty solution called TraderSys from the Blank Solution template. Add a solution folder",
    "Select Next to continue to the Configure your new project dialog box. Name the project",
    "Select Next to continue to the Configure your new project dialog box. Name the project",
    "38",
    "38",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "Select Next to continue to the Create a new gRPC service dialog box.",
    "Select Next to continue to the Create a new gRPC service dialog box.",
    "39",
    "39",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "At present, you have limited options for the service creation. Docker will be introduced later, so for",
    "At present, you have limited options for the service creation. Docker will be introduced later, so for",
    "Create the project by using the .NET CLI",
    "Create the project by using the .NET CLI",
    "This section covers the creation of solutions and projects from the command line.",
    "This section covers the creation of solutions and projects from the command line.",
    "Create the solution as shown in the following command. The -o (or --output) flag specifies the output",
    "Create the solution as shown in the following command. The -o (or --output) flag specifies the output",
    "dotnet new sln -o TraderSys",
    "dotnet new sln -o TraderSys",
    "ASP.NET Core 7.0 comes with a CLI template for gRPC services. Create the new project by using this",
    "ASP.NET Core 7.0 comes with a CLI template for gRPC services. Create the new project by using this",
    "dotnet new grpc -o src/TraderSys.Portfolios",
    "dotnet new grpc -o src/TraderSys.Portfolios",
    "Finally, add the project to the solution by using the dotnet sln command:",
    "Finally, add the project to the solution by using the dotnet sln command:",
    "dotnet sln add src/TraderSys.Portfolios",
    "dotnet sln add src/TraderSys.Portfolios",
    "40",
    "40",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "Tip",
    "Tip",
    "Because the particular directory only contains a single .csproj file, you can specify just the directory, to",
    "Because the particular directory only contains a single .csproj file, you can specify just the directory, to",
    "You can now open this solution in Visual Studio 2022, Visual Studio Code, or whatever editor you",
    "You can now open this solution in Visual Studio 2022, Visual Studio Code, or whatever editor you",
    "Clean up the example code",
    "Clean up the example code",
    "You\u2019ve now created an example service by using the gRPC template, which was reviewed earlier in the",
    "You\u2019ve now created an example service by using the gRPC template, which was reviewed earlier in the",
    "Rename and edit the proto file",
    "Rename and edit the proto file",
    "Go ahead and rename the Protos/greet.proto file to Protos/portfolios.proto, and open it in your",
    "Go ahead and rename the Protos/greet.proto file to Protos/portfolios.proto, and open it in your",
    "syntax = ",
    "syntax = ",
    "option csharp",
    "option csharp",
    "package PortfolioServer;",
    "package PortfolioServer;",
    "service Portfolios {",
    "service Portfolios {",
    "Tip",
    "Tip",
    "The template doesn\u2019t add the Protos namespace part by default, but adding it makes it easier to keep",
    "The template doesn\u2019t add the Protos namespace part by default, but adding it makes it easier to keep",
    "If you rename the greet.proto file in an integrated development environment (IDE) like Visual Studio, a",
    "If you rename the greet.proto file in an integrated development environment (IDE) like Visual Studio, a",
    "In the gRPC build targets, there\u2019s a Protobuf item element that lets you specify which .proto files",
    "In the gRPC build targets, there\u2019s a Protobuf item element that lets you specify which .proto files",
    "Rename the GreeterService class",
    "Rename the GreeterService class",
    "The GreeterService class is in the Services folder and inherits from Greeter.GreeterBase. Rename it to",
    "The GreeterService class is in the Services folder and inherits from Greeter.GreeterBase. Rename it to",
    "41",
    "41",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "public class PortfolioService : Protos.Portfolios.PortfoliosBase",
    "public class PortfolioService : Protos.Portfolios.PortfoliosBase",
    "There was a reference to the GreeterService class in the Program.cs. If you used refactoring to rename",
    "There was a reference to the GreeterService class in the Program.cs. If you used refactoring to rename",
    "using TraderSys.Portfolios.Services;",
    "using TraderSys.Portfolios.Services;",
    "var builder = WebApplication.CreateBuilder(args);",
    "var builder = WebApplication.CreateBuilder(args);",
    "// Add services to the container.",
    "// Add services to the container.",
    "builder.Services.AddGrpc();",
    "builder.Services.AddGrpc();",
    "var app = builder.Build();",
    "var app = builder.Build();",
    "// Configure the HTTP request pipeline.",
    "// Configure the HTTP request pipeline.",
    "app.Run();",
    "app.Run();",
    "In the next section, we\u2019ll add functionality to this new service.",
    "In the next section, we\u2019ll add functionality to this new service.",
    "Migrate a WCF request-reply service to a gRPC",
    "Migrate a WCF request-reply service to a gRPC",
    "This section covers how to migrate a basic request-reply service in WCF to a unary RPC service in",
    "This section covers how to migrate a basic request-reply service in WCF to a unary RPC service in",
    "The WCF solution",
    "The WCF solution",
    "The PortfoliosSample solution includes a simple request-reply Portfolio service to download either a",
    "The PortfoliosSample solution includes a simple request-reply Portfolio service to download either a",
    "[",
    "[",
    "}",
    "}",
    "42",
    "42",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "The Portfolio model is a simple C# class marked with DataContract and including a list of",
    "The Portfolio model is a simple C# class marked with DataContract and including a list of",
    "[",
    "[",
    "}",
    "}",
    "[",
    "[",
    "}",
    "}",
    "The ServiceContract implementation uses a repository class provided via dependency injection that",
    "The ServiceContract implementation uses a repository class provided via dependency injection that",
    "public class PortfolioService : Protos.Portfolios.PortfoliosBase",
    "public class PortfolioService : Protos.Portfolios.PortfoliosBase",
    "}",
    "}",
    "43",
    "43",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "The portfolios.proto file",
    "The portfolios.proto file",
    "If you followed the instructions in the previous section, you should have a gRPC project with a",
    "If you followed the instructions in the previous section, you should have a gRPC project with a",
    "syntax = ",
    "syntax = ",
    "option csharp",
    "option csharp",
    "package PortfolioServer;",
    "package PortfolioServer;",
    "service Portfolios {",
    "service Portfolios {",
    "The first step is to migrate the DataContract classes to their Protobuf equivalents.",
    "The first step is to migrate the DataContract classes to their Protobuf equivalents.",
    "Convert the DataContract classes to gRPC messages",
    "Convert the DataContract classes to gRPC messages",
    "The PortfolioItem class will be converted to a Protobuf message first, because the Portfolio class",
    "The PortfolioItem class will be converted to a Protobuf message first, because the Portfolio class",
    "Note",
    "Note",
    "Remember to use snake",
    "Remember to use snake",
    "message PortfolioItem {",
    "message PortfolioItem {",
    "The Portfolio class is a little more complicated. In the WCF code, the developer used a Guid for the",
    "The Portfolio class is a little more complicated. In the WCF code, the developer used a Guid for the",
    "message Portfolio {",
    "message Portfolio {",
    "Now that you have the data messages, you can declare the service RPC endpoints.",
    "Now that you have the data messages, you can declare the service RPC endpoints.",
    "44",
    "44",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "Convert ServiceContract to a gRPC service",
    "Convert ServiceContract to a gRPC service",
    "The WCF Get method takes two parameters: Guid traderId and int portfolioId. gRPC service methods",
    "The WCF Get method takes two parameters: Guid traderId and int portfolioId. gRPC service methods",
    "The service could just return a Portfolio message directly, but again, this could affect backward",
    "The service could just return a Portfolio message directly, but again, this could affect backward",
    "This example shows the declaration of the gRPC service method with the GetRequest message:",
    "This example shows the declaration of the gRPC service method with the GetRequest message:",
    "message GetRequest {",
    "message GetRequest {",
    "message GetResponse {",
    "message GetResponse {",
    "service Portfolios {",
    "service Portfolios {",
    "The WCF GetAll method takes only a single parameter, traderId, so it might seem that you could",
    "The WCF GetAll method takes only a single parameter, traderId, so it might seem that you could",
    "The WCF method also returns a List",
    "The WCF method also returns a List",
    "Warning",
    "Warning",
    "You might be tempted to create a PortfolioList message or something similar and use it across",
    "You might be tempted to create a PortfolioList message or something similar and use it across",
    "message GetAllRequest {",
    "message GetAllRequest {",
    "message GetAllResponse {",
    "message GetAllResponse {",
    "service Portfolios {",
    "service Portfolios {",
    "45",
    "45",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "rpc GetAll(GetAllRequest) returns (GetAllResponse);",
    "rpc GetAll(GetAllRequest) returns (GetAllResponse);",
    "If you save your project with these changes, the gRPC build target will run in the background and",
    "If you save your project with these changes, the gRPC build target will run in the background and",
    "Open the Services/GreeterService.cs class and delete the example code. Now you can add the",
    "Open the Services/GreeterService.cs class and delete the example code. Now you can add the",
    "namespace TraderSys.Portfolios.Services;",
    "namespace TraderSys.Portfolios.Services;",
    "public class PortfolioService : Protos.Portfolios.PortfoliosBase",
    "public class PortfolioService : Protos.Portfolios.PortfoliosBase",
    "The base class declares virtual methods for Get and GetAll that can be overridden to implement the",
    "The base class declares virtual methods for Get and GetAll that can be overridden to implement the",
    "The signature for all gRPC unary service methods in ASP.NET Core is consistent. There are two",
    "The signature for all gRPC unary service methods in ASP.NET Core is consistent. There are two",
    "The method\u2019s return type is a Task",
    "The method\u2019s return type is a Task",
    "Migrate the PortfolioData library to .NET",
    "Migrate the PortfolioData library to .NET",
    "At this point, the project needs the Portfolio repository and models contained in the",
    "At this point, the project needs the Portfolio repository and models contained in the",
    "dotnet new classlib -o src/TraderSys.PortfolioData",
    "dotnet new classlib -o src/TraderSys.PortfolioData",
    "After you\u2019ve created the library and added it to the solution, delete the generated Class1.cs file and",
    "After you\u2019ve created the library and added it to the solution, delete the generated Class1.cs file and",
    "Models",
    "Models",
    "46",
    "46",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "IPortfolioRepository.cs",
    "IPortfolioRepository.cs",
    "SDK-style .NET projects automatically include any .cs files in or under their own directory, so you don\u2019t",
    "SDK-style .NET projects automatically include any .cs files in or under their own directory, so you don\u2019t",
    "public class Portfolio",
    "public class Portfolio",
    "public class PortfolioItem",
    "public class PortfolioItem",
    "Use ASP.NET Core dependency injection",
    "Use ASP.NET Core dependency injection",
    "Now you can add a reference to this library to the gRPC application project and consume the",
    "Now you can add a reference to this library to the gRPC application project and consume the",
    "using TraderSys.Portfolios.Services;",
    "using TraderSys.Portfolios.Services;",
    "var builder = WebApplication.CreateBuilder(args);",
    "var builder = WebApplication.CreateBuilder(args);",
    "// Register the repository class as a scoped service (instance per request)",
    "// Register the repository class as a scoped service (instance per request)",
    "builder.Services.AddGrpc();",
    "builder.Services.AddGrpc();",
    "var app = builder.Build();",
    "var app = builder.Build();",
    "// Configure the HTTP request pipeline.",
    "// Configure the HTTP request pipeline.",
    "app.Run();",
    "app.Run();",
    "The IPortfolioRepository implementation can now be specified as a constructor parameter in the",
    "The IPortfolioRepository implementation can now be specified as a constructor parameter in the",
    "public class PortfolioService : Protos.Portfolios.PortfoliosBase",
    "public class PortfolioService : Protos.Portfolios.PortfoliosBase",
    "47",
    "47",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "_",
    "_",
    "Implement the gRPC service",
    "Implement the gRPC service",
    "Now that you\u2019ve declared your messages and your service in the portfolios.proto file, you have to",
    "Now that you\u2019ve declared your messages and your service in the portfolios.proto file, you have to",
    "Start by implementing the Get method. The default override looks like this example:",
    "Start by implementing the Get method. The default override looks like this example:",
    "public override Task",
    "public override Task",
    "The first problem is that request.TraderId is a string, and the service requires a Guid. Even though the",
    "The first problem is that request.TraderId is a string, and the service requires a Guid. Even though the",
    "public override Task",
    "public override Task",
    "}",
    "}",
    "After there\u2019s a proper Guid value for traderId, you can use the repository to retrieve the Portfolio and",
    "After there\u2019s a proper Guid value for traderId, you can use the repository to retrieve the Portfolio and",
    "Map internal models to gRPC messages",
    "Map internal models to gRPC messages",
    "The previous code doesn\u2019t actually work because the repository is returning its own POCO model",
    "The previous code doesn\u2019t actually work because the repository is returning its own POCO model",
    "namespace TraderSys.Portfolios.Protos;",
    "namespace TraderSys.Portfolios.Protos;",
    "public partial class PortfolioItem",
    "public partial class PortfolioItem",
    "48",
    "48",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "source)",
    "source)",
    "}",
    "}",
    "public partial class Portfolio",
    "public partial class Portfolio",
    "}",
    "}",
    "Note",
    "Note",
    "You could use a library like AutoMapper to handle this conversion from internal model classes to",
    "You could use a library like AutoMapper to handle this conversion from internal model classes to",
    "Now that you have the conversion code in place, you can complete the Get method implementation:",
    "Now that you have the conversion code in place, you can complete the Get method implementation:",
    "public override async Task",
    "public override async Task",
    "}",
    "}",
    "49",
    "49",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "The implementation of the GetAll method is similar. Note that the repeated fields on Protobuf",
    "The implementation of the GetAll method is similar. Note that the repeated fields on Protobuf",
    "public override async Task",
    "public override async Task",
    "}",
    "}",
    "Having successfully migrated the WCF request-reply service to gRPC, let\u2019s look at creating a client for",
    "Having successfully migrated the WCF request-reply service to gRPC, let\u2019s look at creating a client for",
    "Generate client code",
    "Generate client code",
    "Create a .NET Standard class library in the same solution to contain the client. This is primarily an",
    "Create a .NET Standard class library in the same solution to contain the client. This is primarily an",
    "Caution",
    "Caution",
    "The Grpc.Net.Client NuGet package requires .NET Core 3.0 or later (or another .NET Standard 2.1-",
    "The Grpc.Net.Client NuGet package requires .NET Core 3.0 or later (or another .NET Standard 2.1-",
    "In Visual Studio 2022, you can add references to gRPC services in a way that\u2019s similar to how you\u2019d",
    "In Visual Studio 2022, you can add references to gRPC services in a way that\u2019s similar to how you\u2019d",
    "50",
    "50",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "Browse to the portfolios.proto file in the TraderSys.Portfolios project, leave Client under Select the",
    "Browse to the portfolios.proto file in the TraderSys.Portfolios project, leave Client under Select the",
    "51",
    "51",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "Tip",
    "Tip",
    "Notice that this dialog box also provides a URL field. If your organization maintains a web-accessible",
    "Notice that this dialog box also provides a URL field. If your organization maintains a web-accessible",
    "When you use the Visual Studio Add Connected Service feature, the portfolios.proto file is added to",
    "When you use the Visual Studio Add Connected Service feature, the portfolios.proto file is added to",
    "Tip",
    "Tip",
    "If you\u2019re not using Visual Studio or prefer to work from the command line, you can use the dotnet-",
    "If you\u2019re not using Visual Studio or prefer to work from the command line, you can use the dotnet-",
    "Use the Portfolios service from a client application",
    "Use the Portfolios service from a client application",
    "The following code is a brief example of how to use the generated client in a console application. A",
    "The following code is a brief example of how to use the generated client in a console application. A",
    "52",
    "52",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "public class Program",
    "public class Program",
    "}",
    "}",
    "You\u2019ve now migrated a basic WCF application to an ASP.NET Core gRPC service and created a client to",
    "You\u2019ve now migrated a basic WCF application to an ASP.NET Core gRPC service and created a client to",
    "Migrate WCF duplex services to gRPC",
    "Migrate WCF duplex services to gRPC",
    "Now that you have a sense of the basic concepts, in this section, you\u2019ll look at the more complicated",
    "Now that you have a sense of the basic concepts, in this section, you\u2019ll look at the more complicated",
    "There are multiple ways to use duplex services in Windows Communication Foundation (WCF). Some",
    "There are multiple ways to use duplex services in Windows Communication Foundation (WCF). Some",
    "Server streaming RPC",
    "Server streaming RPC",
    "In the sample SimpleStockTicker WCF solution, SimpleStockPriceTicker, there\u2019s a duplex service for",
    "In the sample SimpleStockTicker WCF solution, SimpleStockPriceTicker, there\u2019s a duplex service for",
    "The WCF solution",
    "The WCF solution",
    "The WCF solution is implemented as a self-hosted Net.TCP server in a .NET Framework 4.x console",
    "The WCF solution is implemented as a self-hosted Net.TCP server in a .NET Framework 4.x console",
    "53",
    "53",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "ServiceContract",
    "ServiceContract",
    "[",
    "[",
    "The service has a single method with no return type because it uses the callback interface",
    "The service has a single method with no return type because it uses the callback interface",
    "The callback interface",
    "The callback interface",
    "[",
    "[",
    "You can find the implementations of these interfaces in the solution, along with faked external",
    "You can find the implementations of these interfaces in the solution, along with faked external",
    "gRPC streaming",
    "gRPC streaming",
    "The gRPC process for handling real-time data is different from the WCF process. A call from client to",
    "The gRPC process for handling real-time data is different from the WCF process. A call from client to",
    "The service definition needs two messages: one for the request and one for the stream. The service",
    "The service definition needs two messages: one for the request and one for the stream. The service",
    "simple",
    "simple",
    "syntax = ",
    "syntax = ",
    "option csharp",
    "option csharp",
    "import ",
    "import ",
    "package SimpleStockTickerServer;",
    "package SimpleStockTickerServer;",
    "service SimpleStockTicker {",
    "service SimpleStockTicker {",
    "message SubscribeRequest {",
    "message SubscribeRequest {",
    "message StockTickerUpdate {",
    "message StockTickerUpdate {",
    "54",
    "54",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "string symbol = 1;",
    "string symbol = 1;",
    "Implement SimpleStockTicker",
    "Implement SimpleStockTicker",
    "Reuse the fake StockPriceSubscriber from the WCF project by copying the three classes from the",
    "Reuse the fake StockPriceSubscriber from the WCF project by copying the three classes from the",
    "The factory implementation",
    "The factory implementation",
    "public interface IStockPriceSubscriberFactory",
    "public interface IStockPriceSubscriberFactory",
    "public class StockPriceSubscriberFactory : IStockPriceSubscriberFactory",
    "public class StockPriceSubscriberFactory : IStockPriceSubscriberFactory",
    "Register the factory",
    "Register the factory",
    "var builder = WebApplication.CreateBuilder(args);",
    "var builder = WebApplication.CreateBuilder(args);",
    "// Additional configuration is required to successfully run gRPC on macOS.",
    "// Additional configuration is required to successfully run gRPC on macOS.",
    "// Add services to the container.",
    "// Add services to the container.",
    "// Register the factory",
    "// Register the factory",
    "builder.Services.AddGrpc();",
    "builder.Services.AddGrpc();",
    "var app = builder.Build();",
    "var app = builder.Build();",
    "// Configure the HTTP request pipeline.",
    "// Configure the HTTP request pipeline.",
    "app.Run();",
    "app.Run();",
    "This class can now be used to implement the gRPC StockTickerService.",
    "This class can now be used to implement the gRPC StockTickerService.",
    "55",
    "55",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "StockTickerService.cs",
    "StockTickerService.cs",
    "public class StockTickerService : Protos.SimpleStockTicker.SimpleStockTickerBase",
    "public class StockTickerService : Protos.SimpleStockTicker.SimpleStockTickerBase",
    "IServerStreamWriter",
    "IServerStreamWriter",
    "string symbol, decimal price)",
    "string symbol, decimal price)",
    "}",
    "}",
    "As you can see, although the declaration in the .proto file says the method returns a stream of",
    "As you can see, although the declaration in the .proto file says the method returns a stream of",
    "Unlike a WCF duplex service, where the instance of the service class is kept alive while the connection",
    "Unlike a WCF duplex service, where the instance of the service class is kept alive while the connection",
    "56",
    "56",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "The service can tell when the client has closed the connection by using the CancellationToken from",
    "The service can tell when the client has closed the connection by using the CancellationToken from",
    "In the Subscribe method, then, get a StockPriceSubscriber and add an event handler that writes to the",
    "In the Subscribe method, then, get a StockPriceSubscriber and add an event handler that writes to the",
    "The WriteUpdateAsync method has a try/catch block to handle any errors that might happen when a",
    "The WriteUpdateAsync method has a try/catch block to handle any errors that might happen when a",
    "Use StockTickerService from a client application",
    "Use StockTickerService from a client application",
    "Follow the same steps in the previous section to create a shareable client class library from the .proto",
    "Follow the same steps in the previous section to create a shareable client class library from the .proto",
    "Example Program.cs",
    "Example Program.cs",
    "class Program",
    "class Program",
    "}",
    "}",
    "In this case, the Subscribe method on the generated client isn\u2019t asynchronous. The stream is created",
    "In this case, the Subscribe method on the generated client isn\u2019t asynchronous. The stream is created",
    "The stream is passed to an asynchronous DisplayAsync method. The application then waits for the",
    "The stream is passed to an asynchronous DisplayAsync method. The application then waits for the",
    "57",
    "57",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "Note",
    "Note",
    "This code uses the new C# 8 using declaration syntax to dispose of the stream and the channel when",
    "This code uses the new C# 8 using declaration syntax to dispose of the stream and the channel when",
    "Consume the stream",
    "Consume the stream",
    "WCF uses callback interfaces to allow the server to call methods directly on the client. gRPC streams",
    "WCF uses callback interfaces to allow the server to call methods directly on the client. gRPC streams",
    "The IAsyncStreamReader",
    "The IAsyncStreamReader",
    "static async Task DisplayAsync(IAsyncStreamReader",
    "static async Task DisplayAsync(IAsyncStreamReader",
    "Tip",
    "Tip",
    "For developers using reactive programming patterns, the section on client libraries at the end of this",
    "For developers using reactive programming patterns, the section on client libraries at the end of this",
    "Again, be sure to catch exceptions here because of the possibility of network failure, and because of",
    "Again, be sure to catch exceptions here because of the possibility of network failure, and because of",
    "Bidirectional streaming",
    "Bidirectional streaming",
    "A WCF full-duplex service allows for asynchronous, real-time messaging in both directions. In the",
    "A WCF full-duplex service allows for asynchronous, real-time messaging in both directions. In the",
    "58",
    "58",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "version of that service would allow the client to add and remove stocks from the list without having to",
    "version of that service would allow the client to add and remove stocks from the list without having to",
    "The IFullStockTickerService interface provides three methods:",
    "The IFullStockTickerService interface provides three methods:",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Subscribe starts the connection.",
    "Subscribe starts the connection.",
    "AddSymbol adds a stock symbol to watch.",
    "AddSymbol adds a stock symbol to watch.",
    "RemoveSymbol removes a symbol from the watched list.",
    "RemoveSymbol removes a symbol from the watched list.",
    "[",
    "[",
    "}",
    "}",
    "The callback interface remains the same.",
    "The callback interface remains the same.",
    "Implementing this pattern in gRPC is less straightforward because there are now two streams of data",
    "Implementing this pattern in gRPC is less straightforward because there are now two streams of data",
    "In a case where there\u2019s a specific set of types that are acceptable, oneof is a better way to go. Use an",
    "In a case where there\u2019s a specific set of types that are acceptable, oneof is a better way to go. Use an",
    "message ActionMessage {",
    "message ActionMessage {",
    "message AddSymbolRequest {",
    "message AddSymbolRequest {",
    "message RemoveSymbolRequest {",
    "message RemoveSymbolRequest {",
    "Declare a bidirectional streaming service that takes a stream of ActionMessage messages:",
    "Declare a bidirectional streaming service that takes a stream of ActionMessage messages:",
    "service FullStockTicker {",
    "service FullStockTicker {",
    "59",
    "59",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "The implementation for this service is similar to that of the previous example, except the first",
    "The implementation for this service is similar to that of the previous example, except the first",
    "public override async Task Subscribe(IAsyncStreamReader",
    "public override async Task Subscribe(IAsyncStreamReader",
    "}",
    "}",
    "private async Task WriteUpdateAsync(IServerStreamWriter",
    "private async Task WriteUpdateAsync(IServerStreamWriter",
    "private static Task AwaitCancellation(CancellationToken token)",
    "private static Task AwaitCancellation(CancellationToken token)",
    "The ActionMessage class that gRPC has generated guarantees that only one of the Add and Remove",
    "The ActionMessage class that gRPC has generated guarantees that only one of the Add and Remove",
    "public enum ActionOneofCase {",
    "public enum ActionOneofCase {",
    "60",
    "60",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "The property ActionCase on the ActionMessage object can be used with a switch statement to",
    "The property ActionCase on the ActionMessage object can be used with a switch statement to",
    "private async Task HandleActions(IAsyncStreamReader",
    "private async Task HandleActions(IAsyncStreamReader",
    "Tip",
    "Tip",
    "The switch statement has a default case that logs a warning if it encounters an unknown",
    "The switch statement has a default case that logs a warning if it encounters an unknown",
    "Use FullStockTickerService from a client application",
    "Use FullStockTickerService from a client application",
    "There\u2019s a simple .NET WPF application that demonstrates the use of this more complex client. You can",
    "There\u2019s a simple .NET WPF application that demonstrates the use of this more complex client. You can",
    "The client is used in the MainWindowViewModel class, which gets an instance of the",
    "The client is used in the MainWindowViewModel class, which gets an instance of the",
    "public class MainWindowViewModel : IAsyncDisposable, INotifyPropertyChanged",
    "public class MainWindowViewModel : IAsyncDisposable, INotifyPropertyChanged",
    "61",
    "61",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "AddCommand = new AsyncCommand(Add, CanAdd);",
    "AddCommand = new AsyncCommand(Add, CanAdd);",
    "The object returned by the client.Subscribe() method is now an instance of the gRPC library type",
    "The object returned by the client.Subscribe() method is now an instance of the gRPC library type",
    "The request stream is used from some WPF ICommand methods to add and remove symbols. For",
    "The request stream is used from some WPF ICommand methods to add and remove symbols. For",
    "private async Task Add()",
    "private async Task Add()",
    "public async Task Remove(PriceViewModel priceViewModel)",
    "public async Task Remove(PriceViewModel priceViewModel)",
    "Important",
    "Important",
    "Setting a oneof field\u2019s value on a message automatically clears any fields that have been set",
    "Setting a oneof field\u2019s value on a message automatically clears any fields that have been set",
    "The stream of responses is handled in an async method. The Task it returns is held to be disposed",
    "The stream of responses is handled in an async method. The Task it returns is held to be disposed",
    "private async Task HandleResponsesAsync(CancellationToken token)",
    "private async Task HandleResponsesAsync(CancellationToken token)",
    "update.PriceCents / 100m};",
    "update.PriceCents / 100m};",
    "62",
    "62",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "catch (OperationCancelledException) { }",
    "catch (OperationCancelledException) { }",
    "Client cleanup",
    "Client cleanup",
    "When the window is closed and the MainWindowViewModel is disposed (from the Closed event of",
    "When the window is closed and the MainWindowViewModel is disposed (from the Closed event of",
    "public async ValueTask DisposeAsync()",
    "public async ValueTask DisposeAsync()",
    "Closing request streams enables the server to dispose of its own resources in a timely way. This",
    "Closing request streams enables the server to dispose of its own resources in a timely way. This",
    "gRPC streaming services vs. repeated fields",
    "gRPC streaming services vs. repeated fields",
    "gRPC services provide two ways of returning datasets, or lists of objects. The Protocol Buffers message",
    "gRPC services provide two ways of returning datasets, or lists of objects. The Protocol Buffers message",
    "You can also use the stream feature for long-running temporal data such as notifications or log",
    "You can also use the stream feature for long-running temporal data such as notifications or log",
    "Which you should use depends on factors such as:",
    "Which you should use depends on factors such as:",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "The overall size of the dataset.",
    "The overall size of the dataset.",
    "The time it took to create the dataset at either the client or server end.",
    "The time it took to create the dataset at either the client or server end.",
    "\u2022  Whether the consumer of the dataset can start acting on it as soon as the first item is",
    "\u2022  Whether the consumer of the dataset can start acting on it as soon as the first item is",
    "available, or needs the complete dataset to do anything useful.",
    "available, or needs the complete dataset to do anything useful.",
    "When to use repeated fields",
    "When to use repeated fields",
    "For any dataset that\u2019s constrained in size and that can be generated in its entirety in a short time\u2014",
    "For any dataset that\u2019s constrained in size and that can be generated in its entirety in a short time\u2014",
    "63",
    "63",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "If the client needs all the data before starting to process it and the dataset is small enough to",
    "If the client needs all the data before starting to process it and the dataset is small enough to",
    "When to use stream methods",
    "When to use stream methods",
    "When the message objects in your datasets are potentially very large, it\u2019s best for you transfer them",
    "When the message objects in your datasets are potentially very large, it\u2019s best for you transfer them",
    "Similarly, you should send datasets of unconstrained size over streams to avoid running out of",
    "Similarly, you should send datasets of unconstrained size over streams to avoid running out of",
    "For datasets where the consumer can separately process each item, you should consider using a",
    "For datasets where the consumer can separately process each item, you should consider using a",
    "Another scenario where streams can be useful is where a message is being processed across multiple",
    "Another scenario where streams can be useful is where a message is being processed across multiple",
    "Create gRPC client libraries",
    "Create gRPC client libraries",
    "It isn\u2019t necessary to distribute client libraries for a gRPC application. You can create a shared library of",
    "It isn\u2019t necessary to distribute client libraries for a gRPC application. You can create a shared library of",
    "One advantage of distributing a client library is that you can enhance the generated gRPC and",
    "One advantage of distributing a client library is that you can enhance the generated gRPC and",
    "Caution",
    "Caution",
    "You shouldn\u2019t use custom code to provide essential functionality. You don\u2019t want to restrict that",
    "You shouldn\u2019t use custom code to provide essential functionality. You don\u2019t want to restrict that",
    "Ensure that as many teams as possible can access your gRPC service. The best way to do this",
    "Ensure that as many teams as possible can access your gRPC service. The best way to do this",
    "64",
    "64",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "particularly true in a multi-platform environment, where different teams frequently use different",
    "particularly true in a multi-platform environment, where different teams frequently use different",
    "Useful extensions",
    "Useful extensions",
    "There are two commonly used interfaces in .NET for dealing with streams of objects: IEnumerable and",
    "There are two commonly used interfaces in .NET for dealing with streams of objects: IEnumerable and",
    "With the .NET gRPC client libraries, there\u2019s a ReadAllAsync extension method for",
    "With the .NET gRPC client libraries, there\u2019s a ReadAllAsync extension method for",
    "IObservable",
    "IObservable",
    "The IObservable",
    "The IObservable",
    "This code is longer than the IAsyncEnumerable",
    "This code is longer than the IAsyncEnumerable",
    "namespace Grpc.Core;",
    "namespace Grpc.Core;",
    "public class GrpcStreamObservable",
    "public class GrpcStreamObservable",
    "default)",
    "default)",
    "}",
    "}",
    "65",
    "65",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "Important",
    "Important",
    "This observable implementation allows the Subscribe method to be called only once, because having",
    "This observable implementation allows the Subscribe method to be called only once, because having",
    "The GrpcStreamSubscription class handles the enumeration of the IAsyncStreamReader:",
    "The GrpcStreamSubscription class handles the enumeration of the IAsyncStreamReader:",
    "public class GrpcStreamSubscription",
    "public class GrpcStreamSubscription",
    "CancellationToken token = default)",
    "CancellationToken token = default)",
    "66",
    "66",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "_",
    "_",
    "}",
    "}",
    "All that is required now is a simple extension method to create the observable from the stream reader.",
    "All that is required now is a simple extension method to create the observable from the stream reader.",
    "namespace Grpc.Core;",
    "namespace Grpc.Core;",
    "Summary",
    "Summary",
    "The IAsyncEnumerable and IObservable models are both well-supported and well-documented ways",
    "The IAsyncEnumerable and IObservable models are both well-supported and well-documented ways",
    "67",
    "67",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER 5 | Migrate a WCF solution to gRPC",
    "CHAPTER  6",
    "CHAPTER  6",
    "Security in gRPC",
    "Security in gRPC",
    "In any real-world scenario, securing applications and services are essential. Security covers three key",
    "In any real-world scenario, securing applications and services are essential. Security covers three key",
    "Encrypting network traffic to prevent malicious hackers from intercepting it.",
    "Encrypting network traffic to prevent malicious hackers from intercepting it.",
    "Authenticating clients and servers to establish identity and trust.",
    "Authenticating clients and servers to establish identity and trust.",
    "Authorizing clients to control access to systems and apply permissions based on identity.",
    "Authorizing clients to control access to systems and apply permissions based on identity.",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Note",
    "Note",
    "Authentication is concerned with establishing the identity of a client or server. Authorization is",
    "Authentication is concerned with establishing the identity of a client or server. Authorization is",
    "This chapter will cover the facilities for authentication and authorization in gRPC for ASP.NET Core. It",
    "This chapter will cover the facilities for authentication and authorization in gRPC for ASP.NET Core. It",
    "WCF authentication and authorization",
    "WCF authentication and authorization",
    "In Windows Communication Foundation (WCF), authentication and authorization were handled in",
    "In Windows Communication Foundation (WCF), authentication and authorization were handled in",
    "gRPC authentication and authorization",
    "gRPC authentication and authorization",
    "gRPC authentication and authorization works on two levels:",
    "gRPC authentication and authorization works on two levels:",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Call-level authentication/authorization is usually handled through tokens that are applied in",
    "Call-level authentication/authorization is usually handled through tokens that are applied in",
    "Channel-level authentication uses a client certificate that\u2019s applied at the connection level. It",
    "Channel-level authentication uses a client certificate that\u2019s applied at the connection level. It",
    "You can use either or both of these mechanisms to help secure your service.",
    "You can use either or both of these mechanisms to help secure your service.",
    "68",
    "68",
    "CHAPTER 6 | Security in gRPC applications",
    "CHAPTER 6 | Security in gRPC applications",
    "The ASP.NET Core implementation of gRPC supports authentication and authorization through most",
    "The ASP.NET Core implementation of gRPC supports authentication and authorization through most",
    "\u2022",
    "\u2022",
    "Call authentication",
    "Call authentication",
    "\u2013",
    "\u2013",
    "\u2013",
    "\u2013",
    "\u2013",
    "\u2013",
    "\u2013",
    "\u2013",
    "\u2013",
    "\u2013",
    "Azure Active Directory",
    "Azure Active Directory",
    "IdentityServer",
    "IdentityServer",
    "JWT Bearer Token",
    "JWT Bearer Token",
    "OAuth 2.0",
    "OAuth 2.0",
    "OpenID Connect",
    "OpenID Connect",
    "\u2013  WS-Federation",
    "\u2013  WS-Federation",
    "\u2022",
    "\u2022",
    "Channel authentication",
    "Channel authentication",
    "\u2013",
    "\u2013",
    "Client certificate",
    "Client certificate",
    "The call authentication methods are all based on tokens. The only real difference is how the tokens are",
    "The call authentication methods are all based on tokens. The only real difference is how the tokens are",
    "For more information, see the Authentication and authorization article.",
    "For more information, see the Authentication and authorization article.",
    "Note",
    "Note",
    "When you\u2019re using gRPC over a TLS-encrypted HTTP/2 connection, all traffic between clients and",
    "When you\u2019re using gRPC over a TLS-encrypted HTTP/2 connection, all traffic between clients and",
    "This chapter will show how to apply call credentials and channel credentials to a gRPC service. It will",
    "This chapter will show how to apply call credentials and channel credentials to a gRPC service. It will",
    "Call credentials",
    "Call credentials",
    "Call credentials are all based on a token passed in metadata with each request.",
    "Call credentials are all based on a token passed in metadata with each request.",
    "WS-Federation",
    "WS-Federation",
    "ASP.NET Core supports WS-Federation using the WsFederation NuGet package. WS-Federation is the",
    "ASP.NET Core supports WS-Federation using the WsFederation NuGet package. WS-Federation is the",
    "For more information on how to get started with this authentication method, see Authenticate users",
    "For more information on how to get started with this authentication method, see Authenticate users",
    "JWT Bearer tokens",
    "JWT Bearer tokens",
    "The JSON Web Token (JWT) standard provides a way to encode information about a user and their",
    "The JSON Web Token (JWT) standard provides a way to encode information about a user and their",
    "69",
    "69",
    "CHAPTER 6 | Security in gRPC applications",
    "CHAPTER 6 | Security in gRPC applications",
    "ASP.NET Core 7.0 can handle JWTs by using the JWT Bearer package. The configuration is exactly the",
    "ASP.NET Core 7.0 can handle JWTs by using the JWT Bearer package. The configuration is exactly the",
    "Add authentication and authorization to the server",
    "Add authentication and authorization to the server",
    "The JWT Bearer package isn\u2019t included in ASP.NET Core 7.0 by default. Install the",
    "The JWT Bearer package isn\u2019t included in ASP.NET Core 7.0 by default. Install the",
    "Add the Authentication service in the Program.cs class, and configure the JWT Bearer handler:",
    "Add the Authentication service in the Program.cs class, and configure the JWT Bearer handler:",
    "//",
    "//",
    "var signingKey = ObtainSigningKeySomehow();",
    "var signingKey = ObtainSigningKeySomehow();",
    "builder.Services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme)",
    "builder.Services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme)",
    "The IssuerSigningKey property requires an implementation of",
    "The IssuerSigningKey property requires an implementation of",
    "Next, add the Authorization service, which controls access to the system:",
    "Next, add the Authorization service, which controls access to the system:",
    "Tip",
    "Tip",
    "Authentication and authorization are two separate steps. You use authentication to determine the",
    "Authentication and authorization are two separate steps. You use authentication to determine the",
    "70",
    "70",
    "CHAPTER 6 | Security in gRPC applications",
    "CHAPTER 6 | Security in gRPC applications",
    "Now add the authentication and authorization middleware to the ASP.NET Core pipeline in the",
    "Now add the authentication and authorization middleware to the ASP.NET Core pipeline in the",
    "//",
    "//",
    "}",
    "}",
    "Finally, apply the ",
    "Finally, apply the ",
    "[",
    "[",
    "}",
    "}",
    "Provide call credentials in the client application",
    "Provide call credentials in the client application",
    "After you\u2019ve obtained a JWT token from an identity server, you can use it to authenticate gRPC calls",
    "After you\u2019ve obtained a JWT token from an identity server, you can use it to authenticate gRPC calls",
    "public async Task ShowPortfolioAsync(int portfolioId)",
    "public async Task ShowPortfolioAsync(int portfolioId)",
    "}",
    "}",
    "Now you\u2019ve secured your gRPC service by using JWT bearer tokens as call credentials. A version of the",
    "Now you\u2019ve secured your gRPC service by using JWT bearer tokens as call credentials. A version of the",
    "71",
    "71",
    "CHAPTER 6 | Security in gRPC applications",
    "CHAPTER 6 | Security in gRPC applications",
    "Channel credentials",
    "Channel credentials",
    "As the name implies, channel credentials are attached to the underlying gRPC channel. The standard",
    "As the name implies, channel credentials are attached to the underlying gRPC channel. The standard",
    "You can combine channel credentials with call credentials to provide comprehensive security for a",
    "You can combine channel credentials with call credentials to provide comprehensive security for a",
    "Client certificate authentication works for gRPC the same way it works for ASP.NET Core. For more",
    "Client certificate authentication works for gRPC the same way it works for ASP.NET Core. For more",
    "For development purposes you can use a self-signed certificate, but for production you should use a",
    "For development purposes you can use a self-signed certificate, but for production you should use a",
    "Add certificate authentication to the server",
    "Add certificate authentication to the server",
    "Configure certificate authentication both at the host level (for example, on the Kestrel server), and in",
    "Configure certificate authentication both at the host level (for example, on the Kestrel server), and in",
    "Configure certificate validation on Kestrel",
    "Configure certificate validation on Kestrel",
    "You can configure Kestrel (the ASP.NET Core HTTP server) to require a client certificate, and optionally",
    "You can configure Kestrel (the ASP.NET Core HTTP server) to require a client certificate, and optionally",
    "var builder = WebApplication.CreateBuilder(args);",
    "var builder = WebApplication.CreateBuilder(args);",
    "});",
    "});",
    "The ClientCertificateMode.RequireCertificate setting causes Kestrel to immediately reject any",
    "The ClientCertificateMode.RequireCertificate setting causes Kestrel to immediately reject any",
    "72",
    "72",
    "CHAPTER 6 | Security in gRPC applications",
    "CHAPTER 6 | Security in gRPC applications",
    "Add ASP.NET Core certificate authentication",
    "Add ASP.NET Core certificate authentication",
    "The Microsoft.AspNetCore.Authentication.Certificate NuGet package provides certificate",
    "The Microsoft.AspNetCore.Authentication.Certificate NuGet package provides certificate",
    "Add the certificate authentication service in the Program.cs, and add authentication and authorization",
    "Add the certificate authentication service in the Program.cs, and add authentication and authorization",
    "//",
    "//",
    "builder.Services.AddAuthorization();",
    "builder.Services.AddAuthorization();",
    "var app = builder.Build();",
    "var app = builder.Build();",
    "// Configure the HTTP request pipeline.",
    "// Configure the HTTP request pipeline.",
    "app.UseRouting();",
    "app.UseRouting();",
    "app.UseAuthentication();",
    "app.UseAuthentication();",
    "Provide channel credentials in the client application",
    "Provide channel credentials in the client application",
    "With the Grpc.Net.Client package, you configure certificates on an HttpClient instance that is provided",
    "With the Grpc.Net.Client package, you configure certificates on an HttpClient instance that is provided",
    "Load a client certificate from a .PFX file",
    "Load a client certificate from a .PFX file",
    "A certificate can be loaded from a .pfx file.",
    "A certificate can be loaded from a .pfx file.",
    "class Program",
    "class Program",
    "GrpcChannelOptions",
    "GrpcChannelOptions",
    "73",
    "73",
    "CHAPTER 6 | Security in gRPC applications",
    "CHAPTER 6 | Security in gRPC applications",
    "});",
    "});",
    "}",
    "}",
    "Load a client certificate from certificate and private key .PEM files",
    "Load a client certificate from certificate and private key .PEM files",
    "A certificate can be loaded from a certificate and private key .pem file.",
    "A certificate can be loaded from a certificate and private key .pem file.",
    "class Program",
    "class Program",
    "GrpcChannelOptions",
    "GrpcChannelOptions",
    "}",
    "}",
    "Note",
    "Note",
    "Due to an internal Windows bug as documented here, you\u2019ll need to apply the following workaround",
    "Due to an internal Windows bug as documented here, you\u2019ll need to apply the following workaround",
    "]",
    "]",
    "Combine ChannelCredentials and CallCredentials",
    "Combine ChannelCredentials and CallCredentials",
    "You can configure your server to use both certificate and token authentication. To do this, apply the",
    "You can configure your server to use both certificate and token authentication. To do this, apply the",
    "To provide both ChannelCredentials and CallCredentials on the client, use the",
    "To provide both ChannelCredentials and CallCredentials on the client, use the",
    "74",
    "74",
    "CHAPTER 6 | Security in gRPC applications",
    "CHAPTER 6 | Security in gRPC applications",
    "constructor, the internal client code throws an exception. The SslCredentials parameter is only",
    "constructor, the internal client code throws an exception. The SslCredentials parameter is only",
    "var handler = new HttpClientHandler();",
    "var handler = new HttpClientHandler();",
    "var httpClient = new HttpClient(handler);",
    "var httpClient = new HttpClient(handler);",
    "var callCredentials = CallCredentials.FromInterceptor(((context, metadata) =>",
    "var callCredentials = CallCredentials.FromInterceptor(((context, metadata) =>",
    "var channelCredentials = ChannelCredentials.Create(new SslCredentials(), callCredentials);",
    "var channelCredentials = ChannelCredentials.Create(new SslCredentials(), callCredentials);",
    "var channel = GrpcChannel.ForAddress(",
    "var channel = GrpcChannel.ForAddress(",
    "var grpc = new Portfolios.PortfoliosClient(channel);",
    "var grpc = new Portfolios.PortfoliosClient(channel);",
    "Tip",
    "Tip",
    "You can use the ChannelCredentials.Create method for a client without certificate authentication. This",
    "You can use the ChannelCredentials.Create method for a client without certificate authentication. This",
    "A version of the FullStockTicker sample gRPC application with certificate authentication added is on",
    "A version of the FullStockTicker sample gRPC application with certificate authentication added is on",
    "Encryption and network security",
    "Encryption and network security",
    "The network security model for Windows Communication Foundation (WCF) is extensive and complex.",
    "The network security model for Windows Communication Foundation (WCF) is extensive and complex.",
    "gRPC leaves secure networking to the underlying HTTP/2 protocol, which you can secure by using TLS",
    "gRPC leaves secure networking to the underlying HTTP/2 protocol, which you can secure by using TLS",
    "Web browsers insist on using TLS connections for HTTP/2, but most programmatic clients, including",
    "Web browsers insist on using TLS connections for HTTP/2, but most programmatic clients, including",
    "For public APIs, you should always use TLS connections, and provide valid certificates for your services",
    "For public APIs, you should always use TLS connections, and provide valid certificates for your services",
    "For internal services across a corporate network, you should still consider using TLS to secure network",
    "For internal services across a corporate network, you should still consider using TLS to secure network",
    "75",
    "75",
    "CHAPTER 6 | Security in gRPC applications",
    "CHAPTER 6 | Security in gRPC applications",
    "If you need to use explicit TLS between services running in Kubernetes, consider using an in-cluster",
    "If you need to use explicit TLS between services running in Kubernetes, consider using an in-cluster",
    "76",
    "76",
    "CHAPTER 6 | Security in gRPC applications",
    "CHAPTER 6 | Security in gRPC applications",
    "CHAPTER  7",
    "CHAPTER  7",
    "gRPC in production",
    "gRPC in production",
    "You can run ASP.NET Core 7.0 applications, including gRPC services, on Windows, on Linux, and in",
    "You can run ASP.NET Core 7.0 applications, including gRPC services, on Windows, on Linux, and in",
    "Self-hosted gRPC applications",
    "Self-hosted gRPC applications",
    "Although ASP.NET Core 7.0 applications can be hosted in IIS on Windows Server, currently it isn\u2019t",
    "Although ASP.NET Core 7.0 applications can be hosted in IIS on Windows Server, currently it isn\u2019t",
    "You can run your application as a Windows service. Or you can run it as a Linux service controlled by",
    "You can run your application as a Windows service. Or you can run it as a Linux service controlled by",
    "Run your app as a Windows service",
    "Run your app as a Windows service",
    "To configure your ASP.NET Core application to run as a Windows service, install the",
    "To configure your ASP.NET Core application to run as a Windows service, install the",
    "Host.CreateDefaultBuilder(args)",
    "Host.CreateDefaultBuilder(args)",
    "Note",
    "Note",
    "If the application isn\u2019t running as a Windows service, the UseWindowsService method doesn\u2019t do",
    "If the application isn\u2019t running as a Windows service, the UseWindowsService method doesn\u2019t do",
    "Now publish your application by using one of these methods:",
    "Now publish your application by using one of these methods:",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "From Visual Studio by right-clicking the project and selecting Publish on the shortcut menu.",
    "From Visual Studio by right-clicking the project and selecting Publish on the shortcut menu.",
    "From the .NET CLI.",
    "From the .NET CLI.",
    "When you publish a .NET application, you can choose to create a framework-dependent deployment",
    "When you publish a .NET application, you can choose to create a framework-dependent deployment",
    "77",
    "77",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "including the advantages and disadvantages of each approach, see the .NET application deployment",
    "including the advantages and disadvantages of each approach, see the .NET application deployment",
    "To publish a self-contained build of the application that doesn\u2019t require the .NET 5 runtime to be",
    "To publish a self-contained build of the application that doesn\u2019t require the .NET 5 runtime to be",
    "dotnet publish -c Release -r win-x64 -o ./publish",
    "dotnet publish -c Release -r win-x64 -o ./publish",
    "To publish a framework-dependent build, omit the -r flag.",
    "To publish a framework-dependent build, omit the -r flag.",
    "dotnet publish -c Release -o ./publish",
    "dotnet publish -c Release -o ./publish",
    "Copy the complete contents of the publish directory to an installation folder. Then, use the sc tool to",
    "Copy the complete contents of the publish directory to an installation folder. Then, use the sc tool to",
    "sc create MyService binPath=C:",
    "sc create MyService binPath=C:",
    "Log to the Windows event log",
    "Log to the Windows event log",
    "The UseWindowsService method automatically adds a logging provider that writes log messages to",
    "The UseWindowsService method automatically adds a logging provider that writes log messages to",
    "You can override the source name used in the event log by setting a SourceName property in these",
    "You can override the source name used in the event log by setting a SourceName property in these",
    "More information on logging is at the end of this chapter.",
    "More information on logging is at the end of this chapter.",
    "Run your app as a Linux service with systemd",
    "Run your app as a Linux service with systemd",
    "To configure your ASP.NET Core application to run as a Linux service (or daemon in Linux parlance),",
    "To configure your ASP.NET Core application to run as a Linux service (or daemon in Linux parlance),",
    "public static IHostBuilder CreateHostBuilder(string",
    "public static IHostBuilder CreateHostBuilder(string",
    "Note",
    "Note",
    "If the application isn\u2019t running as a Linux service, the UseSystemd method doesn\u2019t do anything.",
    "If the application isn\u2019t running as a Linux service, the UseSystemd method doesn\u2019t do anything.",
    "Now publish your application. The application can be either framework dependent or self-contained",
    "Now publish your application. The application can be either framework dependent or self-contained",
    "78",
    "78",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "From Visual Studio by right-clicking the project and selecting Publish on the shortcut menu.",
    "From Visual Studio by right-clicking the project and selecting Publish on the shortcut menu.",
    "From the .NET CLI, by using the following command:",
    "From the .NET CLI, by using the following command:",
    "dotnet publish -c Release -r linux-x64 -o ./publish",
    "dotnet publish -c Release -r linux-x64 -o ./publish",
    "Copy the complete contents of the publish directory to an installation folder on the Linux host.",
    "Copy the complete contents of the publish directory to an installation folder on the Linux host.",
    "The service file uses INI format, as shown in this example:",
    "The service file uses INI format, as shown in this example:",
    "[",
    "[",
    "[",
    "[",
    "[",
    "[",
    "The Type=notify property tells systemd that the application will notify it on startup and shutdown. The",
    "The Type=notify property tells systemd that the application will notify it on startup and shutdown. The",
    "Before systemd will recognize the service, it needs to reload its configuration. You control systemd by",
    "Before systemd will recognize the service, it needs to reload its configuration. You control systemd by",
    "sudo systemctl daemon-reload",
    "sudo systemctl daemon-reload",
    "If you\u2019ve configured the service correctly, you\u2019ll get the following output:",
    "If you\u2019ve configured the service correctly, you\u2019ll get the following output:",
    "myapp.service - My gRPC Application",
    "myapp.service - My gRPC Application",
    "Use the start command to start the service.",
    "Use the start command to start the service.",
    "sudo systemctl start myapp.service",
    "sudo systemctl start myapp.service",
    "Tip",
    "Tip",
    "The .service extension is optional when you\u2019re using systemctl start.",
    "The .service extension is optional when you\u2019re using systemctl start.",
    "To tell systemd to start the service automatically on system startup, use the enable command.",
    "To tell systemd to start the service automatically on system startup, use the enable command.",
    "sudo systemctl enable myapp",
    "sudo systemctl enable myapp",
    "79",
    "79",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "Log to journald",
    "Log to journald",
    "The Linux equivalent of the Windows event log is journald, a structured logging system service that\u2019s",
    "The Linux equivalent of the Windows event log is journald, a structured logging system service that\u2019s",
    "Because journald is the standard for Linux logs, a variety of tools integrate with it. You can easily route",
    "Because journald is the standard for Linux logs, a variety of tools integrate with it. You can easily route",
    "sudo journalctl -u myapp",
    "sudo journalctl -u myapp",
    "Tip",
    "Tip",
    "If you have a GUI environment available on your host, a few graphical log viewers are available for",
    "If you have a GUI environment available on your host, a few graphical log viewers are available for",
    "To learn more about querying the systemd journal from the command line by using journalctl, see the",
    "To learn more about querying the systemd journal from the command line by using journalctl, see the",
    "HTTPS certificates for self-hosted applications",
    "HTTPS certificates for self-hosted applications",
    "When you\u2019re running a gRPC application in production, you should use a TLS certificate from a trusted",
    "When you\u2019re running a gRPC application in production, you should use a TLS certificate from a trusted",
    "On Windows hosts, you can load the certificate from a secure certificate store by using the X509Store",
    "On Windows hosts, you can load the certificate from a secure certificate store by using the X509Store",
    "You can also create certificates by using one of the X509Certificate2 constructors, from either:",
    "You can also create certificates by using one of the X509Certificate2 constructors, from either:",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "A file, such as a .pfx file protected by a strong password",
    "A file, such as a .pfx file protected by a strong password",
    "Binary data retrieved from a secure storage service such as Azure Key Vault",
    "Binary data retrieved from a secure storage service such as Azure Key Vault",
    "You can configure Kestrel to use a certificate in two ways: from configuration or in code.",
    "You can configure Kestrel to use a certificate in two ways: from configuration or in code.",
    "Set HTTPS certificates by using configuration",
    "Set HTTPS certificates by using configuration",
    "The configuration approach requires setting the password and path to the certificate .pfx file in the",
    "The configuration approach requires setting the password and path to the certificate .pfx file in the",
    "{",
    "{",
    "80",
    "80",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "Provide the password by using a secure configuration source such as Azure Key Vault or Hashicorp",
    "Provide the password by using a secure configuration source such as Azure Key Vault or Hashicorp",
    "Important",
    "Important",
    "Don\u2019t store unencrypted passwords in configuration files.",
    "Don\u2019t store unencrypted passwords in configuration files.",
    "Set HTTPS certificates in code",
    "Set HTTPS certificates in code",
    "To configure HTTPS on Kestrel in code, use the ConfigureKestrel method on IWebHostBuilder in the",
    "To configure HTTPS on Kestrel in code, use the ConfigureKestrel method on IWebHostBuilder in the",
    "public static IHostBuilder CreateHostBuilder(string",
    "public static IHostBuilder CreateHostBuilder(string",
    "Again, be sure to store the password for the .pfx file in, and retrieve it from, a secure configuration",
    "Again, be sure to store the password for the .pfx file in, and retrieve it from, a secure configuration",
    "Create Docker images",
    "Create Docker images",
    "This section covers the creation of Docker images for ASP.NET Core gRPC applications, ready to run in",
    "This section covers the creation of Docker images for ASP.NET Core gRPC applications, ready to run in",
    "Microsoft base images for ASP.NET Core applications",
    "Microsoft base images for ASP.NET Core applications",
    "Microsoft provides a range of base images for building and running .NET applications. To create an",
    "Microsoft provides a range of base images for building and running .NET applications. To create an",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "An SDK image to build and publish the application.",
    "An SDK image to build and publish the application.",
    "A runtime image for deployment.",
    "A runtime image for deployment.",
    "Image",
    "Image",
    "Description",
    "Description",
    "mcr.microsoft.com/dotnet/sd",
    "mcr.microsoft.com/dotnet/sd",
    "For building applications with docker build. Not to be used in",
    "For building applications with docker build. Not to be used in",
    "mcr.microsoft.com/dotnet/as",
    "mcr.microsoft.com/dotnet/as",
    "Contains the runtime and ASP.NET Core dependencies. For",
    "Contains the runtime and ASP.NET Core dependencies. For",
    "For each image, there are four variants based on different Linux distributions, distinguished by tags.",
    "For each image, there are four variants based on different Linux distributions, distinguished by tags.",
    "81",
    "81",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "Image tag(s)",
    "Image tag(s)",
    "Linux",
    "Linux",
    "Notes",
    "Notes",
    "7.0-bullseye-slim, 7.0",
    "7.0-bullseye-slim, 7.0",
    "Debian 11",
    "Debian 11",
    "7.0-alpine",
    "7.0-alpine",
    "Alpine 3.17",
    "Alpine 3.17",
    "The default image if no",
    "The default image if no",
    "Alpine base images are",
    "Alpine base images are",
    "The Alpine base image is around 100 MB, compared to 200 MB for the Debian and Ubuntu images.",
    "The Alpine base image is around 100 MB, compared to 200 MB for the Debian and Ubuntu images.",
    "Important",
    "Important",
    "Make sure you use the same variant of Linux for the build and the runtime. Applications built and",
    "Make sure you use the same variant of Linux for the build and the runtime. Applications built and",
    "Create a Docker image",
    "Create a Docker image",
    "A Docker image is defined by a Dockerfile. This Dockerfile is a text file that contains all the commands",
    "A Docker image is defined by a Dockerfile. This Dockerfile is a text file that contains all the commands",
    "FROM mcr.microsoft.com/dotnet/sdk:7.0 as build",
    "FROM mcr.microsoft.com/dotnet/sdk:7.0 as build",
    "WORKDIR /src",
    "WORKDIR /src",
    "COPY ./StockKube.sln .",
    "COPY ./StockKube.sln .",
    "RUN dotnet restore",
    "RUN dotnet restore",
    "COPY . .",
    "COPY . .",
    "RUN dotnet publish --no-restore -c Release -o /published src/StockData/StockData.csproj",
    "RUN dotnet publish --no-restore -c Release -o /published src/StockData/StockData.csproj",
    "FROM mcr.microsoft.com/dotnet/aspnet:7.0 as runtime",
    "FROM mcr.microsoft.com/dotnet/aspnet:7.0 as runtime",
    "WORKDIR /app",
    "WORKDIR /app",
    "COPY --from=build /published .",
    "COPY --from=build /published .",
    "ENTRYPOINT ",
    "ENTRYPOINT ",
    "The Dockerfile has two parts: the first uses the sdk base image to build and publish the application;",
    "The Dockerfile has two parts: the first uses the sdk base image to build and publish the application;",
    "82",
    "82",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "The build steps",
    "The build steps",
    "Step",
    "Step",
    "Description",
    "Description",
    "FROM ...",
    "FROM ...",
    "Declares the base image and assigns the builder alias.",
    "Declares the base image and assigns the builder alias.",
    "WORKDIR /src",
    "WORKDIR /src",
    "Creates the /src directory and sets it as the current working directory.",
    "Creates the /src directory and sets it as the current working directory.",
    "COPY . .",
    "COPY . .",
    "Copies everything below the current directory on the host into the",
    "Copies everything below the current directory on the host into the",
    "RUN dotnet restore",
    "RUN dotnet restore",
    "Restores any external packages (ASP.NET Core 3.0 framework is",
    "Restores any external packages (ASP.NET Core 3.0 framework is",
    "RUN dotnet publish ...",
    "RUN dotnet publish ...",
    "Builds and publishes a Release build. The --runtime flag isn\u2019t required.",
    "Builds and publishes a Release build. The --runtime flag isn\u2019t required.",
    "The runtime image steps",
    "The runtime image steps",
    "Step",
    "Step",
    "Description",
    "Description",
    "FROM ...",
    "FROM ...",
    "Declares a new base image.",
    "Declares a new base image.",
    "WORKDIR /app",
    "WORKDIR /app",
    "Creates the /app directory and sets it as the current working directory.",
    "Creates the /app directory and sets it as the current working directory.",
    "COPY --from=builder ...",
    "COPY --from=builder ...",
    "Copies the published application from the previous image, by using the",
    "Copies the published application from the previous image, by using the",
    "ENTRYPOINT ",
    "ENTRYPOINT ",
    "Sets the command to run when the container starts. The dotnet",
    "Sets the command to run when the container starts. The dotnet",
    "HTTPS in Docker",
    "HTTPS in Docker",
    "Microsoft base images for Docker set the ASPNETCORE",
    "Microsoft base images for Docker set the ASPNETCORE",
    "FROM mcr.microsoft.com/dotnet/aspnet:7.0",
    "FROM mcr.microsoft.com/dotnet/aspnet:7.0",
    "ENV ASPNETCORE",
    "ENV ASPNETCORE",
    "The .dockerignore file",
    "The .dockerignore file",
    "Much like .gitignore files that exclude certain files and directories from source control, the",
    "Much like .gitignore files that exclude certain files and directories from source control, the",
    "bin/",
    "bin/",
    "83",
    "83",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "Build the image",
    "Build the image",
    "For a StockKube.sln solution containing two different applications StockData and StockWeb, it\u2019s",
    "For a StockKube.sln solution containing two different applications StockData and StockWeb, it\u2019s",
    "docker build -t stockdata:1.0.0 -f ./src/StockData/Dockerfile .",
    "docker build -t stockdata:1.0.0 -f ./src/StockData/Dockerfile .",
    "The confusingly named --tag flag (which can be shortened to -t) specifies the whole name of the",
    "The confusingly named --tag flag (which can be shortened to -t) specifies the whole name of the",
    "If you have multiple applications within a single solution, you can keep the Dockerfile for each",
    "If you have multiple applications within a single solution, you can keep the Dockerfile for each",
    "docker build -t stockdata:1.0.0 -f ./src/StockData/Dockerfile .",
    "docker build -t stockdata:1.0.0 -f ./src/StockData/Dockerfile .",
    "Run the image in a container on your machine",
    "Run the image in a container on your machine",
    "To run the image in your local Docker instance, use the docker run command.",
    "To run the image in your local Docker instance, use the docker run command.",
    "docker run -ti -p 5000:80 stockdata:1.0.0",
    "docker run -ti -p 5000:80 stockdata:1.0.0",
    "The -ti flag connects your current terminal to the container\u2019s terminal, and runs in interactive mode.",
    "The -ti flag connects your current terminal to the container\u2019s terminal, and runs in interactive mode.",
    "Push the image to a registry",
    "Push the image to a registry",
    "After you\u2019ve verified that the image works, push it to a Docker registry to make it available on other",
    "After you\u2019ve verified that the image works, push it to a Docker registry to make it available on other",
    "To push to Docker Hub, prefix the image name with your user or organization name.",
    "To push to Docker Hub, prefix the image name with your user or organization name.",
    "docker tag stockdata:1.0.0 ",
    "docker tag stockdata:1.0.0 ",
    "To push to a private registry, prefix the image name with the registry host name and the organization",
    "To push to a private registry, prefix the image name with the registry host name and the organization",
    "docker tag stockdata ",
    "docker tag stockdata ",
    "After the image is in a registry, you can deploy it to individual Docker hosts, or to a container",
    "After the image is in a registry, you can deploy it to individual Docker hosts, or to a container",
    "84",
    "84",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "Kubernetes",
    "Kubernetes",
    "Although it\u2019s possible to run containers manually on Docker hosts, for reliable production systems it\u2019s",
    "Although it\u2019s possible to run containers manually on Docker hosts, for reliable production systems it\u2019s",
    "Kubernetes includes the following functionality:",
    "Kubernetes includes the following functionality:",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Scheduling runs containers on multiple nodes within a cluster, ensuring balanced usage of",
    "Scheduling runs containers on multiple nodes within a cluster, ensuring balanced usage of",
    "Health checks monitor containers to ensure continued service.",
    "Health checks monitor containers to ensure continued service.",
    "DNS ",
    "DNS ",
    "Ingress exposes selected services externally and generally provides load-balancing across",
    "Ingress exposes selected services externally and generally provides load-balancing across",
    "Resource management attaches external resources like storage to containers.",
    "Resource management attaches external resources like storage to containers.",
    "This chapter will detail how to deploy an ASP.NET Core gRPC service and a website that consumes the",
    "This chapter will detail how to deploy an ASP.NET Core gRPC service and a website that consumes the",
    "Kubernetes terminology",
    "Kubernetes terminology",
    "Kubernetes uses desired state configuration: the API is used to describe objects like Pods, Deployments,",
    "Kubernetes uses desired state configuration: the API is used to describe objects like Pods, Deployments,",
    "Kubernetes YAML files",
    "Kubernetes YAML files",
    "Every Kubernetes YAML file will have at least three top-level properties:",
    "Every Kubernetes YAML file will have at least three top-level properties:",
    "apiVersion: v1",
    "apiVersion: v1",
    "The apiVersion property is used to specify which version (and which API) the file is intended for. The",
    "The apiVersion property is used to specify which version (and which API) the file is intended for. The",
    "Most Kubernetes YAML files will also have a spec section that describes the resources and",
    "Most Kubernetes YAML files will also have a spec section that describes the resources and",
    "85",
    "85",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "Pods",
    "Pods",
    "Pods are the basic units of execution in Kubernetes. They can run multiple containers, but they\u2019re also",
    "Pods are the basic units of execution in Kubernetes. They can run multiple containers, but they\u2019re also",
    "Services",
    "Services",
    "Services are meta-objects that describe Pods (or sets of Pods) and provide a way to access them",
    "Services are meta-objects that describe Pods (or sets of Pods) and provide a way to access them",
    "Deployments",
    "Deployments",
    "Deployments are the desired state objects for Pods. If you create a pod manually, it won\u2019t be restarted",
    "Deployments are the desired state objects for Pods. If you create a pod manually, it won\u2019t be restarted",
    "Other objects",
    "Other objects",
    "Pods, Services, and Deployments are just three of the most basic object types. There are dozens of",
    "Pods, Services, and Deployments are just three of the most basic object types. There are dozens of",
    "Namespaces",
    "Namespaces",
    "Kubernetes clusters are designed to scale to hundreds or thousands of nodes and to run similar",
    "Kubernetes clusters are designed to scale to hundreds or thousands of nodes and to run similar",
    "Get started with Kubernetes",
    "Get started with Kubernetes",
    "If you\u2019re running Docker Desktop for Windows or Docker Desktop for Mac, Kubernetes is already",
    "If you\u2019re running Docker Desktop for Windows or Docker Desktop for Mac, Kubernetes is already",
    "86",
    "86",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "To run a local Kubernetes cluster on Linux, consider minikube, or MicroK8s if your Linux distribution",
    "To run a local Kubernetes cluster on Linux, consider minikube, or MicroK8s if your Linux distribution",
    "To confirm that your cluster is running and accessible, run the kubectl version command:",
    "To confirm that your cluster is running and accessible, run the kubectl version command:",
    "kubectl version",
    "kubectl version",
    "In this example, both the kubectl CLI and the Kubernetes server are running version 1.14.6. Each",
    "In this example, both the kubectl CLI and the Kubernetes server are running version 1.14.6. Each",
    "Run services on Kubernetes",
    "Run services on Kubernetes",
    "The sample application has a kube directory that contains three YAML files. The namespace.yml file",
    "The sample application has a kube directory that contains three YAML files. The namespace.yml file",
    "To use a YAML file with kubectl, run the apply -f command:",
    "To use a YAML file with kubectl, run the apply -f command:",
    "kubectl apply -f object.yml",
    "kubectl apply -f object.yml",
    "The apply command will check the validity of the YAML file and display any errors received from the",
    "The apply command will check the validity of the YAML file and display any errors received from the",
    "87",
    "87",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "take some time. Use the kubectl get command with the relevant object types to check on object",
    "take some time. Use the kubectl get command with the relevant object types to check on object",
    "The namespace declaration",
    "The namespace declaration",
    "Namespace declaration is simple and requires only assigning a name:",
    "Namespace declaration is simple and requires only assigning a name:",
    "apiVersion: v1",
    "apiVersion: v1",
    "Use kubectl to apply the namespace.yml file and to confirm the namespace is created successfully:",
    "Use kubectl to apply the namespace.yml file and to confirm the namespace is created successfully:",
    "kubectl apply -f namespace.yml",
    "kubectl apply -f namespace.yml",
    "kubectl get namespaces",
    "kubectl get namespaces",
    "The StockData application",
    "The StockData application",
    "The stockdata.yml file declares two objects: a Deployment and a Service.",
    "The stockdata.yml file declares two objects: a Deployment and a Service.",
    "The StockData Deployment",
    "The StockData Deployment",
    "The Deployment part of the YAML file provides the spec for the deployment itself, including the",
    "The Deployment part of the YAML file provides the spec for the deployment itself, including the",
    "apiVersion: apps/v1",
    "apiVersion: apps/v1",
    "88",
    "88",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "The spec.selector property is used to match running Pods to the Deployment. The Pod\u2019s",
    "The spec.selector property is used to match running Pods to the Deployment. The Pod\u2019s",
    "The template.spec section declares the container to be run. When you\u2019re working with a local",
    "The template.spec section declares the container to be run. When you\u2019re working with a local",
    "Important",
    "Important",
    "By default, Kubernetes will always check for and try to pull a new image. If it can\u2019t find the image in",
    "By default, Kubernetes will always check for and try to pull a new image. If it can\u2019t find the image in",
    "The ports property specifies which container ports should be published on the Pod. The stockservice",
    "The ports property specifies which container ports should be published on the Pod. The stockservice",
    "The resources section applies resource limits to the container running within the Pod. This is a good",
    "The resources section applies resource limits to the container running within the Pod. This is a good",
    "Note",
    "Note",
    "ASP.NET Core 7.0 has been optimized and tuned to run in resource-limited containers. The",
    "ASP.NET Core 7.0 has been optimized and tuned to run in resource-limited containers. The",
    "The StockData Service",
    "The StockData Service",
    "The Service part of the YAML file declares the service that provides access to the Pods within the",
    "The Service part of the YAML file declares the service that provides access to the Pods within the",
    "apiVersion: v1",
    "apiVersion: v1",
    "port: 80",
    "port: 80",
    "The Service spec uses the selector property to match running Pods, in this case looking for Pods that",
    "The Service spec uses the selector property to match running Pods, in this case looking for Pods that",
    "Deploy the StockData application",
    "Deploy the StockData application",
    "Use kubectl to apply the stockdata.yml file and confirm that the Deployment and Service were",
    "Use kubectl to apply the stockdata.yml file and confirm that the Deployment and Service were",
    "89",
    "89",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "> kubectl apply -f .",
    "> kubectl apply -f .",
    "kubectl get deployment stockdata --namespace stocks",
    "kubectl get deployment stockdata --namespace stocks",
    "kubectl get service stockdata --namespace stocks",
    "kubectl get service stockdata --namespace stocks",
    "The StockWeb application",
    "The StockWeb application",
    "The stockweb.yml file declares the Deployment and Service for the MVC application.",
    "The stockweb.yml file declares the Deployment and Service for the MVC application.",
    "apiVersion: apps/v1",
    "apiVersion: apps/v1",
    "apiVersion: v1",
    "apiVersion: v1",
    "port: 80",
    "port: 80",
    "90",
    "90",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "Environment variables",
    "Environment variables",
    "The env section of the Deployment object specifies environment variables to be set in the container",
    "The env section of the Deployment object specifies environment variables to be set in the container",
    "The StockData",
    "The StockData",
    "The DOTNET",
    "The DOTNET",
    "AppContext.SetSwitch(",
    "AppContext.SetSwitch(",
    "If you use an environment variable for the switch, you can easily change the context depending on the",
    "If you use an environment variable for the switch, you can easily change the context depending on the",
    "Service types",
    "Service types",
    "The type: NodePort property is used to make the web application accessible from outside the cluster.",
    "The type: NodePort property is used to make the web application accessible from outside the cluster.",
    "The stockdata Service shouldn\u2019t be accessible from outside the cluster, so it uses the default type,",
    "The stockdata Service shouldn\u2019t be accessible from outside the cluster, so it uses the default type,",
    "Production systems will most likely use an integrated load balancer to expose public applications to",
    "Production systems will most likely use an integrated load balancer to expose public applications to",
    "For more information on Service types, see the Kubernetes Publishing Services documentation.",
    "For more information on Service types, see the Kubernetes Publishing Services documentation.",
    "Deploy the StockWeb application",
    "Deploy the StockWeb application",
    "Use kubectl to apply the stockweb.yml file and confirm that the Deployment and Service were created:",
    "Use kubectl to apply the stockweb.yml file and confirm that the Deployment and Service were created:",
    "kubectl apply -f .",
    "kubectl apply -f .",
    "kubectl get deployment stockweb --namespace stocks",
    "kubectl get deployment stockweb --namespace stocks",
    "kubectl get service stockweb --namespace stocks",
    "kubectl get service stockweb --namespace stocks",
    "The output of the get service command shows that the HTTP port has been published to port 32564",
    "The output of the get service command shows that the HTTP port has been published to port 32564",
    "91",
    "91",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "Test the application",
    "Test the application",
    "The StockWeb application displays a list of NASDAQ stocks that are retrieved from a simple request-",
    "The StockWeb application displays a list of NASDAQ stocks that are retrieved from a simple request-",
    "If the number of replicas of the stockdata Service were increased, you might expect the Server value",
    "If the number of replicas of the stockdata Service were increased, you might expect the Server value",
    "First, the Kubernetes Service discovery system uses round-robin load balancing by default. The first",
    "First, the Kubernetes Service discovery system uses round-robin load balancing by default. The first",
    "Second, the HttpClient used for the StockWeb application\u2019s gRPC client is created and managed by",
    "Second, the HttpClient used for the StockWeb application\u2019s gRPC client is created and managed by",
    "The result is that by default requests to a gRPC Service aren\u2019t balanced across all instances of that",
    "The result is that by default requests to a gRPC Service aren\u2019t balanced across all instances of that",
    "The next chapter, Service meshes, will address this problem.",
    "The next chapter, Service meshes, will address this problem.",
    "92",
    "92",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "Service meshes",
    "Service meshes",
    "A service mesh is an infrastructure component that takes control of routing service requests within a",
    "A service mesh is an infrastructure component that takes control of routing service requests within a",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Service discovery",
    "Service discovery",
    "Load balancing",
    "Load balancing",
    "Fault tolerance",
    "Fault tolerance",
    "Encryption",
    "Encryption",
    "\u2022  Monitoring",
    "\u2022  Monitoring",
    "Kubernetes service meshes work by adding an extra container, called a sidecar proxy, to each pod",
    "Kubernetes service meshes work by adding an extra container, called a sidecar proxy, to each pod",
    "In the previous chapter\u2019s example, the gRPC requests from the web application were all routed to a",
    "In the previous chapter\u2019s example, the gRPC requests from the web application were all routed to a",
    "When you use a service mesh, the requests from the application container are sent to the sidecar",
    "When you use a service mesh, the requests from the application container are sent to the sidecar",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Respond seamlessly to failures of individual instances of a service.",
    "Respond seamlessly to failures of individual instances of a service.",
    "Handle retry semantics for failed calls or timeouts.",
    "Handle retry semantics for failed calls or timeouts.",
    "Reroute failed requests to an alternate instance without returning to the client application.",
    "Reroute failed requests to an alternate instance without returning to the client application.",
    "The following screenshot shows the StockWeb application running with the Linkerd service mesh.",
    "The following screenshot shows the StockWeb application running with the Linkerd service mesh.",
    "93",
    "93",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "You can see from the Server column that the requests from the StockWeb application have been",
    "You can see from the Server column that the requests from the StockWeb application have been",
    "Service meshes apply only to traffic within a cluster. For external clients, see the next chapter, Load",
    "Service meshes apply only to traffic within a cluster. For external clients, see the next chapter, Load",
    "Service mesh options",
    "Service mesh options",
    "Three general-purpose service mesh implementations are currently available for use with Kubernetes:",
    "Three general-purpose service mesh implementations are currently available for use with Kubernetes:",
    "Choosing a service mesh depends on multiple factors:",
    "Choosing a service mesh depends on multiple factors:",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "The organization\u2019s specific requirements around costs, compliance, paid support plans, and so",
    "The organization\u2019s specific requirements around costs, compliance, paid support plans, and so",
    "The nature of the cluster, its size, the number of services deployed, and the volume of traffic",
    "The nature of the cluster, its size, the number of services deployed, and the volume of traffic",
    "Ease of deploying and managing the mesh and using it with services.",
    "Ease of deploying and managing the mesh and using it with services.",
    "Example: Add Linkerd to a deployment",
    "Example: Add Linkerd to a deployment",
    "In this example, you\u2019ll learn how to use the Linkerd service mesh with the StockKube application from",
    "In this example, you\u2019ll learn how to use the Linkerd service mesh with the StockKube application from",
    "94",
    "94",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "Windows binaries from the section that lists GitHub releases. Be sure to use the most recent stable",
    "Windows binaries from the section that lists GitHub releases. Be sure to use the most recent stable",
    "With the Linkerd CLI installed, follow the Getting Started instructions to install the Linkerd",
    "With the Linkerd CLI installed, follow the Getting Started instructions to install the Linkerd",
    "Add Linkerd to Kubernetes deployments",
    "Add Linkerd to Kubernetes deployments",
    "The Linkerd CLI provides an inject command to add the necessary sections and properties to",
    "The Linkerd CLI provides an inject command to add the necessary sections and properties to",
    "linkerd inject stockdata.yml > stockdata-with-mesh.yml",
    "linkerd inject stockdata.yml > stockdata-with-mesh.yml",
    "You can inspect the new files to see what changes have been made. For deployment objects, a",
    "You can inspect the new files to see what changes have been made. For deployment objects, a",
    "It\u2019s also possible to pipe the output of the linkerd inject command to kubectl directly. The following",
    "It\u2019s also possible to pipe the output of the linkerd inject command to kubectl directly. The following",
    "linkerd inject stockdata.yml | kubectl apply -f -",
    "linkerd inject stockdata.yml | kubectl apply -f -",
    "Inspect services in the Linkerd dashboard",
    "Inspect services in the Linkerd dashboard",
    "Open the Linkerd dashboard by using the linkerd CLI.",
    "Open the Linkerd dashboard by using the linkerd CLI.",
    "linkerd dashboard",
    "linkerd dashboard",
    "The dashboard provides detailed information about all services that are connected to the mesh.",
    "The dashboard provides detailed information about all services that are connected to the mesh.",
    "95",
    "95",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "If you increase the number of replicas of the StockData gRPC service as shown in the following",
    "If you increase the number of replicas of the StockData gRPC service as shown in the following",
    "apiVersion: apps/v1",
    "apiVersion: apps/v1",
    "96",
    "96",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "Load balancing gRPC",
    "Load balancing gRPC",
    "A typical deployment of a gRPC application includes a number of identical instances of the service,",
    "A typical deployment of a gRPC application includes a number of identical instances of the service,",
    "Load balancers are classified according to the layer they operate on. Layer 4 load balancers work on",
    "Load balancers are classified according to the layer they operate on. Layer 4 load balancers work on",
    "L4 load balancers",
    "L4 load balancers",
    "An L4 load balancer accepts a TCP connection request from a client, opens another connection to one",
    "An L4 load balancer accepts a TCP connection request from a client, opens another connection to one",
    "Azure Load Balancer is an example of an L4 load balancer.",
    "Azure Load Balancer is an example of an L4 load balancer.",
    "L7 load balancers",
    "L7 load balancers",
    "An L7 load balancer parses incoming HTTP/2 requests and passes them on to back-end instances on a",
    "An L7 load balancer parses incoming HTTP/2 requests and passes them on to back-end instances on a",
    "Examples of L7 load balancers:",
    "Examples of L7 load balancers:",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "NGINX",
    "NGINX",
    "HAProxy",
    "HAProxy",
    "Traefik",
    "Traefik",
    "As a rule of thumb, L7 load balancers are the best choice for gRPC and other HTTP/2 applications (and",
    "As a rule of thumb, L7 load balancers are the best choice for gRPC and other HTTP/2 applications (and",
    "Important",
    "Important",
    "At the time of this writing, some L7 load balancers don\u2019t support all the parts of the HTTP/2",
    "At the time of this writing, some L7 load balancers don\u2019t support all the parts of the HTTP/2",
    "If you\u2019re using TLS encryption, load balancers can terminate the TLS connection and pass unencrypted",
    "If you\u2019re using TLS encryption, load balancers can terminate the TLS connection and pass unencrypted",
    "See to the documentation for your preferred load balancer to find out how to configure it to handle",
    "See to the documentation for your preferred load balancer to find out how to configure it to handle",
    "97",
    "97",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "Load balancing within Kubernetes",
    "Load balancing within Kubernetes",
    "See the section on service meshes for a discussion of load balancing across internal services on",
    "See the section on service meshes for a discussion of load balancing across internal services on",
    "Application Performance Management",
    "Application Performance Management",
    "In production environments like Kubernetes, it\u2019s important to monitor applications to ensure they\u2019re",
    "In production environments like Kubernetes, it\u2019s important to monitor applications to ensure they\u2019re",
    "The difference between logging and metrics",
    "The difference between logging and metrics",
    "Logging is concerned with text messages that record detailed information about things that have",
    "Logging is concerned with text messages that record detailed information about things that have",
    "Metrics refers to numeric data designed to be aggregated and presented by using charts and graphs",
    "Metrics refers to numeric data designed to be aggregated and presented by using charts and graphs",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Time taken to process requests.",
    "Time taken to process requests.",
    "The number of requests per second being handled by an instance of a service.",
    "The number of requests per second being handled by an instance of a service.",
    "The number of failed requests on an instance.",
    "The number of failed requests on an instance.",
    "Logging in ASP.NET Core gRPC",
    "Logging in ASP.NET Core gRPC",
    "ASP.NET Core provides built-in support for logging, in the form of Microsoft.Extensions.Logging",
    "ASP.NET Core provides built-in support for logging, in the form of Microsoft.Extensions.Logging",
    "The ASP.NET Core gRPC framework writes detailed diagnostic logging messages to this logging",
    "The ASP.NET Core gRPC framework writes detailed diagnostic logging messages to this logging",
    "Produce log messages",
    "Produce log messages",
    "The logging extension is automatically registered with ASP.NET Core\u2019s dependency injection system,",
    "The logging extension is automatically registered with ASP.NET Core\u2019s dependency injection system,",
    "public class StockData : Stocks.StocksBase",
    "public class StockData : Stocks.StocksBase",
    "98",
    "98",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "{",
    "{",
    "Many log messages, such as requests and exceptions, are provided by the ASP.NET Core and gRPC",
    "Many log messages, such as requests and exceptions, are provided by the ASP.NET Core and gRPC",
    "For more information about writing log messages and available logging sinks and targets, see",
    "For more information about writing log messages and available logging sinks and targets, see",
    "Metrics in ASP.NET Core gRPC",
    "Metrics in ASP.NET Core gRPC",
    "The .NET Core runtime provides a set of components for emitting and observing metrics. These",
    "The .NET Core runtime provides a set of components for emitting and observing metrics. These",
    "For more advanced metrics and for writing metric data to a wider range of data stores, you might try",
    "For more advanced metrics and for writing metric data to a wider range of data stores, you might try",
    "Produce metrics",
    "Produce metrics",
    "Most metrics platforms support the following types:",
    "Most metrics platforms support the following types:",
    "Metric type",
    "Metric type",
    "Description",
    "Description",
    "Counter",
    "Counter",
    "Gauge",
    "Gauge",
    "Histogram",
    "Histogram",
    "Meter",
    "Meter",
    "99",
    "99",
    "Tracks how often something happens, such as",
    "Tracks how often something happens, such as",
    "Records a single value that changes over time,",
    "Records a single value that changes over time,",
    "Measures a distribution of values across",
    "Measures a distribution of values across",
    "Measures the rate at which an event occurs in",
    "Measures the rate at which an event occurs in",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "Metric type",
    "Metric type",
    "Description",
    "Description",
    "Timer",
    "Timer",
    "Tracks the duration of events and the rate at",
    "Tracks the duration of events and the rate at",
    "By using App Metrics, an IMetrics interface can be obtained via dependency injection, and used to",
    "By using App Metrics, an IMetrics interface can be obtained via dependency injection, and used to",
    "public class StockData : Stocks.StocksBase",
    "public class StockData : Stocks.StocksBase",
    "context)",
    "context)",
    "}",
    "}",
    "Store and visualize metrics data",
    "Store and visualize metrics data",
    "The best way to store metrics data is in a time-series database, a specialized data store designed to",
    "The best way to store metrics data is in a time-series database, a specialized data store designed to",
    "The current go-to solution for visualizing metrics data is Grafana, which works with a wide range of",
    "The current go-to solution for visualizing metrics data is Grafana, which works with a wide range of",
    "100",
    "100",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "Metrics-based alerting",
    "Metrics-based alerting",
    "The numerical nature of metrics data means that it\u2019s ideally suited to drive alerting systems, notifying",
    "The numerical nature of metrics data means that it\u2019s ideally suited to drive alerting systems, notifying",
    "Distributed tracing",
    "Distributed tracing",
    "Distributed tracing is a relatively recent development in monitoring, which has arisen from the",
    "Distributed tracing is a relatively recent development in monitoring, which has arisen from the",
    "Distributed tracing has grown quickly in popularity and is beginning to standardize. The Cloud Native",
    "Distributed tracing has grown quickly in popularity and is beginning to standardize. The Cloud Native",
    "How distributed tracing works",
    "How distributed tracing works",
    "Distributed tracing is based on the concept of spans: named, timed operations that are part of a single",
    "Distributed tracing is based on the concept of spans: named, timed operations that are part of a single",
    "101",
    "101",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "identifier and trace identifier. As the request passes around the system, various components can",
    "identifier and trace identifier. As the request passes around the system, various components can",
    "Distributed tracing with DiagnosticSource",
    "Distributed tracing with DiagnosticSource",
    ".NET has an internal module that maps well to distributed traces and spans: DiagnosticSource. As well",
    ".NET has an internal module that maps well to distributed traces and spans: DiagnosticSource. As well",
    "Because DiagnosticSource is a part of the core framework and later, it\u2019s supported by several core",
    "Because DiagnosticSource is a part of the core framework and later, it\u2019s supported by several core",
    "The ASP.NET Core gRPC client and server libraries include explicit support for DiagnosticSource and",
    "The ASP.NET Core gRPC client and server libraries include explicit support for DiagnosticSource and",
    "Note",
    "Note",
    "All of this happens only if a listener is consuming the diagnostic information. If there\u2019s no listener, no",
    "All of this happens only if a listener is consuming the diagnostic information. If there\u2019s no listener, no",
    "Add your own DiagnosticSource and Activity",
    "Add your own DiagnosticSource and Activity",
    "To add your own diagnostics or create explicit spans within your application code, see the",
    "To add your own diagnostics or create explicit spans within your application code, see the",
    "Store distributed trace data",
    "Store distributed trace data",
    "At the time of writing, the OpenTelemetry project is still in the early stages, and only alpha-quality",
    "At the time of writing, the OpenTelemetry project is still in the early stages, and only alpha-quality",
    "The OpenTracing API is described in the following section. If you want to use the OpenTelemetry API",
    "The OpenTracing API is described in the following section. If you want to use the OpenTelemetry API",
    "Use the OpenTracing package to store distributed trace data",
    "Use the OpenTracing package to store distributed trace data",
    "The OpenTracing NuGet package supports all OpenTracing-compliant back ends (which can be used",
    "The OpenTracing NuGet package supports all OpenTracing-compliant back ends (which can be used",
    "102",
    "102",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "Contributions project, OpenTracing.Contrib.NetCore. This package adds a DiagnosticSource listener,",
    "Contributions project, OpenTracing.Contrib.NetCore. This package adds a DiagnosticSource listener,",
    "//",
    "//",
    "builder.Services.AddOpenTracing();",
    "builder.Services.AddOpenTracing();",
    "//",
    "//",
    "The OpenTracing package is an abstraction layer, and as such it requires implementation specific to",
    "The OpenTracing package is an abstraction layer, and as such it requires implementation specific to",
    "Name",
    "Name",
    "Package",
    "Package",
    "Website",
    "Website",
    "Jaeger",
    "Jaeger",
    "Jaeger",
    "Jaeger",
    "jaegertracing.io",
    "jaegertracing.io",
    "Elastic APM",
    "Elastic APM",
    "Elastic.Apm.NetCoreAll",
    "Elastic.Apm.NetCoreAll",
    "elastic.co/products/apm",
    "elastic.co/products/apm",
    "For more information on the OpenTracing API for .NET, see the OpenTracing for C# and the",
    "For more information on the OpenTracing API for .NET, see the OpenTracing for C# and the",
    "103",
    "103",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER 7 | gRPC in production",
    "CHAPTER  8",
    "CHAPTER  8",
    "Appendix A - Transactions",
    "Appendix A - Transactions",
    "Windows Communication Foundation (WCF) supports distributed transactions, allowing you to",
    "Windows Communication Foundation (WCF) supports distributed transactions, allowing you to",
    "In the newer microservices landscape, this type of automated distributed transaction processing isn\u2019t",
    "In the newer microservices landscape, this type of automated distributed transaction processing isn\u2019t",
    "WCF distributed transaction is an implementation of what is known as a two-phase commit (2PC). You",
    "WCF distributed transaction is an implementation of what is known as a two-phase commit (2PC). You",
    "If possible, it\u2019s best to avoid distributed transactions altogether. If two items of data are so linked as to",
    "If possible, it\u2019s best to avoid distributed transactions altogether. If two items of data are so linked as to",
    "If that isn\u2019t possible, then one alternative is to use the Saga pattern. In a saga, updates are processed",
    "If that isn\u2019t possible, then one alternative is to use the Saga pattern. In a saga, updates are processed",
    "Another option is to use Domain Driven Design (DDD) and Command/Query Responsibility",
    "Another option is to use Domain Driven Design (DDD) and Command/Query Responsibility",
    "104",
    "104",
    "CHAPTER 8 | Appendix A - Transactions",
    "CHAPTER 8 | Appendix A - Transactions"
]