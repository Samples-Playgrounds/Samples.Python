class Program { static async Task Main(string[] args) { using var channel = GrpcChannel.ForAddress("https://localhost:5001"); var client = new SimpleStockTicker.SimpleStockTickerClient(channel); var request = new SubscribeRequest(); request.Symbols.AddRange(args); using var stream = client.Subscribe(request); var tokenSource = new CancellationTokenSource(); var task = DisplayAsync(stream.ResponseStream, tokenSource.Token); WaitForExitKey(); tokenSource.Cancel(); await task; } }