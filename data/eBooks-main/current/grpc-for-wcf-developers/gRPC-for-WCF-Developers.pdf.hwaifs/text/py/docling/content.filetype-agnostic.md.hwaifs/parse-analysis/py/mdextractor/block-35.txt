service ClockStreamer { rpc Subscribe(ClockSubscribeRequest) returns (stream ClockMessage); } public class ClockStreamerService : ClockStreamer . ClockStreamerBase { public override async Task Subscribe(ClockSubscribeRequest request , IServerStreamWriter<ClockMessage> responseStream , ServerCallContext context) { while (!context . CancellationToken . IsCancellationRequested) { var time = DateTimeOffset . UtcNow; await responseStream . WriteAsync(new ClockMessage { message = $"The time is {time:t}." }); await Task . Delay(TimeSpan . FromSeconds(10), context . CancellationToken); } } }