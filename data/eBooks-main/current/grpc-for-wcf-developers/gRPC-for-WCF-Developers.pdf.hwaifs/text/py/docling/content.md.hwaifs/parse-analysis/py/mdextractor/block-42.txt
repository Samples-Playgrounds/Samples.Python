public class ChatterService : Chatter.ChatterBase { private readonly IChatHub _hub; public ChatterService(IChatHub hub) { _hub = hub; } public override async Task Connect(IAsyncStreamReader<MessageRequest> requestStream, IServerStreamWriter<MessageResponse> responseStream, ServerCallContext context) { _hub.MessageReceived += async (sender, args) => await responseStream.WriteAsync( new MessageResponse {Text = args.Message}); while (await requestStream.MoveNext(context.CancellationToken)) {