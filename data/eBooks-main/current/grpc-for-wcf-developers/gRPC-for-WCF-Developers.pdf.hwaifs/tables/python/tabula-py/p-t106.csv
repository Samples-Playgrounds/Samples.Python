,//
0,builder.Services.AddAuthentication(CertificateAuthenticationDefaults.AuthenticationScheme)
1,.AddCertificate(options =>
2,{
3,options.AllowedCertificateTypes = CertificateTypes.Chained;
4,options.RevocationMode = X509RevocationMode.NoCheck;
5,
6,options.Events = new CertificateAuthenticationEvents
7,{
8,OnCertificateValidated = DevelopmentModeCertificateHelper.Validate
9,};
10,});
11,builder.Services.AddAuthorization();
12,builder.Services.AddGrpc();
13,
14,var app = builder.Build();
15,
16,// Configure the HTTP request pipeline.
17,
18,app.UseRouting();
19,
20,app.UseAuthentication();
21,app.UseEndpoints(endpoints => { endpoints.MapGrpcService<GreeterService>(); });
22,//
