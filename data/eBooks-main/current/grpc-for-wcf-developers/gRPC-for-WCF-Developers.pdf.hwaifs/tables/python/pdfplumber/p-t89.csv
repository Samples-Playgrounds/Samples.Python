,0
0,FROM mcr.microsoft.com/dotnet/sdk:7.0 as build
1,
2,WORKDIR /src
3,
4,COPY ./StockKube.sln .
5,COPY ./src/StockData/StockData.csproj ./src/StockData/
6,COPY ./src/StockWeb/StockWeb.csproj ./src/StockWeb/
7,
8,RUN dotnet restore
9,
10,COPY . .
11,
12,RUN dotnet publish --no-restore -c Release -o /published src/StockData/StockData.csproj
13,
14,FROM mcr.microsoft.com/dotnet/aspnet:7.0 as runtime
15,
16,# Uncomment the line below if running with HTTPS
17,# ENV ASPNETCORE_URLS=https://+:443
18,
19,WORKDIR /app
20,
21,COPY --from=build /published .
22,
23,"ENTRYPOINT [ ""dotnet"", ""StockData.dll"" ]"
