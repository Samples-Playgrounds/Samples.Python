,0
0,@using Microsoft.AspNetCore.Authorization
1,@inject IAuthorizationService AuthorizationService
2,
3,"<button @onclick=""@DoSomething"">Do something important</button>"
4,
5,@code {
6,[CascadingParameter]
7,private Task<AuthenticationState> authenticationStateTask { get; set; }
8,
9,private async Task DoSomething()
10,{
11,var user = (await authenticationStateTask).User;
12,
13,if (user.Identity.IsAuthenticated)
14,{
15,// Perform an action only available to authenticated (signed-in) users.
16,}
17,
18,"if (user.IsInRole(""admin""))"
19,{
20,// Perform an action only available to users in the 'admin' role.
21,}
22,
23,"if ((await AuthorizationService.AuthorizeAsync(user, ""content-editor""))"
24,.Succeeded)
25,{
26,// Perform an action only available to users satisfying the
27,// 'content-editor' policy.
28,}
29,}
30,}
