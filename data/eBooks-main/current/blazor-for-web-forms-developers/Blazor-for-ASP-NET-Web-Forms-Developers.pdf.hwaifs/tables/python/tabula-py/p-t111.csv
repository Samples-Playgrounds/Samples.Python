,public IContainerProvider ContainerProvider
0,{
1,get { return _containerProvider; }
2,}
3,
4,"protected void Application_Start(object sender, EventArgs e)"
5,{
6,// Code that runs on app startup
7,RouteConfig.RegisterRoutes(RouteTable.Routes);
8,BundleConfig.RegisterBundles(BundleTable.Bundles);
9,ConfigureContainer();
10,ConfigDataBase();
11,}
12,
13,/// <summary>
14,/// Track the machine name and the start time for the session inside the current
15,session
16,/// </summary>
17,"protected void Session_Start(Object sender, EventArgs e)"
18,{
19,"HttpContext.Current.Session[""MachineName""] = Environment.MachineName;"
20,"HttpContext.Current.Session[""SessionStartTime""] = DateTime.Now;"
21,}
22,
23,/// <summary>
24,/// https://autofaccn.readthedocs.io/en/latest/integration/webforms.html
25,/// </summary>
26,private void ConfigureContainer()
27,{
28,var builder = new ContainerBuilder();
29,"var mockData = bool.Parse(ConfigurationManager.AppSettings[""UseMockData""]);"
30,builder.RegisterModule(new ApplicationModule(mockData));
31,container = builder.Build();
32,_containerProvider = new ContainerProvider(container);
33,}
34,
35,private void ConfigDataBase()
36,{
37,"var mockData = bool.Parse(ConfigurationManager.AppSettings[""UseMockData""]);"
38,
39,if (!mockData)
40,{
41,
42,Database.SetInitializer<CatalogDBContext>(container.Resolve<CatalogDBInitializer>());
43,}
44,}
45,
46,"protected void Application_BeginRequest(object sender, EventArgs e)"
47,{
48,//set the property to our new object
49,"LogicalThreadContext.Properties[""activityid""] = new ActivityIdHelper();"
50,
51,"LogicalThreadContext.Properties[""requestinfo""] = new WebRequestInfo();"
52,
53,"_log.Debug(""Application_BeginRequest"");"
54,}
55,}
