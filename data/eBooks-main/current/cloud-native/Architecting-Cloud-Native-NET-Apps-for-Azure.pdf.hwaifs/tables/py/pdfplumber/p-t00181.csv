,0
0,name: $(rev:r)
1,
2,variables:
3,version: 9.2.0.$(Build.BuildNumber)
4,solution: Portals.sln
5,artifactName: drop
6,buildPlatform: any cpu
7,buildConfiguration: release
8,
9,pool:
10,name: Hosted VisualStudio
11,demands:
12,- msbuild
13,- visualstudio
14,- vstest
15,
16,steps:
17,- task: NuGetToolInstaller@0
18,displayName: 'Use NuGet 4.4.1'
19,inputs:
20,versionSpec: 4.4.1
21,
22,- task: NuGetCommand@2
23,displayName: 'NuGet restore'
24,inputs:
25,restoreSolution: '$(solution)'
26,
27,- task: VSBuild@1
28,displayName: 'Build solution'
29,inputs:
30,solution: '$(solution)'
31,msbuildArgs: '-p:DeployOnBuild=true -p:WebPublishMethod=Package -
32,p:PackageAsSingleFile=true -p:SkipInvalidConfigurations=true -
33,"p:PackageLocation=""$(build.artifactstagingdirectory)\\""'"
34,platform: '$(buildPlatform)'
35,configuration: '$(buildConfiguration)'
36,
37,- task: VSTest@2
38,displayName: 'Test Assemblies'
39,inputs:
40,testAssemblyVer2: |
41,**\$(buildConfiguration)\**\*test*.dll
42,!**\obj\**
43,!**\*testadapter.dll
44,platform: '$(buildPlatform)'
45,configuration: '$(buildConfiguration)'
46,
47,- task: CopyFiles@2
48,displayName: 'Copy UI Test Files to: $(build.artifactstagingdirectory)'
49,inputs:
