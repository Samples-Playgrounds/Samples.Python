,public async Task SubmitAsync(
0,"string buyerId,"
1,"string buyerEmail,"
2,"string street,"
3,"string city,"
4,"string state,"
5,"string country,"
6,CustomerBasket basket)
7,{
8,var orderState = new OrderState
9,{
10,"OrderDate = DateTime.UtcNow,"
11,"OrderStatus = OrderStatus.Submitted,"
12,"Description = ""Submitted"","
13,Address = new OrderAddressState
14,{
15,"Street = street,"
16,"City = city,"
17,"State = state,"
18,Country = country
19,"},"
20,"BuyerId = buyerId,"
21,"BuyerEmail = buyerEmail,"
22,OrderItems = basket.Items
23,.Select(item => new OrderItemState
24,{
25,"ProductId = item.ProductId,"
26,"ProductName = item.ProductName,"
27,"UnitPrice = item.UnitPrice,"
28,"Units = item.Quantity,"
29,PictureFileName = item.PictureFileName
30,})
31,.ToList()
32,};
33,
34,"await StateManager.SetStateAsync(OrderDetailsStateName, orderState);"
35,"await StateManager.SetStateAsync(OrderStatusStateName, OrderStatus.Submitted);"
36,
37,await RegisterReminderAsync(
38,"GracePeriodElapsedReminder,"
39,"null,"
40,"TimeSpan.FromSeconds(_settings.Value.GracePeriodTime),"
41,TimeSpan.FromMilliseconds(-1));
