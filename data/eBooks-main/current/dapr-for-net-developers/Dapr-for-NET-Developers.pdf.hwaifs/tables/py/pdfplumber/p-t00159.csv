,0
0,"public Task Handle(OrderStartedDomainEvent notification, CancellationToken"
1,cancellationToken)
2,{
3,var message = CreateEmailBody(notification);
4,"var metadata = new Dictionary<string, string>"
5,{
6,"[""emailFrom""] = ""eShopOn@dapr.io"","
7,"[""emailTo"" = notification.UserName,"
8,"[""subject""] = $""Your eShopOnDapr order #{notification.Order.Id}"""
9,};
10,"return _daprClient.InvokeBindingAsync(""sendmail"", ""create"", message, metadata,"
11,cancellationToken);
12,}
13,
14,
15,public Task SendOrderConfirmationAsync(Order order)
16,{
17,var message = CreateEmailBody(order);
18,
19,return _daprClient.InvokeBindingAsync(
20,"""sendmail"","
21,"""create"","
22,"CreateEmailBody(order),"
23,"new Dictionary<string, string>"
24,{
25,"[""emailFrom""] = ""eshopondapr@example.com"","
26,"[""emailTo""] = order.BuyerEmail,"
27,"[""subject""] = $""Your eShopOnDapr Order #{order.OrderNumber}"""
28,});
29,}
