,0
0,
1,if (data.Items is null || !data.Items.Any())
2,{
3,basket = new();
4,}
5,else
6,{
7,// Get the item details from the catalog API.
8,var catalogItems = await _catalog.GetCatalogItemsAsync(
9,data.Items.Select(x => x.ProductId));
10,
11,if (catalogItems == null)
12,{
13,return BadRequest(
14,"""Catalog items were not available for the specified items in the"
15,"basket."");"
16,}
17,
18,// Check item availability and prices; store results in basket object.
19,"basket = CreateValidatedBasket(data.Items, catalogItems);"
20,}
21,
22,// Save the updated shopping basket.
23,"await _basket.UpdateAsync(basket, authorization.Substring(""Bearer "".Length));"
24,
25,return basket;
26,}
27,
28,// ...
29,}
