public async Task SubmitAsync( string buyerId, string buyerEmail, string street, string city, string state, string country, CustomerBasket basket) { var orderState = new OrderState { OrderDate = DateTime.UtcNow , OrderStatus = OrderStatus.Submitted , Description = "Submitted" , Address = new OrderAddressState { Street = street, City = city, State = state, Country = country }, BuyerId = buyerId, BuyerEmail = buyerEmail, OrderItems = basket.Items . Select(item => new OrderItemState { ProductId = item.ProductId , ProductName = item.ProductName , UnitPrice = item.UnitPrice , Units = item.Quantity , PictureFileName = item.PictureFileName }) . ToList() }; await StateManager.SetStateAsync(OrderDetailsStateName, orderState); await StateManager.SetStateAsync(OrderStatusStateName, OrderStatus.Submitted); await RegisterReminderAsync( GracePeriodElapsedReminder, null , TimeSpan.FromSeconds(_settings.Value . GracePeriodTime), TimeSpan.FromMilliseconds(-1));