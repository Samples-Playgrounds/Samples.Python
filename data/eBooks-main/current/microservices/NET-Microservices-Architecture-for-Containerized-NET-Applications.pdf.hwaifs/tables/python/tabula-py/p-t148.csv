,// Program.cs
0,
1,"var identityUrl = builder.Configuration.GetValue<string>(""IdentityUrl"");"
2,
3,// Add Authentication services
4,
5,builder.Services.AddAuthentication(options =>
6,{
7,options.DefaultAuthenticateScheme =
8,AspNetCore.Authentication.JwtBearer.JwtBearerDefaults.AuthenticationScheme;
9,options.DefaultChallengeScheme =
10,AspNetCore.Authentication.JwtBearer.JwtBearerDefaults.AuthenticationScheme;
11,
12,}).AddJwtBearer(options =>
13,{
14,options.Authority = identityUrl;
15,options.RequireHttpsMetadata = false;
16,"options.Audience = ""orders"";"
17,});
18,
19,// Build the app
20,
21,app.UseAuthentication();
22,//...
23,app.UseEndpoints(endpoints =>
24,{
25,//...
26,});
