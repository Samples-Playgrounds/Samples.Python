,// GENERIC EF REPOSITORY WITH SPECIFICATION
0,// https://github.com/dotnet-architecture/eShopOnWeb
1,
2,public IEnumerable<T> List(ISpecification<T> spec)
3,{
4,// fetch a Queryable that includes all expression-based includes
5,var queryableResultWithIncludes = spec.Includes
6,".Aggregate(_dbContext.Set<T>().AsQueryable(),"
7,"(current, include) => current.Include(include));"
8,
9,// modify the IQueryable to include any string-based include statements
10,var secondaryResult = spec.IncludeStrings
11,".Aggregate(queryableResultWithIncludes,"
12,"(current, include) => current.Include(include));"
13,
14,// return the result of the query using the specification's criteria expression
15,return secondaryResult
16,.Where(spec.Criteria)
17,.AsEnumerable();
18,}
