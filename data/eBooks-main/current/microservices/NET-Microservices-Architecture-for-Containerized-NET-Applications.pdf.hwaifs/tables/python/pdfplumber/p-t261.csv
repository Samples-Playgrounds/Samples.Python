,0
0,// using directives...
1,namespace Microsoft.eShopOnContainers.Services.Ordering.Infrastructure.Repositories
2,{
3,public class BuyerRepository : IBuyerRepository
4,{
5,private readonly OrderingContext _context;
6,public IUnitOfWork UnitOfWork
7,{
8,get
9,{
10,return _context;
11,}
12,}
13,
14,public BuyerRepository(OrderingContext context)
15,{
16,_context = context ?? throw new ArgumentNullException(nameof(context));
17,}
18,
19,public Buyer Add(Buyer buyer)
20,{
21,return _context.Buyers.Add(buyer).Entity;
22,}
23,
24,public async Task<Buyer> FindAsync(string buyerIdentityGuid)
25,{
26,var buyer = await _context.Buyers
27,.Include(b => b.Payments)
28,.Where(b => b.FullName == buyerIdentityGuid)
29,.SingleOrDefaultAsync();
30,
31,return buyer;
32,}
33,}
34,}
