,0
0,public async Task<IActionResult> UpdateProduct(
1,[FromBody]CatalogItem productToUpdate)
2,{
3,// Other code ...
4,
5,var oldPrice = catalogItem.Price;
6,var raiseProductPriceChangedEvent = oldPrice != productToUpdate.Price;
7,
8,// Update current product
9,catalogItem = productToUpdate;
10,
11,// Save product's data and publish integration event through the Event Bus
12,// if price has changed
13,if (raiseProductPriceChangedEvent)
14,{
15,//Create Integration Event to be published through the Event Bus
16,var priceChangedEvent = new ProductPriceChangedIntegrationEvent(
17,"catalogItem.Id, productToUpdate.Price, oldPrice);"
