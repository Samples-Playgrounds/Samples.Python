|    | // COMPATIBLE WITH ENTITY FRAMEWORK CORE (1.1 and later)    |
|---:|:------------------------------------------------------------|
|  0 | public abstract class Entity                                |
|  1 | {                                                           |
|  2 | int? _requestedHashCode;                                    |
|  3 | int _Id;                                                    |
|  4 | private List<INotification> _domainEvents;                  |
|  5 | public virtual int Id                                       |
|  6 | {                                                           |
|  7 | get                                                         |
|  8 | {                                                           |
|  9 | return _Id;                                                 |
| 10 | }                                                           |
| 11 | protected set                                               |
| 12 | {                                                           |
| 13 | _Id = value;                                                |
| 14 | }                                                           |
| 15 | }                                                           |
| 16 |                                                             |
| 17 | public List<INotification> DomainEvents => _domainEvents;   |
| 18 | public void AddDomainEvent(INotification eventItem)         |
| 19 | {                                                           |
| 20 | _domainEvents = _domainEvents ?? new List<INotification>(); |
| 21 | _domainEvents.Add(eventItem);                               |
| 22 | }                                                           |
| 23 | public void RemoveDomainEvent(INotification eventItem)      |
| 24 | {                                                           |
| 25 | if (_domainEvents is null) return;                          |
| 26 | _domainEvents.Remove(eventItem);                            |
| 27 | }                                                           |
| 28 |                                                             |
| 29 | public bool IsTransient()                                   |
| 30 | {                                                           |
| 31 | return this.Id == default(Int32);                           |
| 32 | }                                                           |
| 33 |                                                             |
| 34 | public override bool Equals(object obj)                     |
| 35 | {                                                           |
| 36 | if (obj == null || !(obj is Entity))                        |
| 37 | return false;                                               |
| 38 | if (Object.ReferenceEquals(this, obj))                      |
| 39 | return true;                                                |
| 40 | if (this.GetType() != obj.GetType())                        |
| 41 | return false;                                               |
| 42 | Entity item = (Entity)obj;                                  |
| 43 | if (item.IsTransient() || this.IsTransient())               |
| 44 | return false;                                               |
| 45 | else                                                        |
| 46 | return item.Id == this.Id;                                  |
| 47 | }                                                           |
| 48 |                                                             |
| 49 | public override int GetHashCode()                           |
| 50 | {                                                           |
| 51 | if (!IsTransient())                                         |