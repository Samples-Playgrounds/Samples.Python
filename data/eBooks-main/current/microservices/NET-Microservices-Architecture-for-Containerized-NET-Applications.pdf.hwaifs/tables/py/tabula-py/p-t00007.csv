,1  FROM mcr.microsoft.com/dotnet/aspnet:7.0 AS base
0,2  WORKDIR /app
1,3  EXPOSE 80
2,4
3,5  FROM mcr.microsoft.com/dotnet/sdk:7.0 AS build
4,6  WORKDIR /src
5,7  COPY src/Services/Catalog/Catalog.API/Catalog.API.csproj ...
6,8  COPY src/BuildingBlocks/HealthChecks/src/Microsoft.AspNetCore.HealthChecks ...
7,9  COPY src/BuildingBlocks/HealthChecks/src/Microsoft.Extensions.HealthChecks ...
8,10  COPY src/BuildingBlocks/EventBus/IntegrationEventLogEF/ ...
9,11  COPY src/BuildingBlocks/EventBus/EventBus/EventBus.csproj ...
10,12  COPY src/BuildingBlocks/EventBus/EventBusRabbitMQ/EventBusRabbitMQ.csproj ...
11,13  COPY src/BuildingBlocks/EventBus/EventBusServiceBus/EventBusServiceBus.csproj ...
12,14  COPY src/BuildingBlocks/WebHostCustomization/WebHost.Customization ...
13,15  COPY src/BuildingBlocks/HealthChecks/src/Microsoft.Extensions ...
14,16  COPY src/BuildingBlocks/HealthChecks/src/Microsoft.Extensions ...
15,17  RUN dotnet restore src/Services/Catalog/Catalog.API/Catalog.API.csproj
16,18  COPY . .
17,19  WORKDIR /src/src/Services/Catalog/Catalog.API
18,20  RUN dotnet build Catalog.API.csproj -c Release -o /app
19,21
20,22  FROM build AS publish
21,23  RUN dotnet publish Catalog.API.csproj -c Release -o /app
22,24
23,25  FROM base AS final
24,26  WORKDIR /app
25,27  COPY --from=publish /app .
26,"28  ENTRYPOINT [""dotnet"", ""Catalog.API.dll""]"
