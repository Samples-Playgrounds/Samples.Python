|    | public class ValidatorBehavior<TRequest, TResponse>            |
|---:|:---------------------------------------------------------------|
|  0 | : IPipelineBehavior<TRequest, TResponse>                       |
|  1 | {                                                              |
|  2 | private readonly IValidator<TRequest>[] _validators;           |
|  3 | public ValidatorBehavior(IValidator<TRequest>[] validators) => |
|  4 | _validators = validators;                                      |
|  5 |                                                                |
|  6 | public async Task<TResponse> Handle(TRequest request,          |
|  7 | RequestHandlerDelegate<TResponse> next)                        |
|  8 | {                                                              |
|  9 | var failures = _validators                                     |
| 10 | .Select(v => v.Validate(request))                              |
| 11 | .SelectMany(result => result.Errors)                           |
| 12 | .Where(error => error != null)                                 |
| 13 | .ToList();                                                     |
| 14 |                                                                |
| 15 | if (failures.Any())                                            |
| 16 | {                                                              |
| 17 | throw new OrderingDomainException(                             |
| 18 | $"Command Validation Errors for type {typeof(TRequest).Name}", |
| 19 | new ValidationException("Validation exception", failures));    |
| 20 | }                                                              |
| 21 |                                                                |
| 22 | var response = await next();                                   |
| 23 | return response;                                               |
| 24 | }                                                              |
| 25 | }                                                              |