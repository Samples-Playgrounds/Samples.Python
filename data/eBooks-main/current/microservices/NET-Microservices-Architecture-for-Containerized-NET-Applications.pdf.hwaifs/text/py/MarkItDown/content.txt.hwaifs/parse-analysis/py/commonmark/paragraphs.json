[
    "EDITION v7.0 - Updated to ASP.NET Core 7.0",
    "EDITION v7.0 - Updated to ASP.NET Core 7.0",
    "Refer changelog for the book updates and community contributions.",
    "Refer changelog for the book updates and community contributions.",
    "This guide is an introduction to developing microservices-based applications and managing them",
    "This guide is an introduction to developing microservices-based applications and managing them",
    "To make it easier to get started, the guide focuses on a reference containerized and microservice-",
    "To make it easier to get started, the guide focuses on a reference containerized and microservice-",
    "Action links",
    "Action links",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "This e-book is also available in a PDF format (English version only) Download",
    "This e-book is also available in a PDF format (English version only) Download",
    "Clone/Fork the reference application eShopOnContainers on GitHub",
    "Clone/Fork the reference application eShopOnContainers on GitHub",
    "\u2022  Watch the introductory video",
    "\u2022  Watch the introductory video",
    "\u2022",
    "\u2022",
    "Get to know the Microservices Architecture right away",
    "Get to know the Microservices Architecture right away",
    "Introduction",
    "Introduction",
    "Enterprises are increasingly realizing cost savings, solving deployment problems, and improving",
    "Enterprises are increasingly realizing cost savings, solving deployment problems, and improving",
    "Docker is becoming the de facto standard in the container industry, supported by the most significant",
    "Docker is becoming the de facto standard in the container industry, supported by the most significant",
    "In addition, the microservices architecture is emerging as an important approach for distributed",
    "In addition, the microservices architecture is emerging as an important approach for distributed",
    "About this guide",
    "About this guide",
    "This guide is an introduction to developing microservices-based applications and managing them",
    "This guide is an introduction to developing microservices-based applications and managing them",
    "This guide provides foundational development and architectural guidance primarily at a development",
    "This guide provides foundational development and architectural guidance primarily at a development",
    "After you have studied this guide, your next step would be to learn about production-ready",
    "After you have studied this guide, your next step would be to learn about production-ready",
    "Version",
    "Version",
    "This guide has been revised to cover .NET 7 version along with many additional updates related to",
    "This guide has been revised to cover .NET 7 version along with many additional updates related to",
    "What this guide does not cover",
    "What this guide does not cover",
    "This guide does not focus on the application lifecycle, DevOps, CI/CD pipelines, or team work. The",
    "This guide does not focus on the application lifecycle, DevOps, CI/CD pipelines, or team work. The",
    "Additional resources",
    "Additional resources",
    "\u2022",
    "\u2022",
    "Containerized Docker Application Lifecycle with Microsoft Platform and Tools (downloadable",
    "Containerized Docker Application Lifecycle with Microsoft Platform and Tools (downloadable",
    "Who should use this guide",
    "Who should use this guide",
    "We wrote this guide for developers and solution architects who are new to Docker-based application",
    "We wrote this guide for developers and solution architects who are new to Docker-based application",
    "You will also find this guide useful if you are a technical decision maker, such as an enterprise",
    "You will also find this guide useful if you are a technical decision maker, such as an enterprise",
    "How to use this guide",
    "How to use this guide",
    "The first part of this guide introduces Docker containers, discusses how to choose between .NET 7 and",
    "The first part of this guide introduces Docker containers, discusses how to choose between .NET 7 and",
    "The second part of the guide starts with the Development process for Docker based applications",
    "The second part of the guide starts with the Development process for Docker based applications",
    "Related microservice and container-based reference",
    "Related microservice and container-based reference",
    "The eShopOnContainers application is an open-source reference app for .NET and microservices that",
    "The eShopOnContainers application is an open-source reference app for .NET and microservices that",
    "The purpose of the application is to showcase architectural patterns. IT IS NOT A PRODUCTION-",
    "The purpose of the application is to showcase architectural patterns. IT IS NOT A PRODUCTION-",
    "Credits",
    "Credits",
    "Co-Authors:",
    "Co-Authors:",
    "Cesar de la Torre, Sr. PM, .NET product team, Microsoft Corp.",
    "Cesar de la Torre, Sr. PM, .NET product team, Microsoft Corp.",
    "Bill Wagner, Sr. Content Developer, C+E, Microsoft Corp.",
    "Bill Wagner, Sr. Content Developer, C+E, Microsoft Corp.",
    "Mike Rousos, Principal Software Engineer, DevDiv CAT team, Microsoft",
    "Mike Rousos, Principal Software Engineer, DevDiv CAT team, Microsoft",
    "Editors:",
    "Editors:",
    "Mike Pope",
    "Mike Pope",
    "Steve Hoag",
    "Steve Hoag",
    "Participants and reviewers:",
    "Participants and reviewers:",
    "Jeffrey Richter, Partner Software Eng, Azure team, Microsoft",
    "Jeffrey Richter, Partner Software Eng, Azure team, Microsoft",
    "Jimmy Bogard, Chief Architect at Headspring",
    "Jimmy Bogard, Chief Architect at Headspring",
    "Udi Dahan, Founder ",
    "Udi Dahan, Founder ",
    "Jimmy Nilsson, Co-founder and CEO of Factor10",
    "Jimmy Nilsson, Co-founder and CEO of Factor10",
    "Glenn Condron, Sr. Program Manager, ASP.NET team",
    "Glenn Condron, Sr. Program Manager, ASP.NET team",
    "Mark Fussell, Principal PM Lead, Azure Service Fabric team, Microsoft",
    "Mark Fussell, Principal PM Lead, Azure Service Fabric team, Microsoft",
    "Diego Vega, PM Lead, Entity Framework team, Microsoft",
    "Diego Vega, PM Lead, Entity Framework team, Microsoft",
    "Barry Dorrans, Sr. Security Program Manager",
    "Barry Dorrans, Sr. Security Program Manager",
    "Rowan Miller, Sr. Program Manager, Microsoft",
    "Rowan Miller, Sr. Program Manager, Microsoft",
    "Ankit Asthana, Principal PM Manager, .NET team, Microsoft",
    "Ankit Asthana, Principal PM Manager, .NET team, Microsoft",
    "Scott Hunter, Partner Director PM, .NET team, Microsoft",
    "Scott Hunter, Partner Director PM, .NET team, Microsoft",
    "Nish Anil, Sr. Program Manager, .NET team, Microsoft",
    "Nish Anil, Sr. Program Manager, .NET team, Microsoft",
    "Dylan Reisenberger, Architect and Dev Lead at Polly",
    "Dylan Reisenberger, Architect and Dev Lead at Polly",
    "Steve \u201cardalis\u201d Smith - Software Architect and Trainer - Ardalis.com",
    "Steve \u201cardalis\u201d Smith - Software Architect and Trainer - Ardalis.com",
    "Ian Cooper, Coding Architect at Brighter",
    "Ian Cooper, Coding Architect at Brighter",
    "Unai Zorrilla, Architect and Dev Lead at Plain Concepts",
    "Unai Zorrilla, Architect and Dev Lead at Plain Concepts",
    "Eduard Tomas, Dev Lead at Plain Concepts",
    "Eduard Tomas, Dev Lead at Plain Concepts",
    "Ramon Tomas, Developer at Plain Concepts",
    "Ramon Tomas, Developer at Plain Concepts",
    "David Sanz, Developer at Plain Concepts",
    "David Sanz, Developer at Plain Concepts",
    "Javier Valero, Chief Operating Officer at Grupo Solutio",
    "Javier Valero, Chief Operating Officer at Grupo Solutio",
    "Pierre Millet, Sr. Consultant, Microsoft",
    "Pierre Millet, Sr. Consultant, Microsoft",
    "Michael Friis, Product Manager, Docker Inc",
    "Michael Friis, Product Manager, Docker Inc",
    "Charles Lowell, Software Engineer, VS CAT team, Microsoft",
    "Charles Lowell, Software Engineer, VS CAT team, Microsoft",
    "Miguel Veloso, Software Development Engineer at Plain Concepts",
    "Miguel Veloso, Software Development Engineer at Plain Concepts",
    "Sumit Ghosh, Principal Consultant at Neudesic",
    "Sumit Ghosh, Principal Consultant at Neudesic",
    "Copyright",
    "Copyright",
    "PUBLISHED BY",
    "PUBLISHED BY",
    "Microsoft Developer Division, .NET and Visual Studio product teams",
    "Microsoft Developer Division, .NET and Visual Studio product teams",
    "A division of Microsoft Corporation",
    "A division of Microsoft Corporation",
    "One Microsoft Way",
    "One Microsoft Way",
    "Redmond, Washington 98052-6399",
    "Redmond, Washington 98052-6399",
    "Copyright \u00a9 2023 by Microsoft Corporation",
    "Copyright \u00a9 2023 by Microsoft Corporation",
    "All rights reserved. No part of the contents of this book may be reproduced or transmitted in any",
    "All rights reserved. No part of the contents of this book may be reproduced or transmitted in any",
    "This book is provided \u201cas-is\u201d and expresses the author\u2019s views and opinions. The views, opinions and",
    "This book is provided \u201cas-is\u201d and expresses the author\u2019s views and opinions. The views, opinions and",
    "Some examples depicted herein are provided for illustration only and are fictitious. No real association",
    "Some examples depicted herein are provided for illustration only and are fictitious. No real association",
    "Microsoft and the trademarks listed at https://www.microsoft.com on the \u201cTrademarks\u201d webpage are",
    "Microsoft and the trademarks listed at https://www.microsoft.com on the \u201cTrademarks\u201d webpage are",
    "Mac and macOS are trademarks of Apple Inc.",
    "Mac and macOS are trademarks of Apple Inc.",
    "The Docker whale logo is a registered trademark of Docker, Inc. Used by permission.",
    "The Docker whale logo is a registered trademark of Docker, Inc. Used by permission.",
    "All other marks and logos are property of their respective owners.",
    "All other marks and logos are property of their respective owners.",
    "Contents",
    "Contents",
    "Introduction to Containers and Docker ................................................................................ 1",
    "Introduction to Containers and Docker ................................................................................ 1",
    "What is Docker? ........................................................................................................................................................................ 2",
    "What is Docker? ........................................................................................................................................................................ 2",
    "Comparing Docker containers with virtual machines ........................................................................................... 3",
    "Comparing Docker containers with virtual machines ........................................................................................... 3",
    "A simple analogy ................................................................................................................................................................. 4",
    "A simple analogy ................................................................................................................................................................. 4",
    "Docker terminology ................................................................................................................................................................ 5",
    "Docker terminology ................................................................................................................................................................ 5",
    "Docker containers, images, and registries ..................................................................................................................... 7",
    "Docker containers, images, and registries ..................................................................................................................... 7",
    "Choosing Between .NET and .NET Framework for Docker Containers .............................. 9",
    "Choosing Between .NET and .NET Framework for Docker Containers .............................. 9",
    "General guidance ..................................................................................................................................................................... 9",
    "General guidance ..................................................................................................................................................................... 9",
    "When to choose .NET for Docker containers ............................................................................................................. 10",
    "When to choose .NET for Docker containers ............................................................................................................. 10",
    "Developing and deploying cross platform ............................................................................................................ 10",
    "Developing and deploying cross platform ............................................................................................................ 10",
    "Using containers for new (\u201cgreen-field\u201d) projects ............................................................................................... 11",
    "Using containers for new (\u201cgreen-field\u201d) projects ............................................................................................... 11",
    "Create and deploy microservices on containers .................................................................................................. 11",
    "Create and deploy microservices on containers .................................................................................................. 11",
    "Deploying high density in scalable systems .......................................................................................................... 11",
    "Deploying high density in scalable systems .......................................................................................................... 11",
    "When to choose .NET Framework for Docker containers ..................................................................................... 12",
    "When to choose .NET Framework for Docker containers ..................................................................................... 12",
    "Migrating existing applications directly to a Windows Server container .................................................. 12",
    "Migrating existing applications directly to a Windows Server container .................................................. 12",
    "Using third-party .NET libraries or NuGet packages not available for .NET 7 ......................................... 12",
    "Using third-party .NET libraries or NuGet packages not available for .NET 7 ......................................... 12",
    "Using .NET technologies not available for .NET 7 ............................................................................................... 12",
    "Using .NET technologies not available for .NET 7 ............................................................................................... 12",
    "Using a platform or API that doesn\u2019t support .NET 7 ........................................................................................ 13",
    "Using a platform or API that doesn\u2019t support .NET 7 ........................................................................................ 13",
    "Porting existing ASP.NET application to .NET 7 ................................................................................................... 13",
    "Porting existing ASP.NET application to .NET 7 ................................................................................................... 13",
    "Decision table: .NET implementations to use for Docker ..................................................................................... 13",
    "Decision table: .NET implementations to use for Docker ..................................................................................... 13",
    "What OS to target with .NET containers ...................................................................................................................... 14",
    "What OS to target with .NET containers ...................................................................................................................... 14",
    "Official .NET Docker images ............................................................................................................................................. 16",
    "Official .NET Docker images ............................................................................................................................................. 16",
    ".NET and Docker image optimizations for development versus production ........................................... 16",
    ".NET and Docker image optimizations for development versus production ........................................... 16",
    "Architecting container and microservice-based applications .......................................... 18",
    "Architecting container and microservice-based applications .......................................... 18",
    "Container design principles .............................................................................................................................................. 18",
    "Container design principles .............................................................................................................................................. 18",
    "Containerizing monolithic applications ....................................................................................................................... 19",
    "Containerizing monolithic applications ....................................................................................................................... 19",
    "Deploying a monolithic application as a container ............................................................................................ 21",
    "Deploying a monolithic application as a container ............................................................................................ 21",
    "Publishing a single-container-based application to Azure App Service .................................................... 21",
    "Publishing a single-container-based application to Azure App Service .................................................... 21",
    "i",
    "i",
    "Contents",
    "Contents",
    "Manage state and data in Docker applications ........................................................................................................ 22",
    "Manage state and data in Docker applications ........................................................................................................ 22",
    "Service-oriented architecture ........................................................................................................................................... 25",
    "Service-oriented architecture ........................................................................................................................................... 25",
    "Microservices architecture ................................................................................................................................................. 25",
    "Microservices architecture ................................................................................................................................................. 25",
    "Additional resources ....................................................................................................................................................... 27",
    "Additional resources ....................................................................................................................................................... 27",
    "Data sovereignty per microservice ................................................................................................................................ 27",
    "Data sovereignty per microservice ................................................................................................................................ 27",
    "The relationship between microservices and the Bounded Context pattern ........................................... 29",
    "The relationship between microservices and the Bounded Context pattern ........................................... 29",
    "Logical architecture versus physical architecture ..................................................................................................... 30",
    "Logical architecture versus physical architecture ..................................................................................................... 30",
    "Challenges and solutions for distributed data management .............................................................................. 31",
    "Challenges and solutions for distributed data management .............................................................................. 31",
    "Challenge #1: How to define the boundaries of each microservice ............................................................ 31",
    "Challenge #1: How to define the boundaries of each microservice ............................................................ 31",
    "Challenge #2: How to create queries that retrieve data from several microservices ............................ 32",
    "Challenge #2: How to create queries that retrieve data from several microservices ............................ 32",
    "Challenge #3: How to achieve consistency across multiple microservices ............................................... 33",
    "Challenge #3: How to achieve consistency across multiple microservices ............................................... 33",
    "Challenge #4: How to design communication across microservice boundaries .................................... 35",
    "Challenge #4: How to design communication across microservice boundaries .................................... 35",
    "Additional resources ....................................................................................................................................................... 36",
    "Additional resources ....................................................................................................................................................... 36",
    "Identify domain-model boundaries for each microservice .................................................................................. 36",
    "Identify domain-model boundaries for each microservice .................................................................................. 36",
    "The API gateway pattern versus the Direct client-to-microservice communication .................................. 40",
    "The API gateway pattern versus the Direct client-to-microservice communication .................................. 40",
    "Direct client-to-microservice communication ...................................................................................................... 40",
    "Direct client-to-microservice communication ...................................................................................................... 40",
    "Why consider API Gateways instead of direct client-to-microservice communication ....................... 41",
    "Why consider API Gateways instead of direct client-to-microservice communication ....................... 41",
    "What is the API Gateway pattern? ............................................................................................................................. 42",
    "What is the API Gateway pattern? ............................................................................................................................. 42",
    "Main features in the API Gateway pattern ............................................................................................................. 44",
    "Main features in the API Gateway pattern ............................................................................................................. 44",
    "Using products with API Gateway features ............................................................................................................ 45",
    "Using products with API Gateway features ............................................................................................................ 45",
    "Drawbacks of the API Gateway pattern ................................................................................................................... 47",
    "Drawbacks of the API Gateway pattern ................................................................................................................... 47",
    "Additional resources ....................................................................................................................................................... 48",
    "Additional resources ....................................................................................................................................................... 48",
    "Communication in a microservice architecture ........................................................................................................ 48",
    "Communication in a microservice architecture ........................................................................................................ 48",
    "Communication types .................................................................................................................................................... 49",
    "Communication types .................................................................................................................................................... 49",
    "Asynchronous microservice integration enforces microservice\u2019s autonomy ........................................... 50",
    "Asynchronous microservice integration enforces microservice\u2019s autonomy ........................................... 50",
    "Communication styles .................................................................................................................................................... 52",
    "Communication styles .................................................................................................................................................... 52",
    "Asynchronous message-based communication ....................................................................................................... 54",
    "Asynchronous message-based communication ....................................................................................................... 54",
    "Single-receiver message-based communication ................................................................................................ 55",
    "Single-receiver message-based communication ................................................................................................ 55",
    "Multiple-receivers message-based communication .......................................................................................... 56",
    "Multiple-receivers message-based communication .......................................................................................... 56",
    "Asynchronous event-driven communication ........................................................................................................ 56",
    "Asynchronous event-driven communication ........................................................................................................ 56",
    "A note about messaging technologies for production systems ................................................................... 57",
    "A note about messaging technologies for production systems ................................................................... 57",
    "Resiliently publishing to the event bus ................................................................................................................... 58",
    "Resiliently publishing to the event bus ................................................................................................................... 58",
    "ii",
    "ii",
    "Contents",
    "Contents",
    "Additional resources ....................................................................................................................................................... 58",
    "Additional resources ....................................................................................................................................................... 58",
    "Creating, evolving, and versioning microservice APIs and contracts ............................................................... 59",
    "Creating, evolving, and versioning microservice APIs and contracts ............................................................... 59",
    "Additional resources ....................................................................................................................................................... 59",
    "Additional resources ....................................................................................................................................................... 59",
    "Microservices addressability and the service registry ............................................................................................ 60",
    "Microservices addressability and the service registry ............................................................................................ 60",
    "Additional resources ....................................................................................................................................................... 60",
    "Additional resources ....................................................................................................................................................... 60",
    "Creating composite UI based on microservices ....................................................................................................... 60",
    "Creating composite UI based on microservices ....................................................................................................... 60",
    "Additional resources ....................................................................................................................................................... 62",
    "Additional resources ....................................................................................................................................................... 62",
    "Resiliency and high availability in microservices ...................................................................................................... 63",
    "Resiliency and high availability in microservices ...................................................................................................... 63",
    "Health management and diagnostics in microservices .................................................................................... 63",
    "Health management and diagnostics in microservices .................................................................................... 63",
    "Additional resources ....................................................................................................................................................... 65",
    "Additional resources ....................................................................................................................................................... 65",
    "Orchestrate microservices and multi-container applications for high scalability and availability ....... 66",
    "Orchestrate microservices and multi-container applications for high scalability and availability ....... 66",
    "Software platforms for container clustering, orchestration, and scheduling ........................................... 68",
    "Software platforms for container clustering, orchestration, and scheduling ........................................... 68",
    "Using container-based orchestrators in Microsoft Azure ................................................................................ 68",
    "Using container-based orchestrators in Microsoft Azure ................................................................................ 68",
    "Using Azure Kubernetes Service ................................................................................................................................ 69",
    "Using Azure Kubernetes Service ................................................................................................................................ 69",
    "Development environment for Kubernetes ........................................................................................................... 70",
    "Development environment for Kubernetes ........................................................................................................... 70",
    "Getting started with Azure Kubernetes Service (AKS) ....................................................................................... 70",
    "Getting started with Azure Kubernetes Service (AKS) ....................................................................................... 70",
    "Deploy with Helm charts into Kubernetes clusters ............................................................................................. 71",
    "Deploy with Helm charts into Kubernetes clusters ............................................................................................. 71",
    "Additional resources ....................................................................................................................................................... 71",
    "Additional resources ....................................................................................................................................................... 71",
    "Development process for Docker-based applications ....................................................... 72",
    "Development process for Docker-based applications ....................................................... 72",
    "Development environment for Docker apps ............................................................................................................. 72",
    "Development environment for Docker apps ............................................................................................................. 72",
    "Development tool choices: IDE or editor ................................................................................................................ 72",
    "Development tool choices: IDE or editor ................................................................................................................ 72",
    "Additional resources ....................................................................................................................................................... 73",
    "Additional resources ....................................................................................................................................................... 73",
    ".NET languages and frameworks for Docker containers ....................................................................................... 73",
    ".NET languages and frameworks for Docker containers ....................................................................................... 73",
    "Development workflow for Docker apps ..................................................................................................................... 73",
    "Development workflow for Docker apps ..................................................................................................................... 73",
    "Workflow for developing Docker container-based applications .................................................................. 73",
    "Workflow for developing Docker container-based applications .................................................................. 73",
    "Step 1. Start coding and create your initial application or service baseline ............................................. 75",
    "Step 1. Start coding and create your initial application or service baseline ............................................. 75",
    "Step 2. Create a Dockerfile related to an existing .NET base image ............................................................ 76",
    "Step 2. Create a Dockerfile related to an existing .NET base image ............................................................ 76",
    "Step 3. Create your custom Docker images and embed your application or service in them .......... 83",
    "Step 3. Create your custom Docker images and embed your application or service in them .......... 83",
    "Step 4. Define your services in docker-compose.yml when building a multi-container Docker",
    "Step 4. Define your services in docker-compose.yml when building a multi-container Docker",
    "Step 5. Build and run your Docker application .................................................................................................... 87",
    "Step 5. Build and run your Docker application .................................................................................................... 87",
    "Step 6. Test your Docker application using your local Docker host ............................................................ 89",
    "Step 6. Test your Docker application using your local Docker host ............................................................ 89",
    "iii",
    "iii",
    "Contents",
    "Contents",
    "Simplified workflow when developing containers with Visual Studio ........................................................ 90",
    "Simplified workflow when developing containers with Visual Studio ........................................................ 90",
    "Using PowerShell commands in a Dockerfile to set up Windows Containers ......................................... 91",
    "Using PowerShell commands in a Dockerfile to set up Windows Containers ......................................... 91",
    "Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Design a microservice-oriented application .............................................................................................................. 93",
    "Design a microservice-oriented application .............................................................................................................. 93",
    "Application specifications ............................................................................................................................................. 93",
    "Application specifications ............................................................................................................................................. 93",
    "Development team context ......................................................................................................................................... 94",
    "Development team context ......................................................................................................................................... 94",
    "Choosing an architecture .............................................................................................................................................. 94",
    "Choosing an architecture .............................................................................................................................................. 94",
    "Benefits of a microservice-based solution ............................................................................................................. 97",
    "Benefits of a microservice-based solution ............................................................................................................. 97",
    "Downsides of a microservice-based solution ....................................................................................................... 98",
    "Downsides of a microservice-based solution ....................................................................................................... 98",
    "External versus internal architecture and design patterns............................................................................... 99",
    "External versus internal architecture and design patterns............................................................................... 99",
    "The new world: multiple architectural patterns and polyglot microservices .......................................... 100",
    "The new world: multiple architectural patterns and polyglot microservices .......................................... 100",
    "Creating a simple data-driven CRUD microservice ............................................................................................... 102",
    "Creating a simple data-driven CRUD microservice ............................................................................................... 102",
    "Designing a simple CRUD microservice ................................................................................................................ 102",
    "Designing a simple CRUD microservice ................................................................................................................ 102",
    "Implementing a simple CRUD microservice with ASP.NET Core ................................................................. 103",
    "Implementing a simple CRUD microservice with ASP.NET Core ................................................................. 103",
    "The DB connection string and environment variables used by Docker containers ............................. 109",
    "The DB connection string and environment variables used by Docker containers ............................. 109",
    "Generating Swagger description metadata from your ASP.NET Core Web API ................................... 111",
    "Generating Swagger description metadata from your ASP.NET Core Web API ................................... 111",
    "Defining your multi-container application with docker-compose.yml ......................................................... 116",
    "Defining your multi-container application with docker-compose.yml ......................................................... 116",
    "Use a database server running as a container ........................................................................................................ 127",
    "Use a database server running as a container ........................................................................................................ 127",
    "SQL Server running as a container with a microservice-related database .............................................. 128",
    "SQL Server running as a container with a microservice-related database .............................................. 128",
    "Seeding with test data on Web application startup ......................................................................................... 129",
    "Seeding with test data on Web application startup ......................................................................................... 129",
    "EF Core InMemory database versus SQL Server running as a container ................................................. 132",
    "EF Core InMemory database versus SQL Server running as a container ................................................. 132",
    "Using a Redis cache service running in a container ......................................................................................... 132",
    "Using a Redis cache service running in a container ......................................................................................... 132",
    "Implementing event-based communication between microservices (integration events) ................... 133",
    "Implementing event-based communication between microservices (integration events) ................... 133",
    "Using message brokers and service buses for production systems .......................................................... 134",
    "Using message brokers and service buses for production systems .......................................................... 134",
    "Integration events .......................................................................................................................................................... 135",
    "Integration events .......................................................................................................................................................... 135",
    "The event bus .................................................................................................................................................................. 136",
    "The event bus .................................................................................................................................................................. 136",
    "Additional resources ..................................................................................................................................................... 138",
    "Additional resources ..................................................................................................................................................... 138",
    "Implementing an event bus with RabbitMQ for the development or test environment ....................... 138",
    "Implementing an event bus with RabbitMQ for the development or test environment ....................... 138",
    "Implementing a simple publish method with RabbitMQ ............................................................................... 139",
    "Implementing a simple publish method with RabbitMQ ............................................................................... 139",
    "Implementing the subscription code with the RabbitMQ API ..................................................................... 140",
    "Implementing the subscription code with the RabbitMQ API ..................................................................... 140",
    "Additional resources ..................................................................................................................................................... 141",
    "Additional resources ..................................................................................................................................................... 141",
    "iv",
    "iv",
    "Contents",
    "Contents",
    "Subscribing to events ........................................................................................................................................................ 141",
    "Subscribing to events ........................................................................................................................................................ 141",
    "Publishing events through the event bus............................................................................................................. 142",
    "Publishing events through the event bus............................................................................................................. 142",
    "Idempotency in update message events .............................................................................................................. 149",
    "Idempotency in update message events .............................................................................................................. 149",
    "Deduplicating integration event messages ......................................................................................................... 150",
    "Deduplicating integration event messages ......................................................................................................... 150",
    "Testing ASP.NET Core services and web apps ........................................................................................................ 152",
    "Testing ASP.NET Core services and web apps ........................................................................................................ 152",
    "Testing in eShopOnContainers ................................................................................................................................. 155",
    "Testing in eShopOnContainers ................................................................................................................................. 155",
    "Implement background tasks in microservices with IHostedService and the BackgroundService class",
    "Implement background tasks in microservices with IHostedService and the BackgroundService class",
    "Registering hosted services in your WebHost or Host ................................................................................... 159",
    "Registering hosted services in your WebHost or Host ................................................................................... 159",
    "The IHostedService interface ..................................................................................................................................... 159",
    "The IHostedService interface ..................................................................................................................................... 159",
    "Implementing IHostedService with a custom hosted service class deriving from the",
    "Implementing IHostedService with a custom hosted service class deriving from the",
    "Additional resources ..................................................................................................................................................... 163",
    "Additional resources ..................................................................................................................................................... 163",
    "Implement API Gateways with Ocelot ........................................................................................................................ 163",
    "Implement API Gateways with Ocelot ........................................................................................................................ 163",
    "Architect and design your API Gateways .............................................................................................................. 163",
    "Architect and design your API Gateways .............................................................................................................. 163",
    "Implementing your API Gateways with Ocelot .................................................................................................. 168",
    "Implementing your API Gateways with Ocelot .................................................................................................. 168",
    "Using Kubernetes Ingress plus Ocelot API Gateways ...................................................................................... 180",
    "Using Kubernetes Ingress plus Ocelot API Gateways ...................................................................................... 180",
    "Additional cross-cutting features in an Ocelot API Gateway ....................................................................... 181",
    "Additional cross-cutting features in an Ocelot API Gateway ....................................................................... 181",
    "Tackle Business Complexity in a Microservice with DDD and CQRS Patterns .............. 182",
    "Tackle Business Complexity in a Microservice with DDD and CQRS Patterns .............. 182",
    "Apply simplified CQRS and DDD patterns in a microservice............................................................................. 184",
    "Apply simplified CQRS and DDD patterns in a microservice............................................................................. 184",
    "Additional resources ..................................................................................................................................................... 186",
    "Additional resources ..................................................................................................................................................... 186",
    "Apply CQRS and CQS approaches in a DDD microservice in eShopOnContainers ................................. 186",
    "Apply CQRS and CQS approaches in a DDD microservice in eShopOnContainers ................................. 186",
    "CQRS and DDD patterns are not top-level architectures ............................................................................... 187",
    "CQRS and DDD patterns are not top-level architectures ............................................................................... 187",
    "Implement reads/queries in a CQRS microservice ................................................................................................ 188",
    "Implement reads/queries in a CQRS microservice ................................................................................................ 188",
    "Use ViewModels specifically made for client apps, independent from domain model constraints",
    "Use ViewModels specifically made for client apps, independent from domain model constraints",
    "Use Dapper as a micro ORM to perform queries .............................................................................................. 189",
    "Use Dapper as a micro ORM to perform queries .............................................................................................. 189",
    "Dynamic versus static ViewModels ......................................................................................................................... 190",
    "Dynamic versus static ViewModels ......................................................................................................................... 190",
    "Additional resources ..................................................................................................................................................... 193",
    "Additional resources ..................................................................................................................................................... 193",
    "Design a DDD-oriented microservice ......................................................................................................................... 194",
    "Design a DDD-oriented microservice ......................................................................................................................... 194",
    "Keep the microservice context boundaries relatively small .......................................................................... 194",
    "Keep the microservice context boundaries relatively small .......................................................................... 194",
    "Layers in DDD microservices ..................................................................................................................................... 195",
    "Layers in DDD microservices ..................................................................................................................................... 195",
    "v",
    "v",
    "Contents",
    "Contents",
    "Design a microservice domain model ........................................................................................................................ 199",
    "Design a microservice domain model ........................................................................................................................ 199",
    "The Domain Entity pattern ......................................................................................................................................... 199",
    "The Domain Entity pattern ......................................................................................................................................... 199",
    "Implement a microservice domain model with .NET ............................................................................................ 204",
    "Implement a microservice domain model with .NET ............................................................................................ 204",
    "Domain model structure in a custom .NET Standard Library ....................................................................... 204",
    "Domain model structure in a custom .NET Standard Library ....................................................................... 204",
    "Structure aggregates in a custom .NET Standard library ............................................................................... 205",
    "Structure aggregates in a custom .NET Standard library ............................................................................... 205",
    "Implement domain entities as POCO classes ..................................................................................................... 206",
    "Implement domain entities as POCO classes ..................................................................................................... 206",
    "Encapsulate data in the Domain Entities .............................................................................................................. 207",
    "Encapsulate data in the Domain Entities .............................................................................................................. 207",
    "Seedwork (reusable base classes and interfaces for your domain model) .................................................. 210",
    "Seedwork (reusable base classes and interfaces for your domain model) .................................................. 210",
    "The custom Entity base class ..................................................................................................................................... 211",
    "The custom Entity base class ..................................................................................................................................... 211",
    "Repository contracts (interfaces) in the domain model layer ...................................................................... 212",
    "Repository contracts (interfaces) in the domain model layer ...................................................................... 212",
    "Additional resources ..................................................................................................................................................... 213",
    "Additional resources ..................................................................................................................................................... 213",
    "Implement value objects .................................................................................................................................................. 213",
    "Implement value objects .................................................................................................................................................. 213",
    "Important characteristics of value objects ........................................................................................................... 214",
    "Important characteristics of value objects ........................................................................................................... 214",
    "Value object implementation in C# ........................................................................................................................ 215",
    "Value object implementation in C# ........................................................................................................................ 215",
    "How to persist value objects in the database with EF Core 2.0 and later ................................................ 217",
    "How to persist value objects in the database with EF Core 2.0 and later ................................................ 217",
    "Persist value objects as owned entity types in EF Core 2.0 and later ........................................................ 218",
    "Persist value objects as owned entity types in EF Core 2.0 and later ........................................................ 218",
    "Additional resources ..................................................................................................................................................... 221",
    "Additional resources ..................................................................................................................................................... 221",
    "Use enumeration classes instead of enum types ................................................................................................... 221",
    "Use enumeration classes instead of enum types ................................................................................................... 221",
    "Implement an Enumeration base class .................................................................................................................. 222",
    "Implement an Enumeration base class .................................................................................................................. 222",
    "Additional resources ..................................................................................................................................................... 223",
    "Additional resources ..................................................................................................................................................... 223",
    "Design validations in the domain model layer ....................................................................................................... 223",
    "Design validations in the domain model layer ....................................................................................................... 223",
    "Implement validations in the domain model layer ........................................................................................... 224",
    "Implement validations in the domain model layer ........................................................................................... 224",
    "Additional resources ..................................................................................................................................................... 225",
    "Additional resources ..................................................................................................................................................... 225",
    "Client-side validation (validation in the presentation layers) ............................................................................ 226",
    "Client-side validation (validation in the presentation layers) ............................................................................ 226",
    "Additional resources ..................................................................................................................................................... 227",
    "Additional resources ..................................................................................................................................................... 227",
    "Domain events: Design and implementation .......................................................................................................... 227",
    "Domain events: Design and implementation .......................................................................................................... 227",
    "What is a domain event? ............................................................................................................................................. 228",
    "What is a domain event? ............................................................................................................................................. 228",
    "Domain events versus integration events ............................................................................................................ 228",
    "Domain events versus integration events ............................................................................................................ 228",
    "Domain events as a preferred way to trigger side effects across multiple aggregates within the",
    "Domain events as a preferred way to trigger side effects across multiple aggregates within the",
    "Implement domain events .......................................................................................................................................... 231",
    "Implement domain events .......................................................................................................................................... 231",
    "Conclusions on domain events ................................................................................................................................. 237",
    "Conclusions on domain events ................................................................................................................................. 237",
    "vi",
    "vi",
    "Contents",
    "Contents",
    "Additional resources ..................................................................................................................................................... 238",
    "Additional resources ..................................................................................................................................................... 238",
    "Design the infrastructure persistence layer .............................................................................................................. 238",
    "Design the infrastructure persistence layer .............................................................................................................. 238",
    "The Repository pattern ................................................................................................................................................ 238",
    "The Repository pattern ................................................................................................................................................ 238",
    "Additional resources ..................................................................................................................................................... 243",
    "Additional resources ..................................................................................................................................................... 243",
    "Implement the infrastructure persistence layer with Entity Framework Core ............................................ 243",
    "Implement the infrastructure persistence layer with Entity Framework Core ............................................ 243",
    "Introduction to Entity Framework Core ................................................................................................................. 244",
    "Introduction to Entity Framework Core ................................................................................................................. 244",
    "Infrastructure in Entity Framework Core from a DDD perspective ............................................................. 244",
    "Infrastructure in Entity Framework Core from a DDD perspective ............................................................. 244",
    "Implement custom repositories with Entity Framework Core ...................................................................... 246",
    "Implement custom repositories with Entity Framework Core ...................................................................... 246",
    "EF DbContext and IUnitOfWork instance lifetime in your IoC container ................................................. 248",
    "EF DbContext and IUnitOfWork instance lifetime in your IoC container ................................................. 248",
    "The repository instance lifetime in your IoC container ................................................................................... 249",
    "The repository instance lifetime in your IoC container ................................................................................... 249",
    "Table mapping ................................................................................................................................................................ 250",
    "Table mapping ................................................................................................................................................................ 250",
    "Implement the Query Specification pattern ........................................................................................................ 253",
    "Implement the Query Specification pattern ........................................................................................................ 253",
    "Use NoSQL databases as a persistence infrastructure ......................................................................................... 255",
    "Use NoSQL databases as a persistence infrastructure ......................................................................................... 255",
    "Introduction to Azure Cosmos DB and the native Cosmos DB API ........................................................... 256",
    "Introduction to Azure Cosmos DB and the native Cosmos DB API ........................................................... 256",
    "Implement .NET code targeting MongoDB and Azure Cosmos DB .......................................................... 258",
    "Implement .NET code targeting MongoDB and Azure Cosmos DB .......................................................... 258",
    "Design the microservice application layer and Web API .................................................................................... 266",
    "Design the microservice application layer and Web API .................................................................................... 266",
    "Use SOLID principles and Dependency Injection .............................................................................................. 266",
    "Use SOLID principles and Dependency Injection .............................................................................................. 266",
    "Implement the microservice application layer using the Web API ................................................................. 267",
    "Implement the microservice application layer using the Web API ................................................................. 267",
    "Use Dependency Injection to inject infrastructure objects into your application layer ..................... 267",
    "Use Dependency Injection to inject infrastructure objects into your application layer ..................... 267",
    "Implement the Command and Command Handler patterns ....................................................................... 271",
    "Implement the Command and Command Handler patterns ....................................................................... 271",
    "The Command process pipeline: how to trigger a command handler ..................................................... 278",
    "The Command process pipeline: how to trigger a command handler ..................................................... 278",
    "Implement the command process pipeline with a mediator pattern (MediatR) .................................. 281",
    "Implement the command process pipeline with a mediator pattern (MediatR) .................................. 281",
    "Apply cross-cutting concerns when processing commands with the Behaviors in MediatR .......... 287",
    "Apply cross-cutting concerns when processing commands with the Behaviors in MediatR .......... 287",
    "Implement resilient applications ....................................................................................... 291",
    "Implement resilient applications ....................................................................................... 291",
    "Handle partial failure ......................................................................................................................................................... 292",
    "Handle partial failure ......................................................................................................................................................... 292",
    "Strategies to handle partial failure ............................................................................................................................... 294",
    "Strategies to handle partial failure ............................................................................................................................... 294",
    "Additional resources ..................................................................................................................................................... 295",
    "Additional resources ..................................................................................................................................................... 295",
    "Implement retries with exponential backoff ............................................................................................................ 295",
    "Implement retries with exponential backoff ............................................................................................................ 295",
    "Implement resilient Entity Framework Core SQL connections.......................................................................... 295",
    "Implement resilient Entity Framework Core SQL connections.......................................................................... 295",
    "Execution strategies and explicit transactions using BeginTransaction and multiple DbContexts296",
    "Execution strategies and explicit transactions using BeginTransaction and multiple DbContexts296",
    "Additional resources ..................................................................................................................................................... 298",
    "Additional resources ..................................................................................................................................................... 298",
    "Use IHttpClientFactory to implement resilient HTTP requests ......................................................................... 298",
    "Use IHttpClientFactory to implement resilient HTTP requests ......................................................................... 298",
    "vii",
    "vii",
    "Contents",
    "Contents",
    "Issues with the original HttpClient class available in .NET ............................................................................. 298",
    "Issues with the original HttpClient class available in .NET ............................................................................. 298",
    "Benefits of using IHttpClientFactory ....................................................................................................................... 299",
    "Benefits of using IHttpClientFactory ....................................................................................................................... 299",
    "Multiple ways to use IHttpClientFactory ............................................................................................................... 300",
    "Multiple ways to use IHttpClientFactory ............................................................................................................... 300",
    "How to use Typed Clients with IHttpClientFactory ........................................................................................... 300",
    "How to use Typed Clients with IHttpClientFactory ........................................................................................... 300",
    "Additional resources ..................................................................................................................................................... 304",
    "Additional resources ..................................................................................................................................................... 304",
    "Implement HTTP call retries with exponential backoff with IHttpClientFactory and Polly policies ... 304",
    "Implement HTTP call retries with exponential backoff with IHttpClientFactory and Polly policies ... 304",
    "Add a jitter strategy to the retry policy ................................................................................................................. 305",
    "Add a jitter strategy to the retry policy ................................................................................................................. 305",
    "Additional resources ..................................................................................................................................................... 306",
    "Additional resources ..................................................................................................................................................... 306",
    "Implement the Circuit Breaker pattern ....................................................................................................................... 306",
    "Implement the Circuit Breaker pattern ....................................................................................................................... 306",
    "Implement Circuit Breaker pattern with IHttpClientFactory and Polly ..................................................... 307",
    "Implement Circuit Breaker pattern with IHttpClientFactory and Polly ..................................................... 307",
    "Test Http retries and circuit breakers in eShopOnContainers ...................................................................... 308",
    "Test Http retries and circuit breakers in eShopOnContainers ...................................................................... 308",
    "Additional resources ..................................................................................................................................................... 310",
    "Additional resources ..................................................................................................................................................... 310",
    "Health monitoring .............................................................................................................................................................. 310",
    "Health monitoring .............................................................................................................................................................. 310",
    "Implement health checks in ASP.NET Core services ........................................................................................ 311",
    "Implement health checks in ASP.NET Core services ........................................................................................ 311",
    "Use watchdogs ................................................................................................................................................................ 315",
    "Use watchdogs ................................................................................................................................................................ 315",
    "Health checks when using orchestrators .............................................................................................................. 317",
    "Health checks when using orchestrators .............................................................................................................. 317",
    "Advanced monitoring: visualization, analysis, and alerts ............................................................................... 317",
    "Advanced monitoring: visualization, analysis, and alerts ............................................................................... 317",
    "Additional resources ..................................................................................................................................................... 318",
    "Additional resources ..................................................................................................................................................... 318",
    "Make secure .NET Microservices and Web Applications ................................................. 319",
    "Make secure .NET Microservices and Web Applications ................................................. 319",
    "Implement authentication in .NET microservices and web applications ...................................................... 319",
    "Implement authentication in .NET microservices and web applications ...................................................... 319",
    "Authenticate with ASP.NET Core Identity ............................................................................................................. 320",
    "Authenticate with ASP.NET Core Identity ............................................................................................................. 320",
    "Authenticate with external providers ..................................................................................................................... 321",
    "Authenticate with external providers ..................................................................................................................... 321",
    "Authenticate with bearer tokens .............................................................................................................................. 323",
    "Authenticate with bearer tokens .............................................................................................................................. 323",
    "Authenticate with an OpenID Connect or OAuth 2.0 Identity provider ................................................... 324",
    "Authenticate with an OpenID Connect or OAuth 2.0 Identity provider ................................................... 324",
    "Issue security tokens from an ASP.NET Core service ....................................................................................... 325",
    "Issue security tokens from an ASP.NET Core service ....................................................................................... 325",
    "Consume security tokens ............................................................................................................................................ 326",
    "Consume security tokens ............................................................................................................................................ 326",
    "Additional resources .......................................................................................................................................................... 327",
    "Additional resources .......................................................................................................................................................... 327",
    "About authorization in .NET microservices and web applications .................................................................. 327",
    "About authorization in .NET microservices and web applications .................................................................. 327",
    "Implement role-based authorization ..................................................................................................................... 328",
    "Implement role-based authorization ..................................................................................................................... 328",
    "Implement policy-based authorization ................................................................................................................. 329",
    "Implement policy-based authorization ................................................................................................................. 329",
    "Authorization and minimal apis ............................................................................................................................... 330",
    "Authorization and minimal apis ............................................................................................................................... 330",
    "Additional resources ..................................................................................................................................................... 330",
    "Additional resources ..................................................................................................................................................... 330",
    "viii",
    "viii",
    "Contents",
    "Contents",
    "Store application secrets safely during development .......................................................................................... 330",
    "Store application secrets safely during development .......................................................................................... 330",
    "Store secrets in environment variables ................................................................................................................. 331",
    "Store secrets in environment variables ................................................................................................................. 331",
    "Store secrets with the ASP.NET Core Secret Manager .................................................................................... 331",
    "Store secrets with the ASP.NET Core Secret Manager .................................................................................... 331",
    "Use Azure Key Vault to protect secrets at production time .............................................................................. 332",
    "Use Azure Key Vault to protect secrets at production time .............................................................................. 332",
    "Additional resources ..................................................................................................................................................... 333",
    "Additional resources ..................................................................................................................................................... 333",
    ".NET Microservices Architecture key takeaways .............................................................. 334",
    ".NET Microservices Architecture key takeaways .............................................................. 334",
    "ix",
    "ix",
    "Contents",
    "Contents",
    "CHAPTER  1",
    "CHAPTER  1",
    "Introduction to Containers",
    "Introduction to Containers",
    "Containerization is an approach to software development in which an application or service, its",
    "Containerization is an approach to software development in which an application or service, its",
    "Just as shipping containers allow goods to be transported by ship, train, or truck regardless of the",
    "Just as shipping containers allow goods to be transported by ship, train, or truck regardless of the",
    "Containers also isolate applications from each other on a shared OS. Containerized applications run",
    "Containers also isolate applications from each other on a shared OS. Containerized applications run",
    "Each container can run a whole web application or a service, as shown in Figure 2-1. In this example,",
    "Each container can run a whole web application or a service, as shown in Figure 2-1. In this example,",
    "Figure 2-1. Multiple containers running on a container host",
    "Figure 2-1. Multiple containers running on a container host",
    "1",
    "1",
    "CHAPTER 1 | Introduction to Containers and Docker",
    "CHAPTER 1 | Introduction to Containers and Docker",
    "Another benefit of containerization is scalability. You can scale out quickly by creating new containers",
    "Another benefit of containerization is scalability. You can scale out quickly by creating new containers",
    "In short, containers offer the benefits of isolation, portability, agility, scalability, and control across the",
    "In short, containers offer the benefits of isolation, portability, agility, scalability, and control across the",
    "What is Docker?",
    "What is Docker?",
    "Docker is an open-source project for automating the deployment of applications as portable, self-",
    "Docker is an open-source project for automating the deployment of applications as portable, self-",
    "Figure 2-2. Docker deploys containers at all layers of the hybrid cloud.",
    "Figure 2-2. Docker deploys containers at all layers of the hybrid cloud.",
    "Docker containers can run anywhere, on-premises in the customer datacenter, in an external service",
    "Docker containers can run anywhere, on-premises in the customer datacenter, in an external service",
    "Developers can use development environments on Windows, Linux, or macOS. On the development",
    "Developers can use development environments on Windows, Linux, or macOS. On the development",
    "2",
    "2",
    "CHAPTER 1 | Introduction to Containers and Docker",
    "CHAPTER 1 | Introduction to Containers and Docker",
    "directly on macOS.) Developers who work on Windows can create images for either Linux or Windows",
    "directly on macOS.) Developers who work on Windows can create images for either Linux or Windows",
    "To host containers in development environments and provide additional developer tools, Docker",
    "To host containers in development environments and provide additional developer tools, Docker",
    "To run Windows Containers, there are two types of runtimes:",
    "To run Windows Containers, there are two types of runtimes:",
    "\u2022  Windows Server Containers provide application isolation through process and namespace",
    "\u2022  Windows Server Containers provide application isolation through process and namespace",
    "isolation technology. A Windows Server Container shares a kernel with the container host and",
    "isolation technology. A Windows Server Container shares a kernel with the container host and",
    "\u2022",
    "\u2022",
    "Hyper-V Containers expand on the isolation provided by Windows Server Containers by",
    "Hyper-V Containers expand on the isolation provided by Windows Server Containers by",
    "The images for these containers are created the same way and function the same. The difference is in",
    "The images for these containers are created the same way and function the same. The difference is in",
    "Comparing Docker containers with virtual machines",
    "Comparing Docker containers with virtual machines",
    "Figure 2-3 shows a comparison between VMs and Docker containers.",
    "Figure 2-3 shows a comparison between VMs and Docker containers.",
    "Virtual Machines",
    "Virtual Machines",
    "Docker Containers",
    "Docker Containers",
    "3",
    "3",
    "CHAPTER 1 | Introduction to Containers and Docker",
    "CHAPTER 1 | Introduction to Containers and Docker",
    "Virtual Machines",
    "Virtual Machines",
    "Docker Containers",
    "Docker Containers",
    "Virtual machines include the application, the",
    "Virtual machines include the application, the",
    "Containers include the application and all its",
    "Containers include the application and all its",
    "Figure 2-3. Comparison of traditional virtual machines to Docker containers",
    "Figure 2-3. Comparison of traditional virtual machines to Docker containers",
    "For VMs, there are three base layers in the host server, from the bottom-up: infrastructure, Host",
    "For VMs, there are three base layers in the host server, from the bottom-up: infrastructure, Host",
    "Because containers require far fewer resources (for example, they don\u2019t need a full OS), they\u2019re easy to",
    "Because containers require far fewer resources (for example, they don\u2019t need a full OS), they\u2019re easy to",
    "As a side effect of running on the same kernel, you get less isolation than VMs.",
    "As a side effect of running on the same kernel, you get less isolation than VMs.",
    "The main goal of an image is that it makes the environment (dependencies) the same across different",
    "The main goal of an image is that it makes the environment (dependencies) the same across different",
    "A container image is a way to package an app or service and deploy it in a reliable and reproducible",
    "A container image is a way to package an app or service and deploy it in a reliable and reproducible",
    "When using Docker, you won\u2019t hear developers say, \u201cIt works on my machine, why not in production?\u201d",
    "When using Docker, you won\u2019t hear developers say, \u201cIt works on my machine, why not in production?\u201d",
    "A simple analogy",
    "A simple analogy",
    "Perhaps a simple analogy can help getting the grasp of the core concept of Docker.",
    "Perhaps a simple analogy can help getting the grasp of the core concept of Docker.",
    "Let\u2019s go back in time to the 1950s for a moment. There were no word processors, and the",
    "Let\u2019s go back in time to the 1950s for a moment. There were no word processors, and the",
    "Imagine you\u2019re responsible for quickly issuing batches of letters as required, to mail them to",
    "Imagine you\u2019re responsible for quickly issuing batches of letters as required, to mail them to",
    "At some point, you realize the letters are just a composition of a large set of paragraphs, which are",
    "At some point, you realize the letters are just a composition of a large set of paragraphs, which are",
    "The system is simple:",
    "The system is simple:",
    "You begin with a deck of transparent sheets containing one paragraph each.",
    "You begin with a deck of transparent sheets containing one paragraph each.",
    "4",
    "4",
    "CHAPTER 1 | Introduction to Containers and Docker",
    "CHAPTER 1 | Introduction to Containers and Docker",
    "2.",
    "2.",
    "To issue a set of letters, you pick the sheets with the paragraphs you need, then you stack and",
    "To issue a set of letters, you pick the sheets with the paragraphs you need, then you stack and",
    "Finally, you place the set in the photocopier and press start to produce as many letters as",
    "Finally, you place the set in the photocopier and press start to produce as many letters as",
    "So, simplifying, that\u2019s the core idea of Docker.",
    "So, simplifying, that\u2019s the core idea of Docker.",
    "In Docker, each layer is the resulting set of changes that happen to the filesystem after executing a",
    "In Docker, each layer is the resulting set of changes that happen to the filesystem after executing a",
    "So, when you \u201clook\u201d at the filesystem after the layer has been copied, you see all the files, included in",
    "So, when you \u201clook\u201d at the filesystem after the layer has been copied, you see all the files, included in",
    "You can think of an image as an auxiliary read-only hard disk ready to be installed in a \u201ccomputer\u201d",
    "You can think of an image as an auxiliary read-only hard disk ready to be installed in a \u201ccomputer\u201d",
    "Similarly, you can think of a container as the \u201ccomputer\u201d with the image hard disk installed. The",
    "Similarly, you can think of a container as the \u201ccomputer\u201d with the image hard disk installed. The",
    "Docker terminology",
    "Docker terminology",
    "This section lists terms and definitions you should be familiar with before getting deeper into Docker.",
    "This section lists terms and definitions you should be familiar with before getting deeper into Docker.",
    "Container image: A package with all the dependencies and information needed to create a container.",
    "Container image: A package with all the dependencies and information needed to create a container.",
    "Dockerfile: A text file that contains instructions for building a Docker image. It\u2019s like a batch script,",
    "Dockerfile: A text file that contains instructions for building a Docker image. It\u2019s like a batch script,",
    "Build: The action of building a container image based on the information and context provided by its",
    "Build: The action of building a container image based on the information and context provided by its",
    "docker build",
    "docker build",
    "Container: An instance of a Docker image. A container represents the execution of a single",
    "Container: An instance of a Docker image. A container represents the execution of a single",
    "Volumes: Offer a writable filesystem that the container can use. Since images are read-only but most",
    "Volumes: Offer a writable filesystem that the container can use. Since images are read-only but most",
    "5",
    "5",
    "CHAPTER 1 | Introduction to Containers and Docker",
    "CHAPTER 1 | Introduction to Containers and Docker",
    "layered filesystem, it\u2019s just the filesystem as usual. Volumes live in the host system and are managed",
    "layered filesystem, it\u2019s just the filesystem as usual. Volumes live in the host system and are managed",
    "Tag: A mark or label you can apply to images so that different images or versions of the same image",
    "Tag: A mark or label you can apply to images so that different images or versions of the same image",
    "Multi-stage Build: Is a feature, since Docker 17.05 or higher, that helps to reduce the size of the final",
    "Multi-stage Build: Is a feature, since Docker 17.05 or higher, that helps to reduce the size of the final",
    "Repository (repo): A collection of related Docker images, labeled with a tag that indicates the image",
    "Repository (repo): A collection of related Docker images, labeled with a tag that indicates the image",
    "Registry: A service that provides access to repositories. The default registry for most public images is",
    "Registry: A service that provides access to repositories. The default registry for most public images is",
    "Multi-arch image: For multi-architecture (or multi-platform), it\u2019s a Docker feature that simplifies the",
    "Multi-arch image: For multi-architecture (or multi-platform), it\u2019s a Docker feature that simplifies the",
    "Docker Hub: A public registry to upload images and work with them. Docker Hub provides Docker",
    "Docker Hub: A public registry to upload images and work with them. Docker Hub provides Docker",
    "Azure Container Registry: A public resource for working with Docker images and its components in",
    "Azure Container Registry: A public resource for working with Docker images and its components in",
    "Docker Trusted Registry (DTR): A Docker registry service (from Docker) that can be installed on-",
    "Docker Trusted Registry (DTR): A Docker registry service (from Docker) that can be installed on-",
    "Docker Desktop: Development tools for Windows and macOS for building, running, and testing",
    "Docker Desktop: Development tools for Windows and macOS for building, running, and testing",
    "Compose: A command-line tool and YAML file format with metadata for defining and running multi-",
    "Compose: A command-line tool and YAML file format with metadata for defining and running multi-",
    "6",
    "6",
    "CHAPTER 1 | Introduction to Containers and Docker",
    "CHAPTER 1 | Introduction to Containers and Docker",
    "you can deploy the whole multi-container application with a single command (docker-compose up)",
    "you can deploy the whole multi-container application with a single command (docker-compose up)",
    "Cluster: A collection of Docker hosts exposed as if it were a single virtual Docker host, so that the",
    "Cluster: A collection of Docker hosts exposed as if it were a single virtual Docker host, so that the",
    "Orchestrator: A tool that simplifies the management of clusters and Docker hosts. Orchestrators",
    "Orchestrator: A tool that simplifies the management of clusters and Docker hosts. Orchestrators",
    "Docker containers, images, and registries",
    "Docker containers, images, and registries",
    "When using Docker, a developer creates an app or service and packages it and its dependencies into",
    "When using Docker, a developer creates an app or service and packages it and its dependencies into",
    "To run the app or service, the app\u2019s image is instantiated to create a container, which will be running",
    "To run the app or service, the app\u2019s image is instantiated to create a container, which will be running",
    "Developers should store images in a registry, which acts as a library of images and is needed when",
    "Developers should store images in a registry, which acts as a library of images and is needed when",
    "Figure 2-4 shows how images and registries in Docker relate to other components. It also shows the",
    "Figure 2-4 shows how images and registries in Docker relate to other components. It also shows the",
    "7",
    "7",
    "CHAPTER 1 | Introduction to Containers and Docker",
    "CHAPTER 1 | Introduction to Containers and Docker",
    "Figure 2-4. Taxonomy of Docker terms and concepts",
    "Figure 2-4. Taxonomy of Docker terms and concepts",
    "The registry is like a bookshelf where images are stored and available to be pulled for building",
    "The registry is like a bookshelf where images are stored and available to be pulled for building",
    "Putting images in a registry lets you store static and immutable application bits, including all their",
    "Putting images in a registry lets you store static and immutable application bits, including all their",
    "Private image registries, either hosted on-premises or in the cloud, are recommended when:",
    "Private image registries, either hosted on-premises or in the cloud, are recommended when:",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Your images must not be shared publicly due to confidentiality.",
    "Your images must not be shared publicly due to confidentiality.",
    "You want to have minimum network latency between your images and your chosen",
    "You want to have minimum network latency between your images and your chosen",
    "8",
    "8",
    "CHAPTER 1 | Introduction to Containers and Docker",
    "CHAPTER 1 | Introduction to Containers and Docker",
    "CHAPTER  2",
    "CHAPTER  2",
    "Choosing Between .NET",
    "Choosing Between .NET",
    "There are two supported frameworks for building server-side containerized Docker applications with",
    "There are two supported frameworks for building server-side containerized Docker applications with",
    "General guidance",
    "General guidance",
    "This section provides a summary of when to choose .NET 7 or .NET Framework. We provide more",
    "This section provides a summary of when to choose .NET 7 or .NET Framework. We provide more",
    "Use .NET 7, with Linux or Windows Containers, for your containerized Docker server application when:",
    "Use .NET 7, with Linux or Windows Containers, for your containerized Docker server application when:",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "You have cross-platform needs. For example, you want to use both Linux and Windows",
    "You have cross-platform needs. For example, you want to use both Linux and Windows",
    "Your application architecture is based on microservices.",
    "Your application architecture is based on microservices.",
    "You need to start containers fast and want a small footprint per container to achieve better",
    "You need to start containers fast and want a small footprint per container to achieve better",
    "In short, when you create new containerized .NET applications, you should consider .NET 7 as the",
    "In short, when you create new containerized .NET applications, you should consider .NET 7 as the",
    "An extra benefit of using .NET 7 is that you can run side-by-side .NET versions for applications within",
    "An extra benefit of using .NET 7 is that you can run side-by-side .NET versions for applications within",
    "Use .NET Framework for your containerized Docker server application when:",
    "Use .NET Framework for your containerized Docker server application when:",
    "\u2022",
    "\u2022",
    "Your application currently uses .NET Framework and has strong dependencies on Windows.",
    "Your application currently uses .NET Framework and has strong dependencies on Windows.",
    "9",
    "9",
    "CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "You need to use Windows APIs that are not supported by .NET 7.",
    "You need to use Windows APIs that are not supported by .NET 7.",
    "You need to use third-party .NET libraries or NuGet packages that are not available for .NET 7.",
    "You need to use third-party .NET libraries or NuGet packages that are not available for .NET 7.",
    "Using .NET Framework on Docker can improve your deployment experiences by minimizing",
    "Using .NET Framework on Docker can improve your deployment experiences by minimizing",
    "Additional resources",
    "Additional resources",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "E-book: Modernize existing .NET Framework applications with Azure and Windows",
    "E-book: Modernize existing .NET Framework applications with Azure and Windows",
    "Sample apps: Modernization of legacy ASP.NET web apps by using Windows Containers",
    "Sample apps: Modernization of legacy ASP.NET web apps by using Windows Containers",
    "When to choose .NET for Docker containers",
    "When to choose .NET for Docker containers",
    "The modularity and lightweight nature of .NET 7 makes it perfect for containers. When you deploy",
    "The modularity and lightweight nature of .NET 7 makes it perfect for containers. When you deploy",
    "Additionally, .NET 7 is cross-platform, so you can deploy server apps with Linux or Windows container",
    "Additionally, .NET 7 is cross-platform, so you can deploy server apps with Linux or Windows container",
    "The following is a more detailed explanation of why to choose .NET 7.",
    "The following is a more detailed explanation of why to choose .NET 7.",
    "Developing and deploying cross platform",
    "Developing and deploying cross platform",
    "Clearly, if your goal is to have an application (web app or service) that can run on multiple platforms",
    "Clearly, if your goal is to have an application (web app or service) that can run on multiple platforms",
    ".NET 7 also supports macOS as a development platform. However, when you deploy containers to a",
    ".NET 7 also supports macOS as a development platform. However, when you deploy containers to a",
    "Visual Studio provides an integrated development environment (IDE) for Windows and supports",
    "Visual Studio provides an integrated development environment (IDE) for Windows and supports",
    "Visual Studio for Mac is an IDE, evolution of Xamarin Studio, that runs on macOS and supports",
    "Visual Studio for Mac is an IDE, evolution of Xamarin Studio, that runs on macOS and supports",
    "You can also use Visual Studio Code on macOS, Linux, and Windows. Visual Studio Code fully",
    "You can also use Visual Studio Code on macOS, Linux, and Windows. Visual Studio Code fully",
    "10",
    "10",
    "CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "can use it to develop containerized apps on the machine in conjunction with the Docker CLI and the",
    "can use it to develop containerized apps on the machine in conjunction with the Docker CLI and the",
    "In addition to the IDEs and editors, you can use the .NET CLI for all supported platforms.",
    "In addition to the IDEs and editors, you can use the .NET CLI for all supported platforms.",
    "Using containers for new (\u201cgreen-field\u201d) projects",
    "Using containers for new (\u201cgreen-field\u201d) projects",
    "Containers are commonly used in conjunction with a microservices architecture, although they can",
    "Containers are commonly used in conjunction with a microservices architecture, although they can",
    "Create and deploy microservices on containers",
    "Create and deploy microservices on containers",
    "You could use the traditional .NET Framework for building microservices-based applications (without",
    "You could use the traditional .NET Framework for building microservices-based applications (without",
    "On the other hand, .NET 7 is the best candidate if you\u2019re embracing a microservices-oriented system",
    "On the other hand, .NET 7 is the best candidate if you\u2019re embracing a microservices-oriented system",
    "A microservice is meant to be as small as possible: to be light when spinning up, to have a small",
    "A microservice is meant to be as small as possible: to be light when spinning up, to have a small",
    "A microservices architecture also allows you to mix technologies across a service boundary. This",
    "A microservices architecture also allows you to mix technologies across a service boundary. This",
    "Deploying high density in scalable systems",
    "Deploying high density in scalable systems",
    "When your container-based system needs the best possible density, granularity, and performance,",
    "When your container-based system needs the best possible density, granularity, and performance,",
    "This approach is especially relevant for microservices architectures, where you could have hundreds of",
    "This approach is especially relevant for microservices architectures, where you could have hundreds of",
    "11",
    "11",
    "CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "When to choose .NET Framework for Docker",
    "When to choose .NET Framework for Docker",
    "While .NET 7 offers significant benefits for new applications and application patterns, .NET Framework",
    "While .NET 7 offers significant benefits for new applications and application patterns, .NET Framework",
    "Migrating existing applications directly to a Windows Server container",
    "Migrating existing applications directly to a Windows Server container",
    "You might want to use Docker containers just to simplify deployment, even if you are not creating",
    "You might want to use Docker containers just to simplify deployment, even if you are not creating",
    "In most cases for this scenario, you will not need to migrate your existing applications to .NET 7; you",
    "In most cases for this scenario, you will not need to migrate your existing applications to .NET 7; you",
    "Using third-party .NET libraries or NuGet packages not available for",
    "Using third-party .NET libraries or NuGet packages not available for",
    "Third-party libraries are quickly embracing .NET Standard, which enables code sharing across all .NET",
    "Third-party libraries are quickly embracing .NET Standard, which enables code sharing across all .NET",
    "In addition, the Windows Compatibility Pack extends the API surface available for .NET Standard 2.0",
    "In addition, the Windows Compatibility Pack extends the API surface available for .NET Standard 2.0",
    "However, even with that exceptional progression since .NET Standard 2.0 and .NET Core 2.1 or later,",
    "However, even with that exceptional progression since .NET Standard 2.0 and .NET Core 2.1 or later,",
    "Using .NET technologies not available for .NET 7",
    "Using .NET technologies not available for .NET 7",
    "Some .NET Framework technologies aren\u2019t available in .NET 7. Some of them might become available",
    "Some .NET Framework technologies aren\u2019t available in .NET 7. Some of them might become available",
    "The following list shows most of the technologies that aren\u2019t available in .NET 7:",
    "The following list shows most of the technologies that aren\u2019t available in .NET 7:",
    "12",
    "12",
    "CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "\u2022",
    "\u2022",
    "ASP.NET Web Forms. This technology is only available on .NET Framework. Currently there are",
    "ASP.NET Web Forms. This technology is only available on .NET Framework. Currently there are",
    "\u2022  Workflow-related services. Windows Workflow Foundation (WF), Workflow Services (WCF +",
    "\u2022  Workflow-related services. Windows Workflow Foundation (WF), Workflow Services (WCF +",
    "In addition to the technologies listed in the official .NET roadmap, other features might be ported to",
    "In addition to the technologies listed in the official .NET roadmap, other features might be ported to",
    "Using a platform or API that doesn\u2019t support .NET 7",
    "Using a platform or API that doesn\u2019t support .NET 7",
    "Some Microsoft and third-party platforms don\u2019t support .NET 7. For example, some Azure services",
    "Some Microsoft and third-party platforms don\u2019t support .NET 7. For example, some Azure services",
    "In the meantime, if any platform or service in Azure still doesn\u2019t support .NET 7 with its client API, you",
    "In the meantime, if any platform or service in Azure still doesn\u2019t support .NET 7 with its client API, you",
    "Porting existing ASP.NET application to .NET 7",
    "Porting existing ASP.NET application to .NET 7",
    ".NET Core is a revolutionary step forward from .NET Framework. It offers a host of advantages over",
    ".NET Core is a revolutionary step forward from .NET Framework. It offers a host of advantages over",
    "Additional resources",
    "Additional resources",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    ".NET fundamentals",
    ".NET fundamentals",
    "Porting Projects to .NET 5",
    "Porting Projects to .NET 5",
    ".NET on Docker Guide",
    ".NET on Docker Guide",
    "Decision table: .NET implementations to use for",
    "Decision table: .NET implementations to use for",
    "The following decision table summarizes whether to use .NET Framework or .NET 7. Remember that",
    "The following decision table summarizes whether to use .NET Framework or .NET 7. Remember that",
    "13",
    "13",
    "CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "Important",
    "Important",
    "Your development machines will run one Docker host, either Linux or Windows. Related microservices",
    "Your development machines will run one Docker host, either Linux or Windows. Related microservices",
    "Architecture / App Type",
    "Architecture / App Type",
    "Linux containers",
    "Linux containers",
    "Windows Containers",
    "Windows Containers",
    "Microservices on containers",
    "Microservices on containers",
    "Monolithic app",
    "Monolithic app",
    "Best-in-class performance and",
    "Best-in-class performance and",
    ".NET 7",
    ".NET 7",
    ".NET 7",
    ".NET 7",
    ".NET 7",
    ".NET 7",
    "Windows Server legacy app (\u201cbrown-",
    "Windows Server legacy app (\u201cbrown-",
    "\u2013",
    "\u2013",
    "New container-based development",
    "New container-based development",
    "ASP.NET Core",
    "ASP.NET Core",
    ".NET 7",
    ".NET 7",
    ".NET 7",
    ".NET 7",
    "ASP.NET 4 (MVC 5, Web API 2, and",
    "ASP.NET 4 (MVC 5, Web API 2, and",
    "\u2013",
    "\u2013",
    "SignalR services",
    "SignalR services",
    ".NET Core 2.1 or higher",
    ".NET Core 2.1 or higher",
    "WCF, WF, and other legacy",
    "WCF, WF, and other legacy",
    "WCF in .NET Core (client",
    "WCF in .NET Core (client",
    "Consumption of Azure services",
    "Consumption of Azure services",
    ".NET 7",
    ".NET 7",
    ".NET 7",
    ".NET 7",
    ".NET Framework",
    ".NET Framework",
    ".NET 7",
    ".NET 7",
    ".NET Framework",
    ".NET Framework",
    ".NET 7",
    ".NET 7",
    ".NET 7 (recommended)",
    ".NET 7 (recommended)",
    ".NET Framework",
    ".NET Framework",
    ".NET Framework",
    ".NET Framework",
    ".NET Framework",
    ".NET Framework",
    ".NET Framework",
    ".NET Framework",
    "What OS to target with .NET containers",
    "What OS to target with .NET containers",
    "Given the diversity of operating systems supported by Docker and the differences between .NET",
    "Given the diversity of operating systems supported by Docker and the differences between .NET",
    "For Windows, you can use Windows Server Core or Windows Nano Server. These Windows versions",
    "For Windows, you can use Windows Server Core or Windows Nano Server. These Windows versions",
    "For Linux, multiple distros are available and supported in official .NET Docker images (like Debian).",
    "For Linux, multiple distros are available and supported in official .NET Docker images (like Debian).",
    "14",
    "14",
    "CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "In Figure 3-1, you can see the possible OS version depending on the .NET framework used.",
    "In Figure 3-1, you can see the possible OS version depending on the .NET framework used.",
    "Figure 3-1. Operating systems to target depending on versions of the .NET framework",
    "Figure 3-1. Operating systems to target depending on versions of the .NET framework",
    "When deploying legacy .NET Framework applications you have to target Windows Server Core,",
    "When deploying legacy .NET Framework applications you have to target Windows Server Core,",
    "You can also create your own Docker image in cases where you want to use a different Linux distro or",
    "You can also create your own Docker image in cases where you want to use a different Linux distro or",
    "When you add the image name to your Dockerfile file, you can select the operating system and",
    "When you add the image name to your Dockerfile file, you can select the operating system and",
    "Image",
    "Image",
    "Comments",
    "Comments",
    "mcr.microsoft.com/dotnet/runtime:7.0",
    "mcr.microsoft.com/dotnet/runtime:7.0",
    "mcr.microsoft.com/dotnet/aspnet:7.0",
    "mcr.microsoft.com/dotnet/aspnet:7.0",
    "mcr.microsoft.com/dotnet/aspnet:7.0-",
    "mcr.microsoft.com/dotnet/aspnet:7.0-",
    ".NET 7 multi-architecture: Supports Linux and Windows",
    ".NET 7 multi-architecture: Supports Linux and Windows",
    "ASP.NET Core 7.0 multi-architecture: Supports Linux and",
    "ASP.NET Core 7.0 multi-architecture: Supports Linux and",
    ".NET 7 runtime-only on Linux Debian distro",
    ".NET 7 runtime-only on Linux Debian distro",
    "mcr.microsoft.com/dotnet/aspnet:7.0-",
    "mcr.microsoft.com/dotnet/aspnet:7.0-",
    ".NET 7 runtime-only on Windows Nano Server (Windows",
    ".NET 7 runtime-only on Windows Nano Server (Windows",
    "15",
    "15",
    "CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "Official .NET Docker images",
    "Official .NET Docker images",
    "The Official .NET Docker images are Docker images created and optimized by Microsoft. They\u2019re",
    "The Official .NET Docker images are Docker images created and optimized by Microsoft. They\u2019re",
    "Each repository can contain multiple images, depending on .NET versions, and depending on the OS",
    "Each repository can contain multiple images, depending on .NET versions, and depending on the OS",
    ".NET and Docker image optimizations for development versus",
    ".NET and Docker image optimizations for development versus",
    "When building Docker images for developers, Microsoft focused on the following main scenarios:",
    "When building Docker images for developers, Microsoft focused on the following main scenarios:",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Images used to develop and build .NET apps.",
    "Images used to develop and build .NET apps.",
    "Images used to run .NET apps.",
    "Images used to run .NET apps.",
    "Why multiple images? When developing, building, and running containerized applications, you usually",
    "Why multiple images? When developing, building, and running containerized applications, you usually",
    "During development and build",
    "During development and build",
    "During development, what is important is how fast you can iterate changes, and the ability to debug",
    "During development, what is important is how fast you can iterate changes, and the ability to debug",
    "Why is this type of build image important? You don\u2019t deploy this image to production. Instead, it\u2019s an",
    "Why is this type of build image important? You don\u2019t deploy this image to production. Instead, it\u2019s an",
    "In production",
    "In production",
    "What is important in production is how fast you can deploy and start your containers based on a",
    "What is important in production is how fast you can deploy and start your containers based on a",
    "16",
    "16",
    "CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "In this optimized image, you put only the binaries and other content needed to run the application.",
    "In this optimized image, you put only the binaries and other content needed to run the application.",
    "Although there are multiple versions of the .NET and ASP.NET Core images, they all share one or more",
    "Although there are multiple versions of the .NET and ASP.NET Core images, they all share one or more",
    "When you explore the .NET image repositories at Microsoft Artifact Registry, you\u2019ll find multiple image",
    "When you explore the .NET image repositories at Microsoft Artifact Registry, you\u2019ll find multiple image",
    "Image",
    "Image",
    "Comments",
    "Comments",
    "mcr.microsoft.com/dotnet/aspnet:7.0",
    "mcr.microsoft.com/dotnet/aspnet:7.0",
    "mcr.microsoft.com/dotnet/sdk:7.0",
    "mcr.microsoft.com/dotnet/sdk:7.0",
    "ASP.NET Core, with runtime only and ASP.NET Core",
    "ASP.NET Core, with runtime only and ASP.NET Core",
    ".NET 7, with SDKs included, on Linux and Windows",
    ".NET 7, with SDKs included, on Linux and Windows",
    "You can find all the available docker images in dotnet-docker and also refer to the latest preview",
    "You can find all the available docker images in dotnet-docker and also refer to the latest preview",
    "17",
    "17",
    "CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "CHAPTER  3",
    "CHAPTER  3",
    "Architecting container and",
    "Architecting container and",
    "Microservices offer great benefits but also raise huge new challenges. Microservice architecture patterns",
    "Microservices offer great benefits but also raise huge new challenges. Microservice architecture patterns",
    "Earlier in this guide, you learned basic concepts about containers and Docker. That information was",
    "Earlier in this guide, you learned basic concepts about containers and Docker. That information was",
    "Enterprise applications can be complex and are often composed of multiple services instead of a",
    "Enterprise applications can be complex and are often composed of multiple services instead of a",
    "Container design principles",
    "Container design principles",
    "In the container model, a container image instance represents a single process. By defining a",
    "In the container model, a container image instance represents a single process. By defining a",
    "When you design a container image, you\u2019ll see an ENTRYPOINT definition in the Dockerfile. This",
    "When you design a container image, you\u2019ll see an ENTRYPOINT definition in the Dockerfile. This",
    "If the process fails, the container ends, and the orchestrator takes over. If the orchestrator was",
    "If the process fails, the container ends, and the orchestrator takes over. If the orchestrator was",
    "18",
    "18",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "You might find a scenario where you want multiple processes running in a single container. For that",
    "You might find a scenario where you want multiple processes running in a single container. For that",
    "Containerizing monolithic applications",
    "Containerizing monolithic applications",
    "You might want to build a single, monolithically deployed web application or service and deploy it as",
    "You might want to build a single, monolithically deployed web application or service and deploy it as",
    "To manage this model, you deploy a single container to represent the application. To increase",
    "To manage this model, you deploy a single container to represent the application. To increase",
    "Figure 4-1. Example of the architecture of a containerized monolithic application",
    "Figure 4-1. Example of the architecture of a containerized monolithic application",
    "You can include multiple components, libraries, or internal layers in each container, as illustrated in",
    "You can include multiple components, libraries, or internal layers in each container, as illustrated in",
    "The downside of this approach becomes evident if the application grows, requiring it to scale. If the",
    "The downside of this approach becomes evident if the application grows, requiring it to scale. If the",
    "For example, in a typical e-commerce application, you likely need to scale the product information",
    "For example, in a typical e-commerce application, you likely need to scale the product information",
    "19",
    "19",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "their basket than use the payment pipeline. Fewer customers add comments or view their purchase",
    "their basket than use the payment pipeline. Fewer customers add comments or view their purchase",
    "There are multiple ways to scale an application-horizontal duplication, splitting different areas of the",
    "There are multiple ways to scale an application-horizontal duplication, splitting different areas of the",
    "However, the monolithic approach is common, because the development of the application is initially",
    "However, the monolithic approach is common, because the development of the application is initially",
    "From an infrastructure perspective, each server can run many applications within the same host and",
    "From an infrastructure perspective, each server can run many applications within the same host and",
    "Figure 4-2. Monolithic approach: Host running multiple apps, each app running as a container",
    "Figure 4-2. Monolithic approach: Host running multiple apps, each app running as a container",
    "Monolithic applications in Microsoft Azure can be deployed using dedicated VMs for each instance.",
    "Monolithic applications in Microsoft Azure can be deployed using dedicated VMs for each instance.",
    "As a QA environment or a limited production environment, you can deploy multiple Docker host VMs",
    "As a QA environment or a limited production environment, you can deploy multiple Docker host VMs",
    "20",
    "20",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "Figure 4-3. Example of multiple hosts scaling up a single container application",
    "Figure 4-3. Example of multiple hosts scaling up a single container application",
    "Deployment to the various hosts can be managed with traditional deployment techniques. Docker",
    "Deployment to the various hosts can be managed with traditional deployment techniques. Docker",
    "Deploying a monolithic application as a container",
    "Deploying a monolithic application as a container",
    "There are benefits to using containers to manage monolithic application deployments. Scaling",
    "There are benefits to using containers to manage monolithic application deployments. Scaling",
    "Deploying updates as Docker images is far faster and network efficient. Docker images typically start",
    "Deploying updates as Docker images is far faster and network efficient. Docker images typically start",
    "Because containers are immutable by design, you never need to worry about corrupted VMs. In",
    "Because containers are immutable by design, you never need to worry about corrupted VMs. In",
    "While monolithic applications can benefit from Docker, we\u2019re touching only on the benefits.",
    "While monolithic applications can benefit from Docker, we\u2019re touching only on the benefits.",
    "Publishing a single-container-based application to Azure App Service",
    "Publishing a single-container-based application to Azure App Service",
    "Whether you want to get validation of a container deployed to Azure or when an application is simply",
    "Whether you want to get validation of a container deployed to Azure or when an application is simply",
    "21",
    "21",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "Figure 4-4. Publishing a single-container application to Azure App Service from Visual Studio 2022",
    "Figure 4-4. Publishing a single-container application to Azure App Service from Visual Studio 2022",
    "Without Docker, if you needed other capabilities, frameworks, or dependencies that aren\u2019t supported",
    "Without Docker, if you needed other capabilities, frameworks, or dependencies that aren\u2019t supported",
    "Container support in Visual Studio 2017 and later gives you the ability to include whatever you want",
    "Container support in Visual Studio 2017 and later gives you the ability to include whatever you want",
    "As also shown in Figure 4-4, the publish flow pushes an image through a container registry. This can",
    "As also shown in Figure 4-4, the publish flow pushes an image through a container registry. This can",
    "Manage state and data in Docker applications",
    "Manage state and data in Docker applications",
    "In most cases, you can think of a container as an instance of a process. A process doesn\u2019t maintain",
    "In most cases, you can think of a container as an instance of a process. A process doesn\u2019t maintain",
    "22",
    "22",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "should assume that container images, like processes, have multiple instances or will eventually be",
    "should assume that container images, like processes, have multiple instances or will eventually be",
    "The following solutions are used to manage data in Docker applications:",
    "The following solutions are used to manage data in Docker applications:",
    "From the Docker host, as Docker Volumes:",
    "From the Docker host, as Docker Volumes:",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Volumes are stored in an area of the host filesystem that\u2019s managed by Docker.",
    "Volumes are stored in an area of the host filesystem that\u2019s managed by Docker.",
    "Bind mounts can map to any folder in the host filesystem, so access can\u2019t be controlled from",
    "Bind mounts can map to any folder in the host filesystem, so access can\u2019t be controlled from",
    "tmpfs mounts are like virtual folders that only exist in the host\u2019s memory and are never",
    "tmpfs mounts are like virtual folders that only exist in the host\u2019s memory and are never",
    "From remote storage:",
    "From remote storage:",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Azure Storage, which provides geo-distributable storage, providing a good long-term",
    "Azure Storage, which provides geo-distributable storage, providing a good long-term",
    "Remote relational databases like Azure SQL Database or NoSQL databases like Azure Cosmos",
    "Remote relational databases like Azure SQL Database or NoSQL databases like Azure Cosmos",
    "From the Docker container:",
    "From the Docker container:",
    "\u2022",
    "\u2022",
    "Overlay File System. This Docker feature implements a copy-on-write task that stores",
    "Overlay File System. This Docker feature implements a copy-on-write task that stores",
    "However, using Docker Volumes is now the preferred way to handle local data in Docker. If you need",
    "However, using Docker Volumes is now the preferred way to handle local data in Docker. If you need",
    "The following provides more detail about these options:",
    "The following provides more detail about these options:",
    "Volumes are directories mapped from the host OS to directories in containers. When code in the",
    "Volumes are directories mapped from the host OS to directories in containers. When code in the",
    "Volumes can be named or anonymous (the default). Named volumes are the evolution of Data",
    "Volumes can be named or anonymous (the default). Named volumes are the evolution of Data",
    "Bind mounts are available since a long time ago and allow the mapping of any folder to a mount",
    "Bind mounts are available since a long time ago and allow the mapping of any folder to a mount",
    "23",
    "23",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "tmpfs mounts are basically virtual folders that live only in the host\u2019s memory and are never written to",
    "tmpfs mounts are basically virtual folders that live only in the host\u2019s memory and are never written to",
    "As shown in Figure 4-5, regular Docker volumes can be stored outside of the containers themselves",
    "As shown in Figure 4-5, regular Docker volumes can be stored outside of the containers themselves",
    "Figure 4-5. Volumes and external data sources for container-based applications",
    "Figure 4-5. Volumes and external data sources for container-based applications",
    "Volumes can be shared between containers, but only in the same host, unless you use a remote driver",
    "Volumes can be shared between containers, but only in the same host, unless you use a remote driver",
    "Remote data sources and cache tools like Azure SQL Database, Azure Cosmos DB, or a remote cache",
    "Remote data sources and cache tools like Azure SQL Database, Azure Cosmos DB, or a remote cache",
    "Azure Storage. Business data usually will need to be placed in external resources or databases, like",
    "Azure Storage. Business data usually will need to be placed in external resources or databases, like",
    "\u2022",
    "\u2022",
    "Blob storage stores unstructured object data. A blob can be any type of text or binary data,",
    "Blob storage stores unstructured object data. A blob can be any type of text or binary data,",
    "24",
    "24",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "File storage offers shared storage for legacy applications using standard SMB protocol. Azure",
    "File storage offers shared storage for legacy applications using standard SMB protocol. Azure",
    "Table storage stores structured datasets. Table storage is a NoSQL key-attribute data store,",
    "Table storage stores structured datasets. Table storage is a NoSQL key-attribute data store,",
    "Relational databases and NoSQL databases. There are many choices for external databases, from",
    "Relational databases and NoSQL databases. There are many choices for external databases, from",
    "Service-oriented architecture",
    "Service-oriented architecture",
    "Service-oriented architecture (SOA) was an overused term and has meant different things to different",
    "Service-oriented architecture (SOA) was an overused term and has meant different things to different",
    "Those services can now be deployed as Docker containers, which solves deployment issues, because",
    "Those services can now be deployed as Docker containers, which solves deployment issues, because",
    "Docker containers are useful (but not required) for both traditional service-oriented architectures and",
    "Docker containers are useful (but not required) for both traditional service-oriented architectures and",
    "Microservices derive from SOA, but SOA is different from microservices architecture. Features like",
    "Microservices derive from SOA, but SOA is different from microservices architecture. Features like",
    "This guide focuses on microservices, because a SOA approach is less prescriptive than the",
    "This guide focuses on microservices, because a SOA approach is less prescriptive than the",
    "Microservices architecture",
    "Microservices architecture",
    "As the name implies, a microservices architecture is an approach to building a server application as a",
    "As the name implies, a microservices architecture is an approach to building a server application as a",
    "25",
    "25",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "and decentralized data management) and could be based on different data storage technologies",
    "and decentralized data management) and could be based on different data storage technologies",
    "What size should a microservice be? When developing a microservice, size shouldn\u2019t be the important",
    "What size should a microservice be? When developing a microservice, size shouldn\u2019t be the important",
    "Why a microservices architecture? In short, it provides long-term agility. Microservices enable better",
    "Why a microservices architecture? In short, it provides long-term agility. Microservices enable better",
    "As an additional benefit, microservices can scale out independently. Instead of having a single",
    "As an additional benefit, microservices can scale out independently. Instead of having a single",
    "Figure 4-6. Monolithic deployment versus the microservices approach",
    "Figure 4-6. Monolithic deployment versus the microservices approach",
    "As Figure 4-6 shows, in the traditional monolithic approach, the application scales by cloning the",
    "As Figure 4-6 shows, in the traditional monolithic approach, the application scales by cloning the",
    "Architecting fine-grained microservices-based applications enables continuous integration and",
    "Architecting fine-grained microservices-based applications enables continuous integration and",
    "26",
    "26",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "evolve them autonomously while maintaining clear contracts between them. As long as you don\u2019t",
    "evolve them autonomously while maintaining clear contracts between them. As long as you don\u2019t",
    "The following are important aspects to enable success in going into production with a microservices-",
    "The following are important aspects to enable success in going into production with a microservices-",
    "\u2022  Monitoring and health checks of the services and infrastructure.",
    "\u2022  Monitoring and health checks of the services and infrastructure.",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Scalable infrastructure for the services (that is, cloud and orchestrators).",
    "Scalable infrastructure for the services (that is, cloud and orchestrators).",
    "Security design and implementation at multiple levels: authentication, authorization, secrets",
    "Security design and implementation at multiple levels: authentication, authorization, secrets",
    "Rapid application delivery, usually with different teams focusing on different microservices.",
    "Rapid application delivery, usually with different teams focusing on different microservices.",
    "DevOps and CI/CD practices and infrastructure.",
    "DevOps and CI/CD practices and infrastructure.",
    "Of these, only the first three are covered or introduced in this guide. The last two points, which are",
    "Of these, only the first three are covered or introduced in this guide. The last two points, which are",
    "Additional resources",
    "Additional resources",
    "\u2022  Mark Russinovich. Microservices: An application revolution powered by the cloud",
    "\u2022  Mark Russinovich. Microservices: An application revolution powered by the cloud",
    "https://azure.microsoft.com/blog/microservices-an-application-revolution-powered-by-the-",
    "https://azure.microsoft.com/blog/microservices-an-application-revolution-powered-by-the-",
    "\u2022  Martin Fowler. Microservices",
    "\u2022  Martin Fowler. Microservices",
    "https://www.martinfowler.com/articles/microservices.html",
    "https://www.martinfowler.com/articles/microservices.html",
    "\u2022  Martin Fowler. Microservice Prerequisites",
    "\u2022  Martin Fowler. Microservice Prerequisites",
    "https://martinfowler.com/bliki/MicroservicePrerequisites.html",
    "https://martinfowler.com/bliki/MicroservicePrerequisites.html",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Jimmy Nilsson. Chunk Cloud Computing",
    "Jimmy Nilsson. Chunk Cloud Computing",
    "Cesar de la Torre. Containerized Docker Application Lifecycle with Microsoft Platform",
    "Cesar de la Torre. Containerized Docker Application Lifecycle with Microsoft Platform",
    "Data sovereignty per microservice",
    "Data sovereignty per microservice",
    "An important rule for microservices architecture is that each microservice must own its domain data",
    "An important rule for microservices architecture is that each microservice must own its domain data",
    "This means that the conceptual model of the domain will differ between subsystems or microservices.",
    "This means that the conceptual model of the domain will differ between subsystems or microservices.",
    "27",
    "27",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "transactional purchase subsystems, and customer support subsystems each call on unique customer",
    "transactional purchase subsystems, and customer support subsystems each call on unique customer",
    "This principle is similar in Domain-driven design (DDD), where each Bounded Context or autonomous",
    "This principle is similar in Domain-driven design (DDD), where each Bounded Context or autonomous",
    "On the other hand, the traditional (monolithic data) approach used in many applications is to have a",
    "On the other hand, the traditional (monolithic data) approach used in many applications is to have a",
    "Figure 4-7. Data sovereignty comparison: monolithic database versus microservices",
    "Figure 4-7. Data sovereignty comparison: monolithic database versus microservices",
    "In the traditional approach, there\u2019s a single database shared across all services, typically in a tiered",
    "In the traditional approach, there\u2019s a single database shared across all services, typically in a tiered",
    "A monolithic application with typically a single relational database has two important benefits: ACID",
    "A monolithic application with typically a single relational database has two important benefits: ACID",
    "However, data access becomes much more complicated when you move to a microservices",
    "However, data access becomes much more complicated when you move to a microservices",
    "28",
    "28",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "be accessed either synchronously through its API endpoints(REST, gRPC, SOAP, etc) or asynchronously",
    "be accessed either synchronously through its API endpoints(REST, gRPC, SOAP, etc) or asynchronously",
    "Encapsulating the data ensures that the microservices are loosely coupled and can evolve",
    "Encapsulating the data ensures that the microservices are loosely coupled and can evolve",
    "Going even further, different microservices often use different kinds of databases. Modern",
    "Going even further, different microservices often use different kinds of databases. Modern",
    "A partitioned, polyglot-persistent architecture for data storage has many benefits. These include",
    "A partitioned, polyglot-persistent architecture for data storage has many benefits. These include",
    "The relationship between microservices and the Bounded Context",
    "The relationship between microservices and the Bounded Context",
    "The concept of microservice derives from the Bounded Context (BC) pattern in domain-driven design",
    "The concept of microservice derives from the Bounded Context (BC) pattern in domain-driven design",
    "Those terms (mainly domain entities) in the ubiquitous language can have different names in different",
    "Those terms (mainly domain entities) in the ubiquitous language can have different names in different",
    "A microservice is therefore like a Bounded Context, but it also specifies that it\u2019s a distributed service.",
    "A microservice is therefore like a Bounded Context, but it also specifies that it\u2019s a distributed service.",
    "It\u2019s important to highlight that defining a service for each Bounded Context is a good place to start.",
    "It\u2019s important to highlight that defining a service for each Bounded Context is a good place to start.",
    "29",
    "29",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "business microservice composed of several physical services. But ultimately, both patterns -Bounded",
    "business microservice composed of several physical services. But ultimately, both patterns -Bounded",
    "DDD benefits from microservices by getting real boundaries in the form of distributed microservices.",
    "DDD benefits from microservices by getting real boundaries in the form of distributed microservices.",
    "Additional resources",
    "Additional resources",
    "\u2022",
    "\u2022",
    "Chris Richardson. Pattern: Database per service",
    "Chris Richardson. Pattern: Database per service",
    "\u2022  Martin Fowler. BoundedContext",
    "\u2022  Martin Fowler. BoundedContext",
    "https://martinfowler.com/bliki/BoundedContext.html",
    "https://martinfowler.com/bliki/BoundedContext.html",
    "\u2022  Martin Fowler. PolyglotPersistence",
    "\u2022  Martin Fowler. PolyglotPersistence",
    "https://martinfowler.com/bliki/PolyglotPersistence.html",
    "https://martinfowler.com/bliki/PolyglotPersistence.html",
    "\u2022",
    "\u2022",
    "Alberto Brandolini. Strategic Domain Driven Design with Context Mapping",
    "Alberto Brandolini. Strategic Domain Driven Design with Context Mapping",
    "Logical architecture versus physical architecture",
    "Logical architecture versus physical architecture",
    "It\u2019s useful at this point to stop and discuss the distinction between logical architecture and physical",
    "It\u2019s useful at this point to stop and discuss the distinction between logical architecture and physical",
    "To begin, building microservices doesn\u2019t require the use of any specific technology. For instance,",
    "To begin, building microservices doesn\u2019t require the use of any specific technology. For instance,",
    "Moreover, even when a microservice could be physically implemented as a single service, process, or",
    "Moreover, even when a microservice could be physically implemented as a single service, process, or",
    "This is where there\u2019s a difference between an application\u2019s logical architecture and physical",
    "This is where there\u2019s a difference between an application\u2019s logical architecture and physical",
    "Although you might have identified certain business microservices or Bounded Contexts, it doesn\u2019t",
    "Although you might have identified certain business microservices or Bounded Contexts, it doesn\u2019t",
    "Therefore, a business microservice or Bounded Context is a logical architecture that might coincide (or",
    "Therefore, a business microservice or Bounded Context is a logical architecture that might coincide (or",
    "30",
    "30",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "As Figure 4-8 shows, the catalog business microservice could be composed of several services or",
    "As Figure 4-8 shows, the catalog business microservice could be composed of several services or",
    "Figure 4-8. Business microservice with several physical services",
    "Figure 4-8. Business microservice with several physical services",
    "The services in the example share the same data model because the Web API service targets the same",
    "The services in the example share the same data model because the Web API service targets the same",
    "In short, the logical architecture of microservices doesn\u2019t always have to coincide with the physical",
    "In short, the logical architecture of microservices doesn\u2019t always have to coincide with the physical",
    "Challenges and solutions for distributed data",
    "Challenges and solutions for distributed data",
    "Challenge #1: How to define the boundaries of each microservice",
    "Challenge #1: How to define the boundaries of each microservice",
    "Defining microservice boundaries is probably the first challenge anyone encounters. Each microservice",
    "Defining microservice boundaries is probably the first challenge anyone encounters. Each microservice",
    "First, you need to focus on the application\u2019s logical domain models and related data. Try to identify",
    "First, you need to focus on the application\u2019s logical domain models and related data. Try to identify",
    "31",
    "31",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "purpose in another context, and might even have a different name. For instance, a user can be",
    "purpose in another context, and might even have a different name. For instance, a user can be",
    "The way you identify boundaries between multiple application contexts with a different domain for",
    "The way you identify boundaries between multiple application contexts with a different domain for",
    "Challenge #2: How to create queries that retrieve data from several",
    "Challenge #2: How to create queries that retrieve data from several",
    "A second challenge is how to implement queries that retrieve data from several microservices, while",
    "A second challenge is how to implement queries that retrieve data from several microservices, while",
    "API Gateway. For simple data aggregation from multiple microservices that own different databases,",
    "API Gateway. For simple data aggregation from multiple microservices that own different databases,",
    "GraphQL Federation One option to consider if your microservices are already using GraphQL is",
    "GraphQL Federation One option to consider if your microservices are already using GraphQL is",
    "CQRS with query/reads tables. Another solution for aggregating data from multiple microservices is",
    "CQRS with query/reads tables. Another solution for aggregating data from multiple microservices is",
    "Consider something like the screen for a mobile app. If you have a single database, you might pull",
    "Consider something like the screen for a mobile app. If you have a single database, you might pull",
    "This approach not only solves the original problem (how to query and join across microservices), but it",
    "This approach not only solves the original problem (how to query and join across microservices), but it",
    "32",
    "32",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "have the data that the application needs in the query table. Of course, using Command and Query",
    "have the data that the application needs in the query table. Of course, using Command and Query",
    "\u201cCold data\u201d in central databases. For complex reports and queries that might not require real-time",
    "\u201cCold data\u201d in central databases. For complex reports and queries that might not require real-time",
    "Keep in mind that this centralized database would be used only for queries and reports that do not",
    "Keep in mind that this centralized database would be used only for queries and reports that do not",
    "However, if your application design involves constantly aggregating information from multiple",
    "However, if your application design involves constantly aggregating information from multiple",
    "Challenge #3: How to achieve consistency across multiple",
    "Challenge #3: How to achieve consistency across multiple",
    "As stated previously, the data owned by each microservice is private to that microservice and can only",
    "As stated previously, the data owned by each microservice is private to that microservice and can only",
    "To analyze this problem, let\u2019s look at an example from the eShopOnContainers reference application.",
    "To analyze this problem, let\u2019s look at an example from the eShopOnContainers reference application.",
    "In a hypothetical monolithic version of this application, when the price changes in the products table,",
    "In a hypothetical monolithic version of this application, when the price changes in the products table,",
    "However, in a microservices-based application, the Product and Basket tables are owned by their",
    "However, in a microservices-based application, the Product and Basket tables are owned by their",
    "33",
    "33",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "Figure 4-9. A microservice can\u2019t directly access a table in another microservice",
    "Figure 4-9. A microservice can\u2019t directly access a table in another microservice",
    "The Catalog microservice shouldn\u2019t update the Basket table directly, because the Basket table is",
    "The Catalog microservice shouldn\u2019t update the Basket table directly, because the Basket table is",
    "As stated by the CAP theorem, you need to choose between availability and ACID strong consistency.",
    "As stated by the CAP theorem, you need to choose between availability and ACID strong consistency.",
    "Moreover, ACID-style or two-phase commit transactions are not just against microservices principles;",
    "Moreover, ACID-style or two-phase commit transactions are not just against microservices principles;",
    "A good solution for this problem is to use eventual consistency between microservices articulated",
    "A good solution for this problem is to use eventual consistency between microservices articulated",
    "34",
    "34",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "Challenge #4: How to design communication across microservice",
    "Challenge #4: How to design communication across microservice",
    "Communicating across microservice boundaries is a real challenge. In this context, communication",
    "Communicating across microservice boundaries is a real challenge. In this context, communication",
    "In a distributed system like a microservices-based application, with so many artifacts moving around",
    "In a distributed system like a microservices-based application, with so many artifacts moving around",
    "A popular approach is to implement HTTP (REST)-based microservices, due to their simplicity. An",
    "A popular approach is to implement HTTP (REST)-based microservices, due to their simplicity. An",
    "For instance, imagine that your client application makes an HTTP API call to an individual microservice",
    "For instance, imagine that your client application makes an HTTP API call to an individual microservice",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Blocking and low performance. Due to the synchronous nature of HTTP, the original request",
    "Blocking and low performance. Due to the synchronous nature of HTTP, the original request",
    "Coupling microservices with HTTP. Business microservices shouldn\u2019t be coupled with other",
    "Coupling microservices with HTTP. Business microservices shouldn\u2019t be coupled with other",
    "Failure in any one microservice. If you implemented a chain of microservices linked by HTTP",
    "Failure in any one microservice. If you implemented a chain of microservices linked by HTTP",
    "In fact, if your internal microservices are communicating by creating chains of HTTP requests as",
    "In fact, if your internal microservices are communicating by creating chains of HTTP requests as",
    "35",
    "35",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "Therefore, in order to enforce microservice autonomy and have better resiliency, you should minimize",
    "Therefore, in order to enforce microservice autonomy and have better resiliency, you should minimize",
    "The use of asynchronous communication is explained with additional details later in this guide in the",
    "The use of asynchronous communication is explained with additional details later in this guide in the",
    "Additional resources",
    "Additional resources",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "CAP theorem",
    "CAP theorem",
    "Eventual consistency",
    "Eventual consistency",
    "Data Consistency Primer",
    "Data Consistency Primer",
    "\u2022  Martin Fowler. CQRS (Command and Query Responsibility Segregation)",
    "\u2022  Martin Fowler. CQRS (Command and Query Responsibility Segregation)",
    "https://martinfowler.com/bliki/CQRS.html",
    "https://martinfowler.com/bliki/CQRS.html",
    "\u2022  Materialized View",
    "\u2022  Materialized View",
    "https://learn.microsoft.com/azure/architecture/patterns/materialized-view",
    "https://learn.microsoft.com/azure/architecture/patterns/materialized-view",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Charles Row. ACID vs. BASE: The Shifting pH of Database Transaction Processing",
    "Charles Row. ACID vs. BASE: The Shifting pH of Database Transaction Processing",
    "Compensating Transaction",
    "Compensating Transaction",
    "Udi Dahan. Service Oriented Composition",
    "Udi Dahan. Service Oriented Composition",
    "Identify domain-model boundaries for each",
    "Identify domain-model boundaries for each",
    "The goal when identifying model boundaries and size for each microservice isn\u2019t to get to the most",
    "The goal when identifying model boundaries and size for each microservice isn\u2019t to get to the most",
    "36",
    "36",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "or group together microservices. Ultimately, while you gain more knowledge about the domain, you",
    "or group together microservices. Ultimately, while you gain more knowledge about the domain, you",
    "Sam Newman, a recognized promoter of microservices and author of the book Building Microservices,",
    "Sam Newman, a recognized promoter of microservices and author of the book Building Microservices,",
    "A domain model with specific domain entities applies within a concrete BC or microservice. A BC",
    "A domain model with specific domain entities applies within a concrete BC or microservice. A BC",
    "Another tool that informs your design choice is Conway\u2019s law, which states that an application will",
    "Another tool that informs your design choice is Conway\u2019s law, which states that an application will",
    "To identify bounded contexts, you can use a DDD pattern called the Context Mapping pattern. With",
    "To identify bounded contexts, you can use a DDD pattern called the Context Mapping pattern. With",
    "When designing a large application, you\u2019ll see how its domain model can be fragmented - a domain",
    "When designing a large application, you\u2019ll see how its domain model can be fragmented - a domain",
    "You\u2019ll know that you got the right boundaries and sizes of each BC and domain model if you have few",
    "You\u2019ll know that you got the right boundaries and sizes of each BC and domain model if you have few",
    "Perhaps the best answer to the question of how large a domain model for each microservice should",
    "Perhaps the best answer to the question of how large a domain model for each microservice should",
    "37",
    "37",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "10, you can see how multiple microservices (multiple BCs) each has their own model and how their",
    "10, you can see how multiple microservices (multiple BCs) each has their own model and how their",
    "Figure 4-10. Identifying entities and microservice model boundaries",
    "Figure 4-10. Identifying entities and microservice model boundaries",
    "Figure 4-10 illustrates a sample scenario related to an online conference management system. The",
    "Figure 4-10 illustrates a sample scenario related to an online conference management system. The",
    "However, you might also have entities that have a different shape but share the same identity across",
    "However, you might also have entities that have a different shape but share the same identity across",
    "A similar approach is illustrated in Figure 4-11.",
    "A similar approach is illustrated in Figure 4-11.",
    "38",
    "38",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "Figure 4-11. Decomposing traditional data models into multiple domain models",
    "Figure 4-11. Decomposing traditional data models into multiple domain models",
    "When decomposing a traditional data model between bounded contexts, you can have different",
    "When decomposing a traditional data model between bounded contexts, you can have different",
    "The Seat entity has the same name but different attributes in each domain model. However, Seat",
    "The Seat entity has the same name but different attributes in each domain model. However, Seat",
    "Basically, there\u2019s a shared concept of a user that exists in multiple services (domains), which all share",
    "Basically, there\u2019s a shared concept of a user that exists in multiple services (domains), which all share",
    "There are several benefits to not sharing the same user entity with the same number of attributes",
    "There are several benefits to not sharing the same user entity with the same number of attributes",
    "39",
    "39",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "The API gateway pattern versus the Direct client-to-",
    "The API gateway pattern versus the Direct client-to-",
    "In a microservices architecture, each microservice exposes a set of (typically) fine-grained endpoints.",
    "In a microservices architecture, each microservice exposes a set of (typically) fine-grained endpoints.",
    "Direct client-to-microservice communication",
    "Direct client-to-microservice communication",
    "A possible approach is to use a direct client-to-microservice communication architecture. In this",
    "A possible approach is to use a direct client-to-microservice communication architecture. In this",
    "Figure 4-12. Using a direct client-to-microservice communication architecture",
    "Figure 4-12. Using a direct client-to-microservice communication architecture",
    "In this approach, each microservice has a public endpoint, sometimes with a different TCP port for",
    "In this approach, each microservice has a public endpoint, sometimes with a different TCP port for",
    "http://eshoponcontainers.westus.cloudapp.azure.com:88/",
    "http://eshoponcontainers.westus.cloudapp.azure.com:88/",
    "In a production environment based on a cluster, that URL would map to the load balancer used in the",
    "In a production environment based on a cluster, that URL would map to the load balancer used in the",
    "A direct client-to-microservice communication architecture could be good enough for a small",
    "A direct client-to-microservice communication architecture could be good enough for a small",
    "40",
    "40",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "Consider the following questions when developing a large application based on microservices:",
    "Consider the following questions when developing a large application based on microservices:",
    "\u2022",
    "\u2022",
    "How can client apps minimize the number of requests to the back end and reduce chatty",
    "How can client apps minimize the number of requests to the back end and reduce chatty",
    "Interacting with multiple microservices to build a single UI screen increases the number of round trips",
    "Interacting with multiple microservices to build a single UI screen increases the number of round trips",
    "\u2022",
    "\u2022",
    "How can you handle cross-cutting concerns such as authorization, data transformations, and",
    "How can you handle cross-cutting concerns such as authorization, data transformations, and",
    "Implementing security and cross-cutting concerns like security and authorization on every",
    "Implementing security and cross-cutting concerns like security and authorization on every",
    "\u2022",
    "\u2022",
    "How can client apps communicate with services that use non-Internet-friendly protocols?",
    "How can client apps communicate with services that use non-Internet-friendly protocols?",
    "Protocols used on the server side (like AMQP or binary protocols) are not supported in client apps.",
    "Protocols used on the server side (like AMQP or binary protocols) are not supported in client apps.",
    "\u2022",
    "\u2022",
    "How can you shape a facade especially made for mobile apps?",
    "How can you shape a facade especially made for mobile apps?",
    "The API of multiple microservices might not be well designed for the needs of different client",
    "The API of multiple microservices might not be well designed for the needs of different client",
    "Why consider API Gateways instead of direct client-to-microservice",
    "Why consider API Gateways instead of direct client-to-microservice",
    "In a microservices architecture, the client apps usually need to consume functionality from more than",
    "In a microservices architecture, the client apps usually need to consume functionality from more than",
    "Therefore, having an intermediate level or tier of indirection (Gateway) can be convenient for",
    "Therefore, having an intermediate level or tier of indirection (Gateway) can be convenient for",
    "41",
    "41",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Coupling: Without the API Gateway pattern, the client apps are coupled to the internal",
    "Coupling: Without the API Gateway pattern, the client apps are coupled to the internal",
    "Too many round trips: A single page/screen in the client app might require several calls to",
    "Too many round trips: A single page/screen in the client app might require several calls to",
    "Security issues: Without a gateway, all the microservices must be exposed to the \u201cexternal",
    "Security issues: Without a gateway, all the microservices must be exposed to the \u201cexternal",
    "Cross-cutting concerns: Each publicly published microservice must handle concerns such as",
    "Cross-cutting concerns: Each publicly published microservice must handle concerns such as",
    "What is the API Gateway pattern?",
    "What is the API Gateway pattern?",
    "When you design and build large or complex microservice-based applications with multiple client",
    "When you design and build large or complex microservice-based applications with multiple client",
    "Therefore, the API gateway sits between the client apps and the microservices. It acts as a reverse",
    "Therefore, the API gateway sits between the client apps and the microservices. It acts as a reverse",
    "Figure 4-13 shows how a custom API Gateway can fit into a simplified microservice-based architecture",
    "Figure 4-13 shows how a custom API Gateway can fit into a simplified microservice-based architecture",
    "42",
    "42",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "Figure 4-13. Using an API Gateway implemented as a custom service",
    "Figure 4-13. Using an API Gateway implemented as a custom service",
    "Apps connect to a single endpoint, the API Gateway, that\u2019s configured to forward requests to",
    "Apps connect to a single endpoint, the API Gateway, that\u2019s configured to forward requests to",
    "It\u2019s important to highlight that in that diagram, you would be using a single custom API Gateway",
    "It\u2019s important to highlight that in that diagram, you would be using a single custom API Gateway",
    "You need to be careful when implementing the API Gateway pattern. Usually it isn\u2019t a good idea to",
    "You need to be careful when implementing the API Gateway pattern. Usually it isn\u2019t a good idea to",
    "Therefore, the API Gateways should be segregated based on business boundaries and the client apps",
    "Therefore, the API Gateways should be segregated based on business boundaries and the client apps",
    "When splitting the API Gateway tier into multiple API Gateways, if your application has multiple client",
    "When splitting the API Gateway tier into multiple API Gateways, if your application has multiple client",
    "43",
    "43",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "Figure 4-13.1. Using multiple custom API Gateways",
    "Figure 4-13.1. Using multiple custom API Gateways",
    "Figure 4-13.1 shows API Gateways that are segregated by client type; one for mobile clients and one",
    "Figure 4-13.1 shows API Gateways that are segregated by client type; one for mobile clients and one",
    "Main features in the API Gateway pattern",
    "Main features in the API Gateway pattern",
    "An API Gateway can offer multiple features. Depending on the product it might offer richer or simpler",
    "An API Gateway can offer multiple features. Depending on the product it might offer richer or simpler",
    "Reverse proxy or gateway routing. The API Gateway offers a reverse proxy to redirect or route",
    "Reverse proxy or gateway routing. The API Gateway offers a reverse proxy to redirect or route",
    "44",
    "44",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "For more information, see Gateway routing pattern.",
    "For more information, see Gateway routing pattern.",
    "Requests aggregation. As part of the gateway pattern you can aggregate multiple client requests",
    "Requests aggregation. As part of the gateway pattern you can aggregate multiple client requests",
    "Depending on the API Gateway product you use, it might be able to perform this aggregation.",
    "Depending on the API Gateway product you use, it might be able to perform this aggregation.",
    "For more information, see Gateway aggregation pattern.",
    "For more information, see Gateway aggregation pattern.",
    "Cross-cutting concerns or gateway offloading. Depending on the features offered by each API",
    "Cross-cutting concerns or gateway offloading. Depending on the features offered by each API",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Authentication and authorization",
    "Authentication and authorization",
    "Service discovery integration",
    "Service discovery integration",
    "Response caching",
    "Response caching",
    "Retry policies, circuit breaker, and QoS",
    "Retry policies, circuit breaker, and QoS",
    "Rate limiting and throttling",
    "Rate limiting and throttling",
    "Load balancing",
    "Load balancing",
    "Logging, tracing, correlation",
    "Logging, tracing, correlation",
    "Headers, query strings, and claims transformation",
    "Headers, query strings, and claims transformation",
    "IP allowlisting",
    "IP allowlisting",
    "For more information, see Gateway offloading pattern.",
    "For more information, see Gateway offloading pattern.",
    "Using products with API Gateway features",
    "Using products with API Gateway features",
    "There can be many more cross-cutting concerns offered by the API Gateways products depending on",
    "There can be many more cross-cutting concerns offered by the API Gateways products depending on",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Azure API Management",
    "Azure API Management",
    "Ocelot",
    "Ocelot",
    "45",
    "45",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "Azure API Management",
    "Azure API Management",
    "Azure API Management (as shown in Figure 4-14) not only solves your API Gateway needs but",
    "Azure API Management (as shown in Figure 4-14) not only solves your API Gateway needs but",
    "Figure 4-14. Using Azure API Management for your API Gateway",
    "Figure 4-14. Using Azure API Management for your API Gateway",
    "Azure API Management solves both your API Gateway and Management needs like logging, security,",
    "Azure API Management solves both your API Gateway and Management needs like logging, security,",
    "The API Gateway products usually act like a reverse proxy for ingress communication, where you can",
    "The API Gateway products usually act like a reverse proxy for ingress communication, where you can",
    "The insights available from an API Management system help you get an understanding of how your",
    "The insights available from an API Management system help you get an understanding of how your",
    "With Azure API Management, you can secure your APIs using a key, a token, and IP filtering. These",
    "With Azure API Management, you can secure your APIs using a key, a token, and IP filtering. These",
    "In this guide and the reference sample application (eShopOnContainers), the architecture is limited to",
    "In this guide and the reference sample application (eShopOnContainers), the architecture is limited to",
    "46",
    "46",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "using PaaS products like Azure API Management. But for large microservice-based applications that",
    "using PaaS products like Azure API Management. But for large microservice-based applications that",
    "Ocelot",
    "Ocelot",
    "Ocelot is a lightweight API Gateway, recommended for simpler approaches. Ocelot is an Open Source",
    "Ocelot is a lightweight API Gateway, recommended for simpler approaches. Ocelot is an Open Source",
    "The main reason to choose Ocelot for the eShopOnContainers reference application 2.0 is because",
    "The main reason to choose Ocelot for the eShopOnContainers reference application 2.0 is because",
    "The previous diagrams showing custom API Gateways running in containers are precisely how you can",
    "The previous diagrams showing custom API Gateways running in containers are precisely how you can",
    "In addition, there are many other products in the market offering API Gateways features, such as",
    "In addition, there are many other products in the market offering API Gateways features, such as",
    "After the initial architecture and patterns explanation sections, the next sections explain how to",
    "After the initial architecture and patterns explanation sections, the next sections explain how to",
    "Drawbacks of the API Gateway pattern",
    "Drawbacks of the API Gateway pattern",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "The most important drawback is that when you implement an API Gateway, you\u2019re coupling",
    "The most important drawback is that when you implement an API Gateway, you\u2019re coupling",
    "Using a microservices API Gateway creates an additional possible single point of failure.",
    "Using a microservices API Gateway creates an additional possible single point of failure.",
    "An API Gateway can introduce increased response time due to the additional network call.",
    "An API Gateway can introduce increased response time due to the additional network call.",
    "If not scaled out properly, the API Gateway can become a bottleneck.",
    "If not scaled out properly, the API Gateway can become a bottleneck.",
    "An API Gateway requires additional development cost and future maintenance if it includes",
    "An API Gateway requires additional development cost and future maintenance if it includes",
    "47",
    "47",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "\u2022",
    "\u2022",
    "If the API Gateway is developed by a single team, there can be a development bottleneck. This",
    "If the API Gateway is developed by a single team, there can be a development bottleneck. This",
    "Additional resources",
    "Additional resources",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Chris Richardson. Pattern: API Gateway / Backend for Front-End",
    "Chris Richardson. Pattern: API Gateway / Backend for Front-End",
    "API Gateway pattern",
    "API Gateway pattern",
    "Aggregation and composition pattern",
    "Aggregation and composition pattern",
    "Azure API Management",
    "Azure API Management",
    "Udi Dahan. Service Oriented Composition",
    "Udi Dahan. Service Oriented Composition",
    "Clemens Vasters. Messaging and Microservices at GOTO 2016 (video)",
    "Clemens Vasters. Messaging and Microservices at GOTO 2016 (video)",
    "API Gateway in a Nutshell (ASP.NET Core API Gateway Tutorial Series)",
    "API Gateway in a Nutshell (ASP.NET Core API Gateway Tutorial Series)",
    "Communication in a microservice architecture",
    "Communication in a microservice architecture",
    "In a monolithic application running on a single process, components invoke one another using",
    "In a monolithic application running on a single process, components invoke one another using",
    "There isn\u2019t one solution, but several. One solution involves isolating the business microservices as",
    "There isn\u2019t one solution, but several. One solution involves isolating the business microservices as",
    "48",
    "48",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "A microservices-based application is a distributed system running on multiple processes or services,",
    "A microservices-based application is a distributed system running on multiple processes or services,",
    "The microservice community promotes the philosophy of \u201csmart endpoints and dumb pipes\u201d. This",
    "The microservice community promotes the philosophy of \u201csmart endpoints and dumb pipes\u201d. This",
    "The two commonly used protocols are HTTP request/response with resource APIs (when querying",
    "The two commonly used protocols are HTTP request/response with resource APIs (when querying",
    "Communication types",
    "Communication types",
    "Client and services can communicate through many different types of communication, each one",
    "Client and services can communicate through many different types of communication, each one",
    "The first axis defines if the protocol is synchronous or asynchronous:",
    "The first axis defines if the protocol is synchronous or asynchronous:",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Synchronous protocol. HTTP is a synchronous protocol. The client sends a request and waits",
    "Synchronous protocol. HTTP is a synchronous protocol. The client sends a request and waits",
    "Asynchronous protocol. Other protocols like AMQP (a protocol supported by many operating",
    "Asynchronous protocol. Other protocols like AMQP (a protocol supported by many operating",
    "The second axis defines if the communication has a single receiver or multiple receivers:",
    "The second axis defines if the communication has a single receiver or multiple receivers:",
    "\u2022",
    "\u2022",
    "Single receiver. Each request must be processed by exactly one receiver or service. An",
    "Single receiver. Each request must be processed by exactly one receiver or service. An",
    "\u2022  Multiple receivers. Each request can be processed by zero to multiple receivers. This type of",
    "\u2022  Multiple receivers. Each request can be processed by zero to multiple receivers. This type of",
    "communication must be asynchronous. An example is the publish/subscribe mechanism used",
    "communication must be asynchronous. An example is the publish/subscribe mechanism used",
    "49",
    "49",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "A microservice-based application will often use a combination of these communication styles. The",
    "A microservice-based application will often use a combination of these communication styles. The",
    "These axes are good to know so you have clarity on the possible communication mechanisms, but",
    "These axes are good to know so you have clarity on the possible communication mechanisms, but",
    "Asynchronous microservice integration enforces microservice\u2019s",
    "Asynchronous microservice integration enforces microservice\u2019s",
    "As mentioned, the important point when building a microservices-based application is the way you",
    "As mentioned, the important point when building a microservices-based application is the way you",
    "If possible, never depend on synchronous communication (request/response) between multiple",
    "If possible, never depend on synchronous communication (request/response) between multiple",
    "Moreover, having HTTP dependencies between microservices, like when creating long",
    "Moreover, having HTTP dependencies between microservices, like when creating long",
    "The more you add synchronous dependencies between microservices, such as query requests, the",
    "The more you add synchronous dependencies between microservices, such as query requests, the",
    "50",
    "50",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "Figure 4-15. Anti-patterns and patterns in communication between microservices",
    "Figure 4-15. Anti-patterns and patterns in communication between microservices",
    "As shown in the above diagram, in synchronous communication a \u201cchain\u201d of requests is created",
    "As shown in the above diagram, in synchronous communication a \u201cchain\u201d of requests is created",
    "If your microservice needs to raise an additional action in another microservice, if possible, do not",
    "If your microservice needs to raise an additional action in another microservice, if possible, do not",
    "And finally (and this is where most of the issues arise when building microservices), if your initial",
    "And finally (and this is where most of the issues arise when building microservices), if your initial",
    "As noted earlier in the Identifying domain-model boundaries for each microservice section,",
    "As noted earlier in the Identifying domain-model boundaries for each microservice section,",
    "51",
    "51",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "You might use any protocol to communicate and propagate data asynchronously across microservices",
    "You might use any protocol to communicate and propagate data asynchronously across microservices",
    "The following sections explain the multiple communication styles you can consider using in a",
    "The following sections explain the multiple communication styles you can consider using in a",
    "Communication styles",
    "Communication styles",
    "There are many protocols and choices you can use for communication, depending on the",
    "There are many protocols and choices you can use for communication, depending on the",
    "There are also multiple message formats like JSON or XML, or even binary formats, which can be more",
    "There are also multiple message formats like JSON or XML, or even binary formats, which can be more",
    "Request/response communication with HTTP and REST",
    "Request/response communication with HTTP and REST",
    "When a client uses request/response communication, it sends a request to a service, then the service",
    "When a client uses request/response communication, it sends a request to a service, then the service",
    "Figure 4-16. Using HTTP request/response communication (synchronous or asynchronous)",
    "Figure 4-16. Using HTTP request/response communication (synchronous or asynchronous)",
    "52",
    "52",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "When a client uses request/response communication, it assumes that the response will arrive in a",
    "When a client uses request/response communication, it assumes that the response will arrive in a",
    "A popular architectural style for request/response communication is REST. This approach is based on,",
    "A popular architectural style for request/response communication is REST. This approach is based on,",
    "There\u2019s additional value when using HTTP REST services as your interface definition language. For",
    "There\u2019s additional value when using HTTP REST services as your interface definition language. For",
    "Additional resources",
    "Additional resources",
    "\u2022  Martin Fowler. Richardson Maturity Model A description of the REST model.",
    "\u2022  Martin Fowler. Richardson Maturity Model A description of the REST model.",
    "https://martinfowler.com/articles/richardsonMaturityModel.html",
    "https://martinfowler.com/articles/richardsonMaturityModel.html",
    "\u2022",
    "\u2022",
    "Swagger The official site.",
    "Swagger The official site.",
    "Push and real-time communication based on HTTP",
    "Push and real-time communication based on HTTP",
    "Another possibility (usually for different purposes than REST) is a real-time and one-to-many",
    "Another possibility (usually for different purposes than REST) is a real-time and one-to-many",
    "As Figure 4-17 shows, real-time HTTP communication means that you can have server code pushing",
    "As Figure 4-17 shows, real-time HTTP communication means that you can have server code pushing",
    "53",
    "53",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "Figure 4-17. One-to-many real-time asynchronous message communication",
    "Figure 4-17. One-to-many real-time asynchronous message communication",
    "SignalR is a good way to achieve real-time communication for pushing content to the clients from a",
    "SignalR is a good way to achieve real-time communication for pushing content to the clients from a",
    "Asynchronous message-based communication",
    "Asynchronous message-based communication",
    "Asynchronous messaging and event-driven communication are critical when propagating changes",
    "Asynchronous messaging and event-driven communication are critical when propagating changes",
    "When using messaging, processes communicate by exchanging messages asynchronously. A client",
    "When using messaging, processes communicate by exchanging messages asynchronously. A client",
    "A message is composed by a header (metadata such as identification or security information) and a",
    "A message is composed by a header (metadata such as identification or security information) and a",
    "The preferred infrastructure for this type of communication in the microservices community is a",
    "The preferred infrastructure for this type of communication in the microservices community is a",
    "54",
    "54",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "Azure Service Bus. In this scenario, most of the \u201csmart\u201d thinking still lives in the endpoints that are",
    "Azure Service Bus. In this scenario, most of the \u201csmart\u201d thinking still lives in the endpoints that are",
    "Another rule you should try to follow, as much as possible, is to use only asynchronous messaging",
    "Another rule you should try to follow, as much as possible, is to use only asynchronous messaging",
    "There are two kinds of asynchronous messaging communication: single receiver message-based",
    "There are two kinds of asynchronous messaging communication: single receiver message-based",
    "Single-receiver message-based communication",
    "Single-receiver message-based communication",
    "Message-based asynchronous communication with a single receiver means there\u2019s point-to-point",
    "Message-based asynchronous communication with a single receiver means there\u2019s point-to-point",
    "Single-receiver message-based communication is especially well suited for sending asynchronous",
    "Single-receiver message-based communication is especially well suited for sending asynchronous",
    "Once you start sending message-based communication (either with commands or events), you should",
    "Once you start sending message-based communication (either with commands or events), you should",
    "Figure 4-18. A single microservice receiving an asynchronous message",
    "Figure 4-18. A single microservice receiving an asynchronous message",
    "55",
    "55",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "When the commands come from client applications, they can be implemented as HTTP synchronous",
    "When the commands come from client applications, they can be implemented as HTTP synchronous",
    "Multiple-receivers message-based communication",
    "Multiple-receivers message-based communication",
    "As a more flexible approach, you might also want to use a publish/subscribe mechanism so that your",
    "As a more flexible approach, you might also want to use a publish/subscribe mechanism so that your",
    "When you use a publish/subscribe communication, you might be using an event bus interface to",
    "When you use a publish/subscribe communication, you might be using an event bus interface to",
    "Asynchronous event-driven communication",
    "Asynchronous event-driven communication",
    "When using asynchronous event-driven communication, a microservice publishes an integration event",
    "When using asynchronous event-driven communication, a microservice publishes an integration event",
    "If a system uses eventual consistency driven by integration events, it\u2019s recommended that this",
    "If a system uses eventual consistency driven by integration events, it\u2019s recommended that this",
    "As noted earlier in the Challenges and solutions for distributed data management section, you can use",
    "As noted earlier in the Challenges and solutions for distributed data management section, you can use",
    "An important point is that you might want to communicate to multiple microservices that are",
    "An important point is that you might want to communicate to multiple microservices that are",
    "56",
    "56",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "and Query Responsibility Segregation (CQRS) architecture pattern. The goal is to have eventual",
    "and Query Responsibility Segregation (CQRS) architecture pattern. The goal is to have eventual",
    "Figure 4-19. Asynchronous event-driven message communication",
    "Figure 4-19. Asynchronous event-driven message communication",
    "In asynchronous event-driven communication, one microservice publishes events to an event bus and",
    "In asynchronous event-driven communication, one microservice publishes events to an event bus and",
    "When you use an event bus, you might want to use an abstraction level (like an event bus interface)",
    "When you use an event bus, you might want to use an abstraction level (like an event bus interface)",
    "A note about messaging technologies for production systems",
    "A note about messaging technologies for production systems",
    "The messaging technologies available for implementing your abstract event bus are at different levels.",
    "The messaging technologies available for implementing your abstract event bus are at different levels.",
    "However, for mission-critical and production systems that need hyper-scalability, you might want to",
    "However, for mission-critical and production systems that need hyper-scalability, you might want to",
    "57",
    "57",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "service-bus features on top of lower-level technologies like RabbitMQ and Docker. But that plumbing",
    "service-bus features on top of lower-level technologies like RabbitMQ and Docker. But that plumbing",
    "Resiliently publishing to the event bus",
    "Resiliently publishing to the event bus",
    "A challenge when implementing an event-driven architecture across multiple microservices is how to",
    "A challenge when implementing an event-driven architecture across multiple microservices is how to",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Using a transactional (DTC-based) queue like MSMQ. (However, this is a legacy approach.)",
    "Using a transactional (DTC-based) queue like MSMQ. (However, this is a legacy approach.)",
    "Using transaction log mining.",
    "Using transaction log mining.",
    "Using full Event Sourcing pattern.",
    "Using full Event Sourcing pattern.",
    "Using the Outbox pattern: a transactional database table as a message queue that will be the",
    "Using the Outbox pattern: a transactional database table as a message queue that will be the",
    "For a more complete description of the challenges in this space, including how messages with",
    "For a more complete description of the challenges in this space, including how messages with",
    "Additional topics to consider when using asynchronous communication are message idempotence",
    "Additional topics to consider when using asynchronous communication are message idempotence",
    "Additional resources",
    "Additional resources",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Event Driven Messaging",
    "Event Driven Messaging",
    "Publish/Subscribe Channel",
    "Publish/Subscribe Channel",
    "Udi Dahan. Clarified CQRS",
    "Udi Dahan. Clarified CQRS",
    "Command and Query Responsibility Segregation (CQRS)",
    "Command and Query Responsibility Segregation (CQRS)",
    "Communicating Between Bounded Contexts",
    "Communicating Between Bounded Contexts",
    "Eventual consistency",
    "Eventual consistency",
    "Jimmy Bogard. Refactoring Towards Resilience: Evaluating Coupling",
    "Jimmy Bogard. Refactoring Towards Resilience: Evaluating Coupling",
    "58",
    "58",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "Creating, evolving, and versioning microservice APIs",
    "Creating, evolving, and versioning microservice APIs",
    "A microservice API is a contract between the service and its clients. You\u2019ll be able to evolve a",
    "A microservice API is a contract between the service and its clients. You\u2019ll be able to evolve a",
    "The nature of the API definition depends on which protocol you\u2019re using. For instance, if you\u2019re using",
    "The nature of the API definition depends on which protocol you\u2019re using. For instance, if you\u2019re using",
    "However, even if you\u2019re thoughtful about your initial contract, a service API will need to change over",
    "However, even if you\u2019re thoughtful about your initial contract, a service API will need to change over",
    "When the API changes are small, like if you add attributes or parameters to your API, clients that use",
    "When the API changes are small, like if you add attributes or parameters to your API, clients that use",
    "However, sometimes you need to make major and incompatible changes to a service API. Because",
    "However, sometimes you need to make major and incompatible changes to a service API. Because",
    "Finally, if you\u2019re using a REST architecture, Hypermedia is the best solution for versioning your services",
    "Finally, if you\u2019re using a REST architecture, Hypermedia is the best solution for versioning your services",
    "Additional resources",
    "Additional resources",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Scott Hanselman. ASP.NET Core RESTful Web API versioning made easy",
    "Scott Hanselman. ASP.NET Core RESTful Web API versioning made easy",
    "Versioning a RESTful web API",
    "Versioning a RESTful web API",
    "Roy Fielding. Versioning, Hypermedia, and REST",
    "Roy Fielding. Versioning, Hypermedia, and REST",
    "59",
    "59",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "Microservices addressability and the service registry",
    "Microservices addressability and the service registry",
    "Each microservice has a unique name (URL) that\u2019s used to resolve its location. Your microservice needs",
    "Each microservice has a unique name (URL) that\u2019s used to resolve its location. Your microservice needs",
    "The service registry pattern is a key part of service discovery. The registry is a database containing the",
    "The service registry pattern is a key part of service discovery. The registry is a database containing the",
    "In some microservice deployment environments (called clusters, to be covered in a later section),",
    "In some microservice deployment environments (called clusters, to be covered in a later section),",
    "Additional resources",
    "Additional resources",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Chris Richardson. Pattern: Service registry",
    "Chris Richardson. Pattern: Service registry",
    "Auth0. The Service Registry",
    "Auth0. The Service Registry",
    "Gabriel Schenker. Service discovery",
    "Gabriel Schenker. Service discovery",
    "Creating composite UI based on microservices",
    "Creating composite UI based on microservices",
    "Microservices architecture often starts with the server-side handling data and logic, but, in many",
    "Microservices architecture often starts with the server-side handling data and logic, but, in many",
    "Figure 4-20 shows the simpler approach of just consuming microservices from a monolithic client",
    "Figure 4-20 shows the simpler approach of just consuming microservices from a monolithic client",
    "60",
    "60",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "consuming the microservices, which just focus on logic and data and not on the UI shape (HTML and",
    "consuming the microservices, which just focus on logic and data and not on the UI shape (HTML and",
    "Figure 4-20. A monolithic UI application consuming back-end microservices",
    "Figure 4-20. A monolithic UI application consuming back-end microservices",
    "In contrast, a composite UI is precisely generated and composed by the microservices themselves.",
    "In contrast, a composite UI is precisely generated and composed by the microservices themselves.",
    "At client application start-up time, each of the client UI components (TypeScript classes, for example)",
    "At client application start-up time, each of the client UI components (TypeScript classes, for example)",
    "Figure 4-21 shows a version of this composite UI approach. This approach is simplified because you",
    "Figure 4-21 shows a version of this composite UI approach. This approach is simplified because you",
    "61",
    "61",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "Figure 4-21. Example of a composite UI application shaped by back-end microservices",
    "Figure 4-21. Example of a composite UI application shaped by back-end microservices",
    "Each of those UI composition microservices would be similar to a small API Gateway. But in this case,",
    "Each of those UI composition microservices would be similar to a small API Gateway. But in this case,",
    "A composite UI approach that\u2019s driven by microservices can be more challenging or less so,",
    "A composite UI approach that\u2019s driven by microservices can be more challenging or less so,",
    "The eShopOnContainers sample application uses the monolithic UI approach for multiple reasons.",
    "The eShopOnContainers sample application uses the monolithic UI approach for multiple reasons.",
    "However, we encourage you to use the following references to learn more about composite UI based",
    "However, we encourage you to use the following references to learn more about composite UI based",
    "Additional resources",
    "Additional resources",
    "\u2022  Micro Frontends (Martin Fowler\u2019s blog)",
    "\u2022  Micro Frontends (Martin Fowler\u2019s blog)",
    "https://martinfowler.com/articles/micro-frontends.html",
    "https://martinfowler.com/articles/micro-frontends.html",
    "\u2022  Micro Frontends (Michael Geers site)",
    "\u2022  Micro Frontends (Michael Geers site)",
    "https://micro-frontends.org/",
    "https://micro-frontends.org/",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "62",
    "62",
    "Composite UI using ASP.NET (Particular\u2019s Workshop)",
    "Composite UI using ASP.NET (Particular\u2019s Workshop)",
    "Ruben Oostinga. The Monolithic Frontend in the Microservices Architecture",
    "Ruben Oostinga. The Monolithic Frontend in the Microservices Architecture",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "\u2022  Mauro Servienti. The secret of better UI composition",
    "\u2022  Mauro Servienti. The secret of better UI composition",
    "https://particular.net/blog/secret-of-better-ui-composition",
    "https://particular.net/blog/secret-of-better-ui-composition",
    "\u2022",
    "\u2022",
    "Viktor Farcic. Including Front-End Web Components Into Microservices",
    "Viktor Farcic. Including Front-End Web Components Into Microservices",
    "\u2022  Managing Frontend in the Microservices Architecture",
    "\u2022  Managing Frontend in the Microservices Architecture",
    "https://allegro.tech/2016/03/Managing-Frontend-in-the-microservices-architecture.html",
    "https://allegro.tech/2016/03/Managing-Frontend-in-the-microservices-architecture.html",
    "Resiliency and high availability in microservices",
    "Resiliency and high availability in microservices",
    "Dealing with unexpected failures is one of the hardest problems to solve, especially in a distributed",
    "Dealing with unexpected failures is one of the hardest problems to solve, especially in a distributed",
    "A microservice needs to be resilient to failures and to be able to restart often on another machine for",
    "A microservice needs to be resilient to failures and to be able to restart often on another machine for",
    "The problems of resiliency are compounded during other scenarios, such as when failures occur",
    "The problems of resiliency are compounded during other scenarios, such as when failures occur",
    "In addition, resiliency is related to how cloud-based systems must behave. As mentioned, a cloud-",
    "In addition, resiliency is related to how cloud-based systems must behave. As mentioned, a cloud-",
    "Health management and diagnostics in microservices",
    "Health management and diagnostics in microservices",
    "It may seem obvious, and it\u2019s often overlooked, but a microservice must report its health and",
    "It may seem obvious, and it\u2019s often overlooked, but a microservice must report its health and",
    "63",
    "63",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "the event order is challenging. In the same way that you interact with a microservice over agreed-",
    "the event order is challenging. In the same way that you interact with a microservice over agreed-",
    "Health checks",
    "Health checks",
    "Health is different from diagnostics. Health is about the microservice reporting its current state to take",
    "Health is different from diagnostics. Health is about the microservice reporting its current state to take",
    "In the Implementing health checks in ASP.NET Core services section of this guide, we explain how to",
    "In the Implementing health checks in ASP.NET Core services section of this guide, we explain how to",
    "You also have the option of using an excellent open-source library called",
    "You also have the option of using an excellent open-source library called",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Liveness: Checks if the microservice is alive, that is, if it\u2019s able to accept requests and respond.",
    "Liveness: Checks if the microservice is alive, that is, if it\u2019s able to accept requests and respond.",
    "Readiness: Checks if the microservice\u2019s dependencies (Database, queue services, etc.) are",
    "Readiness: Checks if the microservice\u2019s dependencies (Database, queue services, etc.) are",
    "Using diagnostics and logs event streams",
    "Using diagnostics and logs event streams",
    "Logs provide information about how an application or service is running, including exceptions,",
    "Logs provide information about how an application or service is running, including exceptions,",
    "In monolithic server-based applications, you can write logs to a file on disk (a logfile) and then analyze",
    "In monolithic server-based applications, you can write logs to a file on disk (a logfile) and then analyze",
    "A microservice-based application should not try to store the output stream of events or logfiles by",
    "A microservice-based application should not try to store the output stream of events or logfiles by",
    "64",
    "64",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "Orchestrators managing health and diagnostics information",
    "Orchestrators managing health and diagnostics information",
    "When you create a microservice-based application, you need to deal with complexity. Of course, a",
    "When you create a microservice-based application, you need to deal with complexity. Of course, a",
    "Figure 4-22. A Microservice Platform is fundamental for an application\u2019s health management",
    "Figure 4-22. A Microservice Platform is fundamental for an application\u2019s health management",
    "The complex problems shown in Figure 4-22 are hard to solve by yourself. Development teams should",
    "The complex problems shown in Figure 4-22 are hard to solve by yourself. Development teams should",
    "Different orchestrators might sound similar, but the diagnostics and health checks offered by each of",
    "Different orchestrators might sound similar, but the diagnostics and health checks offered by each of",
    "Additional resources",
    "Additional resources",
    "\u2022",
    "\u2022",
    "The Twelve-Factor App. XI. Logs: Treat logs as event streams",
    "The Twelve-Factor App. XI. Logs: Treat logs as event streams",
    "\u2022  Microsoft Diagnostic EventFlow Library GitHub repo.",
    "\u2022  Microsoft Diagnostic EventFlow Library GitHub repo.",
    "\u2022  What is Azure Diagnostics",
    "\u2022  What is Azure Diagnostics",
    "https://learn.microsoft.com/azure/azure-diagnostics",
    "https://learn.microsoft.com/azure/azure-diagnostics",
    "65",
    "65",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Connect Windows computers to the Azure Monitor service",
    "Connect Windows computers to the Azure Monitor service",
    "Logging What You Mean: Using the Semantic Logging Application Block",
    "Logging What You Mean: Using the Semantic Logging Application Block",
    "Splunk Official site.",
    "Splunk Official site.",
    "EventSource Class API for events tracing for Windows (ETW)",
    "EventSource Class API for events tracing for Windows (ETW)",
    "Orchestrate microservices and multi-container",
    "Orchestrate microservices and multi-container",
    "Using orchestrators for production-ready applications is essential if your application is based on",
    "Using orchestrators for production-ready applications is essential if your application is based on",
    "Figure 4-23 illustrates deployment into a cluster of an application composed of multiple microservices",
    "Figure 4-23 illustrates deployment into a cluster of an application composed of multiple microservices",
    "66",
    "66",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "Figure 4-23. A cluster of containers",
    "Figure 4-23. A cluster of containers",
    "You use one container for each service instance. Docker containers are \u201cunits of deployment\u201d and a",
    "You use one container for each service instance. Docker containers are \u201cunits of deployment\u201d and a",
    "The plain Docker Engine in single Docker hosts meets the needs of managing single image instances",
    "The plain Docker Engine in single Docker hosts meets the needs of managing single image instances",
    "To go beyond the management of individual containers or simple composed apps and move toward",
    "To go beyond the management of individual containers or simple composed apps and move toward",
    "From an architecture and development point of view, if you\u2019re building large enterprise composed of",
    "From an architecture and development point of view, if you\u2019re building large enterprise composed of",
    "Clusters and orchestrators. When you need to scale out applications across many Docker hosts, as",
    "Clusters and orchestrators. When you need to scale out applications across many Docker hosts, as",
    "Schedulers. Scheduling means to have the capability for an administrator to launch containers in a",
    "Schedulers. Scheduling means to have the capability for an administrator to launch containers in a",
    "67",
    "67",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "resources efficiently, to set the constraints provided by the user, to efficiently load-balance containers",
    "resources efficiently, to set the constraints provided by the user, to efficiently load-balance containers",
    "The concepts of a cluster and a scheduler are closely related, so the products provided by different",
    "The concepts of a cluster and a scheduler are closely related, so the products provided by different",
    "Software platforms for container clustering, orchestration, and",
    "Software platforms for container clustering, orchestration, and",
    "Platform",
    "Platform",
    "Kubernetes",
    "Kubernetes",
    "Azure Kubernetes Service (AKS)",
    "Azure Kubernetes Service (AKS)",
    "Azure Container Apps",
    "Azure Container Apps",
    "Description",
    "Description",
    "Kubernetes is an open-source",
    "Kubernetes is an open-source",
    "Kubernetes provides a container-",
    "Kubernetes provides a container-",
    "Kubernetes is mature in Linux, less",
    "Kubernetes is mature in Linux, less",
    "AKS is a managed Kubernetes",
    "AKS is a managed Kubernetes",
    "Azure Container Apps is a managed",
    "Azure Container Apps is a managed",
    "Using container-based orchestrators in Microsoft Azure",
    "Using container-based orchestrators in Microsoft Azure",
    "Several cloud vendors offer Docker containers support plus Docker clusters and orchestration support,",
    "Several cloud vendors offer Docker containers support plus Docker clusters and orchestration support,",
    "68",
    "68",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "Using Azure Kubernetes Service",
    "Using Azure Kubernetes Service",
    "A Kubernetes cluster pools multiple Docker hosts and exposes them as a single virtual Docker host, so",
    "A Kubernetes cluster pools multiple Docker hosts and exposes them as a single virtual Docker host, so",
    "AKS provides a way to simplify the creation, configuration, and management of a cluster of virtual",
    "AKS provides a way to simplify the creation, configuration, and management of a cluster of virtual",
    "Azure Kubernetes Service optimizes the configuration of popular Docker clustering open-source tools",
    "Azure Kubernetes Service optimizes the configuration of popular Docker clustering open-source tools",
    "Figure 4-24. Kubernetes cluster\u2019s simplified structure and topology",
    "Figure 4-24. Kubernetes cluster\u2019s simplified structure and topology",
    "69",
    "69",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "In figure 4-24, you can see the structure of a Kubernetes cluster where a master node (VM) controls",
    "In figure 4-24, you can see the structure of a Kubernetes cluster where a master node (VM) controls",
    "Development environment for Kubernetes",
    "Development environment for Kubernetes",
    "In the development environment, Docker announced in July 2018 that Kubernetes can also run in a",
    "In the development environment, Docker announced in July 2018 that Kubernetes can also run in a",
    "Figure 4-25. Running Kubernetes in dev machine and the cloud",
    "Figure 4-25. Running Kubernetes in dev machine and the cloud",
    "Getting started with Azure Kubernetes Service (AKS)",
    "Getting started with Azure Kubernetes Service (AKS)",
    "To begin using AKS, you deploy an AKS cluster from the Azure portal or by using the CLI. For more",
    "To begin using AKS, you deploy an AKS cluster from the Azure portal or by using the CLI. For more",
    "There are no fees for any of the software installed by default as part of AKS. All default options are",
    "There are no fees for any of the software installed by default as part of AKS. All default options are",
    "The default production deployment option for Kubernetes is to use Helm charts, which are introduced",
    "The default production deployment option for Kubernetes is to use Helm charts, which are introduced",
    "70",
    "70",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "Deploy with Helm charts into Kubernetes clusters",
    "Deploy with Helm charts into Kubernetes clusters",
    "When deploying an application to a Kubernetes cluster, you can use the original kubectl.exe CLI tool",
    "When deploying an application to a Kubernetes cluster, you can use the original kubectl.exe CLI tool",
    "Helm Charts helps you define, version, install, share, upgrade, or rollback even the most complex",
    "Helm Charts helps you define, version, install, share, upgrade, or rollback even the most complex",
    "Going further, Helm usage is also recommended because other Kubernetes environments in Azure,",
    "Going further, Helm usage is also recommended because other Kubernetes environments in Azure,",
    "Helm is maintained by the Cloud Native Computing Foundation (CNCF) - in collaboration with",
    "Helm is maintained by the Cloud Native Computing Foundation (CNCF) - in collaboration with",
    "For more implementation information on Helm charts and Kubernetes, see the Using Helm Charts to",
    "For more implementation information on Helm charts and Kubernetes, see the Using Helm Charts to",
    "Additional resources",
    "Additional resources",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Getting started with Azure Kubernetes Service (AKS)",
    "Getting started with Azure Kubernetes Service (AKS)",
    "Azure Dev Spaces",
    "Azure Dev Spaces",
    "Kubernetes The official site.",
    "Kubernetes The official site.",
    "71",
    "71",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER 3 | Architecting container and microservice-based applications",
    "CHAPTER  4",
    "CHAPTER  4",
    "Development process for",
    "Development process for",
    "Develop containerized .NET applications the way you like, either Integrated Development Environment",
    "Develop containerized .NET applications the way you like, either Integrated Development Environment",
    "Development environment for Docker apps",
    "Development environment for Docker apps",
    "Development tool choices: IDE or editor",
    "Development tool choices: IDE or editor",
    "Whether you prefer a full and powerful IDE or a lightweight and agile editor, Microsoft has tools that",
    "Whether you prefer a full and powerful IDE or a lightweight and agile editor, Microsoft has tools that",
    "Visual Studio (for Windows). Docker-based .NET 7 application development with Visual Studio",
    "Visual Studio (for Windows). Docker-based .NET 7 application development with Visual Studio",
    "Visual Studio for Mac. It\u2019s an IDE, evolution of Xamarin Studio, running in macOS. This tool should",
    "Visual Studio for Mac. It\u2019s an IDE, evolution of Xamarin Studio, running in macOS. This tool should",
    "Visual Studio Code and Docker CLI. If you prefer a lightweight and cross-platform editor that",
    "Visual Studio Code and Docker CLI. If you prefer a lightweight and cross-platform editor that",
    "By installing Docker Desktop, you can use a single Docker CLI to build apps for both Windows and",
    "By installing Docker Desktop, you can use a single Docker CLI to build apps for both Windows and",
    "72",
    "72",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "Additional resources",
    "Additional resources",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Visual Studio. Official site.",
    "Visual Studio. Official site.",
    "Visual Studio Code. Official site.",
    "Visual Studio Code. Official site.",
    "Docker Desktop for Windows",
    "Docker Desktop for Windows",
    "Docker Desktop for Mac",
    "Docker Desktop for Mac",
    ".NET languages and frameworks for Docker",
    ".NET languages and frameworks for Docker",
    "As mentioned in earlier sections of this guide, you can use .NET Framework, .NET 7, or the open-",
    "As mentioned in earlier sections of this guide, you can use .NET Framework, .NET 7, or the open-",
    "Development workflow for Docker apps",
    "Development workflow for Docker apps",
    "The application development life cycle starts at your computer, as a developer, where you code the",
    "The application development life cycle starts at your computer, as a developer, where you code the",
    "Each container (an instance of a Docker image) includes the following components:",
    "Each container (an instance of a Docker image) includes the following components:",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "An operating system selection, for example, a Linux distribution, Windows Nano Server, or",
    "An operating system selection, for example, a Linux distribution, Windows Nano Server, or",
    "Files added during development, for example, source code and application binaries.",
    "Files added during development, for example, source code and application binaries.",
    "Configuration information, such as environment settings and dependencies.",
    "Configuration information, such as environment settings and dependencies.",
    "Workflow for developing Docker container-based applications",
    "Workflow for developing Docker container-based applications",
    "This section describes the inner-loop development workflow for Docker container-based applications.",
    "This section describes the inner-loop development workflow for Docker container-based applications.",
    "73",
    "73",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "An application is composed of your own services plus additional libraries (dependencies). The",
    "An application is composed of your own services plus additional libraries (dependencies). The",
    "Figure 5-1. Step-by-step workflow for developing Docker containerized apps",
    "Figure 5-1. Step-by-step workflow for developing Docker containerized apps",
    "In this section, this whole process is detailed and every major step is explained by focusing on a Visual",
    "In this section, this whole process is detailed and every major step is explained by focusing on a Visual",
    "When you\u2019re using an editor/CLI development approach (for example, Visual Studio Code plus Docker",
    "When you\u2019re using an editor/CLI development approach (for example, Visual Studio Code plus Docker",
    "When you\u2019re using Visual Studio 2022, many of those steps are handled for you, which dramatically",
    "When you\u2019re using Visual Studio 2022, many of those steps are handled for you, which dramatically",
    "However, just because Visual Studio makes those steps automatic doesn\u2019t mean that you don\u2019t need",
    "However, just because Visual Studio makes those steps automatic doesn\u2019t mean that you don\u2019t need",
    "74",
    "74",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "Step 1. Start coding and create your initial application or service",
    "Step 1. Start coding and create your initial application or service",
    "Developing a Docker application is similar to the way you develop an application without Docker. The",
    "Developing a Docker application is similar to the way you develop an application without Docker. The",
    "Set up your local environment with Visual Studio",
    "Set up your local environment with Visual Studio",
    "To begin, make sure you have Docker Desktop for Windows for Windows installed, as explained in the",
    "To begin, make sure you have Docker Desktop for Windows for Windows installed, as explained in the",
    "Get started with Docker Desktop for Windows",
    "Get started with Docker Desktop for Windows",
    "In addition, you need Visual Studio 2022 version 17.0, with the .ASP.NET and web development",
    "In addition, you need Visual Studio 2022 version 17.0, with the .ASP.NET and web development",
    "Figure 5-2. Selecting the ASP.NET and web development workload during Visual Studio 2022 setup",
    "Figure 5-2. Selecting the ASP.NET and web development workload during Visual Studio 2022 setup",
    "You can start coding your application in plain .NET (usually in .NET Core or later if you\u2019re planning to",
    "You can start coding your application in plain .NET (usually in .NET Core or later if you\u2019re planning to",
    "75",
    "75",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "because Visual Studio makes it so easy to work with Docker that it almost feels transparent\u2014the best",
    "because Visual Studio makes it so easy to work with Docker that it almost feels transparent\u2014the best",
    "Additional resources",
    "Additional resources",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Get started with Docker Desktop for Windows",
    "Get started with Docker Desktop for Windows",
    "Visual Studio 2022",
    "Visual Studio 2022",
    "Step 2. Create a Dockerfile related to an existing .NET base image",
    "Step 2. Create a Dockerfile related to an existing .NET base image",
    "You need a Dockerfile for each custom image you want to build; you also need a Dockerfile for each",
    "You need a Dockerfile for each custom image you want to build; you also need a Dockerfile for each",
    "The Dockerfile is placed in the root folder of your application or service. It contains the commands",
    "The Dockerfile is placed in the root folder of your application or service. It contains the commands",
    "With Visual Studio and its tools for Docker, this task requires only a few mouse clicks. When you",
    "With Visual Studio and its tools for Docker, this task requires only a few mouse clicks. When you",
    "76",
    "76",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "Figure 5-3. Enabling Docker Support when creating a new ASP.NET Core project in Visual Studio 2022",
    "Figure 5-3. Enabling Docker Support when creating a new ASP.NET Core project in Visual Studio 2022",
    "You can also enable Docker support on an existing ASP.NET Core web app project by right-clicking",
    "You can also enable Docker support on an existing ASP.NET Core web app project by right-clicking",
    "Figure 5-4. Enabling Docker support in an existing Visual Studio 2022 project",
    "Figure 5-4. Enabling Docker support in an existing Visual Studio 2022 project",
    "77",
    "77",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "This action adds a Dockerfile to the project with the required configuration, and is only available on",
    "This action adds a Dockerfile to the project with the required configuration, and is only available on",
    "In a similar fashion, Visual Studio can also add a docker-compose.yml file for the whole solution with",
    "In a similar fashion, Visual Studio can also add a docker-compose.yml file for the whole solution with",
    "Using an existing official .NET Docker image",
    "Using an existing official .NET Docker image",
    "You usually build a custom image for your container on top of a base image you get from an official",
    "You usually build a custom image for your container on top of a base image you get from an official",
    "Earlier we explained which Docker images and repos you can use, depending on the framework and",
    "Earlier we explained which Docker images and repos you can use, depending on the framework and",
    "Using an official .NET image repository from Docker Hub with a version number ensures that the same",
    "Using an official .NET image repository from Docker Hub with a version number ensures that the same",
    "The following example shows a sample Dockerfile for an ASP.NET Core container.",
    "The following example shows a sample Dockerfile for an ASP.NET Core container.",
    "FROM mcr.microsoft.com/dotnet/aspnet:7.0",
    "FROM mcr.microsoft.com/dotnet/aspnet:7.0",
    "In this case, the image is based on version 7.0 of the official ASP.NET Core Docker image (multi-arch",
    "In this case, the image is based on version 7.0 of the official ASP.NET Core Docker image (multi-arch",
    "You can specify additional configuration settings in the Dockerfile, depending on the language and",
    "You can specify additional configuration settings in the Dockerfile, depending on the language and",
    "Additional resources",
    "Additional resources",
    "\u2022",
    "\u2022",
    "Building Docker Images for ASP.NET Core Applications",
    "Building Docker Images for ASP.NET Core Applications",
    "78",
    "78",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Build your own image. In the official Docker documentation.",
    "Build your own image. In the official Docker documentation.",
    "Staying up-to-date with .NET Container Images",
    "Staying up-to-date with .NET Container Images",
    "Using .NET and Docker Together - DockerCon 2018 Update",
    "Using .NET and Docker Together - DockerCon 2018 Update",
    "Using multi-arch image repositories",
    "Using multi-arch image repositories",
    "A single repo can contain platform variants, such as a Linux image and a Windows image. This feature",
    "A single repo can contain platform variants, such as a Linux image and a Windows image. This feature",
    "If you specify a tag, targeting a platform that is explicit like in the following cases:",
    "If you specify a tag, targeting a platform that is explicit like in the following cases:",
    "\u2022  mcr.microsoft.com/dotnet/aspnet:7.0-bullseye-slim",
    "\u2022  mcr.microsoft.com/dotnet/aspnet:7.0-bullseye-slim",
    "Targets: .NET 7 runtime-only on Linux",
    "Targets: .NET 7 runtime-only on Linux",
    "\u2022  mcr.microsoft.com/dotnet/aspnet:7.0-nanoserver-ltsc2022",
    "\u2022  mcr.microsoft.com/dotnet/aspnet:7.0-nanoserver-ltsc2022",
    "But, if you specify the same image name, even with the same tag, the multi-arch images (like the",
    "But, if you specify the same image name, even with the same tag, the multi-arch images (like the",
    "\u2022  mcr.microsoft.com/dotnet/aspnet:7.0",
    "\u2022  mcr.microsoft.com/dotnet/aspnet:7.0",
    "Multi-arch: .NET 7 runtime-only on Linux or Windows Nano Server depending on the Docker",
    "Multi-arch: .NET 7 runtime-only on Linux or Windows Nano Server depending on the Docker",
    "This way, when you pull an image from a Windows host, it will pull the Windows variant, and pulling",
    "This way, when you pull an image from a Windows host, it will pull the Windows variant, and pulling",
    "Multi-stage builds in Dockerfile",
    "Multi-stage builds in Dockerfile",
    "The Dockerfile is similar to a batch script. Similar to what you would do if you had to set up the",
    "The Dockerfile is similar to a batch script. Similar to what you would do if you had to set up the",
    "It starts with a base image that sets up the initial context, it\u2019s like the startup filesystem, that sits on",
    "It starts with a base image that sets up the initial context, it\u2019s like the startup filesystem, that sits on",
    "The execution of every command line creates a new layer on the filesystem with the changes from the",
    "The execution of every command line creates a new layer on the filesystem with the changes from the",
    "Since every new layer \u201crests\u201d on top of the previous one and the resulting image size increases with",
    "Since every new layer \u201crests\u201d on top of the previous one and the resulting image size increases with",
    "This is where multi-stage builds get into the plot (from Docker 17.05 and higher) to do their magic.",
    "This is where multi-stage builds get into the plot (from Docker 17.05 and higher) to do their magic.",
    "79",
    "79",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "The core idea is that you can separate the Dockerfile execution process in stages, where a stage is an",
    "The core idea is that you can separate the Dockerfile execution process in stages, where a stage is an",
    "In short, multi-stage builds allow splitting the creation in different \u201cphases\u201d and then assemble the",
    "In short, multi-stage builds allow splitting the creation in different \u201cphases\u201d and then assemble the",
    "Use a base SDK image (doesn\u2019t matter how large), with everything needed to build and",
    "Use a base SDK image (doesn\u2019t matter how large), with everything needed to build and",
    "publish the application to a folder and then",
    "publish the application to a folder and then",
    "Use a base, small, runtime-only image and copy the publishing folder from the previous stage",
    "Use a base, small, runtime-only image and copy the publishing folder from the previous stage",
    "to produce a small final image.",
    "to produce a small final image.",
    "Probably the best way to understand multi-stage is going through a Dockerfile in detail, line by line,",
    "Probably the best way to understand multi-stage is going through a Dockerfile in detail, line by line,",
    "The initial Dockerfile might look something like this:",
    "The initial Dockerfile might look something like this:",
    "1  FROM mcr.microsoft.com/dotnet/aspnet:7.0 AS base",
    "1  FROM mcr.microsoft.com/dotnet/aspnet:7.0 AS base",
    "And these are the details, line by line:",
    "And these are the details, line by line:",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "80",
    "80",
    "Line #1: Begin a stage with a \u201csmall\u201d runtime-only base image, call it base for reference.",
    "Line #1: Begin a stage with a \u201csmall\u201d runtime-only base image, call it base for reference.",
    "Line #2: Create the /app directory in the image.",
    "Line #2: Create the /app directory in the image.",
    "Line #3: Expose port 80.",
    "Line #3: Expose port 80.",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Line #5: Begin a new stage with the \u201clarge\u201d image for building/publishing. Call it build for",
    "Line #5: Begin a new stage with the \u201clarge\u201d image for building/publishing. Call it build for",
    "Line #6: Create directory /src in the image.",
    "Line #6: Create directory /src in the image.",
    "Line #7: Up to line 16, copy referenced .csproj project files to be able to restore packages",
    "Line #7: Up to line 16, copy referenced .csproj project files to be able to restore packages",
    "Line #17: Restore packages for the Catalog.API project and the referenced projects.",
    "Line #17: Restore packages for the Catalog.API project and the referenced projects.",
    "Line #18: Copy all directory tree for the solution (except the files/directories included in the",
    "Line #18: Copy all directory tree for the solution (except the files/directories included in the",
    "Line #19: Change the current folder to the Catalog.API project.",
    "Line #19: Change the current folder to the Catalog.API project.",
    "Line #20: Build the project (and other project dependencies) and output to the /app",
    "Line #20: Build the project (and other project dependencies) and output to the /app",
    "Line #22: Begin a new stage continuing from the build. Call it publish for reference.",
    "Line #22: Begin a new stage continuing from the build. Call it publish for reference.",
    "Line #23: Publish the project (and dependencies) and output to the /app directory in the",
    "Line #23: Publish the project (and dependencies) and output to the /app directory in the",
    "Line #25: Begin a new stage continuing from base and call it final.",
    "Line #25: Begin a new stage continuing from base and call it final.",
    "Line #26: Change the current directory to /app.",
    "Line #26: Change the current directory to /app.",
    "Line #27: Copy the /app directory from stage publish to the current directory.",
    "Line #27: Copy the /app directory from stage publish to the current directory.",
    "Line #28: Define the command to run when the container is started.",
    "Line #28: Define the command to run when the container is started.",
    "Now let\u2019s explore some optimizations to improve the whole process performance that, in the case of",
    "Now let\u2019s explore some optimizations to improve the whole process performance that, in the case of",
    "You\u2019ll take advantage of Docker\u2019s layer cache feature, which is quite simple: if the base image and the",
    "You\u2019ll take advantage of Docker\u2019s layer cache feature, which is quite simple: if the base image and the",
    "So, let\u2019s focus on the build stage, lines 5-6 are mostly the same, but lines 7-17 are different for every",
    "So, let\u2019s focus on the build stage, lines 5-6 are mostly the same, but lines 7-17 are different for every",
    "COPY . .",
    "COPY . .",
    "Then it would be just the same for every service, it would copy the whole solution and would create a",
    "Then it would be just the same for every service, it would copy the whole solution and would create a",
    "The copy process would only be executed the first time (and when rebuilding if a file is",
    "The copy process would only be executed the first time (and when rebuilding if a file is",
    "Since the larger image occurs in an intermediate stage, it doesn\u2019t affect the final image size.",
    "Since the larger image occurs in an intermediate stage, it doesn\u2019t affect the final image size.",
    "81",
    "81",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "The next significant optimization involves the restore command executed in line 17, which is also",
    "The next significant optimization involves the restore command executed in line 17, which is also",
    "RUN dotnet restore",
    "RUN dotnet restore",
    "It would restore the packages for the whole solution, but then again, it would do it just once, instead",
    "It would restore the packages for the whole solution, but then again, it would do it just once, instead",
    "However, dotnet restore only runs if there\u2019s a single project or solution file in the folder, so achieving",
    "However, dotnet restore only runs if there\u2019s a single project or solution file in the folder, so achieving",
    "Add the following lines to .dockerignore:",
    "Add the following lines to .dockerignore:",
    "\u2013",
    "\u2013",
    "\u2013",
    "\u2013",
    "*",
    "*",
    "!",
    "!",
    "Include the /ignoreprojectextensions:.dcproj argument to dotnet restore, so it also ignores the",
    "Include the /ignoreprojectextensions:.dcproj argument to dotnet restore, so it also ignores the",
    "For the final optimization, it just happens that line 20 is redundant, as line 23 also builds the",
    "For the final optimization, it just happens that line 20 is redundant, as line 23 also builds the",
    "The resulting file is then:",
    "The resulting file is then:",
    "1  FROM mcr.microsoft.com/dotnet/aspnet:7.0 AS base",
    "1  FROM mcr.microsoft.com/dotnet/aspnet:7.0 AS base",
    "Creating your base image from scratch",
    "Creating your base image from scratch",
    "You can create your own Docker base image from scratch. This scenario is not recommended for",
    "You can create your own Docker base image from scratch. This scenario is not recommended for",
    "Additional resources",
    "Additional resources",
    "\u2022  Multi-arch .NET Core images.",
    "\u2022  Multi-arch .NET Core images.",
    "https://github.com/dotnet/announcements/issues/14",
    "https://github.com/dotnet/announcements/issues/14",
    "82",
    "82",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "\u2022",
    "\u2022",
    "Create a base image. Official Docker documentation.",
    "Create a base image. Official Docker documentation.",
    "Step 3. Create your custom Docker images and embed your",
    "Step 3. Create your custom Docker images and embed your",
    "For each service in your application, you need to create a related image. If your application is made up",
    "For each service in your application, you need to create a related image. If your application is made up",
    "Note that the Docker images are built automatically for you in Visual Studio. The following steps are",
    "Note that the Docker images are built automatically for you in Visual Studio. The following steps are",
    "You, as a developer, need to develop and test locally until you push a completed feature or change to",
    "You, as a developer, need to develop and test locally until you push a completed feature or change to",
    "To create a custom image in your local environment by using Docker CLI and your Dockerfile, you can",
    "To create a custom image in your local environment by using Docker CLI and your Dockerfile, you can",
    "Figure 5-5. Creating a custom Docker image",
    "Figure 5-5. Creating a custom Docker image",
    "Optionally, instead of directly running docker build from the project folder, you can first generate a",
    "Optionally, instead of directly running docker build from the project folder, you can first generate a",
    "This will create a Docker image with the name cesardl/netcore-webapi-microservice-docker:first. In",
    "This will create a Docker image with the name cesardl/netcore-webapi-microservice-docker:first. In",
    "When an application is made of multiple containers (that is, it is a multi-container application), you",
    "When an application is made of multiple containers (that is, it is a multi-container application), you",
    "You can find the existing images in your local repository by using the docker images command, as",
    "You can find the existing images in your local repository by using the docker images command, as",
    "83",
    "83",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "Figure 5-6. Viewing existing images using the docker images command",
    "Figure 5-6. Viewing existing images using the docker images command",
    "Creating Docker images with Visual Studio",
    "Creating Docker images with Visual Studio",
    "When you use Visual Studio to create a project with Docker support, you don\u2019t explicitly create an",
    "When you use Visual Studio to create a project with Docker support, you don\u2019t explicitly create an",
    "Step 4. Define your services in docker-compose.yml when building a",
    "Step 4. Define your services in docker-compose.yml when building a",
    "The docker-compose.yml file lets you define a set of related services to be deployed as a composed",
    "The docker-compose.yml file lets you define a set of related services to be deployed as a composed",
    "To use a docker-compose.yml file, you need to create the file in your main or root solution folder, with",
    "To use a docker-compose.yml file, you need to create the file in your main or root solution folder, with",
    "version: ",
    "version: ",
    "services:",
    "services:",
    "webmvc:",
    "webmvc:",
    "catalog-api:",
    "catalog-api:",
    "ordering-api:",
    "ordering-api:",
    "84",
    "84",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "environment:",
    "environment:",
    "sqldata:",
    "sqldata:",
    "This docker-compose.yml file is a simplified and merged version. It contains static configuration data",
    "This docker-compose.yml file is a simplified and merged version. It contains static configuration data",
    "The docker-compose.yml file example defines four services: the webmvc service (a web application),",
    "The docker-compose.yml file example defines four services: the webmvc service (a web application),",
    "The docker-compose.yml file specifies not only what containers are being used, but how they are",
    "The docker-compose.yml file specifies not only what containers are being used, but how they are",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Uses a pre-built eshop/web:latest image. However, you could also configure the image to be",
    "Uses a pre-built eshop/web:latest image. However, you could also configure the image to be",
    "Initializes two environment variables (CatalogUrl and OrderingUrl).",
    "Initializes two environment variables (CatalogUrl and OrderingUrl).",
    "Forwards the exposed port 80 on the container to the external port 80 on the host machine.",
    "Forwards the exposed port 80 on the container to the external port 80 on the host machine.",
    "Links the web app to the catalog and ordering service with the depends",
    "Links the web app to the catalog and ordering service with the depends",
    "We will revisit the docker-compose.yml file in a later section when we cover how to implement",
    "We will revisit the docker-compose.yml file in a later section when we cover how to implement",
    "Working with docker-compose.yml in Visual Studio 2022",
    "Working with docker-compose.yml in Visual Studio 2022",
    "Besides adding a Dockerfile to a project, as we mentioned before, Visual Studio 2017 (from version",
    "Besides adding a Dockerfile to a project, as we mentioned before, Visual Studio 2017 (from version",
    "When you add container orchestrator support, as shown in Figure 5-7, for the first time, Visual Studio",
    "When you add container orchestrator support, as shown in Figure 5-7, for the first time, Visual Studio",
    "85",
    "85",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "several global docker-compose",
    "several global docker-compose",
    "Repeat this operation for every project you want to include in the docker-compose.yml file.",
    "Repeat this operation for every project you want to include in the docker-compose.yml file.",
    "At the time of this writing, Visual Studio supports Docker Compose orchestrators.",
    "At the time of this writing, Visual Studio supports Docker Compose orchestrators.",
    "Figure 5-7. Adding Docker support in Visual Studio 2022 by right-clicking an ASP.NET Core project",
    "Figure 5-7. Adding Docker support in Visual Studio 2022 by right-clicking an ASP.NET Core project",
    "After you add orchestrator support to your solution in Visual Studio, you will also see a new node (in",
    "After you add orchestrator support to your solution in Visual Studio, you will also see a new node (in",
    "Figure 5-8. The docker-compose tree node added in Visual Studio 2022 Solution Explorer",
    "Figure 5-8. The docker-compose tree node added in Visual Studio 2022 Solution Explorer",
    "You could deploy a multi-container application with a single docker-compose.yml file by using the",
    "You could deploy a multi-container application with a single docker-compose.yml file by using the",
    "86",
    "86",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "Step 5. Build and run your Docker application",
    "Step 5. Build and run your Docker application",
    "If your application only has a single container, you can run it by deploying it to your Docker host (VM",
    "If your application only has a single container, you can run it by deploying it to your Docker host (VM",
    "Option A: Running a single-container application",
    "Option A: Running a single-container application",
    "Using Docker CLI",
    "Using Docker CLI",
    "You can run a Docker container using the docker run command, as shown in Figure 5-9:",
    "You can run a Docker container using the docker run command, as shown in Figure 5-9:",
    "docker run -t -d -p 80:5000 cesardl/netcore-webapi-microservice-docker:first",
    "docker run -t -d -p 80:5000 cesardl/netcore-webapi-microservice-docker:first",
    "The above command will create a new container instance from the specified image, every time it\u2019s run.",
    "The above command will create a new container instance from the specified image, every time it\u2019s run.",
    "Figure 5-9. Running a Docker container using the docker run command",
    "Figure 5-9. Running a Docker container using the docker run command",
    "In this case, the command binds the internal port 5000 of the container to port 80 of the host",
    "In this case, the command binds the internal port 5000 of the container to port 80 of the host",
    "The hash shown is the container ID and it\u2019s also assigned a random readable name if the --name",
    "The hash shown is the container ID and it\u2019s also assigned a random readable name if the --name",
    "Using Visual Studio",
    "Using Visual Studio",
    "If you haven\u2019t added container orchestrator support, you can also run a single container app in Visual",
    "If you haven\u2019t added container orchestrator support, you can also run a single container app in Visual",
    "Option B: Running a multi-container application",
    "Option B: Running a multi-container application",
    "In most enterprise scenarios, a Docker application will be composed of multiple services, which means",
    "In most enterprise scenarios, a Docker application will be composed of multiple services, which means",
    "87",
    "87",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "Figure 5-10. VM with Docker containers deployed",
    "Figure 5-10. VM with Docker containers deployed",
    "Using Docker CLI",
    "Using Docker CLI",
    "To run a multi-container application with the Docker CLI, you use the docker-compose up command.",
    "To run a multi-container application with the Docker CLI, you use the docker-compose up command.",
    "Figure 5-11. Example results when running the docker-compose up command",
    "Figure 5-11. Example results when running the docker-compose up command",
    "After the docker-compose up command runs, the application and its related containers are deployed",
    "After the docker-compose up command runs, the application and its related containers are deployed",
    "Using Visual Studio",
    "Using Visual Studio",
    "Running a multi-container application using Visual Studio 2019 can\u2019t get any simpler. You just press",
    "Running a multi-container application using Visual Studio 2019 can\u2019t get any simpler. You just press",
    "As mentioned before, each time you add Docker solution support to a project within a solution, that",
    "As mentioned before, each time you add Docker solution support to a project within a solution, that",
    "If you want to take a peek at all the drudgery, take a look at the file:",
    "If you want to take a peek at all the drudgery, take a look at the file:",
    "{root solution folder}",
    "{root solution folder}",
    "88",
    "88",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "The important point here is that, as shown in Figure 5-12, in Visual Studio 2019 there is an additional",
    "The important point here is that, as shown in Figure 5-12, in Visual Studio 2019 there is an additional",
    "Figure 5-12. Running multi-container apps in Visual Studio 2022",
    "Figure 5-12. Running multi-container apps in Visual Studio 2022",
    "Additional resources",
    "Additional resources",
    "\u2022",
    "\u2022",
    "Deploy an ASP.NET container to a remote Docker host",
    "Deploy an ASP.NET container to a remote Docker host",
    "A note about testing and deploying with orchestrators",
    "A note about testing and deploying with orchestrators",
    "The docker-compose up and docker run commands (or running and debugging the containers in",
    "The docker-compose up and docker run commands (or running and debugging the containers in",
    "Step 6. Test your Docker application using your local Docker host",
    "Step 6. Test your Docker application using your local Docker host",
    "This step will vary depending on what your application is doing. In a simple .NET Web application that",
    "This step will vary depending on what your application is doing. In a simple .NET Web application that",
    "Figure 5-13. Example of testing your Docker application locally using localhost",
    "Figure 5-13. Example of testing your Docker application locally using localhost",
    "89",
    "89",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "If localhost is not pointing to the Docker host IP (by default, when using Docker CE, it should), to",
    "If localhost is not pointing to the Docker host IP (by default, when using Docker CE, it should), to",
    "This URL in the browser uses port 80 for the particular container example being discussed. However,",
    "This URL in the browser uses port 80 for the particular container example being discussed. However,",
    "You can also test the application using curl from the terminal, as shown in Figure 5-14. In a Docker",
    "You can also test the application using curl from the terminal, as shown in Figure 5-14. In a Docker",
    "Figure 5-14. Example of testing your Docker application locally using curl",
    "Figure 5-14. Example of testing your Docker application locally using curl",
    "Testing and debugging containers with Visual Studio 2022",
    "Testing and debugging containers with Visual Studio 2022",
    "When running and debugging the containers with Visual Studio 2022, you can debug the .NET",
    "When running and debugging the containers with Visual Studio 2022, you can debug the .NET",
    "Testing and debugging without Visual Studio",
    "Testing and debugging without Visual Studio",
    "If you\u2019re developing using the editor/CLI approach, debugging containers is more difficult and you\u2019ll",
    "If you\u2019re developing using the editor/CLI approach, debugging containers is more difficult and you\u2019ll",
    "Additional resources",
    "Additional resources",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Quickstart: Docker in Visual Studio.",
    "Quickstart: Docker in Visual Studio.",
    "Debugging apps in a local Docker container",
    "Debugging apps in a local Docker container",
    "Simplified workflow when developing containers with Visual Studio",
    "Simplified workflow when developing containers with Visual Studio",
    "Effectively, the workflow when using Visual Studio is a lot simpler than if you use the editor/CLI",
    "Effectively, the workflow when using Visual Studio is a lot simpler than if you use the editor/CLI",
    "90",
    "90",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "Figure 5-15. Simplified workflow when developing with Visual Studio",
    "Figure 5-15. Simplified workflow when developing with Visual Studio",
    "In addition, you need to perform step 2 (adding Docker support to your projects) just once. Therefore,",
    "In addition, you need to perform step 2 (adding Docker support to your projects) just once. Therefore,",
    "Using PowerShell commands in a Dockerfile to set up Windows",
    "Using PowerShell commands in a Dockerfile to set up Windows",
    "Windows Containers allow you to convert your existing Windows applications into Docker images and",
    "Windows Containers allow you to convert your existing Windows applications into Docker images and",
    "FROM mcr.microsoft.com/windows/servercore",
    "FROM mcr.microsoft.com/windows/servercore",
    "In this case, we are using a Windows Server Core base image (the FROM setting) and installing IIS with",
    "In this case, we are using a Windows Server Core base image (the FROM setting) and installing IIS with",
    "RUN powershell add-windowsfeature web-asp-net45",
    "RUN powershell add-windowsfeature web-asp-net45",
    "Additional resources",
    "Additional resources",
    "\u2022",
    "\u2022",
    "aspnet-docker/Dockerfile. Example PowerShell commands to run from dockerfiles to",
    "aspnet-docker/Dockerfile. Example PowerShell commands to run from dockerfiles to",
    "91",
    "91",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "https://github.com/Microsoft/aspnet-docker/blob/master/4.7.1-windowsservercore-",
    "https://github.com/Microsoft/aspnet-docker/blob/master/4.7.1-windowsservercore-",
    "92",
    "92",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER 4 | Development process for Docker-based applications",
    "CHAPTER  5",
    "CHAPTER  5",
    "Designing and Developing",
    "Designing and Developing",
    "Developing containerized microservice applications means you are building multi-container",
    "Developing containerized microservice applications means you are building multi-container",
    "Earlier we raised the question \u201cIs Docker necessary when building a microservice architecture?\u201d The",
    "Earlier we raised the question \u201cIs Docker necessary when building a microservice architecture?\u201d The",
    "However, if you know how to design and develop a microservices-based application that is also based",
    "However, if you know how to design and develop a microservices-based application that is also based",
    "Design a microservice-oriented application",
    "Design a microservice-oriented application",
    "This section focuses on developing a hypothetical server-side enterprise application.",
    "This section focuses on developing a hypothetical server-side enterprise application.",
    "Application specifications",
    "Application specifications",
    "The hypothetical application handles requests by executing business logic, accessing databases, and",
    "The hypothetical application handles requests by executing business logic, accessing databases, and",
    "93",
    "93",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "to consume. It should also be able to integrate its microservices or external applications",
    "to consume. It should also be able to integrate its microservices or external applications",
    "The application will consist of these types of components:",
    "The application will consist of these types of components:",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Presentation components. These components are responsible for handling the UI and",
    "Presentation components. These components are responsible for handling the UI and",
    "Domain or business logic. This component is the application\u2019s domain logic.",
    "Domain or business logic. This component is the application\u2019s domain logic.",
    "Database access logic. This component consists of data access components responsible for",
    "Database access logic. This component consists of data access components responsible for",
    "Application integration logic. This component includes a messaging channel, based on",
    "Application integration logic. This component includes a messaging channel, based on",
    "The application will require high scalability, while allowing its vertical subsystems to scale out",
    "The application will require high scalability, while allowing its vertical subsystems to scale out",
    "The application must be able to be deployed in multiple infrastructure environments (multiple public",
    "The application must be able to be deployed in multiple infrastructure environments (multiple public",
    "Development team context",
    "Development team context",
    "We also assume the following about the development process for the application:",
    "We also assume the following about the development process for the application:",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "You have multiple dev teams focusing on different business areas of the application.",
    "You have multiple dev teams focusing on different business areas of the application.",
    "New team members must become productive quickly, and the application must be easy to",
    "New team members must become productive quickly, and the application must be easy to",
    "The application will have a long-term evolution and ever-changing business rules.",
    "The application will have a long-term evolution and ever-changing business rules.",
    "You need good long-term maintainability, which means having agility when implementing",
    "You need good long-term maintainability, which means having agility when implementing",
    "You want to practice continuous integration and continuous deployment of the application.",
    "You want to practice continuous integration and continuous deployment of the application.",
    "You want to take advantage of emerging technologies (frameworks, programming languages,",
    "You want to take advantage of emerging technologies (frameworks, programming languages,",
    "Choosing an architecture",
    "Choosing an architecture",
    "What should the application deployment architecture be? The specifications for the application, along",
    "What should the application deployment architecture be? The specifications for the application, along",
    "94",
    "94",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "In this approach, each service (container) implements a set of cohesive and narrowly related functions.",
    "In this approach, each service (container) implements a set of cohesive and narrowly related functions.",
    "Microservices communicate using protocols such as HTTP (REST), but also asynchronously (for",
    "Microservices communicate using protocols such as HTTP (REST), but also asynchronously (for",
    "Microservices are developed and deployed as containers independently of one another. This approach",
    "Microservices are developed and deployed as containers independently of one another. This approach",
    "Each microservice has its own database, allowing it to be fully decoupled from other microservices.",
    "Each microservice has its own database, allowing it to be fully decoupled from other microservices.",
    "eShopOnContainers: A reference application for .NET and microservices deployed",
    "eShopOnContainers: A reference application for .NET and microservices deployed",
    "So that you can focus on the architecture and technologies instead of thinking about a hypothetical",
    "So that you can focus on the architecture and technologies instead of thinking about a hypothetical",
    "The application consists of multiple subsystems, including several store UI front ends (a Web",
    "The application consists of multiple subsystems, including several store UI front ends (a Web",
    "95",
    "95",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Figure 6-1. The eShopOnContainers reference application architecture for development environment",
    "Figure 6-1. The eShopOnContainers reference application architecture for development environment",
    "The above diagram shows that Mobile and SPA clients communicate to single API gateway endpoints,",
    "The above diagram shows that Mobile and SPA clients communicate to single API gateway endpoints,",
    "Hosting environment. In Figure 6-1, you see several containers deployed within a single Docker host.",
    "Hosting environment. In Figure 6-1, you see several containers deployed within a single Docker host.",
    "Communication architecture. The eShopOnContainers application uses two communication types,",
    "Communication architecture. The eShopOnContainers application uses two communication types,",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Http client-to-microservice communication through API Gateways. This approach is used for",
    "Http client-to-microservice communication through API Gateways. This approach is used for",
    "Asynchronous event-based communication. This communication occurs through an event bus",
    "Asynchronous event-based communication. This communication occurs through an event bus",
    "The application is deployed as a set of microservices in the form of containers. Client apps can",
    "The application is deployed as a set of microservices in the form of containers. Client apps can",
    "96",
    "96",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Data sovereignty per microservice",
    "Data sovereignty per microservice",
    "In the sample application, each microservice owns its own database or data source, although all SQL",
    "In the sample application, each microservice owns its own database or data source, although all SQL",
    "In a real production environment, for high availability and for scalability, the databases should be",
    "In a real production environment, for high availability and for scalability, the databases should be",
    "Therefore, the units of deployment for microservices (and even for databases in this application) are",
    "Therefore, the units of deployment for microservices (and even for databases in this application) are",
    "Additional resources",
    "Additional resources",
    "\u2022",
    "\u2022",
    "eShopOnContainers GitHub repo. Source code for the reference application",
    "eShopOnContainers GitHub repo. Source code for the reference application",
    "Benefits of a microservice-based solution",
    "Benefits of a microservice-based solution",
    "A microservice-based solution like this has many benefits:",
    "A microservice-based solution like this has many benefits:",
    "Each microservice is relatively small\u2014easy to manage and evolve. Specifically:",
    "Each microservice is relatively small\u2014easy to manage and evolve. Specifically:",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "It is easy for a developer to understand and get started quickly with good productivity.",
    "It is easy for a developer to understand and get started quickly with good productivity.",
    "Containers start fast, which makes developers more productive.",
    "Containers start fast, which makes developers more productive.",
    "An IDE like Visual Studio can load smaller projects fast, making developers productive.",
    "An IDE like Visual Studio can load smaller projects fast, making developers productive.",
    "Each microservice can be designed, developed, and deployed independently of other",
    "Each microservice can be designed, developed, and deployed independently of other",
    "It is possible to scale out individual areas of the application. For instance, the catalog service or",
    "It is possible to scale out individual areas of the application. For instance, the catalog service or",
    "You can divide the development work between multiple teams. Each service can be owned by a",
    "You can divide the development work between multiple teams. Each service can be owned by a",
    "Issues are more isolated. If there is an issue in one service, only that service is initially impacted",
    "Issues are more isolated. If there is an issue in one service, only that service is initially impacted",
    "97",
    "97",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "deployment architecture can bring down the entire system, especially when it involves resources, such",
    "deployment architecture can bring down the entire system, especially when it involves resources, such",
    "You can use the latest technologies. Because you can start developing services independently and",
    "You can use the latest technologies. Because you can start developing services independently and",
    "Downsides of a microservice-based solution",
    "Downsides of a microservice-based solution",
    "A microservice-based solution like this also has some drawbacks:",
    "A microservice-based solution like this also has some drawbacks:",
    "Distributed application. Distributing the application adds complexity for developers when they are",
    "Distributed application. Distributing the application adds complexity for developers when they are",
    "Deployment complexity. An application that has dozens of microservices types and needs high",
    "Deployment complexity. An application that has dozens of microservices types and needs high",
    "Atomic transactions. Atomic transactions between multiple microservices usually are not possible.",
    "Atomic transactions. Atomic transactions between multiple microservices usually are not possible.",
    "Increased global resource needs (total memory, drives, and network resources for all the servers or",
    "Increased global resource needs (total memory, drives, and network resources for all the servers or",
    "Issues with direct client-to-microservice communication. When the application is large, with",
    "Issues with direct client-to-microservice communication. When the application is large, with",
    "Another problem with direct client-to-microservice communications is that some microservices might",
    "Another problem with direct client-to-microservice communications is that some microservices might",
    "98",
    "98",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Yet another drawback with this direct client-to-service approach is that it makes it difficult to refactor",
    "Yet another drawback with this direct client-to-service approach is that it makes it difficult to refactor",
    "As mentioned in the architecture section, when designing and building a complex application based",
    "As mentioned in the architecture section, when designing and building a complex application based",
    "Partitioning the microservices. Finally, no matter, which approach you take for your microservice",
    "Partitioning the microservices. Finally, no matter, which approach you take for your microservice",
    "External versus internal architecture and design patterns",
    "External versus internal architecture and design patterns",
    "The external architecture is the microservice architecture composed by multiple services, following the",
    "The external architecture is the microservice architecture composed by multiple services, following the",
    "99",
    "99",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Figure 6-2. External versus internal architecture and design",
    "Figure 6-2. External versus internal architecture and design",
    "For instance, in our eShopOnContainers sample, the catalog, basket, and user profile microservices are",
    "For instance, in our eShopOnContainers sample, the catalog, basket, and user profile microservices are",
    "Another reason for a different technology per microservice might be the nature of each microservice.",
    "Another reason for a different technology per microservice might be the nature of each microservice.",
    "The bottom line is that each microservice can have a different internal architecture based on different",
    "The bottom line is that each microservice can have a different internal architecture based on different",
    "The new world: multiple architectural patterns and polyglot",
    "The new world: multiple architectural patterns and polyglot",
    "There are many architectural patterns used by software architects and developers. The following are a",
    "There are many architectural patterns used by software architects and developers. The following are a",
    "\u2022",
    "\u2022",
    "Simple CRUD, single-tier, single-layer.",
    "Simple CRUD, single-tier, single-layer.",
    "100",
    "100",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Traditional N-Layered.",
    "Traditional N-Layered.",
    "Domain-Driven Design N-layered.",
    "Domain-Driven Design N-layered.",
    "Clean Architecture (as used with eShopOnWeb)",
    "Clean Architecture (as used with eShopOnWeb)",
    "Command and Query Responsibility Segregation (CQRS).",
    "Command and Query Responsibility Segregation (CQRS).",
    "Event-Driven Architecture (EDA).",
    "Event-Driven Architecture (EDA).",
    "You can also build microservices with many technologies and languages, such as ASP.NET Core Web",
    "You can also build microservices with many technologies and languages, such as ASP.NET Core Web",
    "The important point is that no particular architecture pattern or style, nor any particular technology, is",
    "The important point is that no particular architecture pattern or style, nor any particular technology, is",
    "Figure 6-3. Multi-architectural patterns and the polyglot microservices world",
    "Figure 6-3. Multi-architectural patterns and the polyglot microservices world",
    "Multi-architectural pattern and polyglot microservices means you can mix and match languages and",
    "Multi-architectural pattern and polyglot microservices means you can mix and match languages and",
    "101",
    "101",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "For instance, for a simple CRUD maintenance application, it might not make sense to design and",
    "For instance, for a simple CRUD maintenance application, it might not make sense to design and",
    "Especially when you deal with large applications composed by multiple subsystems, you should not",
    "Especially when you deal with large applications composed by multiple subsystems, you should not",
    "There is no silver bullet or a right architecture pattern for every given case. You cannot have \u201cone",
    "There is no silver bullet or a right architecture pattern for every given case. You cannot have \u201cone",
    "Creating a simple data-driven CRUD microservice",
    "Creating a simple data-driven CRUD microservice",
    "This section outlines how to create a simple microservice that performs create, read, update, and",
    "This section outlines how to create a simple microservice that performs create, read, update, and",
    "Designing a simple CRUD microservice",
    "Designing a simple CRUD microservice",
    "From a design point of view, this type of containerized microservice is very simple. Perhaps the",
    "From a design point of view, this type of containerized microservice is very simple. Perhaps the",
    "Figure 6-4. Internal design for simple CRUD microservices",
    "Figure 6-4. Internal design for simple CRUD microservices",
    "An example of this kind of simple data-drive service is the catalog microservice from the",
    "An example of this kind of simple data-drive service is the catalog microservice from the",
    "102",
    "102",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Figure 6-5. Simple data-driven/CRUD microservice design",
    "Figure 6-5. Simple data-driven/CRUD microservice design",
    "The previous diagram shows the logical Catalog microservice, that includes its Catalog database,",
    "The previous diagram shows the logical Catalog microservice, that includes its Catalog database,",
    "Note that running a database server like SQL Server within a Docker container is great for",
    "Note that running a database server like SQL Server within a Docker container is great for",
    "Finally, by editing the Dockerfile and docker-compose.yml metadata files, you can configure how the",
    "Finally, by editing the Dockerfile and docker-compose.yml metadata files, you can configure how the",
    "Implementing a simple CRUD microservice with ASP.NET Core",
    "Implementing a simple CRUD microservice with ASP.NET Core",
    "To implement a simple CRUD microservice using .NET and Visual Studio, you start by creating a",
    "To implement a simple CRUD microservice using .NET and Visual Studio, you start by creating a",
    "103",
    "103",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Figure 6-6. Creating an ASP.NET Core Web API project in Visual Studio 2019",
    "Figure 6-6. Creating an ASP.NET Core Web API project in Visual Studio 2019",
    "To create an ASP.NET Core Web API Project, first select an ASP.NET Core Web Application and then",
    "To create an ASP.NET Core Web API Project, first select an ASP.NET Core Web Application and then",
    "104",
    "104",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Figure 6-7. Dependencies in a simple CRUD Web API microservice",
    "Figure 6-7. Dependencies in a simple CRUD Web API microservice",
    "The API project includes references to Microsoft.AspNetCore.App NuGet package, that includes",
    "The API project includes references to Microsoft.AspNetCore.App NuGet package, that includes",
    "Implementing CRUD Web API services with Entity Framework Core",
    "Implementing CRUD Web API services with Entity Framework Core",
    "Entity Framework (EF) Core is a lightweight, extensible, and cross-platform version of the popular",
    "Entity Framework (EF) Core is a lightweight, extensible, and cross-platform version of the popular",
    "The catalog microservice uses EF and the SQL Server provider because its database is running in a",
    "The catalog microservice uses EF and the SQL Server provider because its database is running in a",
    "105",
    "105",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "any SQL Server, such as Windows on-premises or Azure SQL DB. The only thing you would need to",
    "any SQL Server, such as Windows on-premises or Azure SQL DB. The only thing you would need to",
    "The data model",
    "The data model",
    "With EF Core, data access is performed by using a model. A model is made up of (domain model)",
    "With EF Core, data access is performed by using a model. A model is made up of (domain model)",
    "public class CatalogItem",
    "public class CatalogItem",
    "}",
    "}",
    "You also need a DbContext that represents a session with the database. For the catalog microservice,",
    "You also need a DbContext that represents a session with the database. For the catalog microservice,",
    "public class CatalogContext : DbContext",
    "public class CatalogContext : DbContext",
    "}",
    "}",
    "You can have additional DbContext implementations. For example, in the sample Catalog.API",
    "You can have additional DbContext implementations. For example, in the sample Catalog.API",
    "106",
    "106",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Within the DbContext, you use the OnModelCreating method to customize object/database entity",
    "Within the DbContext, you use the OnModelCreating method to customize object/database entity",
    "Querying data from Web API controllers",
    "Querying data from Web API controllers",
    "Instances of your entity classes are typically retrieved from the database using Language-Integrated",
    "Instances of your entity classes are typically retrieved from the database using Language-Integrated",
    "[",
    "[",
    "(int)HttpStatusCode.OK)",
    "(int)HttpStatusCode.OK)",
    "numbers",
    "numbers",
    "107",
    "107",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    ".Take(pageSize)",
    ".Take(pageSize)",
    "}",
    "}",
    "Saving data",
    "Saving data",
    "Data is created, deleted, and modified in the database using instances of your entity classes. You",
    "Data is created, deleted, and modified in the database using instances of your entity classes. You",
    "var catalogItem = new CatalogItem() {CatalogTypeId=2, CatalogBrandId=2,",
    "var catalogItem = new CatalogItem() {CatalogTypeId=2, CatalogBrandId=2,",
    "Dependency Injection in ASP.NET Core and Web API controllers",
    "Dependency Injection in ASP.NET Core and Web API controllers",
    "In ASP.NET Core, you can use Dependency Injection (DI) out of the box. You do not need to set up a",
    "In ASP.NET Core, you can use Dependency Injection (DI) out of the box. You do not need to set up a",
    "In the CatalogController class mentioned earlier, CatalogContext (which inherits from DbContext) type",
    "In the CatalogController class mentioned earlier, CatalogContext (which inherits from DbContext) type",
    "An important configuration to set up in the Web API project is the DbContext class registration into",
    "An important configuration to set up in the Web API project is the DbContext class registration into",
    "// Additional code...",
    "// Additional code...",
    "builder.Services.AddDbContext",
    "builder.Services.AddDbContext",
    "108",
    "108",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "// Changing default behavior when client evaluation occurs to throw.",
    "// Changing default behavior when client evaluation occurs to throw.",
    "Additional resources",
    "Additional resources",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "Querying Data",
    "Querying Data",
    "Saving Data",
    "Saving Data",
    "The DB connection string and environment variables used by Docker",
    "The DB connection string and environment variables used by Docker",
    "You can use the ASP.NET Core settings and add a ConnectionString property to your settings.json file",
    "You can use the ASP.NET Core settings and add a ConnectionString property to your settings.json file",
    "{",
    "{",
    "The settings.json file can have default values for the ConnectionString property or for any other",
    "The settings.json file can have default values for the ConnectionString property or for any other",
    "From your docker-compose.yml or docker-compose.override.yml files, you can initialize those",
    "From your docker-compose.yml or docker-compose.override.yml files, you can initialize those",
    "catalog-api:",
    "catalog-api:",
    "109",
    "109",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "The docker-compose.yml files at the solution level are not only more flexible than configuration files",
    "The docker-compose.yml files at the solution level are not only more flexible than configuration files",
    "Finally, you can get that value from your code by using builder.Configuration",
    "Finally, you can get that value from your code by using builder.Configuration",
    "However, for production environments, you might want to explore additional ways on how to store",
    "However, for production environments, you might want to explore additional ways on how to store",
    "Azure Key Vault helps to store and safeguard cryptographic keys and secrets used by your cloud",
    "Azure Key Vault helps to store and safeguard cryptographic keys and secrets used by your cloud",
    "Azure Key Vault allows a detailed control level of the application secrets usage without the need to let",
    "Azure Key Vault allows a detailed control level of the application secrets usage without the need to let",
    "Applications have to be registered in the organization\u2019s Active Directory, so they can use the Key",
    "Applications have to be registered in the organization\u2019s Active Directory, so they can use the Key",
    "You can check the Key Vault Concepts documentation for more details.",
    "You can check the Key Vault Concepts documentation for more details.",
    "Implementing versioning in ASP.NET Web APIs",
    "Implementing versioning in ASP.NET Web APIs",
    "As business requirements change, new collections of resources may be added, the relationships",
    "As business requirements change, new collections of resources may be added, the relationships",
    "Versioning enables a Web API to indicate the features and resources that it exposes. A client",
    "Versioning enables a Web API to indicate the features and resources that it exposes. A client",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "URI versioning",
    "URI versioning",
    "Query string versioning",
    "Query string versioning",
    "Header versioning",
    "Header versioning",
    "Query string and URI versioning are the simplest to implement. Header versioning is a good",
    "Query string and URI versioning are the simplest to implement. Header versioning is a good",
    "110",
    "110",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "With URI versioning, as in the eShopOnContainers sample application, each time you modify the Web",
    "With URI versioning, as in the eShopOnContainers sample application, each time you modify the Web",
    "As shown in the following code example, the version can be set by using the Route attribute in the",
    "As shown in the following code example, the version can be set by using the Route attribute in the",
    "[",
    "[",
    "This versioning mechanism is simple and depends on the server routing the request to the",
    "This versioning mechanism is simple and depends on the server routing the request to the",
    "Additional resources",
    "Additional resources",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "\u2022",
    "ASP.NET API Versioning  https://github.com/dotnet/aspnet-api-versioning",
    "ASP.NET API Versioning  https://github.com/dotnet/aspnet-api-versioning",
    "Scott Hanselman. ASP.NET Core RESTful Web API versioning made easy",
    "Scott Hanselman. ASP.NET Core RESTful Web API versioning made easy",
    "Versioning a RESTful web API",
    "Versioning a RESTful web API",
    "Roy Fielding. Versioning, Hypermedia, and REST",
    "Roy Fielding. Versioning, Hypermedia, and REST",
    "Generating Swagger description metadata from your ASP.NET Core",
    "Generating Swagger description metadata from your ASP.NET Core",
    "Swagger is a commonly used open source framework backed by a large ecosystem of tools that helps",
    "Swagger is a commonly used open source framework backed by a large ecosystem of tools that helps",
    "The heart of Swagger is the Swagger specification, which is API description metadata in a JSON or",
    "The heart of Swagger is the Swagger specification, which is API description metadata in a JSON or",
    "The specification is the basis of the OpenAPI Specification (OAS) and is developed in an open,",
    "The specification is the basis of the OpenAPI Specification (OAS) and is developed in an open,",
    "111",
    "111",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "The specification defines the structure for how a service can be discovered and how its capabilities",
    "The specification defines the structure for how a service can be discovered and how its capabilities",
    "Why use Swagger?",
    "Why use Swagger?",
    "The main reasons to generate Swagger metadata for your APIs are the following.",
    "The main reasons to generate Swagger metadata for your APIs are the following.",
    "Ability for other products to automatically consume and integrate your APIs. Dozens of products",
    "Ability for other products to automatically consume and integrate your APIs. Dozens of products",
    "\u2022",
    "\u2022",
    "AutoRest. You can automatically generate .NET client classes for calling Swagger. This tool can",
    "AutoRest. You can automatically generate .NET client classes for calling Swagger. This tool can",
    "\u2022  Microsoft Flow. You can automatically use and integrate your API into a high-level Microsoft",
    "\u2022  Microsoft Flow. You can automatically use and integrate your API into a high-level Microsoft",
    "Flow workflow, with no programming skills required.",
    "Flow workflow, with no programming skills required.",
    "\u2022  Microsoft PowerApps. You can automatically consume your API from PowerApps mobile apps",
    "\u2022  Microsoft PowerApps. You can automatically consume your API from PowerApps mobile apps",
    "built with PowerApps Studio, with no programming skills required.",
    "built with PowerApps Studio, with no programming skills required.",
    "\u2022",
    "\u2022",
    "Azure App Service Logic Apps. You can automatically use and integrate your API into an Azure",
    "Azure App Service Logic Apps. You can automatically use and integrate your API into an Azure",
    "Ability to automatically generate API documentation. When you create large-scale RESTful APIs,",
    "Ability to automatically generate API documentation. When you create large-scale RESTful APIs,",
    "Swagger\u2019s metadata is what Microsoft Flow, PowerApps, and Azure Logic Apps use to understand how",
    "Swagger\u2019s metadata is what Microsoft Flow, PowerApps, and Azure Logic Apps use to understand how",
    "There are several options to automate Swagger metadata generation for ASP.NET Core REST API",
    "There are several options to automate Swagger metadata generation for ASP.NET Core REST API",
    "Probably the best know is Swashbuckle, which is currently used in eShopOnContainers and we\u2019ll cover",
    "Probably the best know is Swashbuckle, which is currently used in eShopOnContainers and we\u2019ll cover",
    "How to automate API Swagger metadata generation with the Swashbuckle NuGet",
    "How to automate API Swagger metadata generation with the Swashbuckle NuGet",
    "Generating Swagger metadata manually (in a JSON or YAML file) can be tedious work. However, you",
    "Generating Swagger metadata manually (in a JSON or YAML file) can be tedious work. However, you",
    "Swashbuckle automatically generates Swagger metadata for your ASP.NET Web API projects. It",
    "Swashbuckle automatically generates Swagger metadata for your ASP.NET Web API projects. It",
    "112",
    "112",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "such as Azure API App, Azure Mobile App, Azure Service Fabric microservices based on ASP.NET. It",
    "such as Azure API App, Azure Mobile App, Azure Service Fabric microservices based on ASP.NET. It",
    "Swashbuckle combines API Explorer and Swagger or swagger-ui to provide a rich discovery and",
    "Swashbuckle combines API Explorer and Swagger or swagger-ui to provide a rich discovery and",
    "This means you can complement your API with a nice discovery UI to help developers to use your API.",
    "This means you can complement your API with a nice discovery UI to help developers to use your API.",
    "Figure 6-8. Swashbuckle API Explorer based on Swagger metadata\u2014eShopOnContainers catalog microservice",
    "Figure 6-8. Swashbuckle API Explorer based on Swagger metadata\u2014eShopOnContainers catalog microservice",
    "The Swashbuckle generated Swagger UI API documentation includes all published actions. The API",
    "The Swashbuckle generated Swagger UI API documentation includes all published actions. The API",
    "Currently, Swashbuckle consists of five internal NuGet packages under the high-level metapackage",
    "Currently, Swashbuckle consists of five internal NuGet packages under the high-level metapackage",
    "After you have installed these NuGet packages in your Web API project, you need to configure",
    "After you have installed these NuGet packages in your Web API project, you need to configure",
    "// Add framework services.",
    "// Add framework services.",
    "builder.Services.AddSwaggerGen(options =>",
    "builder.Services.AddSwaggerGen(options =>",
    "113",
    "113",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "options.DescribeAllEnumsAsStrings();",
    "options.DescribeAllEnumsAsStrings();",
    "// Other startup code...",
    "// Other startup code...",
    "app.UseSwagger()",
    "app.UseSwagger()",
    "Once this is done, you can start your application and browse the following Swagger JSON and",
    "Once this is done, you can start your application and browse the following Swagger JSON and",
    ":::{custom-style=CodeBox}",
    ":::{custom-style=CodeBox}"
]