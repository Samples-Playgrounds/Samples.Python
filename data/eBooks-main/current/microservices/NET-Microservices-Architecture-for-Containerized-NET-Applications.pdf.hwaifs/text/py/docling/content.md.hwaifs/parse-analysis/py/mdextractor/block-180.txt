public class CatalogIntegrationEventService : ICatalogIntegrationEventService { //â€¦ public async Task SaveEventAndCatalogContextChangesAsync( IntegrationEvent evt) { // Use of an EF Core resiliency strategy when using multiple DbContexts // within an explicit BeginTransaction(): // https://learn.microsoft.com/ef/core/miscellaneous/connection-resiliency await ResilientTransaction.New(_catalogContext).ExecuteAsync(async () => { // Achieving atomicity between original catalog database // operation and the IntegrationEventLog thanks to a local transaction await _catalogContext.SaveChangesAsync(); await _eventLogService.SaveEventAsync(evt, _catalogContext.Database.CurrentTransaction.GetDbTransaction()); }); } }