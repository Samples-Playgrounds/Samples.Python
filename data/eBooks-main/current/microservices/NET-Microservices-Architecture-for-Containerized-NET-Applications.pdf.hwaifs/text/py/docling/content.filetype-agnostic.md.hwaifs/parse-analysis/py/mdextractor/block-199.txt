hcBuilder . AddSqlServer( configuration["ConnectionString"], name: "CatalogDB-check" , tags: new string[] { "catalogdb" }); if (!string . IsNullOrEmpty(accountName) && !string . IsNullOrEmpty(accountKey)) { hcBuilder . AddAzureBlobStorage( $"DefaultEndpointsProtocol=https;AccountName={accountName};AccountKey={accountKey};Endpoint Suffix=core.windows.net" , name: "catalog-storage-check" , tags: new string[] { "catalogstorage" }); } if (configuration . GetValue<bool>("AzureServiceBusEnabled")) { hcBuilder . AddAzureServiceBusTopic( configuration["EventBusConnection"], topicName: "eshop_event_bus" , name: "catalog-servicebus-check" , tags: new string[] { "servicebus" }); } else { hcBuilder . AddRabbitMQ( $"amqp://{configuration["EventBusConnection"]}" , name: "catalog-rabbitmqbus-check" , tags: new string[] { "rabbitmqbus" }); } return services; }