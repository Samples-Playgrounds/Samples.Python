// Program.cs var retryPolicy = GetRetryPolicy(); var circuitBreakerPolicy = GetCircuitBreakerPolicy(); builder . Services . AddHttpClient<IBasketService , BasketService>() . SetHandlerLifetime(TimeSpan . FromMinutes(5)) // Sample: default lifetime is 2 minutes . AddHttpMessageHandler<HttpClientAuthorizationDelegatingHandler>() . AddPolicyHandler(retryPolicy) . AddPolicyHandler(circuitBreakerPolicy);