public class EventBusRabbitMQ : IEventBus, IDisposable
{
 // Member objects and other methods ...
 // ...
 public void Subscribe<T, TH>()
 where T : IntegrationEvent
 where TH : IIntegrationEventHandler<T>
 {
 var eventName = _subsManager.GetEventKey<T>();
 var containsKey = _subsManager.HasSubscriptionsForEvent(eventName);
 if (!containsKey)
 {
 if (!_persistentConnection.IsConnected)
 {
 _persistentConnection.TryConnect();
 }
 using (var channel = _persistentConnection.CreateModel())
 {
 channel.QueueBind(queue: _queueName,
 exchange: BROKER_NAME,
 routingKey: eventName);
 }
 }
 _subsManager.AddSubscription<T, TH>();
 }
}