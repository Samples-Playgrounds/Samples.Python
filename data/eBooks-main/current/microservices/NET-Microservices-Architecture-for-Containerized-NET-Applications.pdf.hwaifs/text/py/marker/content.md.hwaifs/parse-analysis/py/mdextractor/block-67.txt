public class GracePeriodManagerService : BackgroundService
{
 private readonly ILogger<GracePeriodManagerService> _logger;
 private readonly OrderingBackgroundSettings _settings;
 private readonly IEventBus _eventBus;
 public GracePeriodManagerService(IOptions<OrderingBackgroundSettings> settings,
 IEventBus eventBus,
                               ILogger<GracePeriodManagerService> logger)
 {
 // Constructor's parameters validations...
 }
 protected override async Task ExecuteAsync(CancellationToken stoppingToken)
 {
 _logger.LogDebug($"GracePeriodManagerService is starting.");
 stoppingToken.Register(() =>
 _logger.LogDebug($" GracePeriod background task is stopping."));
 while (!stoppingToken.IsCancellationRequested)
 {
 _logger.LogDebug($"GracePeriod task doing background work.");
 // This eShopOnContainers method is querying a database table
 // and publishing events into the Event Bus (RabbitMQ / ServiceBus)
 CheckConfirmedGracePeriodOrders();
 try {
 await Task.Delay(_settings.CheckUpdateTime, stoppingToken);
 }
 catch (TaskCanceledException exception) {
 _logger.LogCritical(exception, "TaskCanceledException Error",
exception.Message);