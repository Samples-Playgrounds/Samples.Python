[
    null,
    null,
    null,
    null,
    "This guide is an introduction to developing microservices-based applications and managing them",
    "This guide is an introduction to developing microservices-based applications and managing them",
    "To make it easier to get started, the guide focuses on a reference containerized and microservicebased application that you can explore. The reference application is available at the",
    "To make it easier to get started, the guide focuses on a reference containerized and microservicebased application that you can explore. The reference application is available at the",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "Enterprises are increasingly realizing cost savings, solving deployment problems, and improving",
    "Enterprises are increasingly realizing cost savings, solving deployment problems, and improving",
    "Docker is becoming the de facto standard in the container industry, supported by the most significant",
    "Docker is becoming the de facto standard in the container industry, supported by the most significant",
    null,
    null,
    "This guide is an introduction to developing microservices-based applications and managing them",
    "This guide is an introduction to developing microservices-based applications and managing them",
    "This guide provides foundational development and architectural guidance primarily at a development",
    "This guide provides foundational development and architectural guidance primarily at a development",
    "After you have studied this guide, your next step would be to learn about production-ready",
    "After you have studied this guide, your next step would be to learn about production-ready",
    "This guide has been revised to cover ",
    "This guide has been revised to cover ",
    "This guide does not focus on the application lifecycle, DevOps, CI/CD pipelines, or team work. The",
    "This guide does not focus on the application lifecycle, DevOps, CI/CD pipelines, or team work. The",
    "Containerized Docker Application Lifecycle with Microsoft Platform and Tools (downloadable",
    "Containerized Docker Application Lifecycle with Microsoft Platform and Tools (downloadable",
    "We wrote this guide for developers and solution architects who are new to Docker-based application",
    "We wrote this guide for developers and solution architects who are new to Docker-based application",
    "You will also find this guide useful if you are a technical decision maker, such as an enterprise",
    "You will also find this guide useful if you are a technical decision maker, such as an enterprise",
    "The first part of this guide introduces Docker containers, discusses how to choose between .NET 7 and",
    "The first part of this guide introduces Docker containers, discusses how to choose between .NET 7 and",
    "The second part of the guide starts with the Development process for Docker based applications",
    "The second part of the guide starts with the Development process for Docker based applications",
    "The eShopOnContainers application is an open-source reference app for .NET and microservices that",
    "The eShopOnContainers application is an open-source reference app for .NET and microservices that",
    "The purpose of the application is to showcase architectural patterns. ",
    "The purpose of the application is to showcase architectural patterns. ",
    "Co-Authors:",
    "Co-Authors:",
    null,
    null,
    null,
    null,
    null,
    null,
    "Editors:",
    "Editors:",
    null,
    null,
    null,
    null,
    "Participants and reviewers:",
    "Participants and reviewers:",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "PUBLISHED BY",
    "PUBLISHED BY",
    "Microsoft Developer Division, .NET and Visual Studio product teams",
    "Microsoft Developer Division, .NET and Visual Studio product teams",
    "A division of Microsoft Corporation",
    "A division of Microsoft Corporation",
    "One Microsoft Way",
    "One Microsoft Way",
    "Redmond, Washington 98052-6399",
    "Redmond, Washington 98052-6399",
    "Copyright \u00a9 2023 by Microsoft Corporation",
    "Copyright \u00a9 2023 by Microsoft Corporation",
    "All rights reserved. No part of the contents of this book may be reproduced or transmitted in any",
    "All rights reserved. No part of the contents of this book may be reproduced or transmitted in any",
    "This book is provided \u201cas-is\u201d and expresses the author\u2019s views and opinions. The views, opinions and",
    "This book is provided \u201cas-is\u201d and expresses the author\u2019s views and opinions. The views, opinions and",
    "Some examples depicted herein are provided for illustration only and are fictitious. No real association",
    "Some examples depicted herein are provided for illustration only and are fictitious. No real association",
    null,
    null,
    "Mac and macOS are trademarks of Apple Inc.",
    "Mac and macOS are trademarks of Apple Inc.",
    "The Docker whale logo is a registered trademark of Docker, Inc. Used by permission.",
    "The Docker whale logo is a registered trademark of Docker, Inc. Used by permission.",
    "All other marks and logos are property of their respective owners.",
    "All other marks and logos are property of their respective owners.",
    null,
    null,
    "What is Docker? ........................................................................................................................................................................ 2",
    "What is Docker? ........................................................................................................................................................................ 2",
    "Comparing Docker containers with virtual machines ........................................................................................... 3",
    "Comparing Docker containers with virtual machines ........................................................................................... 3",
    "A simple analogy ................................................................................................................................................................. 4",
    "A simple analogy ................................................................................................................................................................. 4",
    "Docker terminology ................................................................................................................................................................ 5",
    "Docker terminology ................................................................................................................................................................ 5",
    "Docker containers, images, and registries ..................................................................................................................... 7",
    "Docker containers, images, and registries ..................................................................................................................... 7",
    null,
    null,
    "General guidance ..................................................................................................................................................................... 9",
    "General guidance ..................................................................................................................................................................... 9",
    "When to choose .NET for Docker containers ............................................................................................................. 10",
    "When to choose .NET for Docker containers ............................................................................................................. 10",
    "Developing and deploying cross platform ............................................................................................................ 10",
    "Developing and deploying cross platform ............................................................................................................ 10",
    "Using containers for new (\u201cgreen-field\u201d) projects ............................................................................................... 11",
    "Using containers for new (\u201cgreen-field\u201d) projects ............................................................................................... 11",
    "Create and deploy microservices on containers .................................................................................................. 11",
    "Create and deploy microservices on containers .................................................................................................. 11",
    "Deploying high density in scalable systems .......................................................................................................... 11",
    "Deploying high density in scalable systems .......................................................................................................... 11",
    "When to choose .NET Framework for Docker containers ..................................................................................... 12",
    "When to choose .NET Framework for Docker containers ..................................................................................... 12",
    "Migrating existing applications directly to a Windows Server container .................................................. 12",
    "Migrating existing applications directly to a Windows Server container .................................................. 12",
    "Using third-party .NET libraries or NuGet packages not available for .NET 7 ......................................... 12",
    "Using third-party .NET libraries or NuGet packages not available for .NET 7 ......................................... 12",
    "Using .NET technologies not available for .NET 7 ............................................................................................... 12",
    "Using .NET technologies not available for .NET 7 ............................................................................................... 12",
    "Using a platform or API that doesn\u2019t support .NET 7 ........................................................................................ 13",
    "Using a platform or API that doesn\u2019t support .NET 7 ........................................................................................ 13",
    "Porting existing ASP.NET application to .NET 7 ................................................................................................... 13",
    "Porting existing ASP.NET application to .NET 7 ................................................................................................... 13",
    "Decision table: .NET implementations to use for Docker ..................................................................................... 13",
    "Decision table: .NET implementations to use for Docker ..................................................................................... 13",
    "What OS to target with .NET containers ...................................................................................................................... 14",
    "What OS to target with .NET containers ...................................................................................................................... 14",
    "Official .NET Docker images ............................................................................................................................................. 16",
    "Official .NET Docker images ............................................................................................................................................. 16",
    ".NET and Docker image optimizations for development versus production ........................................... 16",
    ".NET and Docker image optimizations for development versus production ........................................... 16",
    null,
    null,
    "Container design principles .............................................................................................................................................. 18",
    "Container design principles .............................................................................................................................................. 18",
    "Containerizing monolithic applications ....................................................................................................................... 19",
    "Containerizing monolithic applications ....................................................................................................................... 19",
    "Deploying a monolithic application as a container ............................................................................................ 21",
    "Deploying a monolithic application as a container ............................................................................................ 21",
    "Publishing a single-container-based application to Azure App Service .................................................... 21",
    "Publishing a single-container-based application to Azure App Service .................................................... 21",
    "i Contents",
    "i Contents",
    "Manage state and data in Docker applications ........................................................................................................ 22",
    "Manage state and data in Docker applications ........................................................................................................ 22",
    "Service-oriented architecture ........................................................................................................................................... 25",
    "Service-oriented architecture ........................................................................................................................................... 25",
    "Microservices architecture ................................................................................................................................................. 25",
    "Microservices architecture ................................................................................................................................................. 25",
    "Additional resources ....................................................................................................................................................... 27",
    "Additional resources ....................................................................................................................................................... 27",
    "Data sovereignty per microservice ................................................................................................................................ 27",
    "Data sovereignty per microservice ................................................................................................................................ 27",
    "The relationship between microservices and the Bounded Context pattern ........................................... 29",
    "The relationship between microservices and the Bounded Context pattern ........................................... 29",
    "Logical architecture versus physical architecture ..................................................................................................... 30",
    "Logical architecture versus physical architecture ..................................................................................................... 30",
    "Challenges and solutions for distributed data management .............................................................................. 31",
    "Challenges and solutions for distributed data management .............................................................................. 31",
    "Challenge #1: How to define the boundaries of each microservice ............................................................ 31",
    "Challenge #1: How to define the boundaries of each microservice ............................................................ 31",
    "Challenge #2: How to create queries that retrieve data from several microservices ............................ 32",
    "Challenge #2: How to create queries that retrieve data from several microservices ............................ 32",
    "Challenge #3: How to achieve consistency across multiple microservices ............................................... 33",
    "Challenge #3: How to achieve consistency across multiple microservices ............................................... 33",
    "Challenge #4: How to design communication across microservice boundaries .................................... 35",
    "Challenge #4: How to design communication across microservice boundaries .................................... 35",
    "Additional resources ....................................................................................................................................................... 36",
    "Additional resources ....................................................................................................................................................... 36",
    "Identify domain-model boundaries for each microservice .................................................................................. 36",
    "Identify domain-model boundaries for each microservice .................................................................................. 36",
    "The API gateway pattern versus the Direct client-to-microservice communication .................................. 40",
    "The API gateway pattern versus the Direct client-to-microservice communication .................................. 40",
    "Direct client-to-microservice communication ...................................................................................................... 40",
    "Direct client-to-microservice communication ...................................................................................................... 40",
    "Why consider API Gateways instead of direct client-to-microservice communication ....................... 41",
    "Why consider API Gateways instead of direct client-to-microservice communication ....................... 41",
    "What is the API Gateway pattern? ............................................................................................................................. 42",
    "What is the API Gateway pattern? ............................................................................................................................. 42",
    "Main features in the API Gateway pattern ............................................................................................................. 44",
    "Main features in the API Gateway pattern ............................................................................................................. 44",
    "Using products with API Gateway features ............................................................................................................ 45",
    "Using products with API Gateway features ............................................................................................................ 45",
    "Drawbacks of the API Gateway pattern ................................................................................................................... 47",
    "Drawbacks of the API Gateway pattern ................................................................................................................... 47",
    "Additional resources ....................................................................................................................................................... 48",
    "Additional resources ....................................................................................................................................................... 48",
    "Communication in a microservice architecture ........................................................................................................ 48",
    "Communication in a microservice architecture ........................................................................................................ 48",
    "Communication types .................................................................................................................................................... 49",
    "Communication types .................................................................................................................................................... 49",
    "Asynchronous microservice integration enforces microservice\u2019s autonomy ........................................... 50",
    "Asynchronous microservice integration enforces microservice\u2019s autonomy ........................................... 50",
    "Communication styles .................................................................................................................................................... 52",
    "Communication styles .................................................................................................................................................... 52",
    "Asynchronous message-based communication ....................................................................................................... 54",
    "Asynchronous message-based communication ....................................................................................................... 54",
    "Single-receiver message-based communication ................................................................................................ 55",
    "Single-receiver message-based communication ................................................................................................ 55",
    "Multiple-receivers message-based communication .......................................................................................... 56",
    "Multiple-receivers message-based communication .......................................................................................... 56",
    "Asynchronous event-driven communication ........................................................................................................ 56",
    "Asynchronous event-driven communication ........................................................................................................ 56",
    "A note about messaging technologies for production systems ................................................................... 57",
    "A note about messaging technologies for production systems ................................................................... 57",
    "Resiliently publishing to the event bus ................................................................................................................... 58",
    "Resiliently publishing to the event bus ................................................................................................................... 58",
    "ii Contents",
    "ii Contents",
    "Additional resources ....................................................................................................................................................... 58",
    "Additional resources ....................................................................................................................................................... 58",
    "Creating, evolving, and versioning microservice APIs and contracts ............................................................... 59",
    "Creating, evolving, and versioning microservice APIs and contracts ............................................................... 59",
    "Additional resources ....................................................................................................................................................... 59",
    "Additional resources ....................................................................................................................................................... 59",
    "Microservices addressability and the service registry ............................................................................................ 60",
    "Microservices addressability and the service registry ............................................................................................ 60",
    "Additional resources ....................................................................................................................................................... 60",
    "Additional resources ....................................................................................................................................................... 60",
    "Creating composite UI based on microservices ....................................................................................................... 60",
    "Creating composite UI based on microservices ....................................................................................................... 60",
    "Additional resources ....................................................................................................................................................... 62",
    "Additional resources ....................................................................................................................................................... 62",
    "Resiliency and high availability in microservices ...................................................................................................... 63",
    "Resiliency and high availability in microservices ...................................................................................................... 63",
    "Health management and diagnostics in microservices .................................................................................... 63",
    "Health management and diagnostics in microservices .................................................................................... 63",
    "Additional resources ....................................................................................................................................................... 65",
    "Additional resources ....................................................................................................................................................... 65",
    "Orchestrate microservices and multi-container applications for high scalability and availability ....... 66",
    "Orchestrate microservices and multi-container applications for high scalability and availability ....... 66",
    "Software platforms for container clustering, orchestration, and scheduling ........................................... 68",
    "Software platforms for container clustering, orchestration, and scheduling ........................................... 68",
    "Using container-based orchestrators in Microsoft Azure ................................................................................ 68",
    "Using container-based orchestrators in Microsoft Azure ................................................................................ 68",
    "Using Azure Kubernetes Service ................................................................................................................................ 69",
    "Using Azure Kubernetes Service ................................................................................................................................ 69",
    "Development environment for Kubernetes ........................................................................................................... 70",
    "Development environment for Kubernetes ........................................................................................................... 70",
    "Getting started with Azure Kubernetes Service (AKS) ....................................................................................... 70",
    "Getting started with Azure Kubernetes Service (AKS) ....................................................................................... 70",
    "Deploy with Helm charts into Kubernetes clusters ............................................................................................. 71",
    "Deploy with Helm charts into Kubernetes clusters ............................................................................................. 71",
    "Additional resources ....................................................................................................................................................... 71",
    "Additional resources ....................................................................................................................................................... 71",
    null,
    null,
    "Development environment for Docker apps ............................................................................................................. 72",
    "Development environment for Docker apps ............................................................................................................. 72",
    "Development tool choices: IDE or editor ................................................................................................................ 72",
    "Development tool choices: IDE or editor ................................................................................................................ 72",
    "Additional resources ....................................................................................................................................................... 73",
    "Additional resources ....................................................................................................................................................... 73",
    ".NET languages and frameworks for Docker containers ....................................................................................... 73",
    ".NET languages and frameworks for Docker containers ....................................................................................... 73",
    "Development workflow for Docker apps ..................................................................................................................... 73",
    "Development workflow for Docker apps ..................................................................................................................... 73",
    "Workflow for developing Docker container-based applications .................................................................. 73",
    "Workflow for developing Docker container-based applications .................................................................. 73",
    "Step 1. Start coding and create your initial application or service baseline ............................................. 75",
    "Step 1. Start coding and create your initial application or service baseline ............................................. 75",
    "Step 2. Create a Dockerfile related to an existing .NET base image ............................................................ 76",
    "Step 2. Create a Dockerfile related to an existing .NET base image ............................................................ 76",
    "Step 3. Create your custom Docker images and embed your application or service in them .......... 83",
    "Step 3. Create your custom Docker images and embed your application or service in them .......... 83",
    "Step 4. Define your services in docker-compose.yml when building a multi-container Docker",
    "Step 4. Define your services in docker-compose.yml when building a multi-container Docker",
    "Step 5. Build and run your Docker application .................................................................................................... 87",
    "Step 5. Build and run your Docker application .................................................................................................... 87",
    "Step 6. Test your Docker application using your local Docker host ............................................................ 89",
    "Step 6. Test your Docker application using your local Docker host ............................................................ 89",
    "iii Contents",
    "iii Contents",
    "Simplified workflow when developing containers with Visual Studio ........................................................ 90",
    "Simplified workflow when developing containers with Visual Studio ........................................................ 90",
    "Using PowerShell commands in a Dockerfile to set up Windows Containers ......................................... 91",
    "Using PowerShell commands in a Dockerfile to set up Windows Containers ......................................... 91",
    null,
    null,
    "Design a microservice-oriented application .............................................................................................................. 93",
    "Design a microservice-oriented application .............................................................................................................. 93",
    "Application specifications ............................................................................................................................................. 93",
    "Application specifications ............................................................................................................................................. 93",
    "Development team context ......................................................................................................................................... 94",
    "Development team context ......................................................................................................................................... 94",
    "Choosing an architecture .............................................................................................................................................. 94",
    "Choosing an architecture .............................................................................................................................................. 94",
    "Benefits of a microservice-based solution ............................................................................................................. 97",
    "Benefits of a microservice-based solution ............................................................................................................. 97",
    "Downsides of a microservice-based solution ....................................................................................................... 98",
    "Downsides of a microservice-based solution ....................................................................................................... 98",
    "External versus internal architecture and design patterns............................................................................... 99",
    "External versus internal architecture and design patterns............................................................................... 99",
    "The new world: multiple architectural patterns and polyglot microservices .......................................... 100",
    "The new world: multiple architectural patterns and polyglot microservices .......................................... 100",
    "Creating a simple data-driven CRUD microservice ............................................................................................... 102",
    "Creating a simple data-driven CRUD microservice ............................................................................................... 102",
    "Designing a simple CRUD microservice ................................................................................................................ 102",
    "Designing a simple CRUD microservice ................................................................................................................ 102",
    "Implementing a simple CRUD microservice with ASP.NET Core ................................................................. 103",
    "Implementing a simple CRUD microservice with ASP.NET Core ................................................................. 103",
    "The DB connection string and environment variables used by Docker containers ............................. 109",
    "The DB connection string and environment variables used by Docker containers ............................. 109",
    "Generating Swagger description metadata from your ASP.NET Core Web API ................................... 111",
    "Generating Swagger description metadata from your ASP.NET Core Web API ................................... 111",
    "Defining your multi-container application with docker-compose.yml ......................................................... 116",
    "Defining your multi-container application with docker-compose.yml ......................................................... 116",
    "Use a database server running as a container ........................................................................................................ 127",
    "Use a database server running as a container ........................................................................................................ 127",
    "SQL Server running as a container with a microservice-related database .............................................. 128",
    "SQL Server running as a container with a microservice-related database .............................................. 128",
    "Seeding with test data on Web application startup ......................................................................................... 129",
    "Seeding with test data on Web application startup ......................................................................................... 129",
    "EF Core InMemory database versus SQL Server running as a container ................................................. 132",
    "EF Core InMemory database versus SQL Server running as a container ................................................. 132",
    "Using a Redis cache service running in a container ......................................................................................... 132",
    "Using a Redis cache service running in a container ......................................................................................... 132",
    "Implementing event-based communication between microservices (integration events) ................... 133",
    "Implementing event-based communication between microservices (integration events) ................... 133",
    "Using message brokers and service buses for production systems .......................................................... 134",
    "Using message brokers and service buses for production systems .......................................................... 134",
    "Integration events .......................................................................................................................................................... 135",
    "Integration events .......................................................................................................................................................... 135",
    "The event bus .................................................................................................................................................................. 136",
    "The event bus .................................................................................................................................................................. 136",
    "Additional resources ..................................................................................................................................................... 138",
    "Additional resources ..................................................................................................................................................... 138",
    "Implementing an event bus with RabbitMQ for the development or test environment ....................... 138",
    "Implementing an event bus with RabbitMQ for the development or test environment ....................... 138",
    "Implementing a simple publish method with RabbitMQ ............................................................................... 139",
    "Implementing a simple publish method with RabbitMQ ............................................................................... 139",
    "Implementing the subscription code with the RabbitMQ API ..................................................................... 140",
    "Implementing the subscription code with the RabbitMQ API ..................................................................... 140",
    "Additional resources ..................................................................................................................................................... 141",
    "Additional resources ..................................................................................................................................................... 141",
    "iv Contents",
    "iv Contents",
    "Subscribing to events ........................................................................................................................................................ 141",
    "Subscribing to events ........................................................................................................................................................ 141",
    "Publishing events through the event bus............................................................................................................. 142",
    "Publishing events through the event bus............................................................................................................. 142",
    "Idempotency in update message events .............................................................................................................. 149",
    "Idempotency in update message events .............................................................................................................. 149",
    "Deduplicating integration event messages ......................................................................................................... 150",
    "Deduplicating integration event messages ......................................................................................................... 150",
    "Testing ASP.NET Core services and web apps ........................................................................................................ 152",
    "Testing ASP.NET Core services and web apps ........................................................................................................ 152",
    "Testing in eShopOnContainers ................................................................................................................................. 155",
    "Testing in eShopOnContainers ................................................................................................................................. 155",
    "Implement background tasks in microservices with IHostedService and the BackgroundService class",
    "Implement background tasks in microservices with IHostedService and the BackgroundService class",
    "Registering hosted services in your WebHost or Host ................................................................................... 159",
    "Registering hosted services in your WebHost or Host ................................................................................... 159",
    "The IHostedService interface ..................................................................................................................................... 159",
    "The IHostedService interface ..................................................................................................................................... 159",
    "Implementing IHostedService with a custom hosted service class deriving from the",
    "Implementing IHostedService with a custom hosted service class deriving from the",
    "Additional resources ..................................................................................................................................................... 163",
    "Additional resources ..................................................................................................................................................... 163",
    "Implement API Gateways with Ocelot ........................................................................................................................ 163",
    "Implement API Gateways with Ocelot ........................................................................................................................ 163",
    "Architect and design your API Gateways .............................................................................................................. 163",
    "Architect and design your API Gateways .............................................................................................................. 163",
    "Implementing your API Gateways with Ocelot .................................................................................................. 168",
    "Implementing your API Gateways with Ocelot .................................................................................................. 168",
    "Using Kubernetes Ingress plus Ocelot API Gateways ...................................................................................... 180",
    "Using Kubernetes Ingress plus Ocelot API Gateways ...................................................................................... 180",
    "Additional cross-cutting features in an Ocelot API Gateway ....................................................................... 181",
    "Additional cross-cutting features in an Ocelot API Gateway ....................................................................... 181",
    null,
    null,
    "Apply simplified CQRS and DDD patterns in a microservice............................................................................. 184",
    "Apply simplified CQRS and DDD patterns in a microservice............................................................................. 184",
    "Additional resources ..................................................................................................................................................... 186",
    "Additional resources ..................................................................................................................................................... 186",
    "Apply CQRS and CQS approaches in a DDD microservice in eShopOnContainers ................................. 186",
    "Apply CQRS and CQS approaches in a DDD microservice in eShopOnContainers ................................. 186",
    "CQRS and DDD patterns are not top-level architectures ............................................................................... 187",
    "CQRS and DDD patterns are not top-level architectures ............................................................................... 187",
    "Implement reads/queries in a CQRS microservice ................................................................................................ 188",
    "Implement reads/queries in a CQRS microservice ................................................................................................ 188",
    "Use ViewModels specifically made for client apps, independent from domain model constraints",
    "Use ViewModels specifically made for client apps, independent from domain model constraints",
    "Use Dapper as a micro ORM to perform queries .............................................................................................. 189",
    "Use Dapper as a micro ORM to perform queries .............................................................................................. 189",
    "Dynamic versus static ViewModels ......................................................................................................................... 190",
    "Dynamic versus static ViewModels ......................................................................................................................... 190",
    "Additional resources ..................................................................................................................................................... 193",
    "Additional resources ..................................................................................................................................................... 193",
    "Design a DDD-oriented microservice ......................................................................................................................... 194",
    "Design a DDD-oriented microservice ......................................................................................................................... 194",
    "Keep the microservice context boundaries relatively small .......................................................................... 194",
    "Keep the microservice context boundaries relatively small .......................................................................... 194",
    "Layers in DDD microservices ..................................................................................................................................... 195",
    "Layers in DDD microservices ..................................................................................................................................... 195",
    "v Contents",
    "v Contents",
    "Design a microservice domain model ........................................................................................................................ 199",
    "Design a microservice domain model ........................................................................................................................ 199",
    "The Domain Entity pattern ......................................................................................................................................... 199",
    "The Domain Entity pattern ......................................................................................................................................... 199",
    "Implement a microservice domain model with .NET ............................................................................................ 204",
    "Implement a microservice domain model with .NET ............................................................................................ 204",
    "Domain model structure in a custom .NET Standard Library ....................................................................... 204",
    "Domain model structure in a custom .NET Standard Library ....................................................................... 204",
    "Structure aggregates in a custom .NET Standard library ............................................................................... 205",
    "Structure aggregates in a custom .NET Standard library ............................................................................... 205",
    "Implement domain entities as POCO classes ..................................................................................................... 206",
    "Implement domain entities as POCO classes ..................................................................................................... 206",
    "Encapsulate data in the Domain Entities .............................................................................................................. 207",
    "Encapsulate data in the Domain Entities .............................................................................................................. 207",
    "Seedwork (reusable base classes and interfaces for your domain model) .................................................. 210",
    "Seedwork (reusable base classes and interfaces for your domain model) .................................................. 210",
    "The custom Entity base class ..................................................................................................................................... 211",
    "The custom Entity base class ..................................................................................................................................... 211",
    "Repository contracts (interfaces) in the domain model layer ...................................................................... 212",
    "Repository contracts (interfaces) in the domain model layer ...................................................................... 212",
    "Additional resources ..................................................................................................................................................... 213",
    "Additional resources ..................................................................................................................................................... 213",
    "Implement value objects .................................................................................................................................................. 213",
    "Implement value objects .................................................................................................................................................. 213",
    "Important characteristics of value objects ........................................................................................................... 214",
    "Important characteristics of value objects ........................................................................................................... 214",
    "Value object implementation in C# ........................................................................................................................ 215",
    "Value object implementation in C# ........................................................................................................................ 215",
    "How to persist value objects in the database with EF Core 2.0 and later ................................................ 217",
    "How to persist value objects in the database with EF Core 2.0 and later ................................................ 217",
    "Persist value objects as owned entity types in EF Core 2.0 and later ........................................................ 218",
    "Persist value objects as owned entity types in EF Core 2.0 and later ........................................................ 218",
    "Additional resources ..................................................................................................................................................... 221",
    "Additional resources ..................................................................................................................................................... 221",
    "Use enumeration classes instead of enum types ................................................................................................... 221",
    "Use enumeration classes instead of enum types ................................................................................................... 221",
    "Implement an Enumeration base class .................................................................................................................. 222",
    "Implement an Enumeration base class .................................................................................................................. 222",
    "Additional resources ..................................................................................................................................................... 223",
    "Additional resources ..................................................................................................................................................... 223",
    "Design validations in the domain model layer ....................................................................................................... 223",
    "Design validations in the domain model layer ....................................................................................................... 223",
    "Implement validations in the domain model layer ........................................................................................... 224",
    "Implement validations in the domain model layer ........................................................................................... 224",
    "Additional resources ..................................................................................................................................................... 225",
    "Additional resources ..................................................................................................................................................... 225",
    "Client-side validation (validation in the presentation layers) ............................................................................ 226",
    "Client-side validation (validation in the presentation layers) ............................................................................ 226",
    "Additional resources ..................................................................................................................................................... 227",
    "Additional resources ..................................................................................................................................................... 227",
    "Domain events: Design and implementation .......................................................................................................... 227",
    "Domain events: Design and implementation .......................................................................................................... 227",
    "What is a domain event? ............................................................................................................................................. 228",
    "What is a domain event? ............................................................................................................................................. 228",
    "Domain events versus integration events ............................................................................................................ 228",
    "Domain events versus integration events ............................................................................................................ 228",
    "Domain events as a preferred way to trigger side effects across multiple aggregates within the",
    "Domain events as a preferred way to trigger side effects across multiple aggregates within the",
    "Implement domain events .......................................................................................................................................... 231",
    "Implement domain events .......................................................................................................................................... 231",
    "Conclusions on domain events ................................................................................................................................. 237",
    "Conclusions on domain events ................................................................................................................................. 237",
    "vi Contents",
    "vi Contents",
    "Additional resources ..................................................................................................................................................... 238",
    "Additional resources ..................................................................................................................................................... 238",
    "Design the infrastructure persistence layer .............................................................................................................. 238",
    "Design the infrastructure persistence layer .............................................................................................................. 238",
    "The Repository pattern ................................................................................................................................................ 238",
    "The Repository pattern ................................................................................................................................................ 238",
    "Additional resources ..................................................................................................................................................... 243",
    "Additional resources ..................................................................................................................................................... 243",
    "Implement the infrastructure persistence layer with Entity Framework Core ............................................ 243",
    "Implement the infrastructure persistence layer with Entity Framework Core ............................................ 243",
    "Introduction to Entity Framework Core ................................................................................................................. 244",
    "Introduction to Entity Framework Core ................................................................................................................. 244",
    "Infrastructure in Entity Framework Core from a DDD perspective ............................................................. 244",
    "Infrastructure in Entity Framework Core from a DDD perspective ............................................................. 244",
    "Implement custom repositories with Entity Framework Core ...................................................................... 246",
    "Implement custom repositories with Entity Framework Core ...................................................................... 246",
    "EF DbContext and IUnitOfWork instance lifetime in your IoC container ................................................. 248",
    "EF DbContext and IUnitOfWork instance lifetime in your IoC container ................................................. 248",
    "The repository instance lifetime in your IoC container ................................................................................... 249",
    "The repository instance lifetime in your IoC container ................................................................................... 249",
    "Table mapping ................................................................................................................................................................ 250",
    "Table mapping ................................................................................................................................................................ 250",
    "Implement the Query Specification pattern ........................................................................................................ 253",
    "Implement the Query Specification pattern ........................................................................................................ 253",
    "Use NoSQL databases as a persistence infrastructure ......................................................................................... 255",
    "Use NoSQL databases as a persistence infrastructure ......................................................................................... 255",
    "Introduction to Azure Cosmos DB and the native Cosmos DB API ........................................................... 256",
    "Introduction to Azure Cosmos DB and the native Cosmos DB API ........................................................... 256",
    "Implement .NET code targeting MongoDB and Azure Cosmos DB .......................................................... 258",
    "Implement .NET code targeting MongoDB and Azure Cosmos DB .......................................................... 258",
    "Design the microservice application layer and Web API .................................................................................... 266",
    "Design the microservice application layer and Web API .................................................................................... 266",
    "Use SOLID principles and Dependency Injection .............................................................................................. 266",
    "Use SOLID principles and Dependency Injection .............................................................................................. 266",
    "Implement the microservice application layer using the Web API ................................................................. 267",
    "Implement the microservice application layer using the Web API ................................................................. 267",
    "Use Dependency Injection to inject infrastructure objects into your application layer ..................... 267",
    "Use Dependency Injection to inject infrastructure objects into your application layer ..................... 267",
    "Implement the Command and Command Handler patterns ....................................................................... 271",
    "Implement the Command and Command Handler patterns ....................................................................... 271",
    "The Command process pipeline: how to trigger a command handler ..................................................... 278",
    "The Command process pipeline: how to trigger a command handler ..................................................... 278",
    "Implement the command process pipeline with a mediator pattern (MediatR) .................................. 281",
    "Implement the command process pipeline with a mediator pattern (MediatR) .................................. 281",
    "Apply cross-cutting concerns when processing commands with the Behaviors in MediatR .......... 287",
    "Apply cross-cutting concerns when processing commands with the Behaviors in MediatR .......... 287",
    null,
    null,
    "Handle partial failure ......................................................................................................................................................... 292",
    "Handle partial failure ......................................................................................................................................................... 292",
    "Strategies to handle partial failure ............................................................................................................................... 294",
    "Strategies to handle partial failure ............................................................................................................................... 294",
    "Additional resources ..................................................................................................................................................... 295",
    "Additional resources ..................................................................................................................................................... 295",
    "Implement retries with exponential backoff ............................................................................................................ 295",
    "Implement retries with exponential backoff ............................................................................................................ 295",
    "Implement resilient Entity Framework Core SQL connections.......................................................................... 295",
    "Implement resilient Entity Framework Core SQL connections.......................................................................... 295",
    "Execution strategies and explicit transactions using BeginTransaction and multiple DbContexts296",
    "Execution strategies and explicit transactions using BeginTransaction and multiple DbContexts296",
    "Additional resources ..................................................................................................................................................... 298",
    "Additional resources ..................................................................................................................................................... 298",
    "Use IHttpClientFactory to implement resilient HTTP requests ......................................................................... 298",
    "Use IHttpClientFactory to implement resilient HTTP requests ......................................................................... 298",
    "vii Contents",
    "vii Contents",
    "Issues with the original HttpClient class available in .NET ............................................................................. 298",
    "Issues with the original HttpClient class available in .NET ............................................................................. 298",
    "Benefits of using IHttpClientFactory ....................................................................................................................... 299",
    "Benefits of using IHttpClientFactory ....................................................................................................................... 299",
    "Multiple ways to use IHttpClientFactory ............................................................................................................... 300",
    "Multiple ways to use IHttpClientFactory ............................................................................................................... 300",
    "How to use Typed Clients with IHttpClientFactory ........................................................................................... 300",
    "How to use Typed Clients with IHttpClientFactory ........................................................................................... 300",
    "Additional resources ..................................................................................................................................................... 304",
    "Additional resources ..................................................................................................................................................... 304",
    "Implement HTTP call retries with exponential backoff with IHttpClientFactory and Polly policies ... 304",
    "Implement HTTP call retries with exponential backoff with IHttpClientFactory and Polly policies ... 304",
    "Add a jitter strategy to the retry policy ................................................................................................................. 305",
    "Add a jitter strategy to the retry policy ................................................................................................................. 305",
    "Additional resources ..................................................................................................................................................... 306",
    "Additional resources ..................................................................................................................................................... 306",
    "Implement the Circuit Breaker pattern ....................................................................................................................... 306",
    "Implement the Circuit Breaker pattern ....................................................................................................................... 306",
    "Implement Circuit Breaker pattern with IHttpClientFactory and Polly ..................................................... 307",
    "Implement Circuit Breaker pattern with IHttpClientFactory and Polly ..................................................... 307",
    "Test Http retries and circuit breakers in eShopOnContainers ...................................................................... 308",
    "Test Http retries and circuit breakers in eShopOnContainers ...................................................................... 308",
    "Additional resources ..................................................................................................................................................... 310",
    "Additional resources ..................................................................................................................................................... 310",
    "Health monitoring .............................................................................................................................................................. 310",
    "Health monitoring .............................................................................................................................................................. 310",
    "Implement health checks in ASP.NET Core services ........................................................................................ 311",
    "Implement health checks in ASP.NET Core services ........................................................................................ 311",
    "Use watchdogs ................................................................................................................................................................ 315",
    "Use watchdogs ................................................................................................................................................................ 315",
    "Health checks when using orchestrators .............................................................................................................. 317",
    "Health checks when using orchestrators .............................................................................................................. 317",
    "Advanced monitoring: visualization, analysis, and alerts ............................................................................... 317",
    "Advanced monitoring: visualization, analysis, and alerts ............................................................................... 317",
    "Additional resources ..................................................................................................................................................... 318",
    "Additional resources ..................................................................................................................................................... 318",
    null,
    null,
    "Implement authentication in .NET microservices and web applications ...................................................... 319",
    "Implement authentication in .NET microservices and web applications ...................................................... 319",
    "Authenticate with ASP.NET Core Identity ............................................................................................................. 320",
    "Authenticate with ASP.NET Core Identity ............................................................................................................. 320",
    "Authenticate with external providers ..................................................................................................................... 321",
    "Authenticate with external providers ..................................................................................................................... 321",
    "Authenticate with bearer tokens .............................................................................................................................. 323",
    "Authenticate with bearer tokens .............................................................................................................................. 323",
    "Authenticate with an OpenID Connect or OAuth 2.0 Identity provider ................................................... 324",
    "Authenticate with an OpenID Connect or OAuth 2.0 Identity provider ................................................... 324",
    "Issue security tokens from an ASP.NET Core service ....................................................................................... 325",
    "Issue security tokens from an ASP.NET Core service ....................................................................................... 325",
    "Consume security tokens ............................................................................................................................................ 326",
    "Consume security tokens ............................................................................................................................................ 326",
    "Additional resources .......................................................................................................................................................... 327",
    "Additional resources .......................................................................................................................................................... 327",
    "About authorization in .NET microservices and web applications .................................................................. 327",
    "About authorization in .NET microservices and web applications .................................................................. 327",
    "Implement role-based authorization ..................................................................................................................... 328",
    "Implement role-based authorization ..................................................................................................................... 328",
    "Implement policy-based authorization ................................................................................................................. 329",
    "Implement policy-based authorization ................................................................................................................. 329",
    "Authorization and minimal apis ............................................................................................................................... 330",
    "Authorization and minimal apis ............................................................................................................................... 330",
    "Additional resources ..................................................................................................................................................... 330",
    "Additional resources ..................................................................................................................................................... 330",
    "viii Contents",
    "viii Contents",
    "Store application secrets safely during development .......................................................................................... 330",
    "Store application secrets safely during development .......................................................................................... 330",
    "Store secrets in environment variables ................................................................................................................. 331",
    "Store secrets in environment variables ................................................................................................................. 331",
    "Store secrets with the ASP.NET Core Secret Manager .................................................................................... 331",
    "Store secrets with the ASP.NET Core Secret Manager .................................................................................... 331",
    "Use Azure Key Vault to protect secrets at production time .............................................................................. 332",
    "Use Azure Key Vault to protect secrets at production time .............................................................................. 332",
    "Additional resources ..................................................................................................................................................... 333",
    "Additional resources ..................................................................................................................................................... 333",
    null,
    null,
    "ix Contents",
    "ix Contents",
    null,
    null,
    "Containerization is an approach to software development in which an application or service, its",
    "Containerization is an approach to software development in which an application or service, its",
    "Just as shipping containers allow goods to be transported by ship, train, or truck regardless of the",
    "Just as shipping containers allow goods to be transported by ship, train, or truck regardless of the",
    "Containers also isolate applications from each other on a shared OS. Containerized applications run",
    "Containers also isolate applications from each other on a shared OS. Containerized applications run",
    "Each container can run a whole web application or a service, as shown in Figure 2-1. In this example,",
    "Each container can run a whole web application or a service, as shown in Figure 2-1. In this example,",
    null,
    null,
    "1 CHAPTER 1 | Introduction to Containers and Docker",
    "1 CHAPTER 1 | Introduction to Containers and Docker",
    "Another benefit of containerization is scalability. You can scale out quickly by creating new containers",
    "Another benefit of containerization is scalability. You can scale out quickly by creating new containers",
    "In short, containers offer the benefits of isolation, portability, agility, scalability, and control across the",
    "In short, containers offer the benefits of isolation, portability, agility, scalability, and control across the",
    null,
    null,
    null,
    null,
    "Docker containers can run anywhere, on-premises in the customer datacenter, in an external service",
    "Docker containers can run anywhere, on-premises in the customer datacenter, in an external service",
    "Developers can use development environments on Windows, Linux, or macOS. On the development",
    "Developers can use development environments on Windows, Linux, or macOS. On the development",
    "2 CHAPTER 1 | Introduction to Containers and Docker",
    "2 CHAPTER 1 | Introduction to Containers and Docker",
    "directly on macOS.) Developers who work on Windows can create images for either Linux or Windows",
    "directly on macOS.) Developers who work on Windows can create images for either Linux or Windows",
    "To host containers in development environments and provide additional developer tools, Docker",
    "To host containers in development environments and provide additional developer tools, Docker",
    null,
    null,
    "Windows Server Containers provide application isolation through process and namespace",
    "Windows Server Containers provide application isolation through process and namespace",
    "Hyper-V Containers expand on the isolation provided by Windows Server Containers by",
    "Hyper-V Containers expand on the isolation provided by Windows Server Containers by",
    "The images for these containers are created the same way and function the same. The difference is in",
    "The images for these containers are created the same way and function the same. The difference is in",
    "Figure 2-3 shows a comparison between VMs and Docker containers.",
    "Figure 2-3 shows a comparison between VMs and Docker containers.",
    "|Virtual Machines|Docker Containers|",
    "|Virtual Machines|Docker Containers|",
    "3 CHAPTER 1 | Introduction to Containers and Docker",
    "3 CHAPTER 1 | Introduction to Containers and Docker",
    "|Virtual Machines|Docker Containers|",
    "|Virtual Machines|Docker Containers|",
    null,
    null,
    "For VMs, there are three base layers in the host server, from the bottom-up: infrastructure, Host",
    "For VMs, there are three base layers in the host server, from the bottom-up: infrastructure, Host",
    "Because containers require far fewer resources (for example, they don\u2019t need a full OS), they\u2019re easy to",
    "Because containers require far fewer resources (for example, they don\u2019t need a full OS), they\u2019re easy to",
    "As a side effect of running on the same kernel, you get less isolation than VMs.",
    "As a side effect of running on the same kernel, you get less isolation than VMs.",
    "The main goal of an image is that it makes the environment (dependencies) the same across different",
    "The main goal of an image is that it makes the environment (dependencies) the same across different",
    "A container image is a way to package an app or service and deploy it in a reliable and reproducible",
    "A container image is a way to package an app or service and deploy it in a reliable and reproducible",
    "When using Docker, you won\u2019t hear developers say, \u201cIt works on my machine, why not in production?\u201d",
    "When using Docker, you won\u2019t hear developers say, \u201cIt works on my machine, why not in production?\u201d",
    "Perhaps a simple analogy can help getting the grasp of the core concept of Docker.",
    "Perhaps a simple analogy can help getting the grasp of the core concept of Docker.",
    "Let\u2019s go back in time to the 1950s for a moment. There were no word processors, and the",
    "Let\u2019s go back in time to the 1950s for a moment. There were no word processors, and the",
    "Imagine you\u2019re responsible for quickly issuing batches of letters as required, to mail them to",
    "Imagine you\u2019re responsible for quickly issuing batches of letters as required, to mail them to",
    "At some point, you realize the letters are just a composition of a large set of paragraphs, which are",
    "At some point, you realize the letters are just a composition of a large set of paragraphs, which are",
    "The system is simple:",
    "The system is simple:",
    "You begin with a deck of transparent sheets containing one paragraph each.",
    "You begin with a deck of transparent sheets containing one paragraph each.",
    "4 CHAPTER 1 | Introduction to Containers and Docker",
    "4 CHAPTER 1 | Introduction to Containers and Docker",
    "To issue a set of letters, you pick the sheets with the paragraphs you need, then you stack and",
    "To issue a set of letters, you pick the sheets with the paragraphs you need, then you stack and",
    "Finally, you place the set in the photocopier and press start to produce as many letters as",
    "Finally, you place the set in the photocopier and press start to produce as many letters as",
    "So, simplifying, that\u2019s the core idea of Docker.",
    "So, simplifying, that\u2019s the core idea of Docker.",
    "In Docker, each layer is the resulting set of changes that happen to the filesystem after executing a",
    "In Docker, each layer is the resulting set of changes that happen to the filesystem after executing a",
    "So, when you \u201clook\u201d at the filesystem after the layer has been copied, you see all the files, included in",
    "So, when you \u201clook\u201d at the filesystem after the layer has been copied, you see all the files, included in",
    "You can think of an image as an auxiliary read-only hard disk ready to be installed in a \u201ccomputer\u201d",
    "You can think of an image as an auxiliary read-only hard disk ready to be installed in a \u201ccomputer\u201d",
    "Similarly, you can think of a container as the \u201ccomputer\u201d with the image hard disk installed. The",
    "Similarly, you can think of a container as the \u201ccomputer\u201d with the image hard disk installed. The",
    "This section lists terms and definitions you should be familiar with before getting deeper into Docker.",
    "This section lists terms and definitions you should be familiar with before getting deeper into Docker.",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "5 CHAPTER 1 | Introduction to Containers and Docker",
    "5 CHAPTER 1 | Introduction to Containers and Docker",
    "layered filesystem, it\u2019s just the filesystem as usual. Volumes live in the host system and are managed",
    "layered filesystem, it\u2019s just the filesystem as usual. Volumes live in the host system and are managed",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "6 CHAPTER 1 | Introduction to Containers and Docker",
    "6 CHAPTER 1 | Introduction to Containers and Docker",
    "you can deploy the whole multi-container application with a single command (docker-compose up)",
    "you can deploy the whole multi-container application with a single command (docker-compose up)",
    null,
    null,
    null,
    null,
    "When using Docker, a developer creates an app or service and packages it and its dependencies into",
    "When using Docker, a developer creates an app or service and packages it and its dependencies into",
    "To run the app or service, the app\u2019s image is instantiated to create a container, which will be running",
    "To run the app or service, the app\u2019s image is instantiated to create a container, which will be running",
    "Developers should store images in a registry, which acts as a library of images and is needed when",
    "Developers should store images in a registry, which acts as a library of images and is needed when",
    "Figure 2-4 shows how images and registries in Docker relate to other components. It also shows the",
    "Figure 2-4 shows how images and registries in Docker relate to other components. It also shows the",
    "7 CHAPTER 1 | Introduction to Containers and Docker",
    "7 CHAPTER 1 | Introduction to Containers and Docker",
    null,
    null,
    "The registry is like a bookshelf where images are stored and available to be pulled for building",
    "The registry is like a bookshelf where images are stored and available to be pulled for building",
    "Putting images in a registry lets you store static and immutable application bits, including all their",
    "Putting images in a registry lets you store static and immutable application bits, including all their",
    "Private image registries, either hosted on-premises or in the cloud, are recommended when:",
    "Private image registries, either hosted on-premises or in the cloud, are recommended when:",
    "Your images must not be shared publicly due to confidentiality.",
    "Your images must not be shared publicly due to confidentiality.",
    "You want to have minimum network latency between your images and your chosen",
    "You want to have minimum network latency between your images and your chosen",
    "8 CHAPTER 1 | Introduction to Containers and Docker",
    "8 CHAPTER 1 | Introduction to Containers and Docker",
    null,
    null,
    "There are two supported frameworks for building server-side containerized Docker applications with",
    "There are two supported frameworks for building server-side containerized Docker applications with",
    "This section provides a summary of when to choose .NET 7 or .NET Framework. We provide more",
    "This section provides a summary of when to choose .NET 7 or .NET Framework. We provide more",
    "Use .NET 7, with Linux or Windows Containers, for your containerized Docker server application when:",
    "Use .NET 7, with Linux or Windows Containers, for your containerized Docker server application when:",
    "You have cross-platform needs. For example, you want to use both Linux and Windows",
    "You have cross-platform needs. For example, you want to use both Linux and Windows",
    "Your application architecture is based on microservices.",
    "Your application architecture is based on microservices.",
    "You need to start containers fast and want a small footprint per container to achieve better",
    "You need to start containers fast and want a small footprint per container to achieve better",
    "In short, when you create new containerized .NET applications, you should consider .NET 7 as the",
    "In short, when you create new containerized .NET applications, you should consider .NET 7 as the",
    "An extra benefit of using .NET 7 is that you can run side-by-side .NET versions for applications within",
    "An extra benefit of using .NET 7 is that you can run side-by-side .NET versions for applications within",
    "Use .NET Framework for your containerized Docker server application when:",
    "Use .NET Framework for your containerized Docker server application when:",
    "Your application currently uses .NET Framework and has strong dependencies on Windows.",
    "Your application currently uses .NET Framework and has strong dependencies on Windows.",
    "9 CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "9 CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "You need to use Windows APIs that are not supported by .NET 7.",
    "You need to use Windows APIs that are not supported by .NET 7.",
    "You need to use third-party .NET libraries or NuGet packages that are not available for .NET 7.",
    "You need to use third-party .NET libraries or NuGet packages that are not available for .NET 7.",
    "Using .NET Framework on Docker can improve your deployment experiences by minimizing",
    "Using .NET Framework on Docker can improve your deployment experiences by minimizing",
    null,
    null,
    null,
    null,
    null,
    null,
    "The modularity and lightweight nature of .NET 7 makes it perfect for containers. When you deploy",
    "The modularity and lightweight nature of .NET 7 makes it perfect for containers. When you deploy",
    "Additionally, .NET 7 is cross-platform, so you can deploy server apps with Linux or Windows container",
    "Additionally, .NET 7 is cross-platform, so you can deploy server apps with Linux or Windows container",
    "The following is a more detailed explanation of why to choose .NET 7.",
    "The following is a more detailed explanation of why to choose .NET 7.",
    "Clearly, if your goal is to have an application (web app or service) that can run on multiple platforms",
    "Clearly, if your goal is to have an application (web app or service) that can run on multiple platforms",
    ".NET 7 also supports macOS as a development platform. However, when you deploy containers to a",
    ".NET 7 also supports macOS as a development platform. However, when you deploy containers to a",
    null,
    null,
    null,
    null,
    null,
    null,
    "10 CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "10 CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "can use it to develop containerized apps on the machine in conjunction with the Docker CLI and the",
    "can use it to develop containerized apps on the machine in conjunction with the Docker CLI and the",
    null,
    null,
    "Containers are commonly used in conjunction with a microservices architecture, although they can",
    "Containers are commonly used in conjunction with a microservices architecture, although they can",
    "You could use the traditional .NET Framework for building microservices-based applications (without",
    "You could use the traditional .NET Framework for building microservices-based applications (without",
    "On the other hand, .NET 7 is the best candidate if you\u2019re embracing a microservices-oriented system",
    "On the other hand, .NET 7 is the best candidate if you\u2019re embracing a microservices-oriented system",
    "A microservice is meant to be as small as possible: to be light when spinning up, to have a small",
    "A microservice is meant to be as small as possible: to be light when spinning up, to have a small",
    "A microservices architecture also allows you to mix technologies across a service boundary. This",
    "A microservices architecture also allows you to mix technologies across a service boundary. This",
    "When your container-based system needs the best possible density, granularity, and performance,",
    "When your container-based system needs the best possible density, granularity, and performance,",
    "This approach is especially relevant for microservices architectures, where you could have hundreds of",
    "This approach is especially relevant for microservices architectures, where you could have hundreds of",
    "11 CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "11 CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "While .NET 7 offers significant benefits for new applications and application patterns, .NET Framework",
    "While .NET 7 offers significant benefits for new applications and application patterns, .NET Framework",
    "You might want to use Docker containers just to simplify deployment, even if you are not creating",
    "You might want to use Docker containers just to simplify deployment, even if you are not creating",
    "In most cases for this scenario, you will not need to migrate your existing applications to .NET 7; you",
    "In most cases for this scenario, you will not need to migrate your existing applications to .NET 7; you",
    null,
    null,
    null,
    null,
    "However, even with that exceptional progression since .NET Standard 2.0 and .NET Core 2.1 or later,",
    "However, even with that exceptional progression since .NET Standard 2.0 and .NET Core 2.1 or later,",
    "Some .NET Framework technologies aren\u2019t available in .NET 7. Some of them might become available",
    "Some .NET Framework technologies aren\u2019t available in .NET 7. Some of them might become available",
    "The following list shows most of the technologies that aren\u2019t available in .NET 7:",
    "The following list shows most of the technologies that aren\u2019t available in .NET 7:",
    "12 CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "12 CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "ASP.NET Web Forms. This technology is only available on .NET Framework. Currently there are",
    "ASP.NET Web Forms. This technology is only available on .NET Framework. Currently there are",
    "Workflow-related services. Windows Workflow Foundation (WF), Workflow Services (WCF +",
    "Workflow-related services. Windows Workflow Foundation (WF), Workflow Services (WCF +",
    null,
    null,
    "Some Microsoft and third-party platforms don\u2019t support .NET 7. For example, some Azure services",
    "Some Microsoft and third-party platforms don\u2019t support .NET 7. For example, some Azure services",
    "In the meantime, if any platform or service in Azure still doesn\u2019t support .NET 7 with its client API, you",
    "In the meantime, if any platform or service in Azure still doesn\u2019t support .NET 7 with its client API, you",
    ".NET Core is a revolutionary step forward from .NET Framework. It offers a host of advantages over",
    ".NET Core is a revolutionary step forward from .NET Framework. It offers a host of advantages over",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "The following decision table summarizes whether to use .NET Framework or .NET 7. Remember that",
    "The following decision table summarizes whether to use .NET Framework or .NET 7. Remember that",
    "13 CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "13 CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "|Architecture / App Type|Linux containers|Windows Containers|",
    "|Architecture / App Type|Linux containers|Windows Containers|",
    "Given the diversity of operating systems supported by Docker and the differences between .NET",
    "Given the diversity of operating systems supported by Docker and the differences between .NET",
    "For Windows, you can use Windows Server Core or Windows Nano Server. These Windows versions",
    "For Windows, you can use Windows Server Core or Windows Nano Server. These Windows versions",
    "For Linux, multiple distros are available and supported in official .NET Docker images (like Debian).",
    "For Linux, multiple distros are available and supported in official .NET Docker images (like Debian).",
    "14 CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "14 CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "In Figure 3-1, you can see the possible OS version depending on the .NET framework used.",
    "In Figure 3-1, you can see the possible OS version depending on the .NET framework used.",
    null,
    null,
    "When deploying legacy .NET Framework applications you have to target Windows Server Core,",
    "When deploying legacy .NET Framework applications you have to target Windows Server Core,",
    "You can also create your own Docker image in cases where you want to use a different Linux distro or",
    "You can also create your own Docker image in cases where you want to use a different Linux distro or",
    "When you add the image name to your Dockerfile file, you can select the operating system and",
    "When you add the image name to your Dockerfile file, you can select the operating system and",
    "|Image|Comments|",
    "|Image|Comments|",
    "15 CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "15 CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "The Official .NET Docker images are Docker images created and optimized by Microsoft. They\u2019re",
    "The Official .NET Docker images are Docker images created and optimized by Microsoft. They\u2019re",
    "Each repository can contain multiple images, depending on .NET versions, and depending on the OS",
    "Each repository can contain multiple images, depending on .NET versions, and depending on the OS",
    "When building Docker images for developers, Microsoft focused on the following main scenarios:",
    "When building Docker images for developers, Microsoft focused on the following main scenarios:",
    "Images used to ",
    "Images used to ",
    "Images used to ",
    "Images used to ",
    "Why multiple images? When developing, building, and running containerized applications, you usually",
    "Why multiple images? When developing, building, and running containerized applications, you usually",
    null,
    null,
    "During development, what is important is how fast you can iterate changes, and the ability to debug",
    "During development, what is important is how fast you can iterate changes, and the ability to debug",
    "Why is this type of build image important? You don\u2019t deploy this image to production. Instead, it\u2019s an",
    "Why is this type of build image important? You don\u2019t deploy this image to production. Instead, it\u2019s an",
    null,
    null,
    "What is important in production is how fast you can deploy and start your containers based on a",
    "What is important in production is how fast you can deploy and start your containers based on a",
    "16 CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "16 CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "In this optimized image, you put only the binaries and other content needed to run the application.",
    "In this optimized image, you put only the binaries and other content needed to run the application.",
    "Although there are multiple versions of the .NET and ASP.NET Core images, they all share one or more",
    "Although there are multiple versions of the .NET and ASP.NET Core images, they all share one or more",
    "When you explore the .NET image repositories at Microsoft Artifact Registry, you\u2019ll find multiple image",
    "When you explore the .NET image repositories at Microsoft Artifact Registry, you\u2019ll find multiple image",
    "|Image|Comments|",
    "|Image|Comments|",
    null,
    null,
    "17 CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    "17 CHAPTER 2 | Choosing Between .NET and .NET Framework for Docker Containers",
    null,
    null,
    null,
    null,
    "Earlier in this guide, you learned basic concepts about containers and Docker. That information was",
    "Earlier in this guide, you learned basic concepts about containers and Docker. That information was",
    "Enterprise applications can be complex and are often composed of multiple services instead of a",
    "Enterprise applications can be complex and are often composed of multiple services instead of a",
    "In the container model, a container image instance represents a single process. By defining a",
    "In the container model, a container image instance represents a single process. By defining a",
    null,
    null,
    "If the process fails, the container ends, and the orchestrator takes over. If the orchestrator was",
    "If the process fails, the container ends, and the orchestrator takes over. If the orchestrator was",
    "18 CHAPTER 3 | Architecting container and microservice-based applications",
    "18 CHAPTER 3 | Architecting container and microservice-based applications",
    "You might find a scenario where you want multiple processes running in a single container. For that",
    "You might find a scenario where you want multiple processes running in a single container. For that",
    "You might want to build a single, monolithically deployed web application or service and deploy it as",
    "You might want to build a single, monolithically deployed web application or service and deploy it as",
    "To manage this model, you deploy a single container to represent the application. To increase",
    "To manage this model, you deploy a single container to represent the application. To increase",
    null,
    null,
    "You can include multiple components, libraries, or internal layers in each container, as illustrated in",
    "You can include multiple components, libraries, or internal layers in each container, as illustrated in",
    "The downside of this approach becomes evident if the application grows, requiring it to scale. If the",
    "The downside of this approach becomes evident if the application grows, requiring it to scale. If the",
    "For example, in a typical e-commerce application, you likely need to scale the product information",
    "For example, in a typical e-commerce application, you likely need to scale the product information",
    "19 CHAPTER 3 | Architecting container and microservice-based applications",
    "19 CHAPTER 3 | Architecting container and microservice-based applications",
    "their basket than use the payment pipeline. Fewer customers add comments or view their purchase",
    "their basket than use the payment pipeline. Fewer customers add comments or view their purchase",
    "There are multiple ways to scale an application-horizontal duplication, splitting different areas of the",
    "There are multiple ways to scale an application-horizontal duplication, splitting different areas of the",
    "However, the monolithic approach is common, because the development of the application is initially",
    "However, the monolithic approach is common, because the development of the application is initially",
    "From an infrastructure perspective, each server can run many applications within the same host and",
    "From an infrastructure perspective, each server can run many applications within the same host and",
    null,
    null,
    "Monolithic applications in Microsoft Azure can be deployed using dedicated VMs for each instance.",
    "Monolithic applications in Microsoft Azure can be deployed using dedicated VMs for each instance.",
    "As a QA environment or a limited production environment, you can deploy multiple Docker host VMs",
    "As a QA environment or a limited production environment, you can deploy multiple Docker host VMs",
    "20 CHAPTER 3 | Architecting container and microservice-based applications",
    "20 CHAPTER 3 | Architecting container and microservice-based applications",
    null,
    null,
    "Deployment to the various hosts can be managed with traditional deployment techniques. Docker",
    "Deployment to the various hosts can be managed with traditional deployment techniques. Docker",
    "There are benefits to using containers to manage monolithic application deployments. Scaling",
    "There are benefits to using containers to manage monolithic application deployments. Scaling",
    "Deploying updates as Docker images is far faster and network efficient. Docker images typically start",
    "Deploying updates as Docker images is far faster and network efficient. Docker images typically start",
    "Because containers are immutable by design, you never need to worry about corrupted VMs. In",
    "Because containers are immutable by design, you never need to worry about corrupted VMs. In",
    "While monolithic applications can benefit from Docker, we\u2019re touching only on the benefits.",
    "While monolithic applications can benefit from Docker, we\u2019re touching only on the benefits.",
    "Whether you want to get validation of a container deployed to Azure or when an application is simply",
    "Whether you want to get validation of a container deployed to Azure or when an application is simply",
    "21 CHAPTER 3 | Architecting container and microservice-based applications",
    "21 CHAPTER 3 | Architecting container and microservice-based applications",
    null,
    null,
    "Without Docker, if you needed other capabilities, frameworks, or dependencies that aren\u2019t supported",
    "Without Docker, if you needed other capabilities, frameworks, or dependencies that aren\u2019t supported",
    "Container support in Visual Studio 2017 and later gives you the ability to include whatever you want",
    "Container support in Visual Studio 2017 and later gives you the ability to include whatever you want",
    "As also shown in Figure 4-4, the publish flow pushes an image through a container registry. This can",
    "As also shown in Figure 4-4, the publish flow pushes an image through a container registry. This can",
    "In most cases, you can think of a container as an instance of a process. A process doesn\u2019t maintain",
    "In most cases, you can think of a container as an instance of a process. A process doesn\u2019t maintain",
    "22 CHAPTER 3 | Architecting container and microservice-based applications",
    "22 CHAPTER 3 | Architecting container and microservice-based applications",
    "should assume that container images, like processes, have multiple instances or will eventually be",
    "should assume that container images, like processes, have multiple instances or will eventually be",
    "The following solutions are used to manage data in Docker applications:",
    "The following solutions are used to manage data in Docker applications:",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "From remote storage:",
    "From remote storage:",
    null,
    null,
    null,
    null,
    "From the Docker container:",
    "From the Docker container:",
    null,
    null,
    "However, using Docker Volumes is now the preferred way to handle local data in Docker. If you need",
    "However, using Docker Volumes is now the preferred way to handle local data in Docker. If you need",
    "The following provides more detail about these options:",
    "The following provides more detail about these options:",
    null,
    null,
    "Volumes can be named or anonymous (the default). Named volumes are the evolution of ",
    "Volumes can be named or anonymous (the default). Named volumes are the evolution of ",
    null,
    null,
    "23 CHAPTER 3 | Architecting container and microservice-based applications",
    "23 CHAPTER 3 | Architecting container and microservice-based applications",
    null,
    null,
    "As shown in Figure 4-5, regular Docker volumes can be stored outside of the containers themselves",
    "As shown in Figure 4-5, regular Docker volumes can be stored outside of the containers themselves",
    null,
    null,
    "Volumes can be shared between containers, but only in the same host, unless you use a remote driver",
    "Volumes can be shared between containers, but only in the same host, unless you use a remote driver",
    null,
    null,
    null,
    null,
    "Blob storage stores unstructured object data. A blob can be any type of text or binary data,",
    "Blob storage stores unstructured object data. A blob can be any type of text or binary data,",
    "24 CHAPTER 3 | Architecting container and microservice-based applications",
    "24 CHAPTER 3 | Architecting container and microservice-based applications",
    "File storage offers shared storage for legacy applications using standard SMB protocol. Azure",
    "File storage offers shared storage for legacy applications using standard SMB protocol. Azure",
    "Table storage stores structured datasets. Table storage is a NoSQL key-attribute data store,",
    "Table storage stores structured datasets. Table storage is a NoSQL key-attribute data store,",
    null,
    null,
    "Service-oriented architecture (SOA) was an overused term and has meant different things to different",
    "Service-oriented architecture (SOA) was an overused term and has meant different things to different",
    "Those services can now be deployed as Docker containers, which solves deployment issues, because",
    "Those services can now be deployed as Docker containers, which solves deployment issues, because",
    "Docker containers are useful (but not required) for both traditional service-oriented architectures and",
    "Docker containers are useful (but not required) for both traditional service-oriented architectures and",
    "Microservices derive from SOA, but SOA is different from microservices architecture. Features like",
    "Microservices derive from SOA, but SOA is different from microservices architecture. Features like",
    "This guide focuses on microservices, because a SOA approach is less prescriptive than the",
    "This guide focuses on microservices, because a SOA approach is less prescriptive than the",
    "As the name implies, a microservices architecture is an approach to building a server application as a",
    "As the name implies, a microservices architecture is an approach to building a server application as a",
    "25 CHAPTER 3 | Architecting container and microservice-based applications",
    "25 CHAPTER 3 | Architecting container and microservice-based applications",
    "and decentralized data management) and could be based on different data storage technologies",
    "and decentralized data management) and could be based on different data storage technologies",
    "What size should a microservice be? When developing a microservice, size shouldn\u2019t be the important",
    "What size should a microservice be? When developing a microservice, size shouldn\u2019t be the important",
    "Why a microservices architecture? In short, it provides long-term agility. Microservices enable better",
    "Why a microservices architecture? In short, it provides long-term agility. Microservices enable better",
    "As an additional benefit, microservices can scale out independently. Instead of having a single",
    "As an additional benefit, microservices can scale out independently. Instead of having a single",
    null,
    null,
    "As Figure 4-6 shows, in the traditional monolithic approach, the application scales by cloning the",
    "As Figure 4-6 shows, in the traditional monolithic approach, the application scales by cloning the",
    "Architecting fine-grained microservices-based applications enables continuous integration and",
    "Architecting fine-grained microservices-based applications enables continuous integration and",
    "26 CHAPTER 3 | Architecting container and microservice-based applications",
    "26 CHAPTER 3 | Architecting container and microservice-based applications",
    "evolve them autonomously while maintaining clear contracts between them. As long as you don\u2019t",
    "evolve them autonomously while maintaining clear contracts between them. As long as you don\u2019t",
    "The following are important aspects to enable success in going into production with a microservicesbased system:",
    "The following are important aspects to enable success in going into production with a microservicesbased system:",
    "Monitoring and health checks of the services and infrastructure.",
    "Monitoring and health checks of the services and infrastructure.",
    "Scalable infrastructure for the services (that is, cloud and orchestrators).",
    "Scalable infrastructure for the services (that is, cloud and orchestrators).",
    "Security design and implementation at multiple levels: authentication, authorization, secrets",
    "Security design and implementation at multiple levels: authentication, authorization, secrets",
    "Rapid application delivery, usually with different teams focusing on different microservices.",
    "Rapid application delivery, usually with different teams focusing on different microservices.",
    "DevOps and CI/CD practices and infrastructure.",
    "DevOps and CI/CD practices and infrastructure.",
    "Of these, only the first three are covered or introduced in this guide. The last two points, which are",
    "Of these, only the first three are covered or introduced in this guide. The last two points, which are",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "An important rule for microservices architecture is that each microservice must own its domain data",
    "An important rule for microservices architecture is that each microservice must own its domain data",
    "This means that the conceptual model of the domain will differ between subsystems or microservices.",
    "This means that the conceptual model of the domain will differ between subsystems or microservices.",
    "27 CHAPTER 3 | Architecting container and microservice-based applications",
    "27 CHAPTER 3 | Architecting container and microservice-based applications",
    "transactional purchase subsystems, and customer support subsystems each call on unique customer",
    "transactional purchase subsystems, and customer support subsystems each call on unique customer",
    null,
    null,
    "On the other hand, the traditional (monolithic data) approach used in many applications is to have a",
    "On the other hand, the traditional (monolithic data) approach used in many applications is to have a",
    null,
    null,
    "In the traditional approach, there\u2019s a single database shared across all services, typically in a tiered",
    "In the traditional approach, there\u2019s a single database shared across all services, typically in a tiered",
    null,
    null,
    "However, data access becomes much more complicated when you move to a microservices",
    "However, data access becomes much more complicated when you move to a microservices",
    "28 CHAPTER 3 | Architecting container and microservice-based applications",
    "28 CHAPTER 3 | Architecting container and microservice-based applications",
    "be accessed either synchronously through its API endpoints(REST, gRPC, SOAP, etc) or asynchronously",
    "be accessed either synchronously through its API endpoints(REST, gRPC, SOAP, etc) or asynchronously",
    "Encapsulating the data ensures that the microservices are loosely coupled and can evolve",
    "Encapsulating the data ensures that the microservices are loosely coupled and can evolve",
    "Going even further, different microservices often use different ",
    "Going even further, different microservices often use different ",
    "A partitioned, polyglot-persistent architecture for data storage has many benefits. These include",
    "A partitioned, polyglot-persistent architecture for data storage has many benefits. These include",
    null,
    null,
    "Those terms (mainly domain entities) in the ubiquitous language can have different names in different",
    "Those terms (mainly domain entities) in the ubiquitous language can have different names in different",
    "A microservice is therefore like a Bounded Context, but it also specifies that it\u2019s a distributed service.",
    "A microservice is therefore like a Bounded Context, but it also specifies that it\u2019s a distributed service.",
    "It\u2019s important to highlight that defining a service for each Bounded Context is a good place to start.",
    "It\u2019s important to highlight that defining a service for each Bounded Context is a good place to start.",
    "29 CHAPTER 3 | Architecting container and microservice-based applications",
    "29 CHAPTER 3 | Architecting container and microservice-based applications",
    "business microservice composed of several physical services. But ultimately, both patterns -Bounded",
    "business microservice composed of several physical services. But ultimately, both patterns -Bounded",
    "DDD benefits from microservices by getting real boundaries in the form of distributed microservices.",
    "DDD benefits from microservices by getting real boundaries in the form of distributed microservices.",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "It\u2019s useful at this point to stop and discuss the distinction between logical architecture and physical",
    "It\u2019s useful at this point to stop and discuss the distinction between logical architecture and physical",
    "To begin, building microservices doesn\u2019t require the use of any specific technology. For instance,",
    "To begin, building microservices doesn\u2019t require the use of any specific technology. For instance,",
    "Moreover, even when a microservice could be physically implemented as a single service, process, or",
    "Moreover, even when a microservice could be physically implemented as a single service, process, or",
    "This is where there\u2019s a difference between an application\u2019s logical architecture and physical",
    "This is where there\u2019s a difference between an application\u2019s logical architecture and physical",
    "Although you might have identified certain business microservices or Bounded Contexts, it doesn\u2019t",
    "Although you might have identified certain business microservices or Bounded Contexts, it doesn\u2019t",
    "Therefore, a business microservice or Bounded Context is a logical architecture that might coincide (or",
    "Therefore, a business microservice or Bounded Context is a logical architecture that might coincide (or",
    "30 CHAPTER 3 | Architecting container and microservice-based applications",
    "30 CHAPTER 3 | Architecting container and microservice-based applications",
    "As Figure 4-8 shows, the catalog business microservice could be composed of several services or",
    "As Figure 4-8 shows, the catalog business microservice could be composed of several services or",
    null,
    null,
    "The services in the example share the same data model because the Web API service targets the same",
    "The services in the example share the same data model because the Web API service targets the same",
    "In short, the logical architecture of microservices doesn\u2019t always have to coincide with the physical",
    "In short, the logical architecture of microservices doesn\u2019t always have to coincide with the physical",
    "Defining microservice boundaries is probably the first challenge anyone encounters. Each microservice",
    "Defining microservice boundaries is probably the first challenge anyone encounters. Each microservice",
    "First, you need to focus on the application\u2019s logical domain models and related data. Try to identify",
    "First, you need to focus on the application\u2019s logical domain models and related data. Try to identify",
    "31 CHAPTER 3 | Architecting container and microservice-based applications",
    "31 CHAPTER 3 | Architecting container and microservice-based applications",
    "purpose in another context, and might even have a different name. For instance, a user can be",
    "purpose in another context, and might even have a different name. For instance, a user can be",
    "The way you identify boundaries between multiple application contexts with a different domain for",
    "The way you identify boundaries between multiple application contexts with a different domain for",
    "A second challenge is how to implement queries that retrieve data from several microservices, while",
    "A second challenge is how to implement queries that retrieve data from several microservices, while",
    null,
    null,
    null,
    null,
    null,
    null,
    "Consider something like the screen for a mobile app. If you have a single database, you might pull",
    "Consider something like the screen for a mobile app. If you have a single database, you might pull",
    "This approach not only solves the original problem (how to query and join across microservices), but it",
    "This approach not only solves the original problem (how to query and join across microservices), but it",
    "32 CHAPTER 3 | Architecting container and microservice-based applications",
    "32 CHAPTER 3 | Architecting container and microservice-based applications",
    "have the data that the application needs in the query table. Of course, using Command and Query",
    "have the data that the application needs in the query table. Of course, using Command and Query",
    null,
    null,
    "Keep in mind that this centralized database would be used only for queries and reports that do not",
    "Keep in mind that this centralized database would be used only for queries and reports that do not",
    "However, if your application design involves constantly aggregating information from multiple",
    "However, if your application design involves constantly aggregating information from multiple",
    "As stated previously, the data owned by each microservice is private to that microservice and can only",
    "As stated previously, the data owned by each microservice is private to that microservice and can only",
    null,
    null,
    "In a hypothetical monolithic version of this application, when the price changes in the products table,",
    "In a hypothetical monolithic version of this application, when the price changes in the products table,",
    "However, in a microservices-based application, the Product and Basket tables are owned by their",
    "However, in a microservices-based application, the Product and Basket tables are owned by their",
    "33 CHAPTER 3 | Architecting container and microservice-based applications",
    "33 CHAPTER 3 | Architecting container and microservice-based applications",
    null,
    null,
    "The Catalog microservice shouldn\u2019t update the Basket table directly, because the Basket table is",
    "The Catalog microservice shouldn\u2019t update the Basket table directly, because the Basket table is",
    null,
    null,
    "Moreover, ACID-style or two-phase commit transactions are not just against microservices principles;",
    "Moreover, ACID-style or two-phase commit transactions are not just against microservices principles;",
    "A good solution for this problem is to use eventual consistency between microservices articulated",
    "A good solution for this problem is to use eventual consistency between microservices articulated",
    "34 CHAPTER 3 | Architecting container and microservice-based applications",
    "34 CHAPTER 3 | Architecting container and microservice-based applications",
    "Communicating across microservice boundaries is a real challenge. In this context, communication",
    "Communicating across microservice boundaries is a real challenge. In this context, communication",
    "In a distributed system like a microservices-based application, with so many artifacts moving around",
    "In a distributed system like a microservices-based application, with so many artifacts moving around",
    "A popular approach is to implement HTTP (REST)-based microservices, due to their simplicity. An",
    "A popular approach is to implement HTTP (REST)-based microservices, due to their simplicity. An",
    "For instance, imagine that your client application makes an HTTP API call to an individual microservice",
    "For instance, imagine that your client application makes an HTTP API call to an individual microservice",
    "Blocking and low performance. Due to the synchronous nature of HTTP, the original request",
    "Blocking and low performance. Due to the synchronous nature of HTTP, the original request",
    "Coupling microservices with HTTP. Business microservices shouldn\u2019t be coupled with other",
    "Coupling microservices with HTTP. Business microservices shouldn\u2019t be coupled with other",
    "Failure in any one microservice. If you implemented a chain of microservices linked by HTTP",
    "Failure in any one microservice. If you implemented a chain of microservices linked by HTTP",
    "In fact, if your internal microservices are communicating by creating chains of HTTP requests as",
    "In fact, if your internal microservices are communicating by creating chains of HTTP requests as",
    "35 CHAPTER 3 | Architecting container and microservice-based applications",
    "35 CHAPTER 3 | Architecting container and microservice-based applications",
    "Therefore, in order to enforce microservice autonomy and have better resiliency, you should minimize",
    "Therefore, in order to enforce microservice autonomy and have better resiliency, you should minimize",
    "The use of asynchronous communication is explained with additional details later in this guide in the",
    "The use of asynchronous communication is explained with additional details later in this guide in the",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "The goal when identifying model boundaries and size for each microservice isn\u2019t to get to the most",
    "The goal when identifying model boundaries and size for each microservice isn\u2019t to get to the most",
    "36 CHAPTER 3 | Architecting container and microservice-based applications",
    "36 CHAPTER 3 | Architecting container and microservice-based applications",
    "or group together microservices. Ultimately, while you gain more knowledge about the domain, you",
    "or group together microservices. Ultimately, while you gain more knowledge about the domain, you",
    null,
    null,
    "A domain model with specific domain entities applies within a concrete BC or microservice. A BC",
    "A domain model with specific domain entities applies within a concrete BC or microservice. A BC",
    null,
    null,
    null,
    null,
    "When designing a large application, you\u2019ll see how its domain model can be fragmented - a domain",
    "When designing a large application, you\u2019ll see how its domain model can be fragmented - a domain",
    "You\u2019ll know that you got the right boundaries and sizes of each BC and domain model if you have few",
    "You\u2019ll know that you got the right boundaries and sizes of each BC and domain model if you have few",
    "Perhaps the best answer to the question of how large a domain model for each microservice should",
    "Perhaps the best answer to the question of how large a domain model for each microservice should",
    "37 CHAPTER 3 | Architecting container and microservice-based applications",
    "37 CHAPTER 3 | Architecting container and microservice-based applications",
    "10, you can see how multiple microservices (multiple BCs) each has their own model and how their",
    "10, you can see how multiple microservices (multiple BCs) each has their own model and how their",
    null,
    null,
    "Figure 4-10 illustrates a sample scenario related to an online conference management system. The",
    "Figure 4-10 illustrates a sample scenario related to an online conference management system. The",
    "However, you might also have entities that have a different shape but share the same identity across",
    "However, you might also have entities that have a different shape but share the same identity across",
    "A similar approach is illustrated in Figure 4-11.",
    "A similar approach is illustrated in Figure 4-11.",
    "38 CHAPTER 3 | Architecting container and microservice-based applications",
    "38 CHAPTER 3 | Architecting container and microservice-based applications",
    null,
    null,
    "When decomposing a traditional data model between bounded contexts, you can have different",
    "When decomposing a traditional data model between bounded contexts, you can have different",
    "The Seat entity has the same name but different attributes in each domain model. However, Seat",
    "The Seat entity has the same name but different attributes in each domain model. However, Seat",
    "Basically, there\u2019s a shared concept of a user that exists in multiple services (domains), which all share",
    "Basically, there\u2019s a shared concept of a user that exists in multiple services (domains), which all share",
    "There are several benefits to not sharing the same user entity with the same number of attributes",
    "There are several benefits to not sharing the same user entity with the same number of attributes",
    "39 CHAPTER 3 | Architecting container and microservice-based applications",
    "39 CHAPTER 3 | Architecting container and microservice-based applications",
    "In a microservices architecture, each microservice exposes a set of (typically) fine-grained endpoints.",
    "In a microservices architecture, each microservice exposes a set of (typically) fine-grained endpoints.",
    "A possible approach is to use a direct client-to-microservice communication architecture. In this",
    "A possible approach is to use a direct client-to-microservice communication architecture. In this",
    null,
    null,
    "In this approach, each microservice has a public endpoint, sometimes with a different TCP port for",
    "In this approach, each microservice has a public endpoint, sometimes with a different TCP port for",
    "http://eshoponcontainers.westus.cloudapp.azure.com:88/",
    "http://eshoponcontainers.westus.cloudapp.azure.com:88/",
    "In a production environment based on a cluster, that URL would map to the load balancer used in the",
    "In a production environment based on a cluster, that URL would map to the load balancer used in the",
    "A direct client-to-microservice communication architecture could be good enough for a small",
    "A direct client-to-microservice communication architecture could be good enough for a small",
    "40 CHAPTER 3 | Architecting container and microservice-based applications",
    "40 CHAPTER 3 | Architecting container and microservice-based applications",
    "Consider the following questions when developing a large application based on microservices:",
    "Consider the following questions when developing a large application based on microservices:",
    null,
    null,
    "Interacting with multiple microservices to build a single UI screen increases the number of round trips",
    "Interacting with multiple microservices to build a single UI screen increases the number of round trips",
    null,
    null,
    "Implementing security and cross-cutting concerns like security and authorization on every",
    "Implementing security and cross-cutting concerns like security and authorization on every",
    null,
    null,
    "Protocols used on the server side (like AMQP or binary protocols) are not supported in client apps.",
    "Protocols used on the server side (like AMQP or binary protocols) are not supported in client apps.",
    null,
    null,
    "The API of multiple microservices might not be well designed for the needs of different client",
    "The API of multiple microservices might not be well designed for the needs of different client",
    "In a microservices architecture, the client apps usually need to consume functionality from more than",
    "In a microservices architecture, the client apps usually need to consume functionality from more than",
    "Therefore, having an intermediate level or tier of indirection (Gateway) can be convenient for",
    "Therefore, having an intermediate level or tier of indirection (Gateway) can be convenient for",
    "41 CHAPTER 3 | Architecting container and microservice-based applications",
    "41 CHAPTER 3 | Architecting container and microservice-based applications",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "When you design and build large or complex microservice-based applications with multiple client",
    "When you design and build large or complex microservice-based applications with multiple client",
    "Therefore, the API gateway sits between the client apps and the microservices. It acts as a reverse",
    "Therefore, the API gateway sits between the client apps and the microservices. It acts as a reverse",
    "Figure 4-13 shows how a custom API Gateway can fit into a simplified microservice-based architecture",
    "Figure 4-13 shows how a custom API Gateway can fit into a simplified microservice-based architecture",
    "42 CHAPTER 3 | Architecting container and microservice-based applications",
    "42 CHAPTER 3 | Architecting container and microservice-based applications",
    null,
    null,
    "Apps connect to a single endpoint, the API Gateway, that\u2019s configured to forward requests to",
    "Apps connect to a single endpoint, the API Gateway, that\u2019s configured to forward requests to",
    "It\u2019s important to highlight that in that diagram, you would be using a single custom API Gateway",
    "It\u2019s important to highlight that in that diagram, you would be using a single custom API Gateway",
    "You need to be careful when implementing the API Gateway pattern. Usually it isn\u2019t a good idea to",
    "You need to be careful when implementing the API Gateway pattern. Usually it isn\u2019t a good idea to",
    "Therefore, the API Gateways should be segregated based on business boundaries and the client apps",
    "Therefore, the API Gateways should be segregated based on business boundaries and the client apps",
    "When splitting the API Gateway tier into multiple API Gateways, if your application has multiple client",
    "When splitting the API Gateway tier into multiple API Gateways, if your application has multiple client",
    "43 CHAPTER 3 | Architecting container and microservice-based applications",
    "43 CHAPTER 3 | Architecting container and microservice-based applications",
    null,
    null,
    "Figure 4-13.1 shows API Gateways that are segregated by client type; one for mobile clients and one",
    "Figure 4-13.1 shows API Gateways that are segregated by client type; one for mobile clients and one",
    "An API Gateway can offer multiple features. Depending on the product it might offer richer or simpler",
    "An API Gateway can offer multiple features. Depending on the product it might offer richer or simpler",
    null,
    null,
    "44 CHAPTER 3 | Architecting container and microservice-based applications",
    "44 CHAPTER 3 | Architecting container and microservice-based applications",
    null,
    null,
    null,
    null,
    "Depending on the API Gateway product you use, it might be able to perform this aggregation.",
    "Depending on the API Gateway product you use, it might be able to perform this aggregation.",
    null,
    null,
    null,
    null,
    "Authentication and authorization",
    "Authentication and authorization",
    "Service discovery integration",
    "Service discovery integration",
    "Response caching",
    "Response caching",
    "Retry policies, circuit breaker, and QoS",
    "Retry policies, circuit breaker, and QoS",
    "Rate limiting and throttling",
    "Rate limiting and throttling",
    "Load balancing",
    "Load balancing",
    "Logging, tracing, correlation",
    "Logging, tracing, correlation",
    "Headers, query strings, and claims transformation",
    "Headers, query strings, and claims transformation",
    "IP allowlisting",
    "IP allowlisting",
    null,
    null,
    "There can be many more cross-cutting concerns offered by the API Gateways products depending on",
    "There can be many more cross-cutting concerns offered by the API Gateways products depending on",
    null,
    null,
    null,
    null,
    "45 CHAPTER 3 | Architecting container and microservice-based applications",
    "45 CHAPTER 3 | Architecting container and microservice-based applications",
    null,
    null,
    null,
    null,
    null,
    null,
    "Azure API Management solves both your API Gateway and Management needs like logging, security,",
    "Azure API Management solves both your API Gateway and Management needs like logging, security,",
    "The API Gateway products usually act like a reverse proxy for ingress communication, where you can",
    "The API Gateway products usually act like a reverse proxy for ingress communication, where you can",
    "The insights available from an API Management system help you get an understanding of how your",
    "The insights available from an API Management system help you get an understanding of how your",
    "With Azure API Management, you can secure your APIs using a key, a token, and IP filtering. These",
    "With Azure API Management, you can secure your APIs using a key, a token, and IP filtering. These",
    "In this guide and the reference sample application (eShopOnContainers), the architecture is limited to",
    "In this guide and the reference sample application (eShopOnContainers), the architecture is limited to",
    "46 CHAPTER 3 | Architecting container and microservice-based applications",
    "46 CHAPTER 3 | Architecting container and microservice-based applications",
    "using PaaS products like Azure API Management. But for large microservice-based applications that",
    "using PaaS products like Azure API Management. But for large microservice-based applications that",
    null,
    null,
    null,
    null,
    null,
    null,
    "The previous diagrams showing custom API Gateways running in containers are precisely how you can",
    "The previous diagrams showing custom API Gateways running in containers are precisely how you can",
    "In addition, there are many other products in the market offering API Gateways features, such as",
    "In addition, there are many other products in the market offering API Gateways features, such as",
    "After the initial architecture and patterns explanation sections, the next sections explain how to",
    "After the initial architecture and patterns explanation sections, the next sections explain how to",
    "The most important drawback is that when you implement an API Gateway, you\u2019re coupling",
    "The most important drawback is that when you implement an API Gateway, you\u2019re coupling",
    "Using a microservices API Gateway creates an additional possible single point of failure.",
    "Using a microservices API Gateway creates an additional possible single point of failure.",
    "An API Gateway can introduce increased response time due to the additional network call.",
    "An API Gateway can introduce increased response time due to the additional network call.",
    "If not scaled out properly, the API Gateway can become a bottleneck.",
    "If not scaled out properly, the API Gateway can become a bottleneck.",
    "An API Gateway requires additional development cost and future maintenance if it includes",
    "An API Gateway requires additional development cost and future maintenance if it includes",
    "47 CHAPTER 3 | Architecting container and microservice-based applications",
    "47 CHAPTER 3 | Architecting container and microservice-based applications",
    "If the API Gateway is developed by a single team, there can be a development bottleneck. This",
    "If the API Gateway is developed by a single team, there can be a development bottleneck. This",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "In a monolithic application running on a single process, components invoke one another using",
    "In a monolithic application running on a single process, components invoke one another using",
    "There isn\u2019t one solution, but several. One solution involves isolating the business microservices as",
    "There isn\u2019t one solution, but several. One solution involves isolating the business microservices as",
    "48 CHAPTER 3 | Architecting container and microservice-based applications",
    "48 CHAPTER 3 | Architecting container and microservice-based applications",
    "A microservices-based application is a distributed system running on multiple processes or services,",
    "A microservices-based application is a distributed system running on multiple processes or services,",
    null,
    null,
    "The two commonly used protocols are HTTP request/response with resource APIs (when querying",
    "The two commonly used protocols are HTTP request/response with resource APIs (when querying",
    "Client and services can communicate through many different types of communication, each one",
    "Client and services can communicate through many different types of communication, each one",
    "The first axis defines if the protocol is synchronous or asynchronous:",
    "The first axis defines if the protocol is synchronous or asynchronous:",
    "Synchronous protocol. HTTP is a synchronous protocol. The client sends a request and waits",
    "Synchronous protocol. HTTP is a synchronous protocol. The client sends a request and waits",
    "Asynchronous protocol. Other protocols like AMQP (a protocol supported by many operating",
    "Asynchronous protocol. Other protocols like AMQP (a protocol supported by many operating",
    "The second axis defines if the communication has a single receiver or multiple receivers:",
    "The second axis defines if the communication has a single receiver or multiple receivers:",
    "Single receiver. Each request must be processed by exactly one receiver or service. An",
    "Single receiver. Each request must be processed by exactly one receiver or service. An",
    "Multiple receivers. Each request can be processed by zero to multiple receivers. This type of",
    "Multiple receivers. Each request can be processed by zero to multiple receivers. This type of",
    "49 CHAPTER 3 | Architecting container and microservice-based applications",
    "49 CHAPTER 3 | Architecting container and microservice-based applications",
    "A microservice-based application will often use a combination of these communication styles. The",
    "A microservice-based application will often use a combination of these communication styles. The",
    "These axes are good to know so you have clarity on the possible communication mechanisms, but",
    "These axes are good to know so you have clarity on the possible communication mechanisms, but",
    "As mentioned, the important point when building a microservices-based application is the way you",
    "As mentioned, the important point when building a microservices-based application is the way you",
    "If possible, never depend on synchronous communication (request/response) between multiple",
    "If possible, never depend on synchronous communication (request/response) between multiple",
    "Moreover, having HTTP dependencies between microservices, like when creating long",
    "Moreover, having HTTP dependencies between microservices, like when creating long",
    "The more you add synchronous dependencies between microservices, such as query requests, the",
    "The more you add synchronous dependencies between microservices, such as query requests, the",
    "50 CHAPTER 3 | Architecting container and microservice-based applications",
    "50 CHAPTER 3 | Architecting container and microservice-based applications",
    null,
    null,
    "As shown in the above diagram, in synchronous communication a \u201cchain\u201d of requests is created",
    "As shown in the above diagram, in synchronous communication a \u201cchain\u201d of requests is created",
    "If your microservice needs to raise an additional action in another microservice, if possible, do not",
    "If your microservice needs to raise an additional action in another microservice, if possible, do not",
    "And finally (and this is where most of the issues arise when building microservices), if your initial",
    "And finally (and this is where most of the issues arise when building microservices), if your initial",
    "As noted earlier in the Identifying domain-model boundaries for each microservice section,",
    "As noted earlier in the Identifying domain-model boundaries for each microservice section,",
    "51 CHAPTER 3 | Architecting container and microservice-based applications",
    "51 CHAPTER 3 | Architecting container and microservice-based applications",
    "You might use any protocol to communicate and propagate data asynchronously across microservices",
    "You might use any protocol to communicate and propagate data asynchronously across microservices",
    "The following sections explain the multiple communication styles you can consider using in a",
    "The following sections explain the multiple communication styles you can consider using in a",
    "There are many protocols and choices you can use for communication, depending on the",
    "There are many protocols and choices you can use for communication, depending on the",
    "There are also multiple message formats like JSON or XML, or even binary formats, which can be more",
    "There are also multiple message formats like JSON or XML, or even binary formats, which can be more",
    null,
    null,
    "When a client uses request/response communication, it sends a request to a service, then the service",
    "When a client uses request/response communication, it sends a request to a service, then the service",
    null,
    null,
    "52 CHAPTER 3 | Architecting container and microservice-based applications",
    "52 CHAPTER 3 | Architecting container and microservice-based applications",
    "When a client uses request/response communication, it assumes that the response will arrive in a",
    "When a client uses request/response communication, it assumes that the response will arrive in a",
    null,
    null,
    "There\u2019s additional value when using HTTP REST services as your interface definition language. For",
    "There\u2019s additional value when using HTTP REST services as your interface definition language. For",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "Another possibility (usually for different purposes than REST) is a real-time and one-to-many",
    "Another possibility (usually for different purposes than REST) is a real-time and one-to-many",
    "As Figure 4-17 shows, real-time HTTP communication means that you can have server code pushing",
    "As Figure 4-17 shows, real-time HTTP communication means that you can have server code pushing",
    "53 CHAPTER 3 | Architecting container and microservice-based applications",
    "53 CHAPTER 3 | Architecting container and microservice-based applications",
    null,
    null,
    "SignalR is a good way to achieve real-time communication for pushing content to the clients from a",
    "SignalR is a good way to achieve real-time communication for pushing content to the clients from a",
    "Asynchronous messaging and event-driven communication are critical when propagating changes",
    "Asynchronous messaging and event-driven communication are critical when propagating changes",
    "When using messaging, processes communicate by exchanging messages asynchronously. A client",
    "When using messaging, processes communicate by exchanging messages asynchronously. A client",
    "A message is composed by a header (metadata such as identification or security information) and a",
    "A message is composed by a header (metadata such as identification or security information) and a",
    "The preferred infrastructure for this type of communication in the microservices community is a",
    "The preferred infrastructure for this type of communication in the microservices community is a",
    "54 CHAPTER 3 | Architecting container and microservice-based applications",
    "54 CHAPTER 3 | Architecting container and microservice-based applications",
    "Azure Service Bus. In this scenario, most of the \u201csmart\u201d thinking still lives in the endpoints that are",
    "Azure Service Bus. In this scenario, most of the \u201csmart\u201d thinking still lives in the endpoints that are",
    "Another rule you should try to follow, as much as possible, is to use only asynchronous messaging",
    "Another rule you should try to follow, as much as possible, is to use only asynchronous messaging",
    "There are two kinds of asynchronous messaging communication: single receiver message-based",
    "There are two kinds of asynchronous messaging communication: single receiver message-based",
    "Message-based asynchronous communication with a single receiver means there\u2019s point-to-point",
    "Message-based asynchronous communication with a single receiver means there\u2019s point-to-point",
    "Single-receiver message-based communication is especially well suited for sending asynchronous",
    "Single-receiver message-based communication is especially well suited for sending asynchronous",
    "Once you start sending message-based communication (either with commands or events), you should",
    "Once you start sending message-based communication (either with commands or events), you should",
    null,
    null,
    "55 CHAPTER 3 | Architecting container and microservice-based applications",
    "55 CHAPTER 3 | Architecting container and microservice-based applications",
    "When the commands come from client applications, they can be implemented as HTTP synchronous",
    "When the commands come from client applications, they can be implemented as HTTP synchronous",
    "As a more flexible approach, you might also want to use a publish/subscribe mechanism so that your",
    "As a more flexible approach, you might also want to use a publish/subscribe mechanism so that your",
    "When you use a publish/subscribe communication, you might be using an event bus interface to",
    "When you use a publish/subscribe communication, you might be using an event bus interface to",
    "When using asynchronous event-driven communication, a microservice publishes an integration event",
    "When using asynchronous event-driven communication, a microservice publishes an integration event",
    "If a system uses eventual consistency driven by integration events, it\u2019s recommended that this",
    "If a system uses eventual consistency driven by integration events, it\u2019s recommended that this",
    "As noted earlier in the Challenges and solutions for distributed data management section, you can use",
    "As noted earlier in the Challenges and solutions for distributed data management section, you can use",
    "An important point is that you might want to communicate to multiple microservices that are",
    "An important point is that you might want to communicate to multiple microservices that are",
    "56 CHAPTER 3 | Architecting container and microservice-based applications",
    "56 CHAPTER 3 | Architecting container and microservice-based applications",
    null,
    null,
    null,
    null,
    "In asynchronous event-driven communication, one microservice publishes events to an event bus and",
    "In asynchronous event-driven communication, one microservice publishes events to an event bus and",
    "When you use an event bus, you might want to use an abstraction level (like an event bus interface)",
    "When you use an event bus, you might want to use an abstraction level (like an event bus interface)",
    "The messaging technologies available for implementing your abstract event bus are at different levels.",
    "The messaging technologies available for implementing your abstract event bus are at different levels.",
    "However, for mission-critical and production systems that need hyper-scalability, you might want to",
    "However, for mission-critical and production systems that need hyper-scalability, you might want to",
    "57 CHAPTER 3 | Architecting container and microservice-based applications",
    "57 CHAPTER 3 | Architecting container and microservice-based applications",
    "service-bus features on top of lower-level technologies like RabbitMQ and Docker. But that plumbing",
    "service-bus features on top of lower-level technologies like RabbitMQ and Docker. But that plumbing",
    "A challenge when implementing an event-driven architecture across multiple microservices is how to",
    "A challenge when implementing an event-driven architecture across multiple microservices is how to",
    "Using a transactional (DTC-based) queue like MSMQ. (However, this is a legacy approach.)",
    "Using a transactional (DTC-based) queue like MSMQ. (However, this is a legacy approach.)",
    "Using transaction log mining.",
    "Using transaction log mining.",
    null,
    null,
    null,
    null,
    "For a more complete description of the challenges in this space, including how messages with",
    "For a more complete description of the challenges in this space, including how messages with",
    "Additional topics to consider when using asynchronous communication are message idempotence",
    "Additional topics to consider when using asynchronous communication are message idempotence",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "58 CHAPTER 3 | Architecting container and microservice-based applications",
    "58 CHAPTER 3 | Architecting container and microservice-based applications",
    "A microservice API is a contract between the service and its clients. You\u2019ll be able to evolve a",
    "A microservice API is a contract between the service and its clients. You\u2019ll be able to evolve a",
    "The nature of the API definition depends on which protocol you\u2019re using. For instance, if you\u2019re using",
    "The nature of the API definition depends on which protocol you\u2019re using. For instance, if you\u2019re using",
    "However, even if you\u2019re thoughtful about your initial contract, a service API will need to change over",
    "However, even if you\u2019re thoughtful about your initial contract, a service API will need to change over",
    "When the API changes are small, like if you add attributes or parameters to your API, clients that use",
    "When the API changes are small, like if you add attributes or parameters to your API, clients that use",
    "However, sometimes you need to make major and incompatible changes to a service API. Because",
    "However, sometimes you need to make major and incompatible changes to a service API. Because",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "59 CHAPTER 3 | Architecting container and microservice-based applications",
    "59 CHAPTER 3 | Architecting container and microservice-based applications",
    "Each microservice has a unique name (URL) that\u2019s used to resolve its location. Your microservice needs",
    "Each microservice has a unique name (URL) that\u2019s used to resolve its location. Your microservice needs",
    null,
    null,
    "In some microservice deployment environments (called clusters, to be covered in a later section),",
    "In some microservice deployment environments (called clusters, to be covered in a later section),",
    null,
    null,
    null,
    null,
    null,
    null,
    "Microservices architecture often starts with the server-side handling data and logic, but, in many",
    "Microservices architecture often starts with the server-side handling data and logic, but, in many",
    "Figure 4-20 shows the simpler approach of just consuming microservices from a monolithic client",
    "Figure 4-20 shows the simpler approach of just consuming microservices from a monolithic client",
    "60 CHAPTER 3 | Architecting container and microservice-based applications",
    "60 CHAPTER 3 | Architecting container and microservice-based applications",
    "consuming the microservices, which just focus on logic and data and not on the UI shape (HTML and",
    "consuming the microservices, which just focus on logic and data and not on the UI shape (HTML and",
    null,
    null,
    "In contrast, a composite UI is precisely generated and composed by the microservices themselves.",
    "In contrast, a composite UI is precisely generated and composed by the microservices themselves.",
    "At client application start-up time, each of the client UI components (TypeScript classes, for example)",
    "At client application start-up time, each of the client UI components (TypeScript classes, for example)",
    "Figure 4-21 shows a version of this composite UI approach. This approach is simplified because you",
    "Figure 4-21 shows a version of this composite UI approach. This approach is simplified because you",
    "61 CHAPTER 3 | Architecting container and microservice-based applications",
    "61 CHAPTER 3 | Architecting container and microservice-based applications",
    null,
    null,
    "Each of those UI composition microservices would be similar to a small API Gateway. But in this case,",
    "Each of those UI composition microservices would be similar to a small API Gateway. But in this case,",
    "A composite UI approach that\u2019s driven by microservices can be more challenging or less so,",
    "A composite UI approach that\u2019s driven by microservices can be more challenging or less so,",
    null,
    null,
    "However, we encourage you to use the following references to learn more about composite UI based",
    "However, we encourage you to use the following references to learn more about composite UI based",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "62 CHAPTER 3 | Architecting container and microservice-based applications",
    "62 CHAPTER 3 | Architecting container and microservice-based applications",
    null,
    null,
    null,
    null,
    null,
    null,
    "Dealing with unexpected failures is one of the hardest problems to solve, especially in a distributed",
    "Dealing with unexpected failures is one of the hardest problems to solve, especially in a distributed",
    "A microservice needs to be resilient to failures and to be able to restart often on another machine for",
    "A microservice needs to be resilient to failures and to be able to restart often on another machine for",
    "The problems of resiliency are compounded during other scenarios, such as when failures occur",
    "The problems of resiliency are compounded during other scenarios, such as when failures occur",
    "In addition, resiliency is related to how cloud-based systems must behave. As mentioned, a cloudbased system must embrace failures and must try to automatically recover from them. For instance, in",
    "In addition, resiliency is related to how cloud-based systems must behave. As mentioned, a cloudbased system must embrace failures and must try to automatically recover from them. For instance, in",
    "It may seem obvious, and it\u2019s often overlooked, but a microservice must report its health and",
    "It may seem obvious, and it\u2019s often overlooked, but a microservice must report its health and",
    "63 CHAPTER 3 | Architecting container and microservice-based applications",
    "63 CHAPTER 3 | Architecting container and microservice-based applications",
    "the event order is challenging. In the same way that you interact with a microservice over agreedupon protocols and data formats, there\u2019s a need for standardization in how to log health and",
    "the event order is challenging. In the same way that you interact with a microservice over agreedupon protocols and data formats, there\u2019s a need for standardization in how to log health and",
    null,
    null,
    "Health is different from diagnostics. Health is about the microservice reporting its current state to take",
    "Health is different from diagnostics. Health is about the microservice reporting its current state to take",
    "In the Implementing health checks in ASP.NET Core services section of this guide, we explain how to",
    "In the Implementing health checks in ASP.NET Core services section of this guide, we explain how to",
    "You also have the option of using an excellent open-source library called",
    "You also have the option of using an excellent open-source library called",
    null,
    null,
    null,
    null,
    null,
    null,
    "Logs provide information about how an application or service is running, including exceptions,",
    "Logs provide information about how an application or service is running, including exceptions,",
    "In monolithic server-based applications, you can write logs to a file on disk (a logfile) and then analyze",
    "In monolithic server-based applications, you can write logs to a file on disk (a logfile) and then analyze",
    "A microservice-based application should not try to store the output stream of events or logfiles by",
    "A microservice-based application should not try to store the output stream of events or logfiles by",
    "64 CHAPTER 3 | Architecting container and microservice-based applications",
    "64 CHAPTER 3 | Architecting container and microservice-based applications",
    null,
    null,
    "When you create a microservice-based application, you need to deal with complexity. Of course, a",
    "When you create a microservice-based application, you need to deal with complexity. Of course, a",
    null,
    null,
    "The complex problems shown in Figure 4-22 are hard to solve by yourself. Development teams should",
    "The complex problems shown in Figure 4-22 are hard to solve by yourself. Development teams should",
    "Different orchestrators might sound similar, but the diagnostics and health checks offered by each of",
    "Different orchestrators might sound similar, but the diagnostics and health checks offered by each of",
    null,
    null,
    null,
    null,
    null,
    null,
    "65 CHAPTER 3 | Architecting container and microservice-based applications",
    "65 CHAPTER 3 | Architecting container and microservice-based applications",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "Using orchestrators for production-ready applications is essential if your application is based on",
    "Using orchestrators for production-ready applications is essential if your application is based on",
    "Figure 4-23 illustrates deployment into a cluster of an application composed of multiple microservices",
    "Figure 4-23 illustrates deployment into a cluster of an application composed of multiple microservices",
    "66 CHAPTER 3 | Architecting container and microservice-based applications",
    "66 CHAPTER 3 | Architecting container and microservice-based applications",
    null,
    null,
    "You use one container for each service instance. Docker containers are \u201cunits of deployment\u201d and a",
    "You use one container for each service instance. Docker containers are \u201cunits of deployment\u201d and a",
    "The plain Docker Engine in single Docker hosts meets the needs of managing single image instances",
    "The plain Docker Engine in single Docker hosts meets the needs of managing single image instances",
    "To go beyond the management of individual containers or simple composed apps and move toward",
    "To go beyond the management of individual containers or simple composed apps and move toward",
    "From an architecture and development point of view, if you\u2019re building large enterprise composed of",
    "From an architecture and development point of view, if you\u2019re building large enterprise composed of",
    null,
    null,
    null,
    null,
    "67 CHAPTER 3 | Architecting container and microservice-based applications",
    "67 CHAPTER 3 | Architecting container and microservice-based applications",
    "resources efficiently, to set the constraints provided by the user, to efficiently load-balance containers",
    "resources efficiently, to set the constraints provided by the user, to efficiently load-balance containers",
    "The concepts of a cluster and a scheduler are closely related, so the products provided by different",
    "The concepts of a cluster and a scheduler are closely related, so the products provided by different",
    "|scheduling|Col2|",
    "|scheduling|Col2|",
    "Several cloud vendors offer Docker containers support plus Docker clusters and orchestration support,",
    "Several cloud vendors offer Docker containers support plus Docker clusters and orchestration support,",
    "68 CHAPTER 3 | Architecting container and microservice-based applications",
    "68 CHAPTER 3 | Architecting container and microservice-based applications",
    "A Kubernetes cluster pools multiple Docker hosts and exposes them as a single virtual Docker host, so",
    "A Kubernetes cluster pools multiple Docker hosts and exposes them as a single virtual Docker host, so",
    "AKS provides a way to simplify the creation, configuration, and management of a cluster of virtual",
    "AKS provides a way to simplify the creation, configuration, and management of a cluster of virtual",
    "Azure Kubernetes Service optimizes the configuration of popular Docker clustering open-source tools",
    "Azure Kubernetes Service optimizes the configuration of popular Docker clustering open-source tools",
    null,
    null,
    "69 CHAPTER 3 | Architecting container and microservice-based applications",
    "69 CHAPTER 3 | Architecting container and microservice-based applications",
    "In figure 4-24, you can see the structure of a Kubernetes cluster where a master node (VM) controls",
    "In figure 4-24, you can see the structure of a Kubernetes cluster where a master node (VM) controls",
    "In the development environment, Docker announced in July 2018 that Kubernetes can also run in a",
    "In the development environment, Docker announced in July 2018 that Kubernetes can also run in a",
    null,
    null,
    "To begin using AKS, you deploy an AKS cluster from the Azure portal or by using the CLI. For more",
    "To begin using AKS, you deploy an AKS cluster from the Azure portal or by using the CLI. For more",
    "There are no fees for any of the software installed by default as part of AKS. All default options are",
    "There are no fees for any of the software installed by default as part of AKS. All default options are",
    "The default production deployment option for Kubernetes is to use Helm charts, which are introduced",
    "The default production deployment option for Kubernetes is to use Helm charts, which are introduced",
    "70 CHAPTER 3 | Architecting container and microservice-based applications",
    "70 CHAPTER 3 | Architecting container and microservice-based applications",
    "When deploying an application to a Kubernetes cluster, you can use the original kubectl.exe CLI tool",
    "When deploying an application to a Kubernetes cluster, you can use the original kubectl.exe CLI tool",
    "Helm Charts helps you define, version, install, share, upgrade, or rollback even the most complex",
    "Helm Charts helps you define, version, install, share, upgrade, or rollback even the most complex",
    "Going further, Helm usage is also recommended because other Kubernetes environments in Azure,",
    "Going further, Helm usage is also recommended because other Kubernetes environments in Azure,",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "71 CHAPTER 3 | Architecting container and microservice-based applications",
    "71 CHAPTER 3 | Architecting container and microservice-based applications",
    null,
    null,
    null,
    null,
    "Whether you prefer a full and powerful IDE or a lightweight and agile editor, Microsoft has tools that",
    "Whether you prefer a full and powerful IDE or a lightweight and agile editor, Microsoft has tools that",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "72 CHAPTER 4 | Development process for Docker-based applications",
    "72 CHAPTER 4 | Development process for Docker-based applications",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "As mentioned in earlier sections of this guide, you can use .NET Framework, .NET 7, or the opensource Mono project when developing Docker containerized .NET applications. You can develop in",
    "As mentioned in earlier sections of this guide, you can use .NET Framework, .NET 7, or the opensource Mono project when developing Docker containerized .NET applications. You can develop in",
    "The application development life cycle starts at your computer, as a developer, where you code the",
    "The application development life cycle starts at your computer, as a developer, where you code the",
    "Each container (an instance of a Docker image) includes the following components:",
    "Each container (an instance of a Docker image) includes the following components:",
    "An operating system selection, for example, a Linux distribution, Windows Nano Server, or",
    "An operating system selection, for example, a Linux distribution, Windows Nano Server, or",
    "Files added during development, for example, source code and application binaries.",
    "Files added during development, for example, source code and application binaries.",
    "Configuration information, such as environment settings and dependencies.",
    "Configuration information, such as environment settings and dependencies.",
    "This section describes the ",
    "This section describes the ",
    "73 CHAPTER 4 | Development process for Docker-based applications",
    "73 CHAPTER 4 | Development process for Docker-based applications",
    "An application is composed of your own services plus additional libraries (dependencies). The",
    "An application is composed of your own services plus additional libraries (dependencies). The",
    null,
    null,
    "In this section, this whole process is detailed and every major step is explained by focusing on a Visual",
    "In this section, this whole process is detailed and every major step is explained by focusing on a Visual",
    "When you\u2019re using an editor/CLI development approach (for example, Visual Studio Code plus Docker",
    "When you\u2019re using an editor/CLI development approach (for example, Visual Studio Code plus Docker",
    "When you\u2019re using Visual Studio 2022, many of those steps are handled for you, which dramatically",
    "When you\u2019re using Visual Studio 2022, many of those steps are handled for you, which dramatically",
    "However, just because Visual Studio makes those steps automatic doesn\u2019t mean that you don\u2019t need",
    "However, just because Visual Studio makes those steps automatic doesn\u2019t mean that you don\u2019t need",
    "74 CHAPTER 4 | Development process for Docker-based applications",
    "74 CHAPTER 4 | Development process for Docker-based applications",
    "Developing a Docker application is similar to the way you develop an application without Docker. The",
    "Developing a Docker application is similar to the way you develop an application without Docker. The",
    null,
    null,
    null,
    null,
    null,
    null,
    "In addition, you need Visual Studio 2022 version 17.0, with the ",
    "In addition, you need Visual Studio 2022 version 17.0, with the ",
    null,
    null,
    "You can start coding your application in plain .NET (usually in .NET Core or later if you\u2019re planning to",
    "You can start coding your application in plain .NET (usually in .NET Core or later if you\u2019re planning to",
    "75 CHAPTER 4 | Development process for Docker-based applications",
    "75 CHAPTER 4 | Development process for Docker-based applications",
    "because Visual Studio makes it so easy to work with Docker that it almost feels transparent\u2014the best",
    "because Visual Studio makes it so easy to work with Docker that it almost feels transparent\u2014the best",
    null,
    null,
    null,
    null,
    null,
    null,
    "You need a Dockerfile for each custom image you want to build; you also need a Dockerfile for each",
    "You need a Dockerfile for each custom image you want to build; you also need a Dockerfile for each",
    "The Dockerfile is placed in the root folder of your application or service. It contains the commands",
    "The Dockerfile is placed in the root folder of your application or service. It contains the commands",
    "With Visual Studio and its tools for Docker, this task requires only a few mouse clicks. When you",
    "With Visual Studio and its tools for Docker, this task requires only a few mouse clicks. When you",
    "76 CHAPTER 4 | Development process for Docker-based applications",
    "76 CHAPTER 4 | Development process for Docker-based applications",
    null,
    null,
    "You can also enable Docker support on an existing ASP.NET Core web app project by right-clicking",
    "You can also enable Docker support on an existing ASP.NET Core web app project by right-clicking",
    null,
    null,
    "77 CHAPTER 4 | Development process for Docker-based applications",
    "77 CHAPTER 4 | Development process for Docker-based applications",
    "This action adds a ",
    "This action adds a ",
    "In a similar fashion, Visual Studio can also add a docker-compose.yml file for the whole solution with",
    "In a similar fashion, Visual Studio can also add a docker-compose.yml file for the whole solution with",
    null,
    null,
    "You usually build a custom image for your container on top of a base image you get from an official",
    "You usually build a custom image for your container on top of a base image you get from an official",
    "Earlier we explained which Docker images and repos you can use, depending on the framework and",
    "Earlier we explained which Docker images and repos you can use, depending on the framework and",
    "Using an official .NET image repository from Docker Hub with a version number ensures that the same",
    "Using an official .NET image repository from Docker Hub with a version number ensures that the same",
    "The following example shows a sample Dockerfile for an ASP.NET Core container.",
    "The following example shows a sample Dockerfile for an ASP.NET Core container.",
    "In this case, the image is based on version 7.0 of the official ASP.NET Core Docker image (multi-arch",
    "In this case, the image is based on version 7.0 of the official ASP.NET Core Docker image (multi-arch",
    "You can specify additional configuration settings in the Dockerfile, depending on the language and",
    "You can specify additional configuration settings in the Dockerfile, depending on the language and",
    null,
    null,
    null,
    null,
    "78 CHAPTER 4 | Development process for Docker-based applications",
    "78 CHAPTER 4 | Development process for Docker-based applications",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "A single repo can contain platform variants, such as a Linux image and a Windows image. This feature",
    "A single repo can contain platform variants, such as a Linux image and a Windows image. This feature",
    "If you specify a tag, targeting a platform that is explicit like in the following cases:",
    "If you specify a tag, targeting a platform that is explicit like in the following cases:",
    "mcr.microsoft.com/dotnet/aspnet:7.0-bullseye-slim",
    "mcr.microsoft.com/dotnet/aspnet:7.0-bullseye-slim",
    "mcr.microsoft.com/dotnet/aspnet:7.0-nanoserver-ltsc2022",
    "mcr.microsoft.com/dotnet/aspnet:7.0-nanoserver-ltsc2022",
    "But, if you specify the same image name, even with the same tag, the multi-arch images (like the",
    "But, if you specify the same image name, even with the same tag, the multi-arch images (like the",
    "mcr.microsoft.com/dotnet/aspnet:7.0",
    "mcr.microsoft.com/dotnet/aspnet:7.0",
    "This way, when you pull an image from a Windows host, it will pull the Windows variant, and pulling",
    "This way, when you pull an image from a Windows host, it will pull the Windows variant, and pulling",
    null,
    null,
    "The Dockerfile is similar to a batch script. Similar to what you would do if you had to set up the",
    "The Dockerfile is similar to a batch script. Similar to what you would do if you had to set up the",
    "It starts with a base image that sets up the initial context, it\u2019s like the startup filesystem, that sits on",
    "It starts with a base image that sets up the initial context, it\u2019s like the startup filesystem, that sits on",
    "The execution of every command line creates a new layer on the filesystem with the changes from the",
    "The execution of every command line creates a new layer on the filesystem with the changes from the",
    "Since every new layer \u201crests\u201d on top of the previous one and the resulting image size increases with",
    "Since every new layer \u201crests\u201d on top of the previous one and the resulting image size increases with",
    "This is where multi-stage builds get into the plot (from Docker 17.05 and higher) to do their magic.",
    "This is where multi-stage builds get into the plot (from Docker 17.05 and higher) to do their magic.",
    "79 CHAPTER 4 | Development process for Docker-based applications",
    "79 CHAPTER 4 | Development process for Docker-based applications",
    "The core idea is that you can separate the Dockerfile execution process in stages, where a stage is an",
    "The core idea is that you can separate the Dockerfile execution process in stages, where a stage is an",
    "In short, multi-stage builds allow splitting the creation in different \u201cphases\u201d and then assemble the",
    "In short, multi-stage builds allow splitting the creation in different \u201cphases\u201d and then assemble the",
    "Use a base SDK image (doesn\u2019t matter how large), with everything needed to build and",
    "Use a base SDK image (doesn\u2019t matter how large), with everything needed to build and",
    "Use a base, small, runtime-only image and copy the publishing folder from the previous stage",
    "Use a base, small, runtime-only image and copy the publishing folder from the previous stage",
    "Probably the best way to understand multi-stage is going through a Dockerfile in detail, line by line,",
    "Probably the best way to understand multi-stage is going through a Dockerfile in detail, line by line,",
    "The initial Dockerfile might look something like this:",
    "The initial Dockerfile might look something like this:",
    "And these are the details, line by line:",
    "And these are the details, line by line:",
    null,
    null,
    null,
    null,
    null,
    null,
    "80 CHAPTER 4 | Development process for Docker-based applications",
    "80 CHAPTER 4 | Development process for Docker-based applications",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "Now let\u2019s explore some optimizations to improve the whole process performance that, in the case of",
    "Now let\u2019s explore some optimizations to improve the whole process performance that, in the case of",
    "You\u2019ll take advantage of Docker\u2019s layer cache feature, which is quite simple: if the base image and the",
    "You\u2019ll take advantage of Docker\u2019s layer cache feature, which is quite simple: if the base image and the",
    "So, let\u2019s focus on the ",
    "So, let\u2019s focus on the ",
    "Then it would be just the same for every service, it would copy the whole solution and would create a",
    "Then it would be just the same for every service, it would copy the whole solution and would create a",
    "The copy process would only be executed the first time (and when rebuilding if a file is",
    "The copy process would only be executed the first time (and when rebuilding if a file is",
    "Since the larger image occurs in an intermediate stage, it doesn\u2019t affect the final image size.",
    "Since the larger image occurs in an intermediate stage, it doesn\u2019t affect the final image size.",
    "81 CHAPTER 4 | Development process for Docker-based applications",
    "81 CHAPTER 4 | Development process for Docker-based applications",
    "The next significant optimization involves the restore command executed in line 17, which is also",
    "The next significant optimization involves the restore command executed in line 17, which is also",
    "It would restore the packages for the whole solution, but then again, it would do it just once, instead",
    "It would restore the packages for the whole solution, but then again, it would do it just once, instead",
    "However, dotnet restore only runs if there\u2019s a single project or solution file in the folder, so achieving",
    "However, dotnet restore only runs if there\u2019s a single project or solution file in the folder, so achieving",
    "Add the following lines to ",
    "Add the following lines to ",
    "*",
    "*",
    "!",
    "!",
    "Include the /ignoreprojectextensions:.dcproj argument to dotnet restore, so it also ignores the",
    "Include the /ignoreprojectextensions:.dcproj argument to dotnet restore, so it also ignores the",
    "For the final optimization, it just happens that line 20 is redundant, as line 23 also builds the",
    "For the final optimization, it just happens that line 20 is redundant, as line 23 also builds the",
    "The resulting file is then:",
    "The resulting file is then:",
    null,
    null,
    "You can create your own Docker base image from scratch. This scenario is not recommended for",
    "You can create your own Docker base image from scratch. This scenario is not recommended for",
    null,
    null,
    null,
    null,
    "82 CHAPTER 4 | Development process for Docker-based applications",
    "82 CHAPTER 4 | Development process for Docker-based applications",
    null,
    null,
    "For each service in your application, you need to create a related image. If your application is made up",
    "For each service in your application, you need to create a related image. If your application is made up",
    "Note that the Docker images are built automatically for you in Visual Studio. The following steps are",
    "Note that the Docker images are built automatically for you in Visual Studio. The following steps are",
    "You, as a developer, need to develop and test locally until you push a completed feature or change to",
    "You, as a developer, need to develop and test locally until you push a completed feature or change to",
    "To create a custom image in your local environment by using Docker CLI and your Dockerfile, you can",
    "To create a custom image in your local environment by using Docker CLI and your Dockerfile, you can",
    null,
    null,
    "Optionally, instead of directly running docker build from the project folder, you can first generate a",
    "Optionally, instead of directly running docker build from the project folder, you can first generate a",
    "This will create a Docker image with the name cesardl/netcore-webapi-microservice-docker:first. In",
    "This will create a Docker image with the name cesardl/netcore-webapi-microservice-docker:first. In",
    "When an application is made of multiple containers (that is, it is a multi-container application), you",
    "When an application is made of multiple containers (that is, it is a multi-container application), you",
    "You can find the existing images in your local repository by using the docker images command, as",
    "You can find the existing images in your local repository by using the docker images command, as",
    "83 CHAPTER 4 | Development process for Docker-based applications",
    "83 CHAPTER 4 | Development process for Docker-based applications",
    null,
    null,
    null,
    null,
    "When you use Visual Studio to create a project with Docker support, you don\u2019t explicitly create an",
    "When you use Visual Studio to create a project with Docker support, you don\u2019t explicitly create an",
    null,
    null,
    "To use a docker-compose.yml file, you need to create the file in your main or root solution folder, with",
    "To use a docker-compose.yml file, you need to create the file in your main or root solution folder, with",
    "84 CHAPTER 4 | Development process for Docker-based applications",
    "84 CHAPTER 4 | Development process for Docker-based applications",
    "This docker-compose.yml file is a simplified and merged version. It contains static configuration data",
    "This docker-compose.yml file is a simplified and merged version. It contains static configuration data",
    "The docker-compose.yml file example defines four services: the webmvc service (a web application),",
    "The docker-compose.yml file example defines four services: the webmvc service (a web application),",
    "The docker-compose.yml file specifies not only what containers are being used, but how they are",
    "The docker-compose.yml file specifies not only what containers are being used, but how they are",
    "Uses a pre-built eshop/web:latest image. However, you could also configure the image to be",
    "Uses a pre-built eshop/web:latest image. However, you could also configure the image to be",
    "Initializes two environment variables (CatalogUrl and OrderingUrl).",
    "Initializes two environment variables (CatalogUrl and OrderingUrl).",
    "Forwards the exposed port 80 on the container to the external port 80 on the host machine.",
    "Forwards the exposed port 80 on the container to the external port 80 on the host machine.",
    "Links the web app to the catalog and ordering service with the depends",
    "Links the web app to the catalog and ordering service with the depends",
    "We will revisit the docker-compose.yml file in a later section when we cover how to implement",
    "We will revisit the docker-compose.yml file in a later section when we cover how to implement",
    null,
    null,
    "Besides adding a Dockerfile to a project, as we mentioned before, Visual Studio 2017 (from version",
    "Besides adding a Dockerfile to a project, as we mentioned before, Visual Studio 2017 (from version",
    "When you add container orchestrator support, as shown in Figure 5-7, for the first time, Visual Studio",
    "When you add container orchestrator support, as shown in Figure 5-7, for the first time, Visual Studio",
    "85 CHAPTER 4 | Development process for Docker-based applications",
    "85 CHAPTER 4 | Development process for Docker-based applications",
    "several global docker-compose",
    "several global docker-compose",
    "Repeat this operation for every project you want to include in the docker-compose.yml file.",
    "Repeat this operation for every project you want to include in the docker-compose.yml file.",
    "At the time of this writing, Visual Studio supports ",
    "At the time of this writing, Visual Studio supports ",
    null,
    null,
    "After you add orchestrator support to your solution in Visual Studio, you will also see a new node (in",
    "After you add orchestrator support to your solution in Visual Studio, you will also see a new node (in",
    null,
    null,
    "You could deploy a multi-container application with a single docker-compose.yml file by using the",
    "You could deploy a multi-container application with a single docker-compose.yml file by using the",
    "86 CHAPTER 4 | Development process for Docker-based applications",
    "86 CHAPTER 4 | Development process for Docker-based applications",
    "If your application only has a single container, you can run it by deploying it to your Docker host (VM",
    "If your application only has a single container, you can run it by deploying it to your Docker host (VM",
    null,
    null,
    null,
    null,
    "You can run a Docker container using the docker run command, as shown in Figure 5-9:",
    "You can run a Docker container using the docker run command, as shown in Figure 5-9:",
    "The above command will create a new container instance from the specified image, every time it\u2019s run.",
    "The above command will create a new container instance from the specified image, every time it\u2019s run.",
    null,
    null,
    "In this case, the command binds the internal port 5000 of the container to port 80 of the host",
    "In this case, the command binds the internal port 5000 of the container to port 80 of the host",
    "The hash shown is the container ID and it\u2019s also assigned a random readable name if the --name",
    "The hash shown is the container ID and it\u2019s also assigned a random readable name if the --name",
    null,
    null,
    "If you haven\u2019t added container orchestrator support, you can also run a single container app in Visual",
    "If you haven\u2019t added container orchestrator support, you can also run a single container app in Visual",
    null,
    null,
    "In most enterprise scenarios, a Docker application will be composed of multiple services, which means",
    "In most enterprise scenarios, a Docker application will be composed of multiple services, which means",
    "87 CHAPTER 4 | Development process for Docker-based applications",
    "87 CHAPTER 4 | Development process for Docker-based applications",
    null,
    null,
    null,
    null,
    "To run a multi-container application with the Docker CLI, you use the docker-compose up command.",
    "To run a multi-container application with the Docker CLI, you use the docker-compose up command.",
    null,
    null,
    "After the docker-compose up command runs, the application and its related containers are deployed",
    "After the docker-compose up command runs, the application and its related containers are deployed",
    null,
    null,
    "Running a multi-container application using Visual Studio 2019 can\u2019t get any simpler. You just press",
    "Running a multi-container application using Visual Studio 2019 can\u2019t get any simpler. You just press",
    "As mentioned before, each time you add Docker solution support to a project within a solution, that",
    "As mentioned before, each time you add Docker solution support to a project within a solution, that",
    "If you want to take a peek at all the drudgery, take a look at the file:",
    "If you want to take a peek at all the drudgery, take a look at the file:",
    "{root solution folder}",
    "{root solution folder}",
    "88 CHAPTER 4 | Development process for Docker-based applications",
    "88 CHAPTER 4 | Development process for Docker-based applications",
    "The important point here is that, as shown in Figure 5-12, in Visual Studio 2019 there is an additional",
    "The important point here is that, as shown in Figure 5-12, in Visual Studio 2019 there is an additional",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "The docker-compose up and docker run commands (or running and debugging the containers in",
    "The docker-compose up and docker run commands (or running and debugging the containers in",
    "This step will vary depending on what your application is doing. In a simple .NET Web application that",
    "This step will vary depending on what your application is doing. In a simple .NET Web application that",
    null,
    null,
    "89 CHAPTER 4 | Development process for Docker-based applications",
    "89 CHAPTER 4 | Development process for Docker-based applications",
    "If localhost is not pointing to the Docker host IP (by default, when using Docker CE, it should), to",
    "If localhost is not pointing to the Docker host IP (by default, when using Docker CE, it should), to",
    "This URL in the browser uses port 80 for the particular container example being discussed. However,",
    "This URL in the browser uses port 80 for the particular container example being discussed. However,",
    "You can also test the application using curl from the terminal, as shown in Figure 5-14. In a Docker",
    "You can also test the application using curl from the terminal, as shown in Figure 5-14. In a Docker",
    null,
    null,
    null,
    null,
    "When running and debugging the containers with Visual Studio 2022, you can debug the .NET",
    "When running and debugging the containers with Visual Studio 2022, you can debug the .NET",
    null,
    null,
    "If you\u2019re developing using the editor/CLI approach, debugging containers is more difficult and you\u2019ll",
    "If you\u2019re developing using the editor/CLI approach, debugging containers is more difficult and you\u2019ll",
    null,
    null,
    null,
    null,
    null,
    null,
    "Effectively, the workflow when using Visual Studio is a lot simpler than if you use the editor/CLI",
    "Effectively, the workflow when using Visual Studio is a lot simpler than if you use the editor/CLI",
    "90 CHAPTER 4 | Development process for Docker-based applications",
    "90 CHAPTER 4 | Development process for Docker-based applications",
    null,
    null,
    "In addition, you need to perform step 2 (adding Docker support to your projects) just once. Therefore,",
    "In addition, you need to perform step 2 (adding Docker support to your projects) just once. Therefore,",
    null,
    null,
    "In this case, we are using a Windows Server Core base image (the FROM setting) and installing IIS with",
    "In this case, we are using a Windows Server Core base image (the FROM setting) and installing IIS with",
    null,
    null,
    null,
    null,
    "91 CHAPTER 4 | Development process for Docker-based applications",
    "91 CHAPTER 4 | Development process for Docker-based applications",
    null,
    null,
    "92 CHAPTER 4 | Development process for Docker-based applications",
    "92 CHAPTER 4 | Development process for Docker-based applications",
    null,
    null,
    null,
    null,
    "Earlier we raised the question \u201cIs Docker necessary when building a microservice architecture?\u201d The",
    "Earlier we raised the question \u201cIs Docker necessary when building a microservice architecture?\u201d The",
    "However, if you know how to design and develop a microservices-based application that is also based",
    "However, if you know how to design and develop a microservices-based application that is also based",
    "This section focuses on developing a hypothetical server-side enterprise application.",
    "This section focuses on developing a hypothetical server-side enterprise application.",
    "The hypothetical application handles requests by executing business logic, accessing databases, and",
    "The hypothetical application handles requests by executing business logic, accessing databases, and",
    "93 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "93 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "to consume. It should also be able to integrate its microservices or external applications",
    "to consume. It should also be able to integrate its microservices or external applications",
    "The application will consist of these types of components:",
    "The application will consist of these types of components:",
    "Presentation components. These components are responsible for handling the UI and",
    "Presentation components. These components are responsible for handling the UI and",
    "Domain or business logic. This component is the application\u2019s domain logic.",
    "Domain or business logic. This component is the application\u2019s domain logic.",
    "Database access logic. This component consists of data access components responsible for",
    "Database access logic. This component consists of data access components responsible for",
    "Application integration logic. This component includes a messaging channel, based on",
    "Application integration logic. This component includes a messaging channel, based on",
    "The application will require high scalability, while allowing its vertical subsystems to scale out",
    "The application will require high scalability, while allowing its vertical subsystems to scale out",
    "The application must be able to be deployed in multiple infrastructure environments (multiple public",
    "The application must be able to be deployed in multiple infrastructure environments (multiple public",
    "We also assume the following about the development process for the application:",
    "We also assume the following about the development process for the application:",
    "You have multiple dev teams focusing on different business areas of the application.",
    "You have multiple dev teams focusing on different business areas of the application.",
    "New team members must become productive quickly, and the application must be easy to",
    "New team members must become productive quickly, and the application must be easy to",
    "The application will have a long-term evolution and ever-changing business rules.",
    "The application will have a long-term evolution and ever-changing business rules.",
    "You need good long-term maintainability, which means having agility when implementing",
    "You need good long-term maintainability, which means having agility when implementing",
    "You want to practice continuous integration and continuous deployment of the application.",
    "You want to practice continuous integration and continuous deployment of the application.",
    "You want to take advantage of emerging technologies (frameworks, programming languages,",
    "You want to take advantage of emerging technologies (frameworks, programming languages,",
    "What should the application deployment architecture be? The specifications for the application, along",
    "What should the application deployment architecture be? The specifications for the application, along",
    "94 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "94 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "In this approach, each service (container) implements a set of cohesive and narrowly related functions.",
    "In this approach, each service (container) implements a set of cohesive and narrowly related functions.",
    "Microservices communicate using protocols such as HTTP (REST), but also asynchronously (for",
    "Microservices communicate using protocols such as HTTP (REST), but also asynchronously (for",
    "Microservices are developed and deployed as containers independently of one another. This approach",
    "Microservices are developed and deployed as containers independently of one another. This approach",
    "Each microservice has its own database, allowing it to be fully decoupled from other microservices.",
    "Each microservice has its own database, allowing it to be fully decoupled from other microservices.",
    null,
    null,
    "So that you can focus on the architecture and technologies instead of thinking about a hypothetical",
    "So that you can focus on the architecture and technologies instead of thinking about a hypothetical",
    "The application consists of multiple subsystems, including several store UI front ends (a Web",
    "The application consists of multiple subsystems, including several store UI front ends (a Web",
    "95 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "95 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "The above diagram shows that Mobile and SPA clients communicate to single API gateway endpoints,",
    "The above diagram shows that Mobile and SPA clients communicate to single API gateway endpoints,",
    null,
    null,
    null,
    null,
    "Http client-to-microservice communication through API Gateways. This approach is used for",
    "Http client-to-microservice communication through API Gateways. This approach is used for",
    "Asynchronous event-based communication. This communication occurs through an event bus",
    "Asynchronous event-based communication. This communication occurs through an event bus",
    "The application is deployed as a set of microservices in the form of containers. Client apps can",
    "The application is deployed as a set of microservices in the form of containers. Client apps can",
    "96 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "96 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "In the sample application, each microservice owns its own database or data source, although all SQL",
    "In the sample application, each microservice owns its own database or data source, although all SQL",
    "In a real production environment, for high availability and for scalability, the databases should be",
    "In a real production environment, for high availability and for scalability, the databases should be",
    "Therefore, the units of deployment for microservices (and even for databases in this application) are",
    "Therefore, the units of deployment for microservices (and even for databases in this application) are",
    null,
    null,
    null,
    null,
    "A microservice-based solution like this has many benefits:",
    "A microservice-based solution like this has many benefits:",
    null,
    null,
    "It is easy for a developer to understand and get started quickly with good productivity.",
    "It is easy for a developer to understand and get started quickly with good productivity.",
    "Containers start fast, which makes developers more productive.",
    "Containers start fast, which makes developers more productive.",
    "An IDE like Visual Studio can load smaller projects fast, making developers productive.",
    "An IDE like Visual Studio can load smaller projects fast, making developers productive.",
    "Each microservice can be designed, developed, and deployed independently of other",
    "Each microservice can be designed, developed, and deployed independently of other",
    null,
    null,
    null,
    null,
    null,
    null,
    "97 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "97 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "deployment architecture can bring down the entire system, especially when it involves resources, such",
    "deployment architecture can bring down the entire system, especially when it involves resources, such",
    null,
    null,
    "A microservice-based solution like this also has some drawbacks:",
    "A microservice-based solution like this also has some drawbacks:",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "Another problem with direct client-to-microservice communications is that some microservices might",
    "Another problem with direct client-to-microservice communications is that some microservices might",
    "98 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "98 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Yet another drawback with this direct client-to-service approach is that it makes it difficult to refactor",
    "Yet another drawback with this direct client-to-service approach is that it makes it difficult to refactor",
    "As mentioned in the architecture section, when designing and building a complex application based",
    "As mentioned in the architecture section, when designing and building a complex application based",
    null,
    null,
    "The external architecture is the microservice architecture composed by multiple services, following the",
    "The external architecture is the microservice architecture composed by multiple services, following the",
    "99 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "99 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "For instance, in our ",
    "For instance, in our ",
    "Another reason for a different technology per microservice might be the nature of each microservice.",
    "Another reason for a different technology per microservice might be the nature of each microservice.",
    "The bottom line is that each microservice can have a different internal architecture based on different",
    "The bottom line is that each microservice can have a different internal architecture based on different",
    "There are many architectural patterns used by software architects and developers. The following are a",
    "There are many architectural patterns used by software architects and developers. The following are a",
    "Simple CRUD, single-tier, single-layer.",
    "Simple CRUD, single-tier, single-layer.",
    "100 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "100 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "You can also build microservices with many technologies and languages, such as ASP.NET Core Web",
    "You can also build microservices with many technologies and languages, such as ASP.NET Core Web",
    "The important point is that no particular architecture pattern or style, nor any particular technology, is",
    "The important point is that no particular architecture pattern or style, nor any particular technology, is",
    null,
    null,
    "Multi-architectural pattern and polyglot microservices means you can mix and match languages and",
    "Multi-architectural pattern and polyglot microservices means you can mix and match languages and",
    "101 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "101 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "For instance, for a simple CRUD maintenance application, it might not make sense to design and",
    "For instance, for a simple CRUD maintenance application, it might not make sense to design and",
    "Especially when you deal with large applications composed by multiple subsystems, you should not",
    "Especially when you deal with large applications composed by multiple subsystems, you should not",
    "There is no silver bullet or a right architecture pattern for every given case. You cannot have \u201cone",
    "There is no silver bullet or a right architecture pattern for every given case. You cannot have \u201cone",
    "This section outlines how to create a simple microservice that performs create, read, update, and",
    "This section outlines how to create a simple microservice that performs create, read, update, and",
    "From a design point of view, this type of containerized microservice is very simple. Perhaps the",
    "From a design point of view, this type of containerized microservice is very simple. Perhaps the",
    null,
    null,
    "An example of this kind of simple data-drive service is the catalog microservice from the",
    "An example of this kind of simple data-drive service is the catalog microservice from the",
    "102 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "102 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "The previous diagram shows the logical Catalog microservice, that includes its Catalog database,",
    "The previous diagram shows the logical Catalog microservice, that includes its Catalog database,",
    "Note that running a database server like SQL Server within a Docker container is great for",
    "Note that running a database server like SQL Server within a Docker container is great for",
    "Finally, by editing the Dockerfile and docker-compose.yml metadata files, you can configure how the",
    "Finally, by editing the Dockerfile and docker-compose.yml metadata files, you can configure how the",
    "To implement a simple CRUD microservice using .NET and Visual Studio, you start by creating a",
    "To implement a simple CRUD microservice using .NET and Visual Studio, you start by creating a",
    "103 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "103 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "To create an ASP.NET Core Web API Project, first select an ASP.NET Core Web Application and then",
    "To create an ASP.NET Core Web API Project, first select an ASP.NET Core Web Application and then",
    "104 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "104 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "The API project includes references to Microsoft.AspNetCore.App NuGet package, that includes",
    "The API project includes references to Microsoft.AspNetCore.App NuGet package, that includes",
    null,
    null,
    "Entity Framework (EF) Core is a lightweight, extensible, and cross-platform version of the popular",
    "Entity Framework (EF) Core is a lightweight, extensible, and cross-platform version of the popular",
    "The catalog microservice uses EF and the SQL Server provider because its database is running in a",
    "The catalog microservice uses EF and the SQL Server provider because its database is running in a",
    "105 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "105 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "any SQL Server, such as Windows on-premises or Azure SQL DB. The only thing you would need to",
    "any SQL Server, such as Windows on-premises or Azure SQL DB. The only thing you would need to",
    null,
    null,
    "With EF Core, data access is performed by using a model. A model is made up of (domain model)",
    "With EF Core, data access is performed by using a model. A model is made up of (domain model)",
    "You also need a DbContext that represents a session with the database. For the catalog microservice,",
    "You also need a DbContext that represents a session with the database. For the catalog microservice,",
    "You can have additional DbContext implementations. For example, in the sample Catalog.API",
    "You can have additional DbContext implementations. For example, in the sample Catalog.API",
    "106 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "106 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Within the DbContext, you use the OnModelCreating method to customize object/database entity",
    "Within the DbContext, you use the OnModelCreating method to customize object/database entity",
    "Querying data from Web API controllers",
    "Querying data from Web API controllers",
    "Instances of your entity classes are typically retrieved from the database using Language-Integrated",
    "Instances of your entity classes are typically retrieved from the database using Language-Integrated",
    "107 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "107 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Saving data",
    "Saving data",
    "Data is created, deleted, and modified in the database using instances of your entity classes. You",
    "Data is created, deleted, and modified in the database using instances of your entity classes. You",
    "Dependency Injection in ASP.NET Core and Web API controllers",
    "Dependency Injection in ASP.NET Core and Web API controllers",
    "In ASP.NET Core, you can use Dependency Injection (DI) out of the box. You do not need to set up a",
    "In ASP.NET Core, you can use Dependency Injection (DI) out of the box. You do not need to set up a",
    "In the CatalogController class mentioned earlier, CatalogContext (which inherits from DbContext) type",
    "In the CatalogController class mentioned earlier, CatalogContext (which inherits from DbContext) type",
    "An important configuration to set up in the Web API project is the DbContext class registration into",
    "An important configuration to set up in the Web API project is the DbContext class registration into",
    "108 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "108 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    null,
    null,
    null,
    null,
    "You can use the ASP.NET Core settings and add a ConnectionString property to your settings.json file",
    "You can use the ASP.NET Core settings and add a ConnectionString property to your settings.json file",
    "The settings.json file can have default values for the ConnectionString property or for any other",
    "The settings.json file can have default values for the ConnectionString property or for any other",
    "From your docker-compose.yml or docker-compose.override.yml files, you can initialize those",
    "From your docker-compose.yml or docker-compose.override.yml files, you can initialize those",
    "109 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "109 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "The docker-compose.yml files at the solution level are not only more flexible than configuration files",
    "The docker-compose.yml files at the solution level are not only more flexible than configuration files",
    "Finally, you can get that value from your code by using builder.Configuration",
    "Finally, you can get that value from your code by using builder.Configuration",
    "However, for production environments, you might want to explore additional ways on how to store",
    "However, for production environments, you might want to explore additional ways on how to store",
    "Azure Key Vault helps to store and safeguard cryptographic keys and secrets used by your cloud",
    "Azure Key Vault helps to store and safeguard cryptographic keys and secrets used by your cloud",
    "Azure Key Vault allows a detailed control level of the application secrets usage without the need to let",
    "Azure Key Vault allows a detailed control level of the application secrets usage without the need to let",
    "Applications have to be registered in the organization\u2019s Active Directory, so they can use the Key",
    "Applications have to be registered in the organization\u2019s Active Directory, so they can use the Key",
    "You can check the ",
    "You can check the ",
    null,
    null,
    "As business requirements change, new collections of resources may be added, the relationships",
    "As business requirements change, new collections of resources may be added, the relationships",
    "Versioning enables a Web API to indicate the features and resources that it exposes. A client",
    "Versioning enables a Web API to indicate the features and resources that it exposes. A client",
    "URI versioning",
    "URI versioning",
    "Query string versioning",
    "Query string versioning",
    "Header versioning",
    "Header versioning",
    "Query string and URI versioning are the simplest to implement. Header versioning is a good",
    "Query string and URI versioning are the simplest to implement. Header versioning is a good",
    "110 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "110 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "With URI versioning, as in the eShopOnContainers sample application, each time you modify the Web",
    "With URI versioning, as in the eShopOnContainers sample application, each time you modify the Web",
    "As shown in the following code example, the version can be set by using the Route attribute in the",
    "As shown in the following code example, the version can be set by using the Route attribute in the",
    "This versioning mechanism is simple and depends on the server routing the request to the",
    "This versioning mechanism is simple and depends on the server routing the request to the",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "The heart of Swagger is the Swagger specification, which is API description metadata in a JSON or",
    "The heart of Swagger is the Swagger specification, which is API description metadata in a JSON or",
    "The specification is the basis of the OpenAPI Specification (OAS) and is developed in an open,",
    "The specification is the basis of the OpenAPI Specification (OAS) and is developed in an open,",
    "111 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "111 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "The specification defines the structure for how a service can be discovered and how its capabilities",
    "The specification defines the structure for how a service can be discovered and how its capabilities",
    null,
    null,
    "The main reasons to generate Swagger metadata for your APIs are the following.",
    "The main reasons to generate Swagger metadata for your APIs are the following.",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "Swagger\u2019s metadata is what Microsoft Flow, PowerApps, and Azure Logic Apps use to understand how",
    "Swagger\u2019s metadata is what Microsoft Flow, PowerApps, and Azure Logic Apps use to understand how",
    "There are several options to automate Swagger metadata generation for ASP.NET Core REST API",
    "There are several options to automate Swagger metadata generation for ASP.NET Core REST API",
    null,
    null,
    null,
    null,
    "Generating Swagger metadata manually (in a JSON or YAML file) can be tedious work. However, you",
    "Generating Swagger metadata manually (in a JSON or YAML file) can be tedious work. However, you",
    "Swashbuckle automatically generates Swagger metadata for your ASP.NET Web API projects. It",
    "Swashbuckle automatically generates Swagger metadata for your ASP.NET Web API projects. It",
    "112 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "112 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "such as Azure API App, Azure Mobile App, Azure Service Fabric microservices based on ASP.NET. It",
    "such as Azure API App, Azure Mobile App, Azure Service Fabric microservices based on ASP.NET. It",
    null,
    null,
    "This means you can complement your API with a nice discovery UI to help developers to use your API.",
    "This means you can complement your API with a nice discovery UI to help developers to use your API.",
    null,
    null,
    "The Swashbuckle generated Swagger UI API documentation includes all published actions. The API",
    "The Swashbuckle generated Swagger UI API documentation includes all published actions. The API",
    "Currently, Swashbuckle consists of five internal NuGet packages under the high-level metapackage",
    "Currently, Swashbuckle consists of five internal NuGet packages under the high-level metapackage",
    "After you have installed these NuGet packages in your Web API project, you need to configure",
    "After you have installed these NuGet packages in your Web API project, you need to configure",
    "113 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "113 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "You previously saw the generated UI created by Swashbuckle for a URL like http://",
    "You previously saw the generated UI created by Swashbuckle for a URL like http://",
    "114 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "114 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "The Swagger UI API detail shows a sample of the response and can be used to execute the real API,",
    "The Swagger UI API detail shows a sample of the response and can be used to execute the real API,",
    "115 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "115 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "It is that simple. And because it is automatically generated, the Swagger metadata will grow when you",
    "It is that simple. And because it is automatically generated, the Swagger metadata will grow when you",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "For example, you can explicitly describe how you want to deploy your multi-container application in",
    "For example, you can explicitly describe how you want to deploy your multi-container application in",
    "116 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "116 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Basically, you define each of the containers you want to deploy plus certain characteristics for each",
    "Basically, you define each of the containers you want to deploy plus certain characteristics for each",
    "The following YAML code is the definition of a possible global but single docker-compose.yml file for",
    "The following YAML code is the definition of a possible global but single docker-compose.yml file for",
    "117 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "117 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "The root key in this file is services. Under that key, you define the services you want to deploy and run",
    "The root key in this file is services. Under that key, you define the services you want to deploy and run",
    "|as described in the following table.|Col2|",
    "|as described in the following table.|Col2|",
    null,
    null,
    "Focusing on a single container, the catalog-api container-microservice has a straightforward",
    "Focusing on a single container, the catalog-api container-microservice has a straightforward",
    "118 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "118 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "This containerized service has the following basic configuration:",
    "This containerized service has the following basic configuration:",
    "It is based on the custom ",
    "It is based on the custom ",
    "It defines an environment variable named ConnectionString with the connection string to be",
    "It defines an environment variable named ConnectionString with the connection string to be",
    "The SQL Server name is ",
    "The SQL Server name is ",
    "Because the connection string is defined by an environment variable, you could set that variable",
    "Because the connection string is defined by an environment variable, you could set that variable",
    "It exposes port 80 for internal access to the ",
    "It exposes port 80 for internal access to the ",
    "It forwards the exposed port 80 on the container to port 5101 on the Docker host machine",
    "It forwards the exposed port 80 on the container to port 5101 on the Docker host machine",
    "It links the web service to the ",
    "It links the web service to the ",
    "It is configured to allow access to external servers: the extra",
    "It is configured to allow access to external servers: the extra",
    "119 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "119 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "which is a development Docker host), such as a local SQL Server instance on your",
    "which is a development Docker host), such as a local SQL Server instance on your",
    "There are also other, more advanced docker-compose.yml settings that we\u2019ll discuss in the following",
    "There are also other, more advanced docker-compose.yml settings that we\u2019ll discuss in the following",
    null,
    null,
    "The docker-compose.",
    "The docker-compose.",
    "Therefore, by using the docker-compose command you can target the following main scenarios.",
    "Therefore, by using the docker-compose command you can target the following main scenarios.",
    null,
    null,
    "When you develop applications, it is important to be able to run an application in an isolated",
    "When you develop applications, it is important to be able to run an application in an isolated",
    "The docker-compose.yml file allows you to configure and document all your application\u2019s service",
    "The docker-compose.yml file allows you to configure and document all your application\u2019s service",
    "The docker-compose.yml files are configuration files interpreted by Docker engine but also serve as",
    "The docker-compose.yml files are configuration files interpreted by Docker engine but also serve as",
    null,
    null,
    "An important part of any continuous deployment (CD) or continuous integration (CI) process are the",
    "An important part of any continuous deployment (CD) or continuous integration (CI) process are the",
    "With Docker Compose, you can create and destroy that isolated environment very easily in a few",
    "With Docker Compose, you can create and destroy that isolated environment very easily in a few",
    null,
    null,
    "You can also use Compose to deploy to a remote Docker Engine. A typical case is to deploy to a",
    "You can also use Compose to deploy to a remote Docker Engine. A typical case is to deploy to a",
    "If you are using any other orchestrator (Azure Service Fabric, Kubernetes, etc.), you might need to add",
    "If you are using any other orchestrator (Azure Service Fabric, Kubernetes, etc.), you might need to add",
    "In any case, docker-compose is a convenient tool and metadata format for development, testing and",
    "In any case, docker-compose is a convenient tool and metadata format for development, testing and",
    "120 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "120 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "When targeting different environments, you should use multiple compose files. This approach lets you",
    "When targeting different environments, you should use multiple compose files. This approach lets you",
    null,
    null,
    "You could use a single docker-compose.yml file as in the simplified examples shown in previous",
    "You could use a single docker-compose.yml file as in the simplified examples shown in previous",
    "By default, Compose reads two files, a docker-compose.yml and an optional dockercompose.override.yml file. As shown in Figure 6-11, when you are using Visual Studio and enabling",
    "By default, Compose reads two files, a docker-compose.yml and an optional dockercompose.override.yml file. As shown in Figure 6-11, when you are using Visual Studio and enabling",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "You can edit the docker-compose files with any editor, like Visual Studio Code or Sublime, and run the",
    "You can edit the docker-compose files with any editor, like Visual Studio Code or Sublime, and run the",
    "By convention, the docker-compose.yml file contains your base configuration and other static",
    "By convention, the docker-compose.yml file contains your base configuration and other static",
    "The docker-compose.override.yml file, as its name suggests, contains configuration settings that",
    "The docker-compose.override.yml file, as its name suggests, contains configuration settings that",
    null,
    null,
    "A typical use case is when you define multiple compose files so you can target multiple environments,",
    "A typical use case is when you define multiple compose files so you can target multiple environments,",
    "121 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "121 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "You can combine multiple docker-compose",
    "You can combine multiple docker-compose",
    "122 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "122 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "The values in the base docker-compose.yml file should not change because of different target",
    "The values in the base docker-compose.yml file should not change because of different target",
    "If you focus on the webmvc service definition, for instance, you can see how that information is much",
    "If you focus on the webmvc service definition, for instance, you can see how that information is much",
    "The service name: webmvc.",
    "The service name: webmvc.",
    "The container\u2019s custom image: eshop/webmvc.",
    "The container\u2019s custom image: eshop/webmvc.",
    "The command to build the custom Docker image, indicating which Dockerfile to use.",
    "The command to build the custom Docker image, indicating which Dockerfile to use.",
    "Dependencies on other services, so this container does not start until the other dependency",
    "Dependencies on other services, so this container does not start until the other dependency",
    "You can have additional configuration, but the important point is that in the base dockercompose.yml file, you just want to set the information that is common across environments. Then in",
    "You can have additional configuration, but the important point is that in the base dockercompose.yml file, you just want to set the information that is common across environments. Then in",
    "Usually, the docker-compose.override.yml is used for your development environment, as in the",
    "Usually, the docker-compose.override.yml is used for your development environment, as in the",
    "123 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "123 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "124 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "124 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "In this example, the development override configuration exposes some ports to the host, defines",
    "In this example, the development override configuration exposes some ports to the host, defines",
    "When you run docker-compose up (or launch it from Visual Studio), the command reads the overrides",
    "When you run docker-compose up (or launch it from Visual Studio), the command reads the overrides",
    "Suppose that you want another Compose file for the production environment, with different",
    "Suppose that you want another Compose file for the production environment, with different",
    null,
    null,
    "To use multiple override files, or an override file with a different name, you can use the -f option with",
    "To use multiple override files, or an override file with a different name, you can use the -f option with",
    "125 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "125 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "It is convenient, especially in production environments, to be able to get configuration information",
    "It is convenient, especially in production environments, to be able to get configuration information",
    "Environment variables are created and initialized in different ways, depending on your host",
    "Environment variables are created and initialized in different ways, depending on your host",
    null,
    null,
    "Docker-compose expects each line in an .env file to be in the format ",
    "Docker-compose expects each line in an .env file to be in the format ",
    "The values set in the run-time environment always override the values defined inside the .env file. In a",
    "The values set in the run-time environment always override the values defined inside the .env file. In a",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "If you are exploring Docker and .NET on sources on the Internet, you will find Dockerfiles that",
    "If you are exploring Docker and .NET on sources on the Internet, you will find Dockerfiles that",
    "126 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "126 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "A Dockerfile like this will work. However, you can substantially optimize your images, especially your",
    "A Dockerfile like this will work. However, you can substantially optimize your images, especially your",
    "In the container and microservices model, you are constantly starting containers. The typical way of",
    "In the container and microservices model, you are constantly starting containers. The typical way of",
    "The .NET team has been doing important work to make .NET and ASP.NET Core a container-optimized",
    "The .NET team has been doing important work to make .NET and ASP.NET Core a container-optimized",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "For faster startup, runtime images also automatically set aspnetcore",
    "For faster startup, runtime images also automatically set aspnetcore",
    null,
    null,
    null,
    null,
    null,
    null,
    "You can have your databases (SQL Server, PostgreSQL, MySQL, etc.) on regular standalone servers, in",
    "You can have your databases (SQL Server, PostgreSQL, MySQL, etc.) on regular standalone servers, in",
    "127 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "127 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "have any external dependency and simply running the docker-compose up command starts the whole",
    "have any external dependency and simply running the docker-compose up command starts the whole",
    null,
    null,
    "A key point in microservices is that each microservice owns its related data, so it should have its own",
    "A key point in microservices is that each microservice owns its related data, so it should have its own",
    "The SQL Server container in the sample application is configured with the following YAML code in the",
    "The SQL Server container in the sample application is configured with the following YAML code in the",
    "In a similar way, instead of using docker-compose, the following docker run command can run that",
    "In a similar way, instead of using docker-compose, the following docker run command can run that",
    "However, if you are deploying a multi-container application like eShopOnContainers, it is more",
    "However, if you are deploying a multi-container application like eShopOnContainers, it is more",
    "When you start this SQL Server container for the first time, the container initializes SQL Server with the",
    "When you start this SQL Server container for the first time, the container initializes SQL Server with the",
    "The eShopOnContainers application initializes each microservice database with sample data by",
    "The eShopOnContainers application initializes each microservice database with sample data by",
    "Having SQL Server running as a container is not just useful for a demo where you might not have",
    "Having SQL Server running as a container is not just useful for a demo where you might not have",
    "128 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "128 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "environments so that you can easily run integration tests starting from a clean SQL Server image and",
    "environments so that you can easily run integration tests starting from a clean SQL Server image and",
    null,
    null,
    null,
    null,
    null,
    null,
    "To add data to the database when the application starts up, you can add code like the following to",
    "To add data to the database when the application starts up, you can add code like the following to",
    "129 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "129 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "There\u2019s an important caveat when applying migrations and seeding a database during container",
    "There\u2019s an important caveat when applying migrations and seeding a database during container",
    "130 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "130 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "The following code in the custom CatalogContextSeed class populates the data.",
    "The following code in the custom CatalogContextSeed class populates the data.",
    "When you run integration tests, having a way to generate data consistent with your integration tests is",
    "When you run integration tests, having a way to generate data consistent with your integration tests is",
    "131 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "131 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Another good choice when running tests is to use the Entity Framework InMemory database provider.",
    "Another good choice when running tests is to use the Entity Framework InMemory database provider.",
    "There is an important catch, though. The in-memory database does not support many constraints that",
    "There is an important catch, though. The in-memory database does not support many constraints that",
    "Even so, an in-memory database is still useful for testing and prototyping. But if you want to create",
    "Even so, an in-memory database is still useful for testing and prototyping. But if you want to create",
    "You can run Redis on a container, especially for development and testing and for proof-of-concept",
    "You can run Redis on a container, especially for development and testing and for proof-of-concept",
    "However, when you run Redis in production, it is better to look for a high-availability solution like",
    "However, when you run Redis in production, it is better to look for a high-availability solution like",
    "Redis provides a Docker image with Redis. That image is available from Docker Hub at this URL:",
    "Redis provides a Docker image with Redis. That image is available from Docker Hub at this URL:",
    null,
    null,
    "132 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "132 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "You can directly run a Docker Redis container by executing the following Docker CLI command in your",
    "You can directly run a Docker Redis container by executing the following Docker CLI command in your",
    "The Redis image includes expose:6379 (the port used by Redis), so standard container linking will",
    "The Redis image includes expose:6379 (the port used by Redis), so standard container linking will",
    "In eShopOnContainers, the basket-api microservice uses a Redis cache running as a container. That",
    "In eShopOnContainers, the basket-api microservice uses a Redis cache running as a container. That",
    "This code in the docker-compose.yml defines a container named basketdata based on the redis image",
    "This code in the docker-compose.yml defines a container named basketdata based on the redis image",
    "Finally, in the ",
    "Finally, in the ",
    "As mentioned before, the name of the microservice basketdata is resolved by Docker\u2019s internal",
    "As mentioned before, the name of the microservice basketdata is resolved by Docker\u2019s internal",
    "As described earlier, when you use event-based communication, a microservice publishes an event",
    "As described earlier, when you use event-based communication, a microservice publishes an event",
    "You can use events to implement business transactions that span multiple services, which give you",
    "You can use events to implement business transactions that span multiple services, which give you",
    "133 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "133 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "of distributed actions. At each action, the microservice updates a business entity and publishes an",
    "of distributed actions. At each action, the microservice updates a business entity and publishes an",
    null,
    null,
    "This section describes how you can implement this type of communication with .NET by using a",
    "This section describes how you can implement this type of communication with .NET by using a",
    "As noted in the architecture section, you can choose from multiple messaging technologies for",
    "As noted in the architecture section, you can choose from multiple messaging technologies for",
    "For implementing just an event bus proof-of-concept for your development environment, as in the",
    "For implementing just an event bus proof-of-concept for your development environment, as in the",
    null,
    null,
    "134 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "134 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "Of course, you could always build your own service bus features on top of lower-level technologies",
    "Of course, you could always build your own service bus features on top of lower-level technologies",
    "To reiterate: the sample event bus abstractions and implementation showcased in the",
    "To reiterate: the sample event bus abstractions and implementation showcased in the",
    "Integration events are used for bringing domain state in sync across multiple microservices or external",
    "Integration events are used for bringing domain state in sync across multiple microservices or external",
    "An integration event is basically a data-holding class, as in the following example:",
    "An integration event is basically a data-holding class, as in the following example:",
    "The integration events can be defined at the application level of each microservice, so they are",
    "The integration events can be defined at the application level of each microservice, so they are",
    "There are only a few kinds of libraries you should share across microservices. One is libraries that are",
    "There are only a few kinds of libraries you should share across microservices. One is libraries that are",
    "135 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "135 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "An event bus allows publish/subscribe-style communication between microservices without requiring",
    "An event bus allows publish/subscribe-style communication between microservices without requiring",
    null,
    null,
    "The above diagram shows that microservice A publishes to Event Bus, which distributes to subscribing",
    "The above diagram shows that microservice A publishes to Event Bus, which distributes to subscribing",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "How do you achieve anonymity between publisher and subscriber? An easy way is let a middleman",
    "How do you achieve anonymity between publisher and subscriber? An easy way is let a middleman",
    "An event bus is typically composed of two parts:",
    "An event bus is typically composed of two parts:",
    "The abstraction or interface.",
    "The abstraction or interface.",
    "One or more implementations.",
    "One or more implementations.",
    "136 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "136 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "In Figure 6-19 you can see how, from an application point of view, the event bus is nothing more than",
    "In Figure 6-19 you can see how, from an application point of view, the event bus is nothing more than",
    "In Figure 6-20, you can see an abstraction of an event bus with multiple implementations based on",
    "In Figure 6-20, you can see an abstraction of an event bus with multiple implementations based on",
    null,
    null,
    "It\u2019s good to have the event bus defined through an interface so it can be implemented with several",
    "It\u2019s good to have the event bus defined through an interface so it can be implemented with several",
    null,
    null,
    "Let\u2019s start with some implementation code for the event bus interface and possible implementations",
    "Let\u2019s start with some implementation code for the event bus interface and possible implementations",
    "137 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "137 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "The Publish method is straightforward. The event bus will broadcast the integration event passed to it",
    "The Publish method is straightforward. The event bus will broadcast the integration event passed to it",
    "The Subscribe methods (you can have several implementations depending on the arguments) are",
    "The Subscribe methods (you can have several implementations depending on the arguments) are",
    "Some production-ready messaging solutions:",
    "Some production-ready messaging solutions:",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "One of the event bus custom implementations in eShopOnContainers is basically a library using the",
    "One of the event bus custom implementations in eShopOnContainers is basically a library using the",
    "The event bus implementation with RabbitMQ lets microservices subscribe to events, publish events,",
    "The event bus implementation with RabbitMQ lets microservices subscribe to events, publish events,",
    "138 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "138 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "RabbitMQ functions as an intermediary between message publisher and subscribers, to handle",
    "RabbitMQ functions as an intermediary between message publisher and subscribers, to handle",
    "The RabbitMQ implementation of a sample dev/test event bus is boilerplate code. It has to handle the",
    "The RabbitMQ implementation of a sample dev/test event bus is boilerplate code. It has to handle the",
    "The following code is a ",
    "The following code is a ",
    "139 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "139 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "As mentioned earlier, there are many possible configurations in RabbitMQ, so this code should be",
    "As mentioned earlier, there are many possible configurations in RabbitMQ, so this code should be",
    "As with the publish code, the following code is a simplification of part of the event bus",
    "As with the publish code, the following code is a simplification of part of the event bus",
    "140 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "140 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Each event type has a related channel to get events from RabbitMQ. You can then have as many event",
    "Each event type has a related channel to get events from RabbitMQ. You can then have as many event",
    "The Subscribe method accepts an IIntegrationEventHandler object, which is like a callback method in",
    "The Subscribe method accepts an IIntegrationEventHandler object, which is like a callback method in",
    "As mentioned above, the event bus implemented in eShopOnContainers has only an educational",
    "As mentioned above, the event bus implemented in eShopOnContainers has only an educational",
    "For production scenarios check the additional resources below, specific for RabbitMQ, and the",
    "For production scenarios check the additional resources below, specific for RabbitMQ, and the",
    "A production-ready solution with support for RabbitMQ.",
    "A production-ready solution with support for RabbitMQ.",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "The first step for using the event bus is to subscribe the microservices to the events they want to",
    "The first step for using the event bus is to subscribe the microservices to the events they want to",
    "The following simple code shows what each receiver microservice needs to implement when starting",
    "The following simple code shows what each receiver microservice needs to implement when starting",
    "For instance, when subscribing to the ProductPriceChangedIntegrationEvent event, that makes the",
    "For instance, when subscribing to the ProductPriceChangedIntegrationEvent event, that makes the",
    "141 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "141 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "After this code runs, the subscriber microservice will be listening through RabbitMQ channels. When",
    "After this code runs, the subscriber microservice will be listening through RabbitMQ channels. When",
    "Finally, the message sender (origin microservice) publishes the integration events with code similar to",
    "Finally, the message sender (origin microservice) publishes the integration events with code similar to",
    "First, the event bus implementation object (based on RabbitMQ or based on a service bus) would be",
    "First, the event bus implementation object (based on RabbitMQ or based on a service bus) would be",
    "Then you use it from your controller\u2019s methods, like in the UpdateProduct method:",
    "Then you use it from your controller\u2019s methods, like in the UpdateProduct method:",
    "142 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "142 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "In this case, since the origin microservice is a simple CRUD microservice, that code is placed right into",
    "In this case, since the origin microservice is a simple CRUD microservice, that code is placed right into",
    "In more advanced microservices, like when using CQRS approaches, it can be implemented in the",
    "In more advanced microservices, like when using CQRS approaches, it can be implemented in the",
    null,
    null,
    "When you publish integration events through a distributed messaging system like your event bus, you",
    "When you publish integration events through a distributed messaging system like your event bus, you",
    "Basically, you use microservices to build scalable and highly available systems. Simplifying somewhat,",
    "Basically, you use microservices to build scalable and highly available systems. Simplifying somewhat,",
    "In microservices-based architectures, you should choose availability and tolerance, and you should",
    "In microservices-based architectures, you should choose availability and tolerance, and you should",
    "Let\u2019s go back to the initial issue and its example. If the service crashes after the database is updated",
    "Let\u2019s go back to the initial issue and its example. If the service crashes after the database is updated",
    "As mentioned earlier in the architecture section, you can have several approaches for dealing with this",
    "As mentioned earlier in the architecture section, you can have several approaches for dealing with this",
    null,
    null,
    "Using transaction log mining.",
    "Using transaction log mining.",
    null,
    null,
    "For this scenario, using the full Event Sourcing (ES) pattern is one of the best approaches, if not ",
    "For this scenario, using the full Event Sourcing (ES) pattern is one of the best approaches, if not ",
    "143 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "143 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "data. Storing only domain events can have great benefits, such as having the history of your system",
    "data. Storing only domain events can have great benefits, such as having the history of your system",
    "The option to use transaction log mining initially looks transparent. However, to use this approach,",
    "The option to use transaction log mining initially looks transparent. However, to use this approach,",
    "A balanced approach is a mix of a transactional database table and a simplified ES pattern. You can",
    "A balanced approach is a mix of a transactional database table and a simplified ES pattern. You can",
    "If the publish-event action in the event bus fails, the data still will not be inconsistent within the origin",
    "If the publish-event action in the event bus fails, the data still will not be inconsistent within the origin",
    "Notice that with this approach, you are persisting only the integration events for each origin",
    "Notice that with this approach, you are persisting only the integration events for each origin",
    "Therefore, this balanced approach is a simplified ES system. You need a list of integration events with",
    "Therefore, this balanced approach is a simplified ES system. You need a list of integration events with",
    "If you are already using a relational database, you can use a transactional table to store integration",
    "If you are already using a relational database, you can use a transactional table to store integration",
    "Step by step, the process goes like this:",
    "Step by step, the process goes like this:",
    "The application begins a local database transaction.",
    "The application begins a local database transaction.",
    "It then updates the state of your domain entities and inserts an event into the integration",
    "It then updates the state of your domain entities and inserts an event into the integration",
    "Finally, it commits the transaction, so you get the desired atomicity and then",
    "Finally, it commits the transaction, so you get the desired atomicity and then",
    "144 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "144 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "You publish the event somehow (next).",
    "You publish the event somehow (next).",
    "When implementing the steps of publishing the events, you have these choices:",
    "When implementing the steps of publishing the events, you have these choices:",
    "Publish the integration event right after committing the transaction and use another local",
    "Publish the integration event right after committing the transaction and use another local",
    "Use the table as a kind of queue. A separate application thread or process queries the",
    "Use the table as a kind of queue. A separate application thread or process queries the",
    "Figure 6-22 shows the architecture for the first of these approaches.",
    "Figure 6-22 shows the architecture for the first of these approaches.",
    null,
    null,
    "The approach illustrated in Figure 6-22 is missing an additional worker microservice that is in charge",
    "The approach illustrated in Figure 6-22 is missing an additional worker microservice that is in charge",
    "About the second approach: you use the EventLog table as a queue and always use a worker",
    "About the second approach: you use the EventLog table as a queue and always use a worker",
    "145 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "145 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "For simplicity, the eShopOnContainers sample uses the first approach (with no additional processes or",
    "For simplicity, the eShopOnContainers sample uses the first approach (with no additional processes or",
    null,
    null,
    "The following code shows how you can create a single transaction involving multiple DbContext",
    "The following code shows how you can create a single transaction involving multiple DbContext",
    "The transaction in the example code below will not be resilient if connections to the database have",
    "The transaction in the example code below will not be resilient if connections to the database have",
    "For clarity, the following example shows the whole process in a single piece of code. However, the",
    "For clarity, the following example shows the whole process in a single piece of code. However, the",
    "146 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "146 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "After the ProductPriceChangedIntegrationEvent integration event is created, the transaction that",
    "After the ProductPriceChangedIntegrationEvent integration event is created, the transaction that",
    "The event log table is updated atomically with the original database operation, using a local",
    "The event log table is updated atomically with the original database operation, using a local",
    "147 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "147 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "In addition to the event subscription logic, you need to implement the internal code for the",
    "In addition to the event subscription logic, you need to implement the internal code for the",
    "An event handler first receives an event instance from the event bus. Then it locates the component to",
    "An event handler first receives an event instance from the event bus. Then it locates the component to",
    "148 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "148 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "The event handler needs to verify whether the product exists in any of the basket instances. It also",
    "The event handler needs to verify whether the product exists in any of the basket instances. It also",
    null,
    null,
    "An important aspect of update message events is that a failure at any point in the communication",
    "An important aspect of update message events is that a failure at any point in the communication",
    "As noted earlier, idempotency means that an operation can be performed multiple times without",
    "As noted earlier, idempotency means that an operation can be performed multiple times without",
    "An example of an idempotent operation is a SQL statement that inserts data into a table only if that",
    "An example of an idempotent operation is a SQL statement that inserts data into a table only if that",
    "149 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "149 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "processed more than once. For instance, if retry logic causes a sender to send exactly the same",
    "processed more than once. For instance, if retry logic causes a sender to send exactly the same",
    "It is possible to design idempotent messages. For example, you can create an event that says \u201cset the",
    "It is possible to design idempotent messages. For example, you can create an event that says \u201cset the",
    "Another example might be an order-completed event that\u2019s propagated to multiple subscribers. The",
    "Another example might be an order-completed event that\u2019s propagated to multiple subscribers. The",
    "It is convenient to have some kind of identity per event so that you can create logic that enforces that",
    "It is convenient to have some kind of identity per event so that you can create logic that enforces that",
    "Some message processing is inherently idempotent. For example, if a system generates image",
    "Some message processing is inherently idempotent. For example, if a system generates image",
    null,
    null,
    null,
    null,
    "You can make sure that message events are sent and processed only once per subscriber at different",
    "You can make sure that message events are sent and processed only once per subscriber at different",
    null,
    null,
    "One way to make sure that an event is processed only once by any receiver is by implementing certain",
    "One way to make sure that an event is processed only once by any receiver is by implementing certain",
    "150 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "150 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "When intermittent network failures happen, messages can be duplicated, and the message receiver",
    "When intermittent network failures happen, messages can be duplicated, and the message receiver",
    null,
    null,
    "If the \u201credelivered\u201d flag is set, the receiver must take that into account, because the message might",
    "If the \u201credelivered\u201d flag is set, the receiver must take that into account, because the message might",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "151 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "151 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "Controllers are a central part of any ASP.NET Core API service and ASP.NET MVC Web application. As",
    "Controllers are a central part of any ASP.NET Core API service and ASP.NET MVC Web application. As",
    "You need to test how the controller behaves based on valid or invalid inputs, and test controller",
    "You need to test how the controller behaves based on valid or invalid inputs, and test controller",
    "Unit tests. These tests ensure that individual components of the application work as expected.",
    "Unit tests. These tests ensure that individual components of the application work as expected.",
    "Integration tests. These tests ensure that component interactions work as expected against",
    "Integration tests. These tests ensure that component interactions work as expected against",
    "152 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "152 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Functional tests for each microservice. These tests ensure that the application works as",
    "Functional tests for each microservice. These tests ensure that the application works as",
    "Service tests. These tests ensure that end-to-end service use cases, including testing multiple",
    "Service tests. These tests ensure that end-to-end service use cases, including testing multiple",
    null,
    null,
    "Unit testing involves testing a part of an application in isolation from its infrastructure and",
    "Unit testing involves testing a part of an application in isolation from its infrastructure and",
    "As you unit test your controller actions, make sure you focus only on their behavior. A controller unit",
    "As you unit test your controller actions, make sure you focus only on their behavior. A controller unit",
    "Unit tests are implemented based on test frameworks like xUnit.net, MSTest, Moq, or NUnit. For the",
    "Unit tests are implemented based on test frameworks like xUnit.net, MSTest, Moq, or NUnit. For the",
    "When you write a unit test for a Web API controller, you instantiate the controller class directly using",
    "When you write a unit test for a Web API controller, you instantiate the controller class directly using",
    "153 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "153 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "As noted, integration tests and functional tests have different purposes and goals. However, the way",
    "As noted, integration tests and functional tests have different purposes and goals. However, the way",
    "Integration testing ensures that an application\u2019s components function correctly when assembled.",
    "Integration testing ensures that an application\u2019s components function correctly when assembled.",
    "Unlike unit testing, integration tests frequently involve application infrastructure concerns, such as a",
    "Unlike unit testing, integration tests frequently involve application infrastructure concerns, such as a",
    "Because integration tests exercise larger segments of code than unit tests, and because integration",
    "Because integration tests exercise larger segments of code than unit tests, and because integration",
    "ASP.NET Core includes a built-in test web host that can be used to handle HTTP requests without",
    "ASP.NET Core includes a built-in test web host that can be used to handle HTTP requests without",
    "As you can see in the following code, when you create integration tests for ASP.NET Core controllers,",
    "As you can see in the following code, when you create integration tests for ASP.NET Core controllers,",
    "154 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "154 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "As noted earlier, when you test multi-container applications, all the microservices need to be running",
    "As noted earlier, when you test multi-container applications, all the microservices need to be running",
    "There are a few approaches you can use. In the docker-compose.yml file that you use to deploy the",
    "There are a few approaches you can use. In the docker-compose.yml file that you use to deploy the",
    "Once the compose application is up and running, you can take advantage of breakpoints and",
    "Once the compose application is up and running, you can take advantage of breakpoints and",
    "The reference application (eShopOnContainers) tests were recently restructured and now there are",
    "The reference application (eShopOnContainers) tests were recently restructured and now there are",
    null,
    null,
    "155 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "155 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    null,
    null,
    "While unit and integration tests are organized in a test folder within the microservice project,",
    "While unit and integration tests are organized in a test folder within the microservice project,",
    null,
    null,
    "Microservice and Application functional/integration tests are run from Visual Studio, using the regular",
    "Microservice and Application functional/integration tests are run from Visual Studio, using the regular",
    null,
    null,
    "156 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "156 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "So, to run the functional/integration tests you must first run this command, from the solution test",
    "So, to run the functional/integration tests you must first run this command, from the solution test",
    "As you can see, these docker-compose files only start the Redis, RabbitMQ, SQL Server, and MongoDB",
    "As you can see, these docker-compose files only start the Redis, RabbitMQ, SQL Server, and MongoDB",
    null,
    null,
    null,
    null,
    null,
    null,
    "Background tasks and scheduled jobs are something you might need to use in any application,",
    "Background tasks and scheduled jobs are something you might need to use in any application,",
    "157 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "157 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "From a generic point of view, in .NET we called these type of tasks ",
    "From a generic point of view, in .NET we called these type of tasks ",
    null,
    null,
    null,
    null,
    "ASP.NET Core 1.x and 2.x support IWebHost for background processes in web apps. .NET Core 2.1 and",
    "ASP.NET Core 1.x and 2.x support IWebHost for background processes in web apps. .NET Core 2.1 and",
    "A WebHost (base class implementing IWebHost) in ASP.NET Core 2.0 is the infrastructure artifact you",
    "A WebHost (base class implementing IWebHost) in ASP.NET Core 2.0 is the infrastructure artifact you",
    "A Host (base class implementing IHost) was introduced in .NET Core 2.1. Basically, a Host allows you",
    "A Host (base class implementing IHost) was introduced in .NET Core 2.1. Basically, a Host allows you",
    "Therefore, you can choose and either create a specialized host-process with IHost to handle the",
    "Therefore, you can choose and either create a specialized host-process with IHost to handle the",
    "158 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "158 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Each approach has pros and cons depending on your business and scalability needs. The bottom line",
    "Each approach has pros and cons depending on your business and scalability needs. The bottom line",
    "Let\u2019s drill down further on the IHostedService interface since its usage is pretty similar in a WebHost or",
    "Let\u2019s drill down further on the IHostedService interface since its usage is pretty similar in a WebHost or",
    "SignalR is one example of an artifact using hosted services, but you can also use it for much simpler",
    "SignalR is one example of an artifact using hosted services, but you can also use it for much simpler",
    "A background task polling a database looking for changes.",
    "A background task polling a database looking for changes.",
    "A scheduled task updating some cache periodically.",
    "A scheduled task updating some cache periodically.",
    "An implementation of QueueBackgroundWorkItem that allows a task to be executed on a",
    "An implementation of QueueBackgroundWorkItem that allows a task to be executed on a",
    "Processing messages from a message queue in the background of a web app while sharing",
    "Processing messages from a message queue in the background of a web app while sharing",
    "A background task started with Task.Run().",
    "A background task started with Task.Run().",
    "You can basically offload any of those actions to a background task that implements IHostedService.",
    "You can basically offload any of those actions to a background task that implements IHostedService.",
    "The way you add one or multiple IHostedServices into your WebHost or Host is by registering them",
    "The way you add one or multiple IHostedServices into your WebHost or Host is by registering them",
    "In that code, the GracePeriodManagerService hosted service is real code from the Ordering business",
    "In that code, the GracePeriodManagerService hosted service is real code from the Ordering business",
    "The IHostedService background task execution is coordinated with the lifetime of the application (host",
    "The IHostedService background task execution is coordinated with the lifetime of the application (host",
    "Without using IHostedService, you could always start a background thread to run any task. The",
    "Without using IHostedService, you could always start a background thread to run any task. The",
    "When you register an IHostedService, .NET calls the StartAsync() and StopAsync() methods of your",
    "When you register an IHostedService, .NET calls the StartAsync() and StopAsync() methods of your",
    "159 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "159 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "As you can imagine, you can create multiple implementations of IHostedService and register each of",
    "As you can imagine, you can create multiple implementations of IHostedService and register each of",
    "As a developer, you are responsible for handling the stopping action of your services when",
    "As a developer, you are responsible for handling the stopping action of your services when",
    "You could go ahead and create your custom hosted service class from scratch and implement the",
    "You could go ahead and create your custom hosted service class from scratch and implement the",
    "However, since most background tasks will have similar needs in regard to the cancellation tokens",
    "However, since most background tasks will have similar needs in regard to the cancellation tokens",
    "That class provides the main work needed to set up the background task.",
    "That class provides the main work needed to set up the background task.",
    "The next code is the abstract BackgroundService base class as implemented in .NET.",
    "The next code is the abstract BackgroundService base class as implemented in .NET.",
    "160 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "160 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "When deriving from the previous abstract base class, thanks to that inherited implementation, you just",
    "When deriving from the previous abstract base class, thanks to that inherited implementation, you just",
    "161 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "161 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "In this specific case for eShopOnContainers, it\u2019s executing an application method that\u2019s querying a",
    "In this specific case for eShopOnContainers, it\u2019s executing an application method that\u2019s querying a",
    "Of course, you could run any other business background task, instead.",
    "Of course, you could run any other business background task, instead.",
    "By default, the cancellation token is set with a 5 seconds timeout, although you can change that value",
    "By default, the cancellation token is set with a 5 seconds timeout, although you can change that value",
    "The following code would be changing that time to 10 seconds.",
    "The following code would be changing that time to 10 seconds.",
    null,
    null,
    "The following image shows a visual summary of the classes and interfaces involved when",
    "The following image shows a visual summary of the classes and interfaces involved when",
    null,
    null,
    "Class diagram: IWebHost and IHost can host many services, which inherit from BackgroundService,",
    "Class diagram: IWebHost and IHost can host many services, which inherit from BackgroundService,",
    "162 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "162 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "It is important to note that the way you deploy your ASP.NET Core WebHost or .NET Host might",
    "It is important to note that the way you deploy your ASP.NET Core WebHost or .NET Host might",
    "But even for a WebHost deployed into an app pool, there are scenarios like repopulating or flushing",
    "But even for a WebHost deployed into an app pool, there are scenarios like repopulating or flushing",
    "The IHostedService interface provides a convenient way to start background tasks in an ASP.NET Core",
    "The IHostedService interface provides a convenient way to start background tasks in an ASP.NET Core",
    null,
    null,
    null,
    null,
    null,
    null,
    "The following architecture diagram shows how API Gateways were implemented with Ocelot in",
    "The following architecture diagram shows how API Gateways were implemented with Ocelot in",
    "163 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "163 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "That diagram shows how the whole application is deployed into a single Docker host or development",
    "That diagram shows how the whole application is deployed into a single Docker host or development",
    "In addition, the infrastructure assets such as databases, cache, and message brokers should be",
    "In addition, the infrastructure assets such as databases, cache, and message brokers should be",
    "As you can also notice in the diagram, having several API Gateways allows multiple development",
    "As you can also notice in the diagram, having several API Gateways allows multiple development",
    "If you had a single monolithic API Gateway that would mean a single point to be updated by several",
    "If you had a single monolithic API Gateway that would mean a single point to be updated by several",
    "Going much further in the design, sometimes a fine-grained API Gateway can also be limited to a",
    "Going much further in the design, sometimes a fine-grained API Gateway can also be limited to a",
    "For instance, fine granularity in the API Gateway tier can be especially useful for more advanced",
    "For instance, fine granularity in the API Gateway tier can be especially useful for more advanced",
    "We delve into more details in the previous section Creating composite UI based on microservices.",
    "We delve into more details in the previous section Creating composite UI based on microservices.",
    "As a key takeaway, for many medium- and large-size applications, using a custom-built API Gateway",
    "As a key takeaway, for many medium- and large-size applications, using a custom-built API Gateway",
    "164 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "164 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "As an example, eShopOnContainers has around six internal microservice-types that have to be",
    "As an example, eShopOnContainers has around six internal microservice-types that have to be",
    null,
    null,
    "About the Identity service, in the design it\u2019s left out of the API Gateway routing because it\u2019s the only",
    "About the Identity service, in the design it\u2019s left out of the API Gateway routing because it\u2019s the only",
    "All those services are currently implemented as ASP.NET Core Web API services, as you can tell from",
    "All those services are currently implemented as ASP.NET Core Web API services, as you can tell from",
    null,
    null,
    "165 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "165 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "You can see that the Catalog microservice is a typical ASP.NET Core Web API project with several",
    "You can see that the Catalog microservice is a typical ASP.NET Core Web API project with several",
    "The HTTP request will end up running that kind of C# code accessing the microservice database and",
    "The HTTP request will end up running that kind of C# code accessing the microservice database and",
    "Regarding the microservice URL, when the containers are deployed in your local development PC",
    "Regarding the microservice URL, when the containers are deployed in your local development PC",
    "The port 80 shown in the code is internal within the Docker host, so it can\u2019t be reached by client apps.",
    "The port 80 shown in the code is internal within the Docker host, so it can\u2019t be reached by client apps.",
    "Client apps can access only the external ports (if any) published when deploying with dockercompose.",
    "Client apps can access only the external ports (if any) published when deploying with dockercompose.",
    "Those external ports shouldn\u2019t be published when deploying to a production environment. For this",
    "Those external ports shouldn\u2019t be published when deploying to a production environment. For this",
    "However, when developing, you want to access the microservice/container directly and run it through",
    "However, when developing, you want to access the microservice/container directly and run it through",
    "Here\u2019s an example of the docker-compose.override.yml file for the Catalog microservice:",
    "Here\u2019s an example of the docker-compose.override.yml file for the Catalog microservice:",
    "166 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "166 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "You can see how in the docker-compose.override.yml configuration the internal port for the Catalog",
    "You can see how in the docker-compose.override.yml configuration the internal port for the Catalog",
    "Normally, you won\u2019t be deploying with docker-compose into a production environment because the",
    "Normally, you won\u2019t be deploying with docker-compose into a production environment because the",
    "Run the catalog microservice in your local Docker host. Either run the full eShopOnContainers solution",
    "Run the catalog microservice in your local Docker host. Either run the full eShopOnContainers solution",
    "This command only runs the catalog-api service container plus dependencies that are specified in the",
    "This command only runs the catalog-api service container plus dependencies that are specified in the",
    "Then, you can directly access the Catalog microservice and see its methods through the Swagger UI",
    "Then, you can directly access the Catalog microservice and see its methods through the Swagger UI",
    "167 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "167 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "At this point, you could set a breakpoint in C# code in Visual Studio, test the microservice with the",
    "At this point, you could set a breakpoint in C# code in Visual Studio, test the microservice with the",
    "However, direct-access communication to the microservice, in this case through the external port",
    "However, direct-access communication to the microservice, in this case through the external port",
    "Ocelot is basically a set of middleware that you can apply in a specific order.",
    "Ocelot is basically a set of middleware that you can apply in a specific order.",
    "Ocelot is designed to work with ASP.NET Core only. The latest version of the package is 18.0 which",
    "Ocelot is designed to work with ASP.NET Core only. The latest version of the package is 18.0 which",
    "168 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "168 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "In eShopOnContainers, its API Gateway implementation is a simple ASP.NET Core WebHost project,",
    "In eShopOnContainers, its API Gateway implementation is a simple ASP.NET Core WebHost project,",
    null,
    null,
    "This ASP.NET Core WebHost project is built with two simple files: Program.cs and Startup.cs.",
    "This ASP.NET Core WebHost project is built with two simple files: Program.cs and Startup.cs.",
    "The Program.cs just needs to create and configure the typical ASP.NET Core BuildWebHost.",
    "The Program.cs just needs to create and configure the typical ASP.NET Core BuildWebHost.",
    "169 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "169 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "The important point here for Ocelot is the configuration.json file that you must provide to the builder",
    "The important point here for Ocelot is the configuration.json file that you must provide to the builder",
    "There are two sections to the configuration. An array of ReRoutes and a GlobalConfiguration. The",
    "There are two sections to the configuration. An array of ReRoutes and a GlobalConfiguration. The",
    null,
    null,
    "170 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "170 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "The main functionality of an Ocelot API Gateway is to take incoming HTTP requests and forward them",
    "The main functionality of an Ocelot API Gateway is to take incoming HTTP requests and forward them",
    "For instance, let\u2019s focus on one of the ReRoutes in the configuration.json from above, the",
    "For instance, let\u2019s focus on one of the ReRoutes in the configuration.json from above, the",
    "The DownstreamPathTemplate, Scheme, and DownstreamHostAndPorts make the internal",
    "The DownstreamPathTemplate, Scheme, and DownstreamHostAndPorts make the internal",
    "The port is the internal port used by the service. When using containers, the port specified at its",
    "The port is the internal port used by the service. When using containers, the port specified at its",
    "The Host is a service name that depends on the service name resolution you are using. When using",
    "The Host is a service name that depends on the service name resolution you are using. When using",
    "DownstreamHostAndPorts is an array that contains the host and port of any downstream services that",
    "DownstreamHostAndPorts is an array that contains the host and port of any downstream services that",
    "The UpstreamPathTemplate is the URL that Ocelot will use to identify which",
    "The UpstreamPathTemplate is the URL that Ocelot will use to identify which",
    "At this point, you could have a single Ocelot API Gateway (ASP.NET Core WebHost) using one or",
    "At this point, you could have a single Ocelot API Gateway (ASP.NET Core WebHost) using one or",
    "But as introduced in the architecture and design sections, if you really want to have autonomous",
    "But as introduced in the architecture and design sections, if you really want to have autonomous",
    "171 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "171 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "In eShopOnContainers, we\u2019re using a single Docker container image with the Ocelot API Gateway but",
    "In eShopOnContainers, we\u2019re using a single Docker container image with the Ocelot API Gateway but",
    null,
    null,
    "In eShopOnContainers, the \u201cGeneric Ocelot API Gateway Docker Image\u201d is created with the project",
    "In eShopOnContainers, the \u201cGeneric Ocelot API Gateway Docker Image\u201d is created with the project",
    "172 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "172 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Additionally, as you can see in the following docker-compose.override.yml file, the only difference",
    "Additionally, as you can see in the following docker-compose.override.yml file, the only difference",
    "173 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "173 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Because of that previous code, and as shown in the Visual Studio Explorer below, the only file needed",
    "Because of that previous code, and as shown in the Visual Studio Explorer below, the only file needed",
    null,
    null,
    "By splitting the API Gateway into multiple API Gateways, different development teams focusing on",
    "By splitting the API Gateway into multiple API Gateways, different development teams focusing on",
    "Now, if you run eShopOnContainers with the API Gateways (included by default in VS when opening",
    "Now, if you run eShopOnContainers with the API Gateways (included by default in VS when opening",
    "For instance, when visiting the upstream URL",
    "For instance, when visiting the upstream URL",
    null,
    null,
    "Because of testing or debugging reasons, if you wanted to directly access to the Catalog Docker",
    "Because of testing or debugging reasons, if you wanted to directly access to the Catalog Docker",
    "174 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "174 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "But the application is configured so it accesses all the microservices through the API Gateways, not",
    "But the application is configured so it accesses all the microservices through the API Gateways, not",
    null,
    null,
    "As introduced previously, a flexible way to implement requests aggregation is with custom services, by",
    "As introduced previously, a flexible way to implement requests aggregation is with custom services, by",
    "According to that approach, the API Gateway composition diagram is in reality a bit more extended",
    "According to that approach, the API Gateway composition diagram is in reality a bit more extended",
    "In the following diagram, you can also see how the aggregator services work with their related API",
    "In the following diagram, you can also see how the aggregator services work with their related API",
    null,
    null,
    "Zooming in further, on the \u201cShopping\u201d business area in the following image, you can see that",
    "Zooming in further, on the \u201cShopping\u201d business area in the following image, you can see that",
    "175 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "175 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "You can notice how when the diagram shows the possible requests coming from the API Gateways it",
    "You can notice how when the diagram shows the possible requests coming from the API Gateways it",
    "In the case of the \u201cMarketing\u201d business area and microservices, it is a simple use case so there was no",
    "In the case of the \u201cMarketing\u201d business area and microservices, it is a simple use case so there was no",
    null,
    null,
    "In an Ocelot API Gateway, you can sit the authentication service, such as an ASP.NET Core Web API",
    "In an Ocelot API Gateway, you can sit the authentication service, such as an ASP.NET Core Web API",
    "Since eShopOnContainers is using multiple API Gateways with boundaries based on BFF and business",
    "Since eShopOnContainers is using multiple API Gateways with boundaries based on BFF and business",
    "176 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "176 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    "However, Ocelot also supports sitting the Identity/Auth microservice within the API Gateway",
    "However, Ocelot also supports sitting the Identity/Auth microservice within the API Gateway",
    null,
    null,
    "As the previous diagram shows, when the Identity microservice is beneath the API gateway (AG): 1) AG",
    "As the previous diagram shows, when the Identity microservice is beneath the API gateway (AG): 1) AG",
    "177 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "177 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "In any case, if the app is secured at the API Gateway level, the authentication module of the Ocelot",
    "In any case, if the app is secured at the API Gateway level, the authentication module of the Ocelot",
    "The way you secure with authentication any service at the API Gateway level is by setting the",
    "The way you secure with authentication any service at the API Gateway level is by setting the",
    "When Ocelot runs, it will look at the ReRoutes AuthenticationOptions.AuthenticationProviderKey and",
    "When Ocelot runs, it will look at the ReRoutes AuthenticationOptions.AuthenticationProviderKey and",
    "Because the Ocelot WebHost is configured with the authenticationProviderKey = ",
    "Because the Ocelot WebHost is configured with the authenticationProviderKey = ",
    "178 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "178 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "Then, you also need to set authorization with the ",
    "Then, you also need to set authorization with the ",
    "The ValidAudiences such as \u201cbasket\u201d are correlated with the audience defined in each microservice",
    "The ValidAudiences such as \u201cbasket\u201d are correlated with the audience defined in each microservice",
    "If you try to access any secured microservice, like the Basket microservice with a ReRoute URL based",
    "If you try to access any secured microservice, like the Basket microservice with a ReRoute URL based",
    null,
    null,
    "In that example, when the authorization middleware is called, Ocelot will find if the user has the claim",
    "In that example, when the authorization middleware is called, Ocelot will find if the user has the claim",
    "179 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "179 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "When using Kubernetes (like in an Azure Kubernetes Service cluster), you usually unify all the HTTP",
    "When using Kubernetes (like in an Azure Kubernetes Service cluster), you usually unify all the HTTP",
    "In Kubernetes, if you don\u2019t use any ingress approach, then your services and pods have IPs only",
    "In Kubernetes, if you don\u2019t use any ingress approach, then your services and pods have IPs only",
    "But if you use an ingress approach, you\u2019ll have a middle tier between the Internet and your services",
    "But if you use an ingress approach, you\u2019ll have a middle tier between the Internet and your services",
    "As a definition, an Ingress is a collection of rules that allow inbound connections to reach the cluster",
    "As a definition, an Ingress is a collection of rules that allow inbound connections to reach the cluster",
    "In eShopOnContainers, when developing locally and using just your development machine as the",
    "In eShopOnContainers, when developing locally and using just your development machine as the",
    "However, when targeting a \u201cproduction\u201d environment based on Kubernetes, eShopOnContainers is",
    "However, when targeting a \u201cproduction\u201d environment based on Kubernetes, eShopOnContainers is",
    "API Gateways are front-ends or fa\u00e7ades surfacing only the services but not the web applications that",
    "API Gateways are front-ends or fa\u00e7ades surfacing only the services but not the web applications that",
    "The ingress, however, is just redirecting HTTP requests but not trying to hide any microservice or web",
    "The ingress, however, is just redirecting HTTP requests but not trying to hide any microservice or web",
    "Having an ingress Nginx tier in Kubernetes in front of the web applications plus the several Ocelot API",
    "Having an ingress Nginx tier in Kubernetes in front of the web applications plus the several Ocelot API",
    null,
    null,
    "A Kubernetes Ingress acts as a reverse proxy for all traffic to the app, including the web applications,",
    "A Kubernetes Ingress acts as a reverse proxy for all traffic to the app, including the web applications,",
    "180 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "180 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "exposes just a few services or endpoints via ",
    "exposes just a few services or endpoints via ",
    "/ for the client SPA web application",
    "/ for the client SPA web application",
    "/webmvc for the client MVC web application",
    "/webmvc for the client MVC web application",
    "/webstatus for the client web app showing the status/healthchecks",
    "/webstatus for the client web app showing the status/healthchecks",
    "/webshoppingapigw for the web BFF and shopping business processes",
    "/webshoppingapigw for the web BFF and shopping business processes",
    "/webmarketingapigw for the web BFF and marketing business processes",
    "/webmarketingapigw for the web BFF and marketing business processes",
    "/mobileshoppingapigw for the mobile BFF and shopping business processes",
    "/mobileshoppingapigw for the mobile BFF and shopping business processes",
    "/mobilemarketingapigw for the mobile BFF and marketing business processes",
    "/mobilemarketingapigw for the mobile BFF and marketing business processes",
    "When deploying to Kubernetes, each Ocelot API Gateway is using a different \u201cconfiguration.json\u201d file",
    "When deploying to Kubernetes, each Ocelot API Gateway is using a different \u201cconfiguration.json\u201d file",
    "In the source code files of eShopOnContainers, the original \u201cconfiguration.json\u201d files can be found",
    "In the source code files of eShopOnContainers, the original \u201cconfiguration.json\u201d files can be found",
    "There are other important features to research and use, when using an Ocelot API Gateway, described",
    "There are other important features to research and use, when using an Ocelot API Gateway, described",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "181 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    "181 CHAPTER 5 | Designing and Developing Multi-Container and Microservice-Based .NET Applications",
    null,
    null,
    null,
    null,
    "This section focuses on more advanced microservices that you implement when you need to tackle",
    "This section focuses on more advanced microservices that you implement when you need to tackle",
    "182 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "182 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "However, most of the techniques for data driven microservices, such as how to implement an ASP.NET",
    "However, most of the techniques for data driven microservices, such as how to implement an ASP.NET",
    "This section first provides details on the simplified CQRS patterns used in the eShopOnContainers",
    "This section first provides details on the simplified CQRS patterns used in the eShopOnContainers",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "183 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "183 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "CQRS is an architectural pattern that separates the models for reading and writing data. The related",
    "CQRS is an architectural pattern that separates the models for reading and writing data. The related",
    "Queries. These queries return a result and don\u2019t change the state of the system, and they\u2019re",
    "Queries. These queries return a result and don\u2019t change the state of the system, and they\u2019re",
    "Commands. These commands change the state of a system.",
    "Commands. These commands change the state of a system.",
    "184 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "184 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "CQS is a simple concept: it is about methods within the same object being either queries or",
    "CQS is a simple concept: it is about methods within the same object being either queries or",
    null,
    null,
    "The separation aspect of CQRS is achieved by grouping query operations in one layer and commands",
    "The separation aspect of CQRS is achieved by grouping query operations in one layer and commands",
    "CQRS means having two objects for a read/write operation where in other contexts there\u2019s one. There",
    "CQRS means having two objects for a read/write operation where in other contexts there\u2019s one. There",
    "An example of this kind of service is the ordering microservice from the eShopOnContainers reference",
    "An example of this kind of service is the ordering microservice from the eShopOnContainers reference",
    "185 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "185 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "The Logical \u201cOrdering\u201d Microservice includes its Ordering database, which can be, but doesn\u2019t have to",
    "The Logical \u201cOrdering\u201d Microservice includes its Ordering database, which can be, but doesn\u2019t have to",
    "The application layer can be the Web API itself. The important design aspect here is that the",
    "The application layer can be the Web API itself. The important design aspect here is that the",
    null,
    null,
    "The design of the ordering microservice at the eShopOnContainers reference application is based on",
    "The design of the ordering microservice at the eShopOnContainers reference application is based on",
    "The essence of those patterns, and the important point here, is that queries are idempotent: no matter",
    "The essence of those patterns, and the important point here, is that queries are idempotent: no matter",
    "186 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "186 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "Therefore, you could use a different \u201creads\u201d data model than the transactional logic \u201cwrites\u201d domain",
    "Therefore, you could use a different \u201creads\u201d data model than the transactional logic \u201cwrites\u201d domain",
    "On the other hand, commands, which trigger transactions and data updates, change state in the",
    "On the other hand, commands, which trigger transactions and data updates, change state in the",
    "The DDD patterns presented in this guide should not be applied universally. They introduce",
    "The DDD patterns presented in this guide should not be applied universally. They introduce",
    "One such pattern is the Aggregate pattern, which we examine more in later sections. Briefly, in the",
    "One such pattern is the Aggregate pattern, which we examine more in later sections. Briefly, in the",
    "As shown in Figure 7-2 in the previous section, this guide suggests using DDD patterns only in the",
    "As shown in Figure 7-2 in the previous section, this guide suggests using DDD patterns only in the",
    "For implementing the \u201cqueries side\u201d, you can choose between many approaches, from your full-blown",
    "For implementing the \u201cqueries side\u201d, you can choose between many approaches, from your full-blown",
    "In this guide and in eShopOnContainers (specifically the ordering microservice) we chose to",
    "In this guide and in eShopOnContainers (specifically the ordering microservice) we chose to",
    "When you use this approach, any updates to your model that impact how entities are persisted to a",
    "When you use this approach, any updates to your model that impact how entities are persisted to a",
    "It\u2019s important to understand that CQRS and most DDD patterns (like DDD layers or a domain model",
    "It\u2019s important to understand that CQRS and most DDD patterns (like DDD layers or a domain model",
    "Different Bounded Contexts (BCs) will employ different patterns. They have different responsibilities,",
    "Different Bounded Contexts (BCs) will employ different patterns. They have different responsibilities,",
    "187 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "187 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "There is only one application architecture: the architecture of the system or end-to-end application",
    "There is only one application architecture: the architecture of the system or end-to-end application",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "For reads/queries, the ordering microservice from the eShopOnContainers reference application",
    "For reads/queries, the ordering microservice from the eShopOnContainers reference application",
    "The approach is simple, as shown in Figure 7-3. The API interface is implemented by the Web API",
    "The approach is simple, as shown in Figure 7-3. The API interface is implemented by the Web API",
    null,
    null,
    "The simplest approach for the queries-side in a simplified CQRS approach can be implemented by",
    "The simplest approach for the queries-side in a simplified CQRS approach can be implemented by",
    "188 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "188 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "definitions query the database and return a dynamic ViewModel built on the fly for each query. Since",
    "definitions query the database and return a dynamic ViewModel built on the fly for each query. Since",
    "Since this approach is simple, the code required for the queries side (such as code using a micro ORM",
    "Since this approach is simple, the code required for the queries side (such as code using a micro ORM",
    null,
    null,
    "Since the queries are performed to obtain the data needed by the client applications, the returned",
    "Since the queries are performed to obtain the data needed by the client applications, the returned",
    "The returned data (ViewModel) can be the result of joining data from multiple entities or tables in the",
    "The returned data (ViewModel) can be the result of joining data from multiple entities or tables in the",
    "The ViewModels can be static types defined in classes (as is implemented in the ordering",
    "The ViewModels can be static types defined in classes (as is implemented in the ordering",
    "You can use any micro ORM, Entity Framework Core, or even plain ADO.NET for querying. In the",
    "You can use any micro ORM, Entity Framework Core, or even plain ADO.NET for querying. In the",
    "189 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "189 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "Dapper is an open-source project (original created by Sam Saffron), and is part of the building blocks",
    "Dapper is an open-source project (original created by Sam Saffron), and is part of the building blocks",
    "You also need to add a using directive so your code has access to the Dapper extension methods.",
    "You also need to add a using directive so your code has access to the Dapper extension methods.",
    null,
    null,
    "When returning ViewModels from the server-side to client apps, you can think about those",
    "When returning ViewModels from the server-side to client apps, you can think about those",
    "Those ViewModels or DTOs can be defined explicitly (as data holder classes), like the OrderSummary",
    "Those ViewModels or DTOs can be defined explicitly (as data holder classes), like the OrderSummary",
    null,
    null,
    "As shown in the following code, a ViewModel can be directly returned by the queries by just returning",
    "As shown in the following code, a ViewModel can be directly returned by the queries by just returning",
    "190 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "190 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "The important point is that by using a dynamic type, the returned collection of data is dynamically",
    "The important point is that by using a dynamic type, the returned collection of data is dynamically",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "If you want to specify response types for Swagger, you need to use explicit DTO classes as the return",
    "If you want to specify response types for Swagger, you need to use explicit DTO classes as the return",
    null,
    null,
    null,
    null,
    "In the following example, you can see how the query is returning data by using an explicit ViewModel",
    "In the following example, you can see how the query is returning data by using an explicit ViewModel",
    "191 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "191 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "Developers consuming web APIs and microservices are most concerned with what is returned\u2014",
    "Developers consuming web APIs and microservices are most concerned with what is returned\u2014",
    "Without proper documentation in the Swagger UI, the consumer lacks knowledge of what types are",
    "Without proper documentation in the Swagger UI, the consumer lacks knowledge of what types are",
    "However, the ProducesResponseType attribute cannot use dynamic as a type but requires to use",
    "However, the ProducesResponseType attribute cannot use dynamic as a type but requires to use",
    "192 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "192 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "This is another reason why explicit returned types are better than dynamic types, in the long term.",
    "This is another reason why explicit returned types are better than dynamic types, in the long term.",
    "In the following image, you can see how Swagger UI shows the ResponseType information.",
    "In the following image, you can see how Swagger UI shows the ResponseType information.",
    null,
    null,
    "The image shows some example values based on the ViewModel types and the possible HTTP status",
    "The image shows some example values based on the ViewModel types and the possible HTTP status",
    null,
    null,
    null,
    null,
    "193 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "193 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    null,
    null,
    null,
    null,
    "Domain-driven design (DDD) advocates modeling based on the reality of business as relevant to your",
    "Domain-driven design (DDD) advocates modeling based on the reality of business as relevant to your",
    "Sometimes these DDD technical rules and patterns are perceived as obstacles that have a steep",
    "Sometimes these DDD technical rules and patterns are perceived as obstacles that have a steep",
    "Where to draw the boundaries is the key task when designing and defining a microservice. DDD",
    "Where to draw the boundaries is the key task when designing and defining a microservice. DDD",
    "Determining where to place boundaries between Bounded Contexts balances two competing goals.",
    "Determining where to place boundaries between Bounded Contexts balances two competing goals.",
    null,
    null,
    "194 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "194 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "Another way to look at this aspect is autonomy. If a microservice must rely on another service to",
    "Another way to look at this aspect is autonomy. If a microservice must rely on another service to",
    "Most enterprise applications with significant business and technical complexity are defined by",
    "Most enterprise applications with significant business and technical complexity are defined by",
    "For example, an entity could be loaded from the database. Then part of that information, or an",
    "For example, an entity could be loaded from the database. Then part of that information, or an",
    "Additionally, you need to have always-valid entities (see the Designing validations in the domain",
    "Additionally, you need to have always-valid entities (see the Designing validations in the domain",
    "When tackling complexity, it is important to have a domain model controlled by aggregate roots that",
    "When tackling complexity, it is important to have a domain model controlled by aggregate roots that",
    "Figure 7-5 shows how a layered design is implemented in the eShopOnContainers application.",
    "Figure 7-5 shows how a layered design is implemented in the eShopOnContainers application.",
    "195 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "195 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "The three layers in a DDD microservice like Ordering. Each layer is a VS project: Application layer is",
    "The three layers in a DDD microservice like Ordering. Each layer is a VS project: Application layer is",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "196 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "196 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "The domain model layer is where the business is expressed. When you implement a microservice",
    "The domain model layer is where the business is expressed. When you implement a microservice",
    null,
    null,
    "Domain entities should not have any direct dependency (like deriving from a base class) on any data",
    "Domain entities should not have any direct dependency (like deriving from a base class) on any data",
    "Most modern ORM frameworks like Entity Framework Core allow this approach, so that your domain",
    "Most modern ORM frameworks like Entity Framework Core allow this approach, so that your domain",
    "Even when it is important to follow the Persistence Ignorance principle for your Domain model, you",
    "Even when it is important to follow the Persistence Ignorance principle for your Domain model, you",
    "Also, this aspect does not mean you can take a model designed for a relational database and directly",
    "Also, this aspect does not mean you can take a model designed for a relational database and directly",
    null,
    null,
    null,
    null,
    null,
    null,
    "A microservice\u2019s application layer in .NET is commonly coded as an ASP.NET Core Web API project.",
    "A microservice\u2019s application layer in .NET is commonly coded as an ASP.NET Core Web API project.",
    "197 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "197 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "Basically, the application logic is where you implement all use cases that depend on a given front end.",
    "Basically, the application logic is where you implement all use cases that depend on a given front end.",
    "The goal is that the domain logic in the domain model layer, its invariants, the data model, and",
    "The goal is that the domain logic in the domain model layer, its invariants, the data model, and",
    null,
    null,
    "The infrastructure layer is how the data that is initially held in domain entities (in memory) is persisted",
    "The infrastructure layer is how the data that is initially held in domain entities (in memory) is persisted",
    null,
    null,
    "Thus, your layers or class libraries and projects should ultimately depend on your domain model layer",
    "Thus, your layers or class libraries and projects should ultimately depend on your domain model layer",
    null,
    null,
    "Dependencies in a DDD Service, the Application layer depends on Domain and Infrastructure, and",
    "Dependencies in a DDD Service, the Application layer depends on Domain and Infrastructure, and",
    "198 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "198 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "Your goal is to create a single cohesive domain model for each business microservice or Bounded",
    "Your goal is to create a single cohesive domain model for each business microservice or Bounded",
    "Entities represent domain objects and are primarily defined by their identity, continuity, and",
    "Entities represent domain objects and are primarily defined by their identity, continuity, and",
    null,
    null,
    "The same identity (that is, the same Id value, although perhaps not the same domain entity) can be",
    "The same identity (that is, the same Id value, although perhaps not the same domain entity) can be",
    "For instance, the buyer entity might have most of a person\u2019s attributes that are defined in the user",
    "For instance, the buyer entity might have most of a person\u2019s attributes that are defined in the user",
    null,
    null,
    "A domain entity in DDD must implement the domain logic or behavior related to the entity data (the",
    "A domain entity in DDD must implement the domain logic or behavior related to the entity data (the",
    "199 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "199 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "Figure 7-8 shows a domain entity that implements not only data attributes but operations or methods",
    "Figure 7-8 shows a domain entity that implements not only data attributes but operations or methods",
    null,
    null,
    "A domain model entity implements behaviors through methods, that is, it\u2019s not an \u201canemic\u201d model. Of",
    "A domain model entity implements behaviors through methods, that is, it\u2019s not an \u201canemic\u201d model. Of",
    null,
    null,
    null,
    null,
    "The basic symptom of an Anemic Domain Model is that at first blush it looks like the real thing. There",
    "The basic symptom of an Anemic Domain Model is that at first blush it looks like the real thing. There",
    "Of course, when you use an anemic domain model, those data models will be used from a set of",
    "Of course, when you use an anemic domain model, those data models will be used from a set of",
    "The anemic domain model is just a procedural style design. Anemic entity objects are not real objects",
    "The anemic domain model is just a procedural style design. Anemic entity objects are not real objects",
    "Regardless, if your microservice or Bounded Context is very simple (a CRUD service), the anemic",
    "Regardless, if your microservice or Bounded Context is very simple (a CRUD service), the anemic",
    "200 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "200 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "That is why microservices architectures are perfect for a multi-architectural approach depending on",
    "That is why microservices architectures are perfect for a multi-architectural approach depending on",
    "Some people say that the anemic domain model is an anti-pattern. It really depends on what you are",
    "Some people say that the anemic domain model is an anti-pattern. It really depends on what you are",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "As Eric Evans has noted, \u201cMany objects do not have conceptual identity. These objects describe",
    "As Eric Evans has noted, \u201cMany objects do not have conceptual identity. These objects describe",
    "An entity requires an identity, but there are many objects in a system that do not, like the Value",
    "An entity requires an identity, but there are many objects in a system that do not, like the Value",
    "Something that is an entity in a microservice might not be an entity in another microservice, because",
    "Something that is an entity in a microservice might not be an entity in another microservice, because",
    "A person with a name and surname is usually an entity because a person has identity, even if the",
    "A person with a name and surname is usually an entity because a person has identity, even if the",
    "Value objects are hard to manage in relational databases and ORMs like Entity Framework (EF),",
    "Value objects are hard to manage in relational databases and ORMs like Entity Framework (EF),",
    "201 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "201 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "A domain model contains clusters of different data entities and processes that can control a",
    "A domain model contains clusters of different data entities and processes that can control a",
    "You usually define an aggregate based on the transactions that you need. A classic example is an",
    "You usually define an aggregate based on the transactions that you need. A classic example is an",
    "Identifying aggregates can be hard. An aggregate is a group of objects that must be consistent",
    "Identifying aggregates can be hard. An aggregate is a group of objects that must be consistent",
    null,
    null,
    "An aggregate is composed of at least one entity: the aggregate root, also called root entity or primary",
    "An aggregate is composed of at least one entity: the aggregate root, also called root entity or primary",
    "The purpose of an aggregate root is to ensure the consistency of the aggregate; it should be the only",
    "The purpose of an aggregate root is to ensure the consistency of the aggregate; it should be the only",
    "202 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "202 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "aggregate root cannot ensure that the aggregate is in a valid state. It would be like a table with a",
    "aggregate root cannot ensure that the aggregate is in a valid state. It would be like a table with a",
    "In Figure 7-9, you can see sample aggregates like the buyer aggregate, which contains a single entity",
    "In Figure 7-9, you can see sample aggregates like the buyer aggregate, which contains a single entity",
    null,
    null,
    "A DDD domain model is composed from aggregates, an aggregate can have just one entity or more,",
    "A DDD domain model is composed from aggregates, an aggregate can have just one entity or more,",
    "In order to maintain separation of aggregates and keep clear boundaries between them, it is a good",
    "In order to maintain separation of aggregates and keep clear boundaries between them, it is a good",
    "203 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "203 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "Identifying and working with aggregates requires research and experience. For more information, see",
    "Identifying and working with aggregates requires research and experience. For more information, see",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "In the previous section, the fundamental design principles and patterns for designing a domain model",
    "In the previous section, the fundamental design principles and patterns for designing a domain model",
    "The folder organization used for the eShopOnContainers reference application demonstrates the DDD",
    "The folder organization used for the eShopOnContainers reference application demonstrates the DDD",
    "204 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "204 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "Additionally, the domain model layer includes the repository contracts (interfaces) that are the",
    "Additionally, the domain model layer includes the repository contracts (interfaces) that are the",
    null,
    null,
    "An aggregate refers to a cluster of domain objects grouped together to match transactional",
    "An aggregate refers to a cluster of domain objects grouped together to match transactional",
    "Transactional consistency means that an aggregate is guaranteed to be consistent and up to date at",
    "Transactional consistency means that an aggregate is guaranteed to be consistent and up to date at",
    "205 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "205 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "If you open any of the files in an aggregate folder, you can see how it\u2019s marked as either a custom",
    "If you open any of the files in an aggregate folder, you can see how it\u2019s marked as either a custom",
    "You implement a domain model in .NET by creating POCO classes that implement your domain",
    "You implement a domain model in .NET by creating POCO classes that implement your domain",
    "206 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "206 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "It\u2019s important to note that this is a domain entity implemented as a POCO class. It doesn\u2019t have any",
    "It\u2019s important to note that this is a domain entity implemented as a POCO class. It doesn\u2019t have any",
    "In addition, the class is decorated with an interface named IAggregateRoot. That interface is an empty",
    "In addition, the class is decorated with an interface named IAggregateRoot. That interface is an empty",
    "A marker interface is sometimes considered as an anti-pattern; however, it\u2019s also a clean way to mark",
    "A marker interface is sometimes considered as an anti-pattern; however, it\u2019s also a clean way to mark",
    "Having an aggregate root means that most of the code related to consistency and business rules of",
    "Having an aggregate root means that most of the code related to consistency and business rules of",
    "A common problem in entity models is that they expose collection navigation properties as publicly",
    "A common problem in entity models is that they expose collection navigation properties as publicly",
    "In the previous code, note that many attributes are read-only or private and are only updatable by the",
    "In the previous code, note that many attributes are read-only or private and are only updatable by the",
    "207 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "207 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "For example, following DDD patterns, ",
    "For example, following DDD patterns, ",
    "In this case, the Add method is purely an operation to add data, with direct access to the OrderItems",
    "In this case, the Add method is purely an operation to add data, with direct access to the OrderItems",
    "If you go around the aggregate root, the aggregate root cannot guarantee its invariants, its validity, or",
    "If you go around the aggregate root, the aggregate root cannot guarantee its invariants, its validity, or",
    "To follow DDD patterns, entities must not have public setters in any entity property. Changes in an",
    "To follow DDD patterns, entities must not have public setters in any entity property. Changes in an",
    "Furthermore, collections within the entity (like the order items) should be read-only properties (the",
    "Furthermore, collections within the entity (like the order items) should be read-only properties (the",
    "As you can see in the code for the Order aggregate root, all setters should be private or at least readonly externally, so that any operation against the entity\u2019s data or its child entities has to be performed",
    "As you can see in the code for the Order aggregate root, all setters should be private or at least readonly externally, so that any operation against the entity\u2019s data or its child entities has to be performed",
    "The following code snippet shows the proper way to code the task of adding an OrderItem object to",
    "The following code snippet shows the proper way to code the task of adding an OrderItem object to",
    "In this snippet, most of the validations or logic related to the creation of an OrderItem object will be",
    "In this snippet, most of the validations or logic related to the creation of an OrderItem object will be",
    "208 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "208 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "Additionally, if there are different discount amounts but the product ID is the same, you would likely",
    "Additionally, if there are different discount amounts but the product ID is the same, you would likely",
    "In addition, the new OrderItem(params) operation will also be controlled and performed by the",
    "In addition, the new OrderItem(params) operation will also be controlled and performed by the",
    "When you use Entity Framework Core 1.1 or later, a DDD entity can be better expressed because it",
    "When you use Entity Framework Core 1.1 or later, a DDD entity can be better expressed because it",
    "In DDD, you want to update the entity only through methods in the entity (or the constructor) in order",
    "In DDD, you want to update the entity only through methods in the entity (or the constructor) in order",
    null,
    null,
    "Mapping properties to database table columns is not a domain responsibility but part of the",
    "Mapping properties to database table columns is not a domain responsibility but part of the",
    "When you use EF Core 1.0 or later, within the DbContext you need to map the properties that are",
    "When you use EF Core 1.0 or later, within the DbContext you need to map the properties that are",
    null,
    null,
    "With the feature in EF Core 1.1 or later to map columns to fields, it\u2019s also possible to not use",
    "With the feature in EF Core 1.1 or later to map columns to fields, it\u2019s also possible to not use",
    "For example, in the preceding OrderAggregate code example, there are several private fields, like the",
    "For example, in the preceding OrderAggregate code example, there are several private fields, like the",
    "209 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "209 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "The solution folder contains a ",
    "The solution folder contains a ",
    "Figure 7-12 shows the classes that form the seedwork of the domain model in the ordering",
    "Figure 7-12 shows the classes that form the seedwork of the domain model in the ordering",
    null,
    null,
    "This is the type of copy and paste reuse that many developers share between projects, not a formal",
    "This is the type of copy and paste reuse that many developers share between projects, not a formal",
    "210 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "210 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "The following code is an example of an Entity base class where you can place code that can be used",
    "The following code is an example of an Entity base class where you can place code that can be used",
    "211 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "211 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "The previous code using a domain event list per entity will be explained in the next sections when",
    "The previous code using a domain event list per entity will be explained in the next sections when",
    "Repository contracts are simply .NET interfaces that express the contract requirements of the",
    "Repository contracts are simply .NET interfaces that express the contract requirements of the",
    "The repositories themselves, with EF Core code or any other infrastructure dependencies and code",
    "The repositories themselves, with EF Core code or any other infrastructure dependencies and code",
    "A pattern related to this practice (placing the repository interfaces in the domain model layer) is the",
    "A pattern related to this practice (placing the repository interfaces in the domain model layer) is the",
    "Following the Separated Interface pattern enables the application layer (in this case, the Web API",
    "Following the Separated Interface pattern enables the application layer (in this case, the Web API",
    "For example, the following example with the IOrderRepository interface defines what operations the",
    "For example, the following example with the IOrderRepository interface defines what operations the",
    "212 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "212 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "As discussed in earlier sections about entities and aggregates, identity is fundamental for entities.",
    "As discussed in earlier sections about entities and aggregates, identity is fundamental for entities.",
    "A value object can reference other entities. For example, in an application that generates a route that",
    "A value object can reference other entities. For example, in an application that generates a route that",
    "Figure 7-13 shows the Address value object within the Order aggregate.",
    "Figure 7-13 shows the Address value object within the Order aggregate.",
    "213 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "213 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "As shown in Figure 7-13, an entity is usually composed of multiple attributes. For example, the Order",
    "As shown in Figure 7-13, an entity is usually composed of multiple attributes. For example, the Order",
    "There are two main characteristics for value objects:",
    "There are two main characteristics for value objects:",
    "They have no identity.",
    "They have no identity.",
    "They are immutable.",
    "They are immutable.",
    "The first characteristic was already discussed. Immutability is an important requirement. The values of",
    "The first characteristic was already discussed. Immutability is an important requirement. The values of",
    "214 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "214 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "constructed, you must provide the required values, but you must not allow them to change during the",
    "constructed, you must provide the required values, but you must not allow them to change during the",
    "Value objects allow you to perform certain tricks for performance, thanks to their immutable nature.",
    "Value objects allow you to perform certain tricks for performance, thanks to their immutable nature.",
    "In terms of implementation, you can have a value object base class that has basic utility methods like",
    "In terms of implementation, you can have a value object base class that has basic utility methods like",
    "215 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "215 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "The ValueObject is an abstract class type, but in this example, it doesn\u2019t overload the == and ",
    "The ValueObject is an abstract class type, but in this example, it doesn\u2019t overload the == and ",
    "This value object implementation of Address has no identity, and therefore no ID field is defined for it,",
    "This value object implementation of Address has no identity, and therefore no ID field is defined for it,",
    "Having no ID field in a class to be used by Entity Framework (EF) was not possible until EF Core 2.0,",
    "Having no ID field in a class to be used by Entity Framework (EF) was not possible until EF Core 2.0,",
    "It could be argued that value objects, being immutable, should be read-only (that is, have get-only",
    "It could be argued that value objects, being immutable, should be read-only (that is, have get-only",
    "216 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "216 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "through message queues, and being read-only stops the deserializer from assigning values, so you",
    "through message queues, and being read-only stops the deserializer from assigning values, so you",
    null,
    null,
    "Two instances of the Address type can be compared using all the following methods:",
    "Two instances of the Address type can be compared using all the following methods:",
    "When all the values are the same, the comparisons are correctly evaluated as true. If you didn\u2019t choose",
    "When all the values are the same, the comparisons are correctly evaluated as true. If you didn\u2019t choose",
    "You just saw how to define a value object in your domain model. But how can you actually persist it",
    "You just saw how to define a value object in your domain model. But how can you actually persist it",
    null,
    null,
    null,
    null,
    "In the initial version of eShopOnContainers (.NET Core 1.1), the hidden ID needed by EF Core",
    "In the initial version of eShopOnContainers (.NET Core 1.1), the hidden ID needed by EF Core",
    "However, the persistence of that value object into the database was performed like a regular entity in",
    "However, the persistence of that value object into the database was performed like a regular entity in",
    "217 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "217 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "With EF Core 2.0 and later, there are new and better ways to persist value objects.",
    "With EF Core 2.0 and later, there are new and better ways to persist value objects.",
    "Even with some gaps between the canonical value object pattern in DDD and the owned entity type in",
    "Even with some gaps between the canonical value object pattern in DDD and the owned entity type in",
    "The owned entity type feature was added to EF Core since version 2.0.",
    "The owned entity type feature was added to EF Core since version 2.0.",
    "An owned entity type allows you to map types that do not have their own identity explicitly defined in",
    "An owned entity type allows you to map types that do not have their own identity explicitly defined in",
    "Just by looking at the domain model, an owned type looks like it doesn\u2019t have any identity. However,",
    "Just by looking at the domain model, an owned type looks like it doesn\u2019t have any identity. However,",
    "The identity of instances of owned types is not completely their own. It consists of three components:",
    "The identity of instances of owned types is not completely their own. It consists of three components:",
    "The identity of the owner",
    "The identity of the owner",
    "The navigation property pointing to them",
    "The navigation property pointing to them",
    "In the case of collections of owned types, an independent component (supported in EF Core",
    "In the case of collections of owned types, an independent component (supported in EF Core",
    "For example, in the Ordering domain model at eShopOnContainers, as part of the Order entity, the",
    "For example, in the Ordering domain model at eShopOnContainers, as part of the Order entity, the",
    "By convention, a shadow primary key is created for the owned type and it will be mapped to the same",
    "By convention, a shadow primary key is created for the owned type and it will be mapped to the same",
    "It is important to note that owned types are never discovered by convention in EF Core, so you have",
    "It is important to note that owned types are never discovered by convention in EF Core, so you have",
    "In eShopOnContainers, in the OrderingContext.cs file, within the OnModelCreating() method, multiple",
    "In eShopOnContainers, in the OrderingContext.cs file, within the OnModelCreating() method, multiple",
    "218 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "218 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "In the following code, the persistence infrastructure is defined for the Order entity:",
    "In the following code, the persistence infrastructure is defined for the Order entity:",
    "In the previous code, the orderConfiguration.OwnsOne(o => o.Address) method specifies that the",
    "In the previous code, the orderConfiguration.OwnsOne(o => o.Address) method specifies that the",
    "By default, EF Core conventions name the database columns for the properties of the owned entity",
    "By default, EF Core conventions name the database columns for the properties of the owned entity",
    "You can append the Property().HasColumnName() fluent method to rename those columns. In the",
    "You can append the Property().HasColumnName() fluent method to rename those columns. In the",
    "It\u2019s possible to chain the OwnsOne method in a fluent mapping. In the following hypothetical",
    "It\u2019s possible to chain the OwnsOne method in a fluent mapping. In the following hypothetical",
    "219 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "219 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "Owned types are defined when you configure a navigation property to a particular type using",
    "Owned types are defined when you configure a navigation property to a particular type using",
    "The definition of an owned type in our metadata model is a composite of: the owner type, the",
    "The definition of an owned type in our metadata model is a composite of: the owner type, the",
    "The identity (key) of an owned type instance in our stack is a composite of the identity of the",
    "The identity (key) of an owned type instance in our stack is a composite of the identity of the",
    null,
    null,
    "Owned types can reference other entities, either owned (nested owned types) or non-owned",
    "Owned types can reference other entities, either owned (nested owned types) or non-owned",
    "You can map the same CLR type as different owned types in the same owner entity through",
    "You can map the same CLR type as different owned types in the same owner entity through",
    "Table splitting is set up by convention, but you can opt out by mapping the owned type to a",
    "Table splitting is set up by convention, but you can opt out by mapping the owned type to a",
    "Eager loading is performed automatically on owned types, that is, there\u2019s no need to call",
    "Eager loading is performed automatically on owned types, that is, there\u2019s no need to call",
    "Can be configured with attribute ",
    "Can be configured with attribute ",
    "Can handle collections of owned types (using version 2.2 and later).",
    "Can handle collections of owned types (using version 2.2 and later).",
    null,
    null,
    "You can\u2019t create a DbSet",
    "You can\u2019t create a DbSet",
    "You can\u2019t call ModelBuilder.Entity",
    "You can\u2019t call ModelBuilder.Entity",
    "No support for optional (that is, nullable) owned types that are mapped with the owner in the",
    "No support for optional (that is, nullable) owned types that are mapped with the owner in the",
    "No inheritance-mapping support for owned types, but you should be able to map two leaf",
    "No inheritance-mapping support for owned types, but you should be able to map two leaf",
    "220 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "220 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "Table splitting is optional, that is, they can optionally be mapped to a separate table and still",
    "Table splitting is optional, that is, they can optionally be mapped to a separate table and still",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "221 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "221 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "Instead, you can create Enumeration classes that enable all the rich features of an object-oriented",
    "Instead, you can create Enumeration classes that enable all the rich features of an object-oriented",
    null,
    null,
    "The ordering microservice in eShopOnContainers provides a sample Enumeration base class",
    "The ordering microservice in eShopOnContainers provides a sample Enumeration base class",
    "222 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "222 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "In DDD, validation rules can be thought as invariants. The main responsibility of an aggregate is to",
    "In DDD, validation rules can be thought as invariants. The main responsibility of an aggregate is to",
    "Domain entities should always be valid entities. There are a certain number of invariants for an object",
    "Domain entities should always be valid entities. There are a certain number of invariants for an object",
    "The reasoning behind this is that many bugs occur because objects are in a state they should never",
    "The reasoning behind this is that many bugs occur because objects are in a state they should never",
    "Let\u2019s propose we now have a SendUserCreationEmailService that takes a UserProfile \u2026 how can we",
    "Let\u2019s propose we now have a SendUserCreationEmailService that takes a UserProfile \u2026 how can we",
    "223 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "223 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "Validations are usually implemented in domain entity constructors or in methods that can update the",
    "Validations are usually implemented in domain entity constructors or in methods that can update the",
    null,
    null,
    "The following code example shows the simplest approach to validation in a domain entity by raising",
    "The following code example shows the simplest approach to validation in a domain entity by raising",
    "If the value of the state is invalid, the first address line and the city have already been changed. That",
    "If the value of the state is invalid, the first address line and the city have already been changed. That",
    "A similar approach can be used in the entity\u2019s constructor, raising an exception to make sure that the",
    "A similar approach can be used in the entity\u2019s constructor, raising an exception to make sure that the",
    null,
    null,
    "Data annotations, like the Required or MaxLength attributes, can be used to configure EF Core",
    "Data annotations, like the Required or MaxLength attributes, can be used to configure EF Core",
    null,
    null,
    "Having made the conceptual difference clear, you can still use data annotations and",
    "Having made the conceptual difference clear, you can still use data annotations and",
    "224 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "224 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "the result, but then again, it happens in the controller, not before persisting the entity object in the",
    "the result, but then again, it happens in the controller, not before persisting the entity object in the",
    "You can still implement custom validation in the entity class using data annotations and the",
    "You can still implement custom validation in the entity class using data annotations and the",
    null,
    null,
    "However, from a DDD point of view, the domain model is best kept lean with the use of exceptions in",
    "However, from a DDD point of view, the domain model is best kept lean with the use of exceptions in",
    "It can make sense to use data annotations at the application layer in ViewModel classes (instead of",
    "It can make sense to use data annotations at the application layer in ViewModel classes (instead of",
    null,
    null,
    "Finally, a more elaborate approach to implementing validations in the domain model is by",
    "Finally, a more elaborate approach to implementing validations in the domain model is by",
    "It is worth mentioning that you can also use just one of those patterns\u2014for example, validating",
    "It is worth mentioning that you can also use just one of those patterns\u2014for example, validating",
    null,
    null,
    "There are various approaches to deal with deferred validations in the domain. In his book",
    "There are various approaches to deal with deferred validations in the domain. In his book",
    null,
    null,
    "Also consider two-step validation. Use field-level validation on your command Data Transfer Objects",
    "Also consider two-step validation. Use field-level validation on your command Data Transfer Objects",
    "Using field validation with data annotations, for example, you do not duplicate the validation",
    "Using field validation with data annotations, for example, you do not duplicate the validation",
    null,
    null,
    null,
    null,
    "225 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "225 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "Even when the source of truth is the domain model and ultimately you must have validation at the",
    "Even when the source of truth is the domain model and ultimately you must have validation at the",
    "Client-side validation is a great convenience for users. It saves time they would otherwise spend",
    "Client-side validation is a great convenience for users. It saves time they would otherwise spend",
    "Just as the view model and the domain model are different, view model validation and domain model",
    "Just as the view model and the domain model are different, view model validation and domain model",
    "Even when using client-side validation, you should always validate your commands or input DTOs in",
    "Even when using client-side validation, you should always validate your commands or input DTOs in",
    "Therefore, in client-side code you typically validate the ViewModels. You could also validate the client",
    "Therefore, in client-side code you typically validate the ViewModels. You could also validate the client",
    "The implementation of client-side validation depends on what kind of client application you are",
    "The implementation of client-side validation depends on what kind of client application you are",
    "226 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "226 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "In summary, these are the most important concepts in regards to validation:",
    "In summary, these are the most important concepts in regards to validation:",
    "Entities and aggregates should enforce their own consistency and be \u201calways valid\u201d.",
    "Entities and aggregates should enforce their own consistency and be \u201calways valid\u201d.",
    "If you think that an entity needs to enter an invalid state, consider using a different object",
    "If you think that an entity needs to enter an invalid state, consider using a different object",
    "If you need to create several related objects, such as an aggregate, and they are only valid",
    "If you need to create several related objects, such as an aggregate, and they are only valid",
    "In most of the cases, having redundant validation in the client side is good, because the",
    "In most of the cases, having redundant validation in the client side is good, because the",
    "Use domain events to explicitly implement side effects of changes within your domain. In other words,",
    "Use domain events to explicitly implement side effects of changes within your domain. In other words,",
    "227 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "227 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "An event is something that has happened in the past. A domain event is, something that happened in",
    "An event is something that has happened in the past. A domain event is, something that happened in",
    "An important benefit of domain events is that side effects can be expressed explicitly.",
    "An important benefit of domain events is that side effects can be expressed explicitly.",
    "For example, if you\u2019re just using Entity Framework and there has to be a reaction to some event, you",
    "For example, if you\u2019re just using Entity Framework and there has to be a reaction to some event, you",
    "On the other hand, using domain events makes the concept explicit, because there\u2019s a DomainEvent",
    "On the other hand, using domain events makes the concept explicit, because there\u2019s a DomainEvent",
    "For example, in the eShopOnContainers application, when an order is created, the user becomes a",
    "For example, in the eShopOnContainers application, when an order is created, the user becomes a",
    "In short, domain events help you to express, explicitly, the domain rules, based in the ubiquitous",
    "In short, domain events help you to express, explicitly, the domain rules, based in the ubiquitous",
    "It\u2019s important to ensure that, just like a database transaction, either all the operations related to a",
    "It\u2019s important to ensure that, just like a database transaction, either all the operations related to a",
    "Domain events are similar to messaging-style events, with one important difference. With real",
    "Domain events are similar to messaging-style events, with one important difference. With real",
    "The domain events and their side effects (the actions triggered afterwards that are managed by event",
    "The domain events and their side effects (the actions triggered afterwards that are managed by event",
    "Semantically, domain and integration events are the same thing: notifications about something that",
    "Semantically, domain and integration events are the same thing: notifications about something that",
    "On the other hand, the purpose of integration events is to propagate committed transactions and",
    "On the other hand, the purpose of integration events is to propagate committed transactions and",
    "228 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "228 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "external applications. Hence, they should occur only if the entity is successfully persisted, otherwise it\u2019s",
    "external applications. Hence, they should occur only if the entity is successfully persisted, otherwise it\u2019s",
    "As mentioned before, integration events must be based on asynchronous communication between",
    "As mentioned before, integration events must be based on asynchronous communication between",
    "Thus, the event bus interface needs some infrastructure that allows inter-process and distributed",
    "Thus, the event bus interface needs some infrastructure that allows inter-process and distributed",
    "If executing a command related to one aggregate instance requires additional domain rules to be run",
    "If executing a command related to one aggregate instance requires additional domain rules to be run",
    null,
    null,
    "Figure 7-14 shows how consistency between aggregates is achieved by domain events. When the user",
    "Figure 7-14 shows how consistency between aggregates is achieved by domain events. When the user",
    "Alternately, you can have the aggregate root subscribed for events raised by members of its",
    "Alternately, you can have the aggregate root subscribed for events raised by members of its",
    "229 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "229 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "It\u2019s important to understand that this event-based communication is not implemented directly within",
    "It\u2019s important to understand that this event-based communication is not implemented directly within",
    "Handling the domain events is an application concern. The domain model layer should only focus on",
    "Handling the domain events is an application concern. The domain model layer should only focus on",
    "Domain events can also be used to trigger any number of application actions, and what is more",
    "Domain events can also be used to trigger any number of application actions, and what is more",
    "The key point is the open number of actions to be executed when a domain event occurs. Eventually,",
    "The key point is the open number of actions to be executed when a domain event occurs. Eventually,",
    null,
    null,
    "On the other hand, if you use domain events, you can create a fine-grained and decoupled",
    "On the other hand, if you use domain events, you can create a fine-grained and decoupled",
    "Send a command (for example, CreateOrder).",
    "Send a command (for example, CreateOrder).",
    "Receive the command in a command handler.",
    "Receive the command in a command handler.",
    "Execute a single aggregate\u2019s transaction.",
    "Execute a single aggregate\u2019s transaction.",
    "(Optional) Raise domain events for side effects (for example,",
    "(Optional) Raise domain events for side effects (for example,",
    "Handle domain events (within the current process) that will execute an open number of side",
    "Handle domain events (within the current process) that will execute an open number of side",
    "Verify or create buyer and payment method.",
    "Verify or create buyer and payment method.",
    "Create and send a related integration event to the event bus to propagate states",
    "Create and send a related integration event to the event bus to propagate states",
    "Handle other side effects.",
    "Handle other side effects.",
    "As shown in Figure 7-15, starting from the same domain event, you can handle multiple actions",
    "As shown in Figure 7-15, starting from the same domain event, you can handle multiple actions",
    "230 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "230 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "There can be several handlers for the same domain event in the Application Layer, one handler can",
    "There can be several handlers for the same domain event in the Application Layer, one handler can",
    "Having an open number of handlers per domain event allows you to add as many domain rules as",
    "Having an open number of handlers per domain event allows you to add as many domain rules as",
    "When the total amount purchased by a customer in the store, across any number of orders, exceeds",
    "When the total amount purchased by a customer in the store, across any number of orders, exceeds",
    "In C#, a domain event is simply a data-holding structure or class, like a DTO, with all the information",
    "In C#, a domain event is simply a data-holding structure or class, like a DTO, with all the information",
    "231 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "231 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "This is essentially a class that holds all the data related to the OrderStarted event.",
    "This is essentially a class that holds all the data related to the OrderStarted event.",
    "In terms of the ubiquitous language of the domain, since an event is something that happened in the",
    "In terms of the ubiquitous language of the domain, since an event is something that happened in the",
    "As noted earlier, an important characteristic of events is that since an event is something that",
    "As noted earlier, an important characteristic of events is that since an event is something that",
    "It\u2019s important to highlight here that if domain events were to be handled asynchronously, using a",
    "It\u2019s important to highlight here that if domain events were to be handled asynchronously, using a",
    null,
    null,
    "The next question is how to raise a domain event so it reaches its related event handlers. You can use",
    "The next question is how to raise a domain event so it reaches its related event handlers. You can use",
    null,
    null,
    "However, when the domain events class is static, it also dispatches to handlers immediately. This",
    "However, when the domain events class is static, it also dispatches to handlers immediately. This",
    "232 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "232 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "redirected to other event handlers for side effects related to other aggregates or application logic.",
    "redirected to other event handlers for side effects related to other aggregates or application logic.",
    null,
    null,
    "Instead of dispatching to a domain event handler immediately, a better approach is to add the",
    "Instead of dispatching to a domain event handler immediately, a better approach is to add the",
    "Deciding if you send the domain events right before or right after committing the transaction is",
    "Deciding if you send the domain events right before or right after committing the transaction is",
    "The deferred approach is what eShopOnContainers uses. First, you add the events happening in your",
    "The deferred approach is what eShopOnContainers uses. First, you add the events happening in your",
    "When you want to raise an event, you just add it to the event collection from code at any method of",
    "When you want to raise an event, you just add it to the event collection from code at any method of",
    null,
    null,
    "Notice that the only thing that the AddDomainEvent method is doing is adding an event to the list.",
    "Notice that the only thing that the AddDomainEvent method is doing is adding an event to the list.",
    "233 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "233 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "You actually want to dispatch the events later on, when you commit the transaction to the database. If",
    "You actually want to dispatch the events later on, when you commit the transaction to the database. If",
    "With this code, you dispatch the entity events to their respective event handlers.",
    "With this code, you dispatch the entity events to their respective event handlers.",
    "The overall result is that you\u2019ve decoupled the raising of a domain event (a simple add into a list in",
    "The overall result is that you\u2019ve decoupled the raising of a domain event (a simple add into a list in",
    "Be aware that transactional boundaries come into significant play here. If your unit of work and",
    "Be aware that transactional boundaries come into significant play here. If your unit of work and",
    null,
    null,
    "The question of whether to perform a single transaction across aggregates versus relying on eventual",
    "The question of whether to perform a single transaction across aggregates versus relying on eventual",
    "Any rule that spans Aggregates will not be expected to be up-to-date at all times. Through event",
    "Any rule that spans Aggregates will not be expected to be up-to-date at all times. Through event",
    null,
    null,
    "234 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "234 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "Thus, if executing a command on one aggregate instance requires that additional business rules",
    "Thus, if executing a command on one aggregate instance requires that additional business rules",
    "This rationale is based on embracing fine-grained transactions instead of transactions spanning many",
    "This rationale is based on embracing fine-grained transactions instead of transactions spanning many",
    "However, other developers and architects like Jimmy Bogard are okay with spanning a single",
    "However, other developers and architects like Jimmy Bogard are okay with spanning a single",
    "Typically, I want the side effects of a domain event to occur within the same logical transaction, but",
    "Typically, I want the side effects of a domain event to occur within the same logical transaction, but",
    "If you dispatch the domain events right ",
    "If you dispatch the domain events right ",
    "Actually, both approaches (single atomic transaction and eventual consistency) can be right. It really",
    "Actually, both approaches (single atomic transaction and eventual consistency) can be right. It really",
    "A way to allow compensatory actions would be to store the domain events in additional database",
    "A way to allow compensatory actions would be to store the domain events in additional database",
    "235 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "235 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "In any case, you can choose the approach you need. But the initial deferred approach\u2014raising the",
    "In any case, you can choose the approach you need. But the initial deferred approach\u2014raising the",
    "But how do you actually dispatch those events to their respective event handlers? What\u2019s the",
    "But how do you actually dispatch those events to their respective event handlers? What\u2019s the",
    null,
    null,
    "Once you\u2019re able to dispatch or publish the events, you need some kind of artifact that will publish the",
    "Once you\u2019re able to dispatch or publish the events, you need some kind of artifact that will publish the",
    "One approach is a real messaging system or even an event bus, possibly based on a service bus as",
    "One approach is a real messaging system or even an event bus, possibly based on a service bus as",
    null,
    null,
    "When you use MediatR, each event handler must use an event type that is provided on the generic",
    "When you use MediatR, each event handler must use an event type that is provided on the generic",
    "Based on the relationship between event and event handler, which can be considered the",
    "Based on the relationship between event and event handler, which can be considered the",
    null,
    null,
    "Finally, the event handler usually implements application layer code that uses infrastructure",
    "Finally, the event handler usually implements application layer code that uses infrastructure",
    "236 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "236 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "The previous domain event handler code is considered application layer code because it uses",
    "The previous domain event handler code is considered application layer code because it uses",
    null,
    null,
    "Finally, it\u2019s important to mention that you might sometimes want to propagate events across multiple",
    "Finally, it\u2019s important to mention that you might sometimes want to propagate events across multiple",
    "As stated, use domain events to explicitly implement side effects of changes within your domain. To",
    "As stated, use domain events to explicitly implement side effects of changes within your domain. To",
    "237 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "237 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "Data persistence components provide access to the data hosted within the boundaries of a",
    "Data persistence components provide access to the data hosted within the boundaries of a",
    "The Repository pattern is a Domain-Driven Design pattern intended to keep persistence concerns",
    "The Repository pattern is a Domain-Driven Design pattern intended to keep persistence concerns",
    "238 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "238 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "in the domain model, and these abstractions have implementations in the form of persistence-specific",
    "in the domain model, and these abstractions have implementations in the form of persistence-specific",
    "Repository implementations are classes that encapsulate the logic required to access data sources.",
    "Repository implementations are classes that encapsulate the logic required to access data sources.",
    null,
    null,
    "A repository performs the tasks of an intermediary between the domain model layers and data",
    "A repository performs the tasks of an intermediary between the domain model layers and data",
    null,
    null,
    "For each aggregate or aggregate root, you should create one repository class. You may be able to",
    "For each aggregate or aggregate root, you should create one repository class. You may be able to",
    "Basically, a repository allows you to populate data in memory that comes from the database in the",
    "Basically, a repository allows you to populate data in memory that comes from the database in the",
    "As noted earlier, if you\u2019re using the CQS/CQRS architectural pattern, the initial queries are performed",
    "As noted earlier, if you\u2019re using the CQS/CQRS architectural pattern, the initial queries are performed",
    "If the user makes changes, the data to be updated comes from the client app or presentation layer to",
    "If the user makes changes, the data to be updated comes from the client app or presentation layer to",
    "239 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "239 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "It\u2019s important to emphasize again that you should only define one repository for each aggregate root,",
    "It\u2019s important to emphasize again that you should only define one repository for each aggregate root,",
    null,
    null,
    "The above diagram shows the relationships between Domain and Infrastructure layers: Buyer",
    "The above diagram shows the relationships between Domain and Infrastructure layers: Buyer",
    null,
    null,
    "It can be valuable to implement your repository design in such a way that it enforces the rule that only",
    "It can be valuable to implement your repository design in such a way that it enforces the rule that only",
    "Thus, each repository class implemented at the infrastructure layer implements its own contract or",
    "Thus, each repository class implemented at the infrastructure layer implements its own contract or",
    "240 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "240 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "Each specific repository interface implements the generic IRepository interface:",
    "Each specific repository interface implements the generic IRepository interface:",
    "However, a better way to have the code enforce the convention that each repository is related to a",
    "However, a better way to have the code enforce the convention that each repository is related to a",
    null,
    null,
    "The Repository pattern allows you to easily test your application with unit tests. Remember that unit",
    "The Repository pattern allows you to easily test your application with unit tests. Remember that unit",
    "As noted in an earlier section, it\u2019s recommended that you define and place the repository interfaces in",
    "As noted in an earlier section, it\u2019s recommended that you define and place the repository interfaces in",
    "Connections to databases can fail and, more importantly, running hundreds of tests against a",
    "Connections to databases can fail and, more importantly, running hundreds of tests against a",
    "In terms of separation of concerns for unit tests, your logic operates on domain entities in memory. It",
    "In terms of separation of concerns for unit tests, your logic operates on domain entities in memory. It",
    "The repositories implemented in eShopOnContainers rely on EF Core\u2019s DbContext implementation of",
    "The repositories implemented in eShopOnContainers rely on EF Core\u2019s DbContext implementation of",
    "241 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "241 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "A typical DAL object directly performs data access and persistence operations against storage, often",
    "A typical DAL object directly performs data access and persistence operations against storage, often",
    "When using repository, the implementation details of persistence are encapsulated away from the",
    "When using repository, the implementation details of persistence are encapsulated away from the",
    null,
    null,
    null,
    null,
    "These multiple persistence operations are performed later in a single action when your code from the",
    "These multiple persistence operations are performed later in a single action when your code from the",
    "In many cases, this pattern or way of applying operations against the storage can increase application",
    "In many cases, this pattern or way of applying operations against the storage can increase application",
    "The Unit of Work pattern can be implemented with or without using the Repository pattern.",
    "The Unit of Work pattern can be implemented with or without using the Repository pattern.",
    null,
    null,
    "Custom repositories are useful for the reasons cited earlier, and that is the approach for the ordering",
    "Custom repositories are useful for the reasons cited earlier, and that is the approach for the ordering",
    "For instance, Jimmy Bogard, when providing direct feedback for this guide, said the following:",
    "For instance, Jimmy Bogard, when providing direct feedback for this guide, said the following:",
    "This\u2019ll probably be my biggest feedback. I\u2019m really not a fan of repositories, mainly because they hide",
    "This\u2019ll probably be my biggest feedback. I\u2019m really not a fan of repositories, mainly because they hide",
    "242 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "242 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "integration test with the real thing. Going CQRS meant that we didn\u2019t really have a need for",
    "integration test with the real thing. Going CQRS meant that we didn\u2019t really have a need for",
    "Repositories might be useful, but they are not critical for your DDD design in the way that the",
    "Repositories might be useful, but they are not critical for your DDD design in the way that the",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "When you use relational databases such as SQL Server, Oracle, or PostgreSQL, a recommended",
    "When you use relational databases such as SQL Server, Oracle, or PostgreSQL, a recommended",
    "Entity Framework has a long history as part of the .NET Framework. When you use .NET, you should",
    "Entity Framework has a long history as part of the .NET Framework. When you use .NET, you should",
    "243 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "243 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "Entity Framework (EF) Core is a lightweight, extensible, and cross-platform version of the popular",
    "Entity Framework (EF) Core is a lightweight, extensible, and cross-platform version of the popular",
    "Since an introduction to EF Core is already available in Microsoft documentation, here we simply",
    "Since an introduction to EF Core is already available in Microsoft documentation, here we simply",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "From a DDD point of view, an important capability of EF is the ability to use POCO domain entities,",
    "From a DDD point of view, an important capability of EF is the ability to use POCO domain entities,",
    "Per DDD patterns, you should encapsulate domain behavior and rules within the entity class itself, so",
    "Per DDD patterns, you should encapsulate domain behavior and rules within the entity class itself, so",
    "Since EF Core 1.1, to satisfy those DDD requirements, you can have plain fields in your entities instead",
    "Since EF Core 1.1, to satisfy those DDD requirements, you can have plain fields in your entities instead",
    "In a similar way, you can now have read-only access to collections by using a public property typed as",
    "In a similar way, you can now have read-only access to collections by using a public property typed as",
    "You can use a private collection while exposing a read-only IReadOnlyCollection",
    "You can use a private collection while exposing a read-only IReadOnlyCollection",
    "244 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "244 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "The OrderItems property can only be accessed as read-only using IReadOnlyCollection",
    "The OrderItems property can only be accessed as read-only using IReadOnlyCollection",
    "EF Core provides a way to map the domain model to the physical database without \u201ccontaminating\u201d",
    "EF Core provides a way to map the domain model to the physical database without \u201ccontaminating\u201d",
    "245 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "245 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "When you use fields instead of properties, the OrderItem entity is persisted as if it had a",
    "When you use fields instead of properties, the OrderItem entity is persisted as if it had a",
    "At the implementation level, a repository is simply a class with data persistence code coordinated by a",
    "At the implementation level, a repository is simply a class with data persistence code coordinated by a",
    "The IBuyerRepository interface comes from the domain model layer as a contract. However, the",
    "The IBuyerRepository interface comes from the domain model layer as a contract. However, the",
    "The EF DbContext comes through the constructor through Dependency Injection. It is shared between",
    "The EF DbContext comes through the constructor through Dependency Injection. It is shared between",
    "246 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "246 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "Within each repository class, you should put the persistence methods that update the state of entities",
    "Within each repository class, you should put the persistence methods that update the state of entities",
    "Since the approach for the ordering microservice in eShopOnContainers is also based on CQS/CQRS,",
    "Since the approach for the ordering microservice in eShopOnContainers is also based on CQS/CQRS,",
    "However, the real query methods to get data to send to the presentation layer or client apps are",
    "However, the real query methods to get data to send to the presentation layer or client apps are",
    null,
    null,
    "The Entity Framework DbContext class is based on the Unit of Work and Repository patterns and can",
    "The Entity Framework DbContext class is based on the Unit of Work and Repository patterns and can",
    "However, implementing custom repositories provides several benefits when implementing more",
    "However, implementing custom repositories provides several benefits when implementing more",
    "In Figure 7-18, you can see the differences between not using repositories (directly using the EF",
    "In Figure 7-18, you can see the differences between not using repositories (directly using the EF",
    "247 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "247 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "Figure 7-18 shows that using a custom repository adds an abstraction layer that can be used to ease",
    "Figure 7-18 shows that using a custom repository adds an abstraction layer that can be used to ease",
    "Later, when we focus on the application layer, you will see how Dependency Injection works in",
    "Later, when we focus on the application layer, you will see how Dependency Injection works in",
    "In short, custom repositories allow you to test code more easily with unit tests that are not impacted",
    "In short, custom repositories allow you to test code more easily with unit tests that are not impacted",
    "If you were using DbContext directly, you would have to mock it or to run unit tests by using an inmemory SQL Server with predictable data for unit tests. But mocking the DbContext or controlling",
    "If you were using DbContext directly, you would have to mock it or to run unit tests by using an inmemory SQL Server with predictable data for unit tests. But mocking the DbContext or controlling",
    "The DbContext object (exposed as an IUnitOfWork object) should be shared among multiple",
    "The DbContext object (exposed as an IUnitOfWork object) should be shared among multiple",
    "In order to do that, the instance of the DbContext object has to have its service lifetime set to",
    "In order to do that, the instance of the DbContext object has to have its service lifetime set to",
    "248 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "248 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "The DbContext instantiation mode should not be configured as ServiceLifetime.Transient or",
    "The DbContext instantiation mode should not be configured as ServiceLifetime.Transient or",
    "In a similar way, repository\u2019s lifetime should usually be set as scoped (InstancePerLifetimeScope in",
    "In a similar way, repository\u2019s lifetime should usually be set as scoped (InstancePerLifetimeScope in",
    "Using the singleton lifetime for the repository could cause you serious concurrency problems when",
    "Using the singleton lifetime for the repository could cause you serious concurrency problems when",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "249 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "249 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "Table mapping identifies the table data to be queried from and saved to the database. Previously you",
    "Table mapping identifies the table data to be queried from and saved to the database. Previously you",
    "By convention, each entity will be set up to map to a table with the same name as the DbSet",
    "By convention, each entity will be set up to map to a table with the same name as the DbSet",
    null,
    null,
    "There are many additional EF Core conventions, and most of them can be changed by using either",
    "There are many additional EF Core conventions, and most of them can be changed by using either",
    "Data annotations must be used on the entity model classes themselves, which is a more intrusive way",
    "Data annotations must be used on the entity model classes themselves, which is a more intrusive way",
    null,
    null,
    "As mentioned, in order to change conventions and mappings, you can use the OnModelCreating",
    "As mentioned, in order to change conventions and mappings, you can use the OnModelCreating",
    "The ordering microservice in eShopOnContainers implements explicit mapping and configuration,",
    "The ordering microservice in eShopOnContainers implements explicit mapping and configuration,",
    "250 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "250 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "You could set all the Fluent API mappings within the same OnModelCreating method, but it\u2019s",
    "You could set all the Fluent API mappings within the same OnModelCreating method, but it\u2019s",
    "251 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "251 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "the example. Especially for large models, it is advisable to have separate configuration classes for",
    "the example. Especially for large models, it is advisable to have separate configuration classes for",
    "The code in the example shows a few explicit declarations and mapping. However, EF Core",
    "The code in the example shows a few explicit declarations and mapping. However, EF Core",
    null,
    null,
    null,
    null,
    "The Hi/Lo algorithm is useful when you need unique keys before committing changes. As a summary,",
    "The Hi/Lo algorithm is useful when you need unique keys before committing changes. As a summary,",
    "The Hi/Lo algorithm describes a mechanism for getting a batch of unique IDs from a related database",
    "The Hi/Lo algorithm describes a mechanism for getting a batch of unique IDs from a related database",
    "It does not break the Unit of Work pattern.",
    "It does not break the Unit of Work pattern.",
    "It gets sequence IDs in batches, to minimize round trips to the database.",
    "It gets sequence IDs in batches, to minimize round trips to the database.",
    "It generates a human readable identifier, unlike techniques that use GUIDs.",
    "It generates a human readable identifier, unlike techniques that use GUIDs.",
    null,
    null,
    null,
    null,
    "With this feature, available since EF Core 1.1, you can directly map columns to fields. It is possible to",
    "With this feature, available since EF Core 1.1, you can directly map columns to fields. It is possible to",
    "You can do this with single fields or also with collections, like a List",
    "You can do this with single fields or also with collections, like a List",
    null,
    null,
    "Shadow properties in EF Core are properties that do not exist in your entity class model. The values",
    "Shadow properties in EF Core are properties that do not exist in your entity class model. The values",
    "252 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "252 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "As introduced earlier in the design section, the Query Specification pattern is a Domain-Driven Design",
    "As introduced earlier in the design section, the Query Specification pattern is a Domain-Driven Design",
    "The Query Specification pattern defines a query in an object. For example, in order to encapsulate a",
    "The Query Specification pattern defines a query in an object. For example, in order to encapsulate a",
    "An example of a generic Specification interface is the following code, which is similar to code used in",
    "An example of a generic Specification interface is the following code, which is similar to code used in",
    "Then, the implementation of a generic specification base class is the following.",
    "Then, the implementation of a generic specification base class is the following.",
    "253 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "253 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "The following specification loads a single basket entity given either the basket\u2019s ID or the ID of the",
    "The following specification loads a single basket entity given either the basket\u2019s ID or the ID of the",
    "And finally, you can see below how a generic EF Repository can use such a specification to filter and",
    "And finally, you can see below how a generic EF Repository can use such a specification to filter and",
    "In addition to encapsulating filtering logic, the specification can specify the shape of the data to be",
    "In addition to encapsulating filtering logic, the specification can specify the shape of the data to be",
    "Although we don\u2019t recommend returning IQueryable from a repository, it\u2019s perfectly fine to use them",
    "Although we don\u2019t recommend returning IQueryable from a repository, it\u2019s perfectly fine to use them",
    null,
    null,
    "254 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "254 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "When you use NoSQL databases for your infrastructure data tier, you typically do not use an ORM like",
    "When you use NoSQL databases for your infrastructure data tier, you typically do not use an ORM like",
    "However, when you use a NoSQL database, especially a document-oriented database like Azure",
    "However, when you use a NoSQL database, especially a document-oriented database like Azure",
    "When you use a document-oriented database, you implement an aggregate as a single document,",
    "When you use a document-oriented database, you implement an aggregate as a single document,",
    "The difference is in how you persist that model. If you implemented your domain model based on",
    "The difference is in how you persist that model. If you implemented your domain model based on",
    "For example, in a document-oriented database, it is okay for an aggregate root to have multiple child",
    "For example, in a document-oriented database, it is okay for an aggregate root to have multiple child",
    "255 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "255 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "easily optimized, because you get a UNION ALL SQL statement back from EF. Having the same",
    "easily optimized, because you get a UNION ALL SQL statement back from EF. Having the same",
    "A benefit when using NoSQL databases is that the entities are more denormalized, so you do not set a",
    "A benefit when using NoSQL databases is that the entities are more denormalized, so you do not set a",
    "When you design your domain model based on aggregates, moving to NoSQL and documentoriented databases might be even easier than using a relational database, because the aggregates",
    "When you design your domain model based on aggregates, moving to NoSQL and documentoriented databases might be even easier than using a relational database, because the aggregates",
    "For instance, the following JSON code is a sample implementation of an order aggregate when using",
    "For instance, the following JSON code is a sample implementation of an order aggregate when using",
    null,
    null,
    "256 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "256 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "When you use a C# model to implement the aggregate to be used by the Azure Cosmos DB API, the",
    "When you use a C# model to implement the aggregate to be used by the Azure Cosmos DB API, the",
    "257 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "257 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "You can see that the way you work with your domain model can be similar to the way you use it in",
    "You can see that the way you work with your domain model can be similar to the way you use it in",
    "However, when you persist your model into the NoSQL database, the code and API change",
    "However, when you persist your model into the NoSQL database, the code and API change",
    null,
    null,
    "You can access Azure Cosmos DB databases from .NET code running in containers, like from any other",
    "You can access Azure Cosmos DB databases from .NET code running in containers, like from any other",
    "However, there\u2019s a limitation in Azure Cosmos DB from a Docker development environment point of",
    "However, there\u2019s a limitation in Azure Cosmos DB from a Docker development environment point of",
    "There\u2019s also the possibility to run this emulator on Docker, but just on Windows Containers, not with",
    "There\u2019s also the possibility to run this emulator on Docker, but just on Windows Containers, not with",
    "The ideal and more straightforward deployment for a dev/test solution is to be able to deploy your",
    "The ideal and more straightforward deployment for a dev/test solution is to be able to deploy your",
    "258 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "258 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "Cosmos DB databases support MongoDB API for .NET as well as the native MongoDB wire protocol.",
    "Cosmos DB databases support MongoDB API for .NET as well as the native MongoDB wire protocol.",
    null,
    null,
    "This is a very convenient approach for proof of concepts in Docker environments with Linux",
    "This is a very convenient approach for proof of concepts in Docker environments with Linux",
    "As shown in the following image, by using the MongoDB API, eShopOnContainers supports MongoDB",
    "As shown in the following image, by using the MongoDB API, eShopOnContainers supports MongoDB",
    "259 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "259 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "The production Azure Cosmos DB would be running in Azure\u2019s cloud as a PaaS and scalable service.",
    "The production Azure Cosmos DB would be running in Azure\u2019s cloud as a PaaS and scalable service.",
    "Your custom .NET containers can run on a local development Docker host (that is using Docker for",
    "Your custom .NET containers can run on a local development Docker host (that is using Docker for",
    "A clear benefit of using the MongoDB API is that your solution could run in both database engines,",
    "A clear benefit of using the MongoDB API is that your solution could run in both database engines,",
    "For further comparison between simply using MongoDB versus Cosmos DB in the cloud, see the",
    "For further comparison between simply using MongoDB versus Cosmos DB in the cloud, see the",
    null,
    null,
    "In eShopOnContainers, we\u2019re using MongoDB API because our priority was fundamentally to have a",
    "In eShopOnContainers, we\u2019re using MongoDB API because our priority was fundamentally to have a",
    "260 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "260 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "However, if you are planning to use MongoDB API to access Azure Cosmos DB in Azure for",
    "However, if you are planning to use MongoDB API to access Azure Cosmos DB in Azure for",
    "You could also use MongoDB clusters as the production database in Azure\u2019s cloud, too, with",
    "You could also use MongoDB clusters as the production database in Azure\u2019s cloud, too, with",
    "Basically, this is just a disclaimer stating that you shouldn\u2019t always use MongoDB API against Azure",
    "Basically, this is just a disclaimer stating that you shouldn\u2019t always use MongoDB API against Azure",
    null,
    null,
    "MongoDB API for .NET is based on NuGet packages that you need to add to your projects, like in the",
    "MongoDB API for .NET is based on NuGet packages that you need to add to your projects, like in the",
    "261 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "261 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "Let\u2019s investigate the code in the following sections.",
    "Let\u2019s investigate the code in the following sections.",
    null,
    null,
    "First, you need to define a model that will hold the data coming from the database in your",
    "First, you need to define a model that will hold the data coming from the database in your",
    "262 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "262 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "You can see there are a few attributes and types coming from the MongoDB NuGet packages.",
    "You can see there are a few attributes and types coming from the MongoDB NuGet packages.",
    "NoSQL databases are usually very well suited for working with non-relational hierarchical data. In this",
    "NoSQL databases are usually very well suited for working with non-relational hierarchical data. In this",
    null,
    null,
    "In eShopOnContainers, we have created a custom database context where we implement the code to",
    "In eShopOnContainers, we have created a custom database context where we implement the code to",
    "263 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "263 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "In C# code, like Web API controllers or custom Repositories implementation, you can write similar",
    "In C# code, like Web API controllers or custom Repositories implementation, you can write similar",
    null,
    null,
    "When creating a MongoClient object, it needs a fundamental parameter which is precisely the",
    "When creating a MongoClient object, it needs a fundamental parameter which is precisely the",
    "The ConnectionString environment variable is resolved this way: If the ESHOP",
    "The ConnectionString environment variable is resolved this way: If the ESHOP",
    "The following code shows the .env file with the Azure Cosmos DB connection string global",
    "The following code shows the .env file with the Azure Cosmos DB connection string global",
    "264 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "264 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "Uncomment the ESHOP",
    "Uncomment the ESHOP",
    "If the ESHOP",
    "If the ESHOP",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "265 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "265 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "SOLID principles are critical techniques to be used in any modern and mission-critical application,",
    "SOLID principles are critical techniques to be used in any modern and mission-critical application,",
    "Single Responsibility principle",
    "Single Responsibility principle",
    "Open/closed principle",
    "Open/closed principle",
    "Liskov substitution principle",
    "Liskov substitution principle",
    "Interface Segregation principle",
    "Interface Segregation principle",
    "Dependency Inversion principle",
    "Dependency Inversion principle",
    "SOLID is more about how you design your application or microservice internal layers and about",
    "SOLID is more about how you design your application or microservice internal layers and about",
    "Dependency Injection (DI) is one way to implement the Dependency Inversion principle. It is a",
    "Dependency Injection (DI) is one way to implement the Dependency Inversion principle. It is a",
    "By following the SOLID principles, your classes will tend naturally to be small, well-factored, and easily",
    "By following the SOLID principles, your classes will tend naturally to be small, well-factored, and easily",
    "It would take another guide to cover SOLID in detail. Therefore, this guide requires you to have only a",
    "It would take another guide to cover SOLID in detail. Therefore, this guide requires you to have only a",
    null,
    null,
    null,
    null,
    "266 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "266 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    null,
    null,
    "As mentioned previously, the application layer can be implemented as part of the artifact (assembly)",
    "As mentioned previously, the application layer can be implemented as part of the artifact (assembly)",
    "For instance, the application layer code of the ordering microservice is directly implemented as part of",
    "For instance, the application layer code of the ordering microservice is directly implemented as part of",
    null,
    null,
    null,
    null,
    "267 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "267 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "dependencies are implemented in the services that a type needs and that you register in the IoC",
    "dependencies are implemented in the services that a type needs and that you register in the IoC",
    "Typically, you want to inject dependencies that implement infrastructure objects. A typical",
    "Typically, you want to inject dependencies that implement infrastructure objects. A typical",
    "In the following example, you can see how .NET is injecting the required repository objects through",
    "In the following example, you can see how .NET is injecting the required repository objects through",
    "268 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "268 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "The class uses the injected repositories to execute the transaction and persist the state changes. It",
    "The class uses the injected repositories to execute the transaction and persist the state changes. It",
    null,
    null,
    "Before you use the objects injected through constructors, you need to know where to register the",
    "Before you use the objects injected through constructors, you need to know where to register the",
    null,
    null,
    "When you use the built-in IoC container provided by ASP.NET Core, you register the types you want",
    "When you use the built-in IoC container provided by ASP.NET Core, you register the types you want",
    "The most common pattern when registering types in an IoC container is to register a pair of types\u2014an",
    "The most common pattern when registering types in an IoC container is to register a pair of types\u2014an",
    null,
    null,
    "When using DI in .NET, you might want to be able to scan an assembly and automatically register its",
    "When using DI in .NET, you might want to be able to scan an assembly and automatically register its",
    "269 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "269 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "You can also use additional IoC containers and plug them into the ASP.NET Core pipeline, as in the",
    "You can also use additional IoC containers and plug them into the ASP.NET Core pipeline, as in the",
    null,
    null,
    null,
    null,
    "The registration process and concepts are very similar to the way you can register types with the builtin ASP.NET Core IoC container, but the syntax when using Autofac is a bit different.",
    "The registration process and concepts are very similar to the way you can register types with the builtin ASP.NET Core IoC container, but the syntax when using Autofac is a bit different.",
    "In the example code, the abstraction IOrderRepository is registered along with the implementation",
    "In the example code, the abstraction IOrderRepository is registered along with the implementation",
    "270 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "270 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "IOrderRepository abstraction or interface, the IoC container will inject an instance of the",
    "IOrderRepository abstraction or interface, the IoC container will inject an instance of the",
    "The instance scope type determines how an instance is shared between requests for the same service",
    "The instance scope type determines how an instance is shared between requests for the same service",
    "A single instance per lifetime scope (referred to in the ASP.NET Core IoC container as ",
    "A single instance per lifetime scope (referred to in the ASP.NET Core IoC container as ",
    "A new instance per dependency (referred to in the ASP.NET Core IoC container as ",
    "A new instance per dependency (referred to in the ASP.NET Core IoC container as ",
    "A single instance shared across all objects using the IoC container (referred to in the ASP.NET",
    "A single instance shared across all objects using the IoC container (referred to in the ASP.NET",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "In the DI-through-constructor example shown in the previous section, the IoC container was injecting",
    "In the DI-through-constructor example shown in the previous section, the IoC container was injecting",
    "The Command pattern is intrinsically related to the CQRS pattern that was introduced earlier in this",
    "The Command pattern is intrinsically related to the CQRS pattern that was introduced earlier in this",
    "As shown in Figure 7-24, the pattern is based on accepting commands from the client-side,",
    "As shown in Figure 7-24, the pattern is based on accepting commands from the client-side,",
    "271 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "271 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "Figure 7-24 shows that the UI app sends a command through the API that gets to a",
    "Figure 7-24 shows that the UI app sends a command through the API that gets to a",
    null,
    null,
    "A command is a request for the system to perform an action that changes the state of the system.",
    "A command is a request for the system to perform an action that changes the state of the system.",
    "Since commands are imperatives, they are typically named with a verb in the imperative mood (for",
    "Since commands are imperatives, they are typically named with a verb in the imperative mood (for",
    "Commands can originate from the UI as a result of a user initiating a request, or from a process",
    "Commands can originate from the UI as a result of a user initiating a request, or from a process",
    "An important characteristic of a command is that it should be processed just once by a single receiver.",
    "An important characteristic of a command is that it should be processed just once by a single receiver.",
    "In addition, it is important that a command be processed only once in case the command is not",
    "In addition, it is important that a command be processed only once in case the command is not",
    "It is a good practice to make your commands and updates idempotent when it makes sense under",
    "It is a good practice to make your commands and updates idempotent when it makes sense under",
    "272 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "272 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "attach some kind of identity in the operations and identify whether the command or update was",
    "attach some kind of identity in the operations and identify whether the command or update was",
    "You send a command to a single receiver; you do not publish a command. Publishing is for events",
    "You send a command to a single receiver; you do not publish a command. Publishing is for events",
    "A command is implemented with a class that contains data fields or collections with all the",
    "A command is implemented with a class that contains data fields or collections with all the",
    "The following example shows the simplified CreateOrderCommand class. This is an immutable",
    "The following example shows the simplified CreateOrderCommand class. This is an immutable",
    "273 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "273 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "274 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "274 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "Basically, the command class contains all the data you need for performing a business transaction by",
    "Basically, the command class contains all the data you need for performing a business transaction by",
    "As an additional characteristic, commands are immutable, because the expected usage is that they are",
    "As an additional characteristic, commands are immutable, because the expected usage is that they are",
    "Keep in mind that if you intend or expect commands to go through a serializing/deserializing process,",
    "Keep in mind that if you intend or expect commands to go through a serializing/deserializing process,",
    "[",
    "[",
    "For example, the command class for creating an order is probably similar in terms of data to the order",
    "For example, the command class for creating an order is probably similar in terms of data to the order",
    "Many command classes can be simple, requiring only a few fields about some state that needs to be",
    "Many command classes can be simple, requiring only a few fields about some state that needs to be",
    "Some developers make their UI request objects separate from their command DTOs, but that is just a",
    "Some developers make their UI request objects separate from their command DTOs, but that is just a",
    null,
    null,
    "You should implement a specific command handler class for each command. That is how the pattern",
    "You should implement a specific command handler class for each command. That is how the pattern",
    "275 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "275 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "The command handler class offers a strong stepping stone in the way to achieve the Single",
    "The command handler class offers a strong stepping stone in the way to achieve the Single",
    "A command handler receives a command and obtains a result from the aggregate that is used. The",
    "A command handler receives a command and obtains a result from the aggregate that is used. The",
    "The command handler usually takes the following steps:",
    "The command handler usually takes the following steps:",
    null,
    null,
    "It validates that the command is valid (if not validated by the mediator).",
    "It validates that the command is valid (if not validated by the mediator).",
    "It instantiates the aggregate root instance that is the target of the current command.",
    "It instantiates the aggregate root instance that is the target of the current command.",
    "It executes the method on the aggregate root instance, getting the required data from the",
    "It executes the method on the aggregate root instance, getting the required data from the",
    "It persists the new state of the aggregate to its related database. This last operation is the",
    "It persists the new state of the aggregate to its related database. This last operation is the",
    "Typically, a command handler deals with a single aggregate driven by its aggregate root (root entity).",
    "Typically, a command handler deals with a single aggregate driven by its aggregate root (root entity).",
    "The important point here is that when a command is being processed, all the domain logic should be",
    "The important point here is that when a command is being processed, all the domain logic should be",
    "When command handlers get complex, with too much logic, that can be a code smell. Review them,",
    "When command handlers get complex, with too much logic, that can be a code smell. Review them,",
    "As an example of a command handler class, the following code shows the same",
    "As an example of a command handler class, the following code shows the same",
    "276 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "276 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "These are additional steps a command handler should take:",
    "These are additional steps a command handler should take:",
    "Use the command\u2019s data to operate with the aggregate root\u2019s methods and behavior.",
    "Use the command\u2019s data to operate with the aggregate root\u2019s methods and behavior.",
    "Internally within the domain objects, raise domain events while the transaction is executed,",
    "Internally within the domain objects, raise domain events while the transaction is executed,",
    "If the aggregate\u2019s operation result is successful and after the transaction is finished, raise",
    "If the aggregate\u2019s operation result is successful and after the transaction is finished, raise",
    "277 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "277 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "The next question is how to invoke a command handler. You could manually call it from each related",
    "The next question is how to invoke a command handler. You could manually call it from each related",
    "The other two main options, which are the recommended options, are:",
    "The other two main options, which are the recommended options, are:",
    "Through an in-memory Mediator pattern artifact.",
    "Through an in-memory Mediator pattern artifact.",
    "With an asynchronous message queue, in between controllers and handlers.",
    "With an asynchronous message queue, in between controllers and handlers.",
    null,
    null,
    "As shown in Figure 7-25, in a CQRS approach you use an intelligent mediator, similar to an in-memory",
    "As shown in Figure 7-25, in a CQRS approach you use an intelligent mediator, similar to an in-memory",
    "278 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "278 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "The above diagram shows a zoom-in from image 7-24: the ASP.NET Core controller sends the",
    "The above diagram shows a zoom-in from image 7-24: the ASP.NET Core controller sends the",
    "The reason that using the Mediator pattern makes sense is that in enterprise applications, the",
    "The reason that using the Mediator pattern makes sense is that in enterprise applications, the",
    "A mediator is an object that encapsulates the \u201chow\u201d of this process: it coordinates execution based on",
    "A mediator is an object that encapsulates the \u201chow\u201d of this process: it coordinates execution based on",
    null,
    null,
    "For example, in the eShopOnContainers ordering microservice, has an implementation of two sample",
    "For example, in the eShopOnContainers ordering microservice, has an implementation of two sample",
    "279 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "279 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "Another choice is to use asynchronous messages based on brokers or message queues, as shown in",
    "Another choice is to use asynchronous messages based on brokers or message queues, as shown in",
    null,
    null,
    "Command\u2019s pipeline can also be handled by a high availability message queue to deliver the",
    "Command\u2019s pipeline can also be handled by a high availability message queue to deliver the",
    "However, because of the asynchronous nature of message queues, you need to figure out how to",
    "However, because of the asynchronous nature of message queues, you need to figure out how to",
    "Thus, being able to respond to the client after validating a command message that was submitted to",
    "Thus, being able to respond to the client after validating a command message that was submitted to",
    "280 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "280 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "Additionally, async commands are one-way commands, which in many cases might not be needed, as",
    "Additionally, async commands are one-way commands, which in many cases might not be needed, as",
    "[",
    "[",
    "[",
    "[",
    "Asynchronous commands greatly increase the complexity of a system, because there is no simple way",
    "Asynchronous commands greatly increase the complexity of a system, because there is no simple way",
    "In the initial version of eShopOnContainers, it was decided to use synchronous command processing,",
    "In the initial version of eShopOnContainers, it was decided to use synchronous command processing,",
    "In any case, this should be a decision based on your application\u2019s or microservice\u2019s business",
    "In any case, this should be a decision based on your application\u2019s or microservice\u2019s business",
    "As a sample implementation, this guide proposes using the in-process pipeline based on the Mediator",
    "As a sample implementation, this guide proposes using the in-process pipeline based on the Mediator",
    "For implementation in .NET, there are multiple open-source libraries available that implement the",
    "For implementation in .NET, there are multiple open-source libraries available that implement the",
    "Using the Mediator pattern helps you to reduce coupling and to isolate the concerns of the requested",
    "Using the Mediator pattern helps you to reduce coupling and to isolate the concerns of the requested",
    "Another good reason to use the Mediator pattern was explained by Jimmy Bogard when reviewing",
    "Another good reason to use the Mediator pattern was explained by Jimmy Bogard when reviewing",
    "281 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "281 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "I think it might be worth mentioning testing here \u2013 it provides a nice consistent window into the",
    "I think it might be worth mentioning testing here \u2013 it provides a nice consistent window into the",
    "First, let\u2019s look at a sample WebAPI controller where you actually would use the mediator object. If",
    "First, let\u2019s look at a sample WebAPI controller where you actually would use the mediator object. If",
    "You can see that the mediator provides a clean and lean Web API controller constructor. In addition,",
    "You can see that the mediator provides a clean and lean Web API controller constructor. In addition,",
    null,
    null,
    "In ",
    "In ",
    "Nevertheless, the action of submitting the Command to MediatR is pretty similar, as shown in the",
    "Nevertheless, the action of submitting the Command to MediatR is pretty similar, as shown in the",
    "282 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "282 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "However, this case is also slightly more advanced because we\u2019re also implementing idempotent",
    "However, this case is also slightly more advanced because we\u2019re also implementing idempotent",
    "This is implemented by wrapping the business command (in this case CreateOrderCommand) and",
    "This is implemented by wrapping the business command (in this case CreateOrderCommand) and",
    "In the code below, you can see that the IdentifiedCommand is nothing more than a DTO with and ID",
    "In the code below, you can see that the IdentifiedCommand is nothing more than a DTO with and ID",
    null,
    null,
    "283 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "283 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "284 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "284 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "Since the IdentifiedCommand acts like a business command\u2019s envelope, when the business command",
    "Since the IdentifiedCommand acts like a business command\u2019s envelope, when the business command",
    "When doing that, it will link and run the business command handler, in this case, the",
    "When doing that, it will link and run the business command handler, in this case, the",
    "285 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "285 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    "In order for MediatR to be aware of your command handler classes, you need to register the mediator",
    "In order for MediatR to be aware of your command handler classes, you need to register the mediator",
    "The following code shows how to register Mediator\u2019s types and commands when using Autofac",
    "The following code shows how to register Mediator\u2019s types and commands when using Autofac",
    "286 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "286 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "This is where \u201cthe magic happens\u201d with MediatR.",
    "This is where \u201cthe magic happens\u201d with MediatR.",
    "As each command handler implements the generic IRequestHandler",
    "As each command handler implements the generic IRequestHandler",
    "That is the code that correlates commands with command handlers. The handler is just a simple class,",
    "That is the code that correlates commands with command handlers. The handler is just a simple class,",
    "There is one more thing: being able to apply cross-cutting concerns to the mediator pipeline. You can",
    "There is one more thing: being able to apply cross-cutting concerns to the mediator pipeline. You can",
    null,
    null,
    "287 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "287 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "Just by implementing this behavior class and by registering it in the pipeline (in the MediatorModule",
    "Just by implementing this behavior class and by registering it in the pipeline (in the MediatorModule",
    "The eShopOnContainers ordering microservice also applies a second behavior for basic validations,",
    "The eShopOnContainers ordering microservice also applies a second behavior for basic validations,",
    "Here the behavior is raising an exception if validation fails, but you could also return a result object,",
    "Here the behavior is raising an exception if validation fails, but you could also return a result object,",
    null,
    null,
    "288 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "288 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "You could create additional validations. This is a very clean and elegant way to implement your",
    "You could create additional validations. This is a very clean and elegant way to implement your",
    "In a similar way, you could implement other behaviors for additional aspects or cross-cutting concerns",
    "In a similar way, you could implement other behaviors for additional aspects or cross-cutting concerns",
    null,
    null,
    "The mediator pattern",
    "The mediator pattern",
    null,
    null,
    "The decorator pattern",
    "The decorator pattern",
    null,
    null,
    "MediatR (Jimmy Bogard)",
    "MediatR (Jimmy Bogard)",
    null,
    null,
    null,
    null,
    null,
    null,
    "289 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "289 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "Fluent validation",
    "Fluent validation",
    null,
    null,
    "290 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    "290 CHAPTER 6 | Tackle Business Complexity in a Microservice with DDD and CQRS Patterns",
    null,
    null,
    null,
    null,
    "Resiliency is the ability to recover from failures and continue to function. It isn\u2019t about avoiding",
    "Resiliency is the ability to recover from failures and continue to function. It isn\u2019t about avoiding",
    "It\u2019s challenging enough to design and deploy a microservices-based application. But you also need to",
    "It\u2019s challenging enough to design and deploy a microservices-based application. But you also need to",
    "The many individual components of your application should also incorporate health monitoring",
    "The many individual components of your application should also incorporate health monitoring",
    "291 CHAPTER 7 | Implement resilient applications",
    "291 CHAPTER 7 | Implement resilient applications",
    "In distributed systems like microservices-based applications, there\u2019s an ever-present risk of partial",
    "In distributed systems like microservices-based applications, there\u2019s an ever-present risk of partial",
    "For example, consider the Order details page from the eShopOnContainers sample application. If the",
    "For example, consider the Order details page from the eShopOnContainers sample application. If the",
    null,
    null,
    "In a large microservices-based application, any partial failure can be amplified, especially if most of",
    "In a large microservices-based application, any partial failure can be amplified, especially if most of",
    "292 CHAPTER 7 | Implement resilient applications",
    "292 CHAPTER 7 | Implement resilient applications",
    null,
    null,
    "Intermittent failure is guaranteed in a distributed and cloud-based system, even if every dependency",
    "Intermittent failure is guaranteed in a distributed and cloud-based system, even if every dependency",
    "If you do not design and implement techniques to ensure fault tolerance, even small downtimes can",
    "If you do not design and implement techniques to ensure fault tolerance, even small downtimes can",
    null,
    null,
    "293 CHAPTER 7 | Implement resilient applications",
    "293 CHAPTER 7 | Implement resilient applications",
    "To minimize this problem, in the section Asynchronous microservice integration enforce microservice\u2019s",
    "To minimize this problem, in the section Asynchronous microservice integration enforce microservice\u2019s",
    "In addition, it\u2019s essential that you design your microservices and client applications to handle partial",
    "In addition, it\u2019s essential that you design your microservices and client applications to handle partial",
    "To deal with partial failures, use one of the strategies described here.",
    "To deal with partial failures, use one of the strategies described here.",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "294 CHAPTER 7 | Implement resilient applications",
    "294 CHAPTER 7 | Implement resilient applications",
    "certain failure scenarios faster than a circuit breaker would be, since the circuit breaker waits for the",
    "certain failure scenarios faster than a circuit breaker would be, since the circuit breaker waits for the",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "There are many approaches to implement retries logic with exponential backoff.",
    "There are many approaches to implement retries logic with exponential backoff.",
    "For Azure SQL DB, Entity Framework (EF) Core already provides internal database connection resiliency",
    "For Azure SQL DB, Entity Framework (EF) Core already provides internal database connection resiliency",
    "For instance, the following code at the EF Core connection level enables resilient SQL connections that",
    "For instance, the following code at the EF Core connection level enables resilient SQL connections that",
    "295 CHAPTER 7 | Implement resilient applications",
    "295 CHAPTER 7 | Implement resilient applications",
    "When retries are enabled in EF Core connections, each operation you perform using EF Core becomes",
    "When retries are enabled in EF Core connections, each operation you perform using EF Core becomes",
    "However, if your code initiates a transaction using BeginTransaction, you\u2019re defining your own group",
    "However, if your code initiates a transaction using BeginTransaction, you\u2019re defining your own group",
    "If you try to execute that transaction when using an EF execution strategy (retry policy) and you call",
    "If you try to execute that transaction when using an EF execution strategy (retry policy) and you call",
    "System.InvalidOperationException: The configured execution strategy",
    "System.InvalidOperationException: The configured execution strategy",
    "The solution is to manually invoke the EF execution strategy with a delegate representing everything",
    "The solution is to manually invoke the EF execution strategy with a delegate representing everything",
    "296 CHAPTER 7 | Implement resilient applications",
    "296 CHAPTER 7 | Implement resilient applications",
    null,
    null,
    "To achieve this multiple DbContext commit, the SaveEventAndCatalogContextChangesAsync uses a",
    "To achieve this multiple DbContext commit, the SaveEventAndCatalogContextChangesAsync uses a",
    "The ResilientTransaction.ExecuteAsync method basically begins a transaction from the passed",
    "The ResilientTransaction.ExecuteAsync method basically begins a transaction from the passed",
    "297 CHAPTER 7 | Implement resilient applications",
    "297 CHAPTER 7 | Implement resilient applications",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "Though this class implements IDisposable, declaring and instantiating it within a using statement is",
    "Though this class implements IDisposable, declaring and instantiating it within a using statement is",
    "Therefore, HttpClient is intended to be instantiated once and reused throughout the life of an",
    "Therefore, HttpClient is intended to be instantiated once and reused throughout the life of an",
    "298 CHAPTER 7 | Implement resilient applications",
    "298 CHAPTER 7 | Implement resilient applications",
    "Another issue that developers run into is when using a shared instance of HttpClient in long-running",
    "Another issue that developers run into is when using a shared instance of HttpClient in long-running",
    null,
    null,
    "To address the issues mentioned above and to make HttpClient instances manageable, .NET Core 2.1",
    "To address the issues mentioned above and to make HttpClient instances manageable, .NET Core 2.1",
    "The alternative is to use SocketsHttpHandler with configured PooledConnectionLifetime. This",
    "The alternative is to use SocketsHttpHandler with configured PooledConnectionLifetime. This",
    null,
    null,
    null,
    null,
    "Provides a central location for naming and configuring logical HttpClient objects. For",
    "Provides a central location for naming and configuring logical HttpClient objects. For",
    "Codify the concept of outgoing middleware via delegating handlers in HttpClient and",
    "Codify the concept of outgoing middleware via delegating handlers in HttpClient and",
    "HttpClient already has the concept of delegating handlers that could be linked together for",
    "HttpClient already has the concept of delegating handlers that could be linked together for",
    null,
    null,
    "299 CHAPTER 7 | Implement resilient applications",
    "299 CHAPTER 7 | Implement resilient applications",
    "There are several ways that you can use IHttpClientFactory in your application:",
    "There are several ways that you can use IHttpClientFactory in your application:",
    "Basic usage",
    "Basic usage",
    "Use Named Clients",
    "Use Named Clients",
    "Use Typed Clients",
    "Use Typed Clients",
    "Use Generated Clients",
    "Use Generated Clients",
    "For the sake of brevity, this guidance shows the most structured way to use IHttpClientFactory, which",
    "For the sake of brevity, this guidance shows the most structured way to use IHttpClientFactory, which",
    "So, what\u2019s a \u201cTyped Client\u201d? It\u2019s just an HttpClient that\u2019s pre-configured for some specific use. This",
    "So, what\u2019s a \u201cTyped Client\u201d? It\u2019s just an HttpClient that\u2019s pre-configured for some specific use. This",
    "The following diagram shows how Typed Clients are used with IHttpClientFactory:",
    "The following diagram shows how Typed Clients are used with IHttpClientFactory:",
    "300 CHAPTER 7 | Implement resilient applications",
    "300 CHAPTER 7 | Implement resilient applications",
    null,
    null,
    "In the above image, a ClientService (used by a controller or client code) uses an HttpClient created by",
    "In the above image, a ClientService (used by a controller or client code) uses an HttpClient created by",
    null,
    null,
    "In the next snippet, you can see how AddHttpClient() can be used to register Typed Clients (Service",
    "In the next snippet, you can see how AddHttpClient() can be used to register Typed Clients (Service",
    "301 CHAPTER 7 | Implement resilient applications",
    "301 CHAPTER 7 | Implement resilient applications",
    "Registering the client services as shown in the previous snippet, makes the DefaultClientFactory create",
    "Registering the client services as shown in the previous snippet, makes the DefaultClientFactory create",
    "You could also add instance-specific configuration in the registration to, for example, configure the",
    "You could also add instance-specific configuration in the registration to, for example, configure the",
    "In this next example, you can see the configuration of one of the above policies:",
    "In this next example, you can see the configuration of one of the above policies:",
    "You can find more details about using Polly in the Next article.",
    "You can find more details about using Polly in the Next article.",
    null,
    null,
    "Each time you get an HttpClient object from the IHttpClientFactory, a new instance is returned. But",
    "Each time you get an HttpClient object from the IHttpClientFactory, a new instance is returned. But",
    "Pooling of handlers is desirable as each handler typically manages its own underlying HTTP",
    "Pooling of handlers is desirable as each handler typically manages its own underlying HTTP",
    "The HttpMessageHandler objects in the pool have a lifetime that\u2019s the length of time that an",
    "The HttpMessageHandler objects in the pool have a lifetime that\u2019s the length of time that an",
    "Each Typed Client can have its own configured handler lifetime value. Set the lifetime to",
    "Each Typed Client can have its own configured handler lifetime value. Set the lifetime to",
    "302 CHAPTER 7 | Implement resilient applications",
    "302 CHAPTER 7 | Implement resilient applications",
    null,
    null,
    "As a previous step, you need to have your Typed Client classes defined, such as the classes in the",
    "As a previous step, you need to have your Typed Client classes defined, such as the classes in the",
    "The Typed Client (CatalogService in the example) is activated by DI (Dependency Injection), which",
    "The Typed Client (CatalogService in the example) is activated by DI (Dependency Injection), which",
    "A Typed Client is effectively a transient object, that means a new instance is created each time one is",
    "A Typed Client is effectively a transient object, that means a new instance is created each time one is",
    null,
    null,
    "Finally, once you have your typed classes implemented, you can have them registered and configured",
    "Finally, once you have your typed classes implemented, you can have them registered and configured",
    "303 CHAPTER 7 | Implement resilient applications",
    "303 CHAPTER 7 | Implement resilient applications",
    "Up to this point, the above code snippet only shows the example of performing regular HTTP",
    "Up to this point, the above code snippet only shows the example of performing regular HTTP",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "The recommended approach for retries with exponential backoff is to take advantage of more",
    "The recommended approach for retries with exponential backoff is to take advantage of more",
    "Polly is a .NET library that provides resilience and transient-fault handling capabilities. You can",
    "Polly is a .NET library that provides resilience and transient-fault handling capabilities. You can",
    "304 CHAPTER 7 | Implement resilient applications",
    "304 CHAPTER 7 | Implement resilient applications",
    "The following steps show how you can use Http retries with Polly integrated into IHttpClientFactory,",
    "The following steps show how you can use Http retries with Polly integrated into IHttpClientFactory,",
    null,
    null,
    "First, you will need to install the Microsoft.Extensions.Http.Polly package.",
    "First, you will need to install the Microsoft.Extensions.Http.Polly package.",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "IHttpClientFactory is available since .NET Core 2.1, however, we recommend you use the latest .NET 7",
    "IHttpClientFactory is available since .NET Core 2.1, however, we recommend you use the latest .NET 7",
    null,
    null,
    "The ",
    "The ",
    "To have a more modular approach, the Http Retry Policy can be defined in a separate method within",
    "To have a more modular approach, the Http Retry Policy can be defined in a separate method within",
    "As shown in previous sections, you need to define a named or typed client HttpClient configuration in",
    "As shown in previous sections, you need to define a named or typed client HttpClient configuration in",
    "With Polly, you can define a Retry policy with the number of retries, the exponential backoff",
    "With Polly, you can define a Retry policy with the number of retries, the exponential backoff",
    "A regular Retry policy can affect your system in cases of high concurrency and scalability and under",
    "A regular Retry policy can affect your system in cases of high concurrency and scalability and under",
    "305 CHAPTER 7 | Implement resilient applications",
    "305 CHAPTER 7 | Implement resilient applications",
    "jitter strategy can be implemented by smooth and evenly distributed retry intervals applied with a",
    "jitter strategy can be implemented by smooth and evenly distributed retry intervals applied with a",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "As noted earlier, you should handle faults that might take a variable amount of time to recover from,",
    "As noted earlier, you should handle faults that might take a variable amount of time to recover from,",
    "In a distributed environment, calls to remote resources and services can fail due to transient faults,",
    "In a distributed environment, calls to remote resources and services can fail due to transient faults,",
    "However, there can also be situations where faults are due to unanticipated events that might take",
    "However, there can also be situations where faults are due to unanticipated events that might take",
    "Instead, the application should be coded to accept that the operation has failed and handle the failure",
    "Instead, the application should be coded to accept that the operation has failed and handle the failure",
    null,
    null,
    "306 CHAPTER 7 | Implement resilient applications",
    "306 CHAPTER 7 | Implement resilient applications",
    "Therefore, you need some kind of defense barrier so that excessive requests stop when it isn\u2019t worth",
    "Therefore, you need some kind of defense barrier so that excessive requests stop when it isn\u2019t worth",
    "The Circuit Breaker pattern has a different purpose than the \u201cRetry pattern\u201d. The \u201cRetry pattern\u201d",
    "The Circuit Breaker pattern has a different purpose than the \u201cRetry pattern\u201d. The \u201cRetry pattern\u201d",
    "As when implementing retries, the recommended approach for circuit breakers is to take advantage of",
    "As when implementing retries, the recommended approach for circuit breakers is to take advantage of",
    "Adding a circuit breaker policy into your IHttpClientFactory outgoing middleware pipeline is as simple",
    "Adding a circuit breaker policy into your IHttpClientFactory outgoing middleware pipeline is as simple",
    "The only addition here to the code used for HTTP call retries is the code where you add the Circuit",
    "The only addition here to the code used for HTTP call retries is the code where you add the Circuit",
    "The AddPolicyHandler() method is what adds policies to the HttpClient objects you\u2019ll use. In this case,",
    "The AddPolicyHandler() method is what adds policies to the HttpClient objects you\u2019ll use. In this case,",
    "To have a more modular approach, the Circuit Breaker Policy is defined in a separate method called",
    "To have a more modular approach, the Circuit Breaker Policy is defined in a separate method called",
    "In the code example above, the circuit breaker policy is configured so it breaks or opens the circuit",
    "In the code example above, the circuit breaker policy is configured so it breaks or opens the circuit",
    "Circuit breakers should also be used to redirect requests to a fallback infrastructure if you had issues",
    "Circuit breakers should also be used to redirect requests to a fallback infrastructure if you had issues",
    "307 CHAPTER 7 | Implement resilient applications",
    "307 CHAPTER 7 | Implement resilient applications",
    "service that\u2019s performing the HTTP call. That way, if there\u2019s an outage in the datacenter that impacts",
    "service that\u2019s performing the HTTP call. That way, if there\u2019s an outage in the datacenter that impacts",
    "All those features are for cases where you\u2019re managing the failover from within the .NET code, as",
    "All those features are for cases where you\u2019re managing the failover from within the .NET code, as",
    "From a usage point of view, when using HttpClient, there\u2019s no need to add anything new here",
    "From a usage point of view, when using HttpClient, there\u2019s no need to add anything new here",
    "Whenever you start the eShopOnContainers solution in a Docker host, it needs to start multiple",
    "Whenever you start the eShopOnContainers solution in a Docker host, it needs to start multiple",
    "You might also see this type of error on startup when the application is deploying to the cloud. In that",
    "You might also see this type of error on startup when the application is deploying to the cloud. In that",
    "The way \u2018eShopOnContainers\u2019 solves those issues when starting all the containers is by using the Retry",
    "The way \u2018eShopOnContainers\u2019 solves those issues when starting all the containers is by using the Retry",
    null,
    null,
    "There are a few ways you can break/open the circuit and test it with eShopOnContainers.",
    "There are a few ways you can break/open the circuit and test it with eShopOnContainers.",
    "One option is to lower the allowed number of retries to 1 in the circuit breaker policy and redeploy",
    "One option is to lower the allowed number of retries to 1 in the circuit breaker policy and redeploy",
    "Another option is to use custom middleware that\u2019s implemented in the ",
    "Another option is to use custom middleware that\u2019s implemented in the ",
    "GET http://localhost:5103/failing",
    "GET http://localhost:5103/failing",
    "GET http://localhost:5103/failing?enable",
    "GET http://localhost:5103/failing?enable",
    "308 CHAPTER 7 | Implement resilient applications",
    "308 CHAPTER 7 | Implement resilient applications",
    "GET http://localhost:5103/failing?disable",
    "GET http://localhost:5103/failing?disable",
    "For instance, once the application is running, you can enable the middleware by making a request",
    "For instance, once the application is running, you can enable the middleware by making a request",
    "http://localhost:5103/failing?enable",
    "http://localhost:5103/failing?enable",
    "You can then check the status using the URI http://localhost:5103/failing, as shown in Figure 8-5.",
    "You can then check the status using the URI http://localhost:5103/failing, as shown in Figure 8-5.",
    null,
    null,
    "At this point, the Basket microservice responds with status code 500 whenever you call invoke it.",
    "At this point, the Basket microservice responds with status code 500 whenever you call invoke it.",
    "Once the middleware is running, you can try making an order from the MVC web application. Because",
    "Once the middleware is running, you can try making an order from the MVC web application. Because",
    "In the following example, you can see that the MVC web application has a catch block in the logic for",
    "In the following example, you can see that the MVC web application has a catch block in the logic for",
    "Here\u2019s a summary. The Retry policy tries several times to make the HTTP request and gets HTTP errors.",
    "Here\u2019s a summary. The Retry policy tries several times to make the HTTP request and gets HTTP errors.",
    "309 CHAPTER 7 | Implement resilient applications",
    "309 CHAPTER 7 | Implement resilient applications",
    null,
    null,
    "You can implement different logic for when to open/break the circuit. Or you can try an HTTP request",
    "You can implement different logic for when to open/break the circuit. Or you can try an HTTP request",
    "Finally, another possibility for the CircuitBreakerPolicy is to use Isolate (which forces open and holds",
    "Finally, another possibility for the CircuitBreakerPolicy is to use Isolate (which forces open and holds",
    null,
    null,
    "Health monitoring can allow near-real-time information about the state of your containers and",
    "Health monitoring can allow near-real-time information about the state of your containers and",
    "Microservices-based applications often use heartbeats or health checks to enable their performance",
    "Microservices-based applications often use heartbeats or health checks to enable their performance",
    "In the typical model, services send reports about their status, and that information is aggregated to",
    "In the typical model, services send reports about their status, and that information is aggregated to",
    "310 CHAPTER 7 | Implement resilient applications",
    "310 CHAPTER 7 | Implement resilient applications",
    "When developing an ASP.NET Core microservice or web application, you can use the built-in health",
    "When developing an ASP.NET Core microservice or web application, you can use the built-in health",
    "Health check services and middleware are easy to use and provide capabilities that let you validate if",
    "Health check services and middleware are easy to use and provide capabilities that let you validate if",
    "To use this feature effectively, you need to first configure services in your microservices. Second, you",
    "To use this feature effectively, you need to first configure services in your microservices. Second, you",
    null,
    null,
    "In this section, you\u2019ll learn how to implement the HealthChecks feature in a sample ASP.NET Core 7.0",
    "In this section, you\u2019ll learn how to implement the HealthChecks feature in a sample ASP.NET Core 7.0",
    "To begin, you need to define what constitutes a healthy status for each microservice. In the sample",
    "To begin, you need to define what constitutes a healthy status for each microservice. In the sample",
    "In .NET 7, with the built-in APIs, you can configure the services, add a Health Check for the",
    "In .NET 7, with the built-in APIs, you can configure the services, add a Health Check for the",
    "In the previous code, the services.AddHealthChecks() method configures a basic HTTP check that",
    "In the previous code, the services.AddHealthChecks() method configures a basic HTTP check that",
    "The AddCheck() method adds a new health check with a specified name and the implementation of",
    "The AddCheck() method adds a new health check with a specified name and the implementation of",
    "311 CHAPTER 7 | Implement resilient applications",
    "311 CHAPTER 7 | Implement resilient applications",
    "SqlConnectionHealthCheck is a custom class that implements IHealthCheck, which takes a connection",
    "SqlConnectionHealthCheck is a custom class that implements IHealthCheck, which takes a connection",
    "Note that in the previous code, Select 1 is the query used to check the Health of the database. To",
    "Note that in the previous code, Select 1 is the query used to check the Health of the database. To",
    "312 CHAPTER 7 | Implement resilient applications",
    "312 CHAPTER 7 | Implement resilient applications",
    "Finally, add a middleware that responds to the url path /hc:",
    "Finally, add a middleware that responds to the url path /hc:",
    "When the endpoint ",
    "When the endpoint ",
    null,
    null,
    "Microservices in eShopOnContainers rely on multiple services to perform its task. For example, the",
    "Microservices in eShopOnContainers rely on multiple services to perform its task. For example, the",
    null,
    null,
    "For instance, in the Catalog.API microservice, the following NuGet packages were added:",
    "For instance, in the Catalog.API microservice, the following NuGet packages were added:",
    null,
    null,
    "In the following code, the health check implementations are added for each dependent service and",
    "In the following code, the health check implementations are added for each dependent service and",
    "313 CHAPTER 7 | Implement resilient applications",
    "313 CHAPTER 7 | Implement resilient applications",
    "Finally, add the HealthCheck middleware to listen to \u201c/hc\u201d endpoint:",
    "Finally, add the HealthCheck middleware to listen to \u201c/hc\u201d endpoint:",
    null,
    null,
    "When you\u2019ve configured health checks as described in this article and you have the microservice",
    "When you\u2019ve configured health checks as described in this article and you have the microservice",
    "314 CHAPTER 7 | Implement resilient applications",
    "314 CHAPTER 7 | Implement resilient applications",
    null,
    null,
    "In that test, you can see that the Catalog.API microservice (running on port 5101) is healthy, returning",
    "In that test, you can see that the Catalog.API microservice (running on port 5101) is healthy, returning",
    "A watchdog is a separate service that can watch health and load across services, and report health",
    "A watchdog is a separate service that can watch health and load across services, and report health",
    "The eShopOnContainers sample contains a web page that displays sample health check reports, as",
    "The eShopOnContainers sample contains a web page that displays sample health check reports, as",
    null,
    null,
    "315 CHAPTER 7 | Implement resilient applications",
    "315 CHAPTER 7 | Implement resilient applications",
    null,
    null,
    "In summary, this watchdog service queries each microservice\u2019s \u201c/hc\u201d endpoint. This will execute all the",
    "In summary, this watchdog service queries each microservice\u2019s \u201c/hc\u201d endpoint. This will execute all the",
    "Sample configuration file for health check UI:",
    "Sample configuration file for health check UI:",
    null,
    null,
    "316 CHAPTER 7 | Implement resilient applications",
    "316 CHAPTER 7 | Implement resilient applications",
    "To monitor the availability of your microservices, orchestrators like Kubernetes and Service Fabric",
    "To monitor the availability of your microservices, orchestrators like Kubernetes and Service Fabric",
    "For instance, most orchestrators can use health checks to manage zero-downtime deployments. Only",
    "For instance, most orchestrators can use health checks to manage zero-downtime deployments. Only",
    "Health monitoring is especially important when an orchestrator performs an application upgrade.",
    "Health monitoring is especially important when an orchestrator performs an application upgrade.",
    "Another aspect of service health is reporting metrics from the service. This is an advanced capability of",
    "Another aspect of service health is reporting metrics from the service. This is an advanced capability of",
    null,
    null,
    "The final part of monitoring is visualizing the event stream, reporting on service performance, and",
    "The final part of monitoring is visualizing the event stream, reporting on service performance, and",
    "You can use simple custom applications showing the state of your services, like the custom page",
    "You can use simple custom applications showing the state of your services, like the custom page",
    "Finally, if you\u2019re storing all the event streams, you can use Microsoft Power BI or other solutions like",
    "Finally, if you\u2019re storing all the event streams, you can use Microsoft Power BI or other solutions like",
    "317 CHAPTER 7 | Implement resilient applications",
    "317 CHAPTER 7 | Implement resilient applications",
    null,
    null,
    null,
    null,
    null,
    null,
    "318 CHAPTER 7 | Implement resilient applications",
    "318 CHAPTER 7 | Implement resilient applications",
    null,
    null,
    "There are so many aspects about security in microservices and web applications that the topic could",
    "There are so many aspects about security in microservices and web applications that the topic could",
    "It\u2019s often necessary for resources and APIs published by a service to be limited to certain trusted users",
    "It\u2019s often necessary for resources and APIs published by a service to be limited to certain trusted users",
    "In microservice scenarios, authentication is typically handled centrally. If you\u2019re using an API Gateway,",
    "In microservice scenarios, authentication is typically handled centrally. If you\u2019re using an API Gateway,",
    null,
    null,
    "When the API Gateway centralizes authentication, it adds user information when forwarding requests",
    "When the API Gateway centralizes authentication, it adds user information when forwarding requests",
    "319 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "319 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "Directory or a dedicated authentication microservice acting as a security token service (STS) can be",
    "Directory or a dedicated authentication microservice acting as a security token service (STS) can be",
    null,
    null,
    "When microservices are accessed directly, trust, that includes authentication and authorization, is",
    "When microservices are accessed directly, trust, that includes authentication and authorization, is",
    null,
    null,
    "The following code is taken from the ASP.NET Core Web Application MVC 3.1 project template with",
    "The following code is taken from the ASP.NET Core Web Application MVC 3.1 project template with",
    "320 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "320 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "Using ASP.NET Core Identity enables several scenarios:",
    "Using ASP.NET Core Identity enables several scenarios:",
    "Create new user information using the UserManager type (userManager.CreateAsync).",
    "Create new user information using the UserManager type (userManager.CreateAsync).",
    "Authenticate users using the SignInManager type. You can use signInManager.SignInAsync to",
    "Authenticate users using the SignInManager type. You can use signInManager.SignInAsync to",
    "Identify a user based on information stored in a cookie (which is read by ASP.NET Core",
    "Identify a user based on information stored in a cookie (which is read by ASP.NET Core",
    null,
    null,
    "For authentication scenarios that make use of a local user data store and that persist identity between",
    "For authentication scenarios that make use of a local user data store and that persist identity between",
    null,
    null,
    "To use external authentication, besides including the authentication middleware as mentioned before,",
    "To use external authentication, besides including the authentication middleware as mentioned before,",
    "321 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "321 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "Popular external authentication providers and their associated NuGet packages are shown in the",
    "Popular external authentication providers and their associated NuGet packages are shown in the",
    "|following table:|Col2|",
    "|following table:|Col2|",
    "In all cases, you must complete an application registration procedure that is vendor dependent and",
    "In all cases, you must complete an application registration procedure that is vendor dependent and",
    "Getting a Client Application ID.",
    "Getting a Client Application ID.",
    "Getting a Client Application Secret.",
    "Getting a Client Application Secret.",
    "Configuring a redirection URL, that\u2019s handled by the authorization middleware and the",
    "Configuring a redirection URL, that\u2019s handled by the authorization middleware and the",
    "Optionally, configuring a sign-out URL to properly handle sign out in a Single Sign On (SSO)",
    "Optionally, configuring a sign-out URL to properly handle sign out in a Single Sign On (SSO)",
    null,
    null,
    "322 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "322 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    null,
    null,
    "In addition to the external authentication providers listed previously, third-party packages are",
    "In addition to the external authentication providers listed previously, third-party packages are",
    "You can also create your own external authentication middleware to solve some special need.",
    "You can also create your own external authentication middleware to solve some special need.",
    "Authenticating with ASP.NET Core Identity (or Identity plus external authentication providers) works",
    "Authenticating with ASP.NET Core Identity (or Identity plus external authentication providers) works",
    "For example, in an ASP.NET Core Web API that exposes RESTful endpoints that might be accessed by",
    "For example, in an ASP.NET Core Web API that exposes RESTful endpoints that might be accessed by",
    "323 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "323 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "If user information is stored in Azure Active Directory or another identity solution that supports",
    "If user information is stored in Azure Active Directory or another identity solution that supports",
    "When you use this workflow, the ASP.NET Core Identity middleware is not needed, because all user",
    "When you use this workflow, the ASP.NET Core Identity middleware is not needed, because all user",
    "324 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "324 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "If you prefer to issue security tokens for local ASP.NET Core Identity users rather than using an",
    "If you prefer to issue security tokens for local ASP.NET Core Identity users rather than using an",
    null,
    null,
    "You configure IdentityServer4 in ",
    "You configure IdentityServer4 in ",
    "You call app.UseIdentityServer in ",
    "You call app.UseIdentityServer in ",
    "You configure identity server by setting the following data:",
    "You configure identity server by setting the following data:",
    null,
    null,
    null,
    null,
    "with an access token. An example of an API resource would be a web API (or",
    "with an access token. An example of an API resource would be a web API (or",
    "identify a user. The claims might include the user name, email address, and so",
    "identify a user. The claims might include the user name, email address, and so",
    "alternative.",
    "alternative.",
    null,
    null,
    "A sample configuration for IdentityServer4 to use in-memory resources and clients provided by a",
    "A sample configuration for IdentityServer4 to use in-memory resources and clients provided by a",
    "325 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "325 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "Authenticating against an OpenID Connect endpoint or issuing your own security tokens covers some",
    "Authenticating against an OpenID Connect endpoint or issuing your own security tokens covers some",
    "For that scenario, authentication middleware that handles JWT tokens is available in the",
    "For that scenario, authentication middleware that handles JWT tokens is available in the",
    "The parameters in this usage are:",
    "The parameters in this usage are:",
    "Audience represents the receiver of the incoming token or the resource that the token grants",
    "Audience represents the receiver of the incoming token or the resource that the token grants",
    "Authority is the address of the token-issuing authentication server. The JWT bearer",
    "Authority is the address of the token-issuing authentication server. The JWT bearer",
    "Another parameter, RequireHttpsMetadata, is useful for testing purposes; you set this parameter to",
    "Another parameter, RequireHttpsMetadata, is useful for testing purposes; you set this parameter to",
    "326 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "326 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "With this middleware in place, JWT tokens are automatically extracted from authorization headers.",
    "With this middleware in place, JWT tokens are automatically extracted from authorization headers.",
    "The JWT bearer authentication middleware can also support more advanced scenarios, such as using a",
    "The JWT bearer authentication middleware can also support more advanced scenarios, such as using a",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "After authentication, ASP.NET Core Web APIs need to authorize access. This process allows a service",
    "After authentication, ASP.NET Core Web APIs need to authorize access. This process allows a service",
    "Restricting access to an ASP.NET Core MVC route is as easy as applying an Authorize attribute to the",
    "Restricting access to an ASP.NET Core MVC route is as easy as applying an Authorize attribute to the",
    "327 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "327 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "By default, adding an Authorize attribute without parameters will limit access to authenticated users",
    "By default, adding an Authorize attribute without parameters will limit access to authenticated users",
    "ASP.NET Core Identity has a built-in concept of roles. In addition to users, ASP.NET Core Identity",
    "ASP.NET Core Identity has a built-in concept of roles. In addition to users, ASP.NET Core Identity",
    "If you\u2019re authenticating with JWT bearer tokens, the ASP.NET Core JWT bearer authentication",
    "If you\u2019re authenticating with JWT bearer tokens, the ASP.NET Core JWT bearer authentication",
    "In this example, only users in the Administrator or PowerUser roles can access APIs in the",
    "In this example, only users in the Administrator or PowerUser roles can access APIs in the",
    "To require a user be in multiple roles, you use multiple Authorize attributes, as shown in the following",
    "To require a user be in multiple roles, you use multiple Authorize attributes, as shown in the following",
    "In this example, to call API1, a user must:",
    "In this example, to call API1, a user must:",
    "Be in the Administrator ",
    "Be in the Administrator ",
    "Be in the RemoteEmployee role, ",
    "Be in the RemoteEmployee role, ",
    "328 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "328 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "Satisfy a custom handler for CustomPolicy authorization.",
    "Satisfy a custom handler for CustomPolicy authorization.",
    null,
    null,
    "Custom authorization policies are registered in the Startup.ConfigureServices method using the",
    "Custom authorization policies are registered in the Startup.ConfigureServices method using the",
    "As shown in the example, policies can be associated with different types of requirements. After the",
    "As shown in the example, policies can be associated with different types of requirements. After the",
    "In the previous example, the first AddPolicy call is just an alternative way of authorizing by role. If",
    "In the previous example, the first AddPolicy call is just an alternative way of authorizing by role. If",
    "[",
    "[",
    null,
    null,
    "The most interesting policy shown here is in the third AddPolicy method, because it uses a custom",
    "The most interesting policy shown here is in the third AddPolicy method, because it uses a custom",
    null,
    null,
    null,
    null,
    "329 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "329 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "If the user meets the requirement, a call to context.Succeed will indicate that the user is authorized. If",
    "If the user meets the requirement, a call to context.Succeed will indicate that the user is authorized. If",
    "In addition to registering custom policy requirements with AddPolicy calls, you also need to register",
    "In addition to registering custom policy requirements with AddPolicy calls, you also need to register",
    "An example of a custom authorization requirement and handler for checking a user\u2019s age (based on a",
    "An example of a custom authorization requirement and handler for checking a user\u2019s age (based on a",
    "ASP.NET supports minimal APIs as an alternative to controller-based APIs. Authorization policies are",
    "ASP.NET supports minimal APIs as an alternative to controller-based APIs. Authorization policies are",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "To connect with protected resources and other services, ASP.NET Core applications typically need to",
    "To connect with protected resources and other services, ASP.NET Core applications typically need to",
    "330 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "330 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "code and making sure not to store secrets in source control. Instead, you should use the ASP.NET",
    "code and making sure not to store secrets in source control. Instead, you should use the ASP.NET",
    "You must separate the secrets for accessing development and staging resources from the ones used",
    "You must separate the secrets for accessing development and staging resources from the ones used",
    "One way to keep secrets out of source code is for developers to set string-based secrets as",
    "One way to keep secrets out of source code is for developers to set string-based secrets as",
    "For example, setting an environment variable Logging:LogLevel:Default to Debug value would be",
    "For example, setting an environment variable Logging:LogLevel:Default to Debug value would be",
    "To access these values from environment variables, the application just needs to call",
    "To access these values from environment variables, the application just needs to call",
    null,
    null,
    "Secrets set by the Secret Manager tool are organized by the UserSecretsId property of the project",
    "Secrets set by the Secret Manager tool are organized by the UserSecretsId property of the project",
    "331 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "331 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "Using secrets stored with Secret Manager in an application is accomplished by calling",
    "Using secrets stored with Secret Manager in an application is accomplished by calling",
    "The AddUserSecrets",
    "The AddUserSecrets",
    "Secrets stored as environment variables or stored by the Secret Manager tool are still stored locally",
    "Secrets stored as environment variables or stored by the Secret Manager tool are still stored locally",
    "The ",
    "The ",
    "Register your application as an Azure AD application. (Access to key vaults is managed by",
    "Register your application as an Azure AD application. (Access to key vaults is managed by",
    "Alternatively, if you want your application to authenticate using a certificate instead of a",
    "Alternatively, if you want your application to authenticate using a certificate instead of a",
    "Give the registered application access to the key vault by creating a new service principal. You",
    "Give the registered application access to the key vault by creating a new service principal. You",
    "Include the key vault as a configuration source in your application by calling the",
    "Include the key vault as a configuration source in your application by calling the",
    "Note that calling AddAzureKeyVault requires the application ID that was registered and given access",
    "Note that calling AddAzureKeyVault requires the application ID that was registered and given access",
    "332 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "332 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "333 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    "333 CHAPTER 8 | Make secure .NET Microservices and Web Applications",
    null,
    null,
    "As a summary and key takeaways, the following are the most important conclusions from this guide.",
    "As a summary and key takeaways, the following are the most important conclusions from this guide.",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "334 CHAPTER 9 | .NET Microservices Architecture key takeaways",
    "334 CHAPTER 9 | .NET Microservices Architecture key takeaways",
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    "335 CHAPTER 9 | .NET Microservices Architecture key takeaways",
    "335 CHAPTER 9 | .NET Microservices Architecture key takeaways"
]