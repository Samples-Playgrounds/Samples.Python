"[\" \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\nEDITION v7.0 \\nRefer changelog for the bo\", \"ok updates and community contributions. \\nPUBLISHED BY Microsoft Press and Microsoft DevDiv Divisions\", \" of Microsoft Corporation One \\nMicrosoft Way Redmond, Washington 98052-6399 \\nCopyright \\u00a9 2023 by Mic\", \"rosoft Corporation \\nAll rights reserved. No part of the contents of this book may be reproduced in a\", \"ny form or by any \\nmeans without the written permission of the publisher. \\nThis book is available fo\", \"r free in the form of an electronic book (e-book) available through multiple \\nchannels at Microsoft \", \"such as https://dot.net/architecture. \\nIf you have questions related to this book, email at dotnet-a\", \"rchitecture-ebooks-\\nfeedback@service.microsoft.com. \\nThis book is provided \\u201cas-is\\u201d and expresses the\", \" author\\u2019s views and opinions. The views, opinions, and \\ninformation expressed in this book, includin\", \"g URL and other Internet website references, may change \\nwithout notice. \\nSome examples depicted her\", \"ein are provided for illustration only and are fictitious. No real association \\nor connection is int\", \"ended or should be inferred. \\nMicrosoft and the trademarks listed at https://www.microsoft.com on th\", \"e \\u201cTrademarks\\u201d webpage are \\ntrademarks of the Microsoft group of companies. All other marks are prop\", \"erty of their respective \\nowners. \\nAuthor: > Cesar de la Torre, Sr. PM, .NET Product Team, Microsoft\", \" Corp. \\nParticipants and reviewers: > Scott Hunter, Partner Director PM, .NET team, Microsoft > Paul\", \" \\nYuknewicz, Principal PM Manager, Visual Studio Tools team, Microsoft > Lisa Guthrie, Sr. PM, Visua\", \"l \\nStudio Tools team, Microsoft > Ankit Asthana, Principal PM Manager, .NET team, Microsoft > Unai \\n\", \"Zorrilla, Developer Lead, Plain Concepts > Javier Valero, Chief Operating Officer at Grupo Solutio >\", \" \\nSteve Smith, Architect, NimblePros \\nIntroduction \\nWhen you decide to modernize your web applicatio\", \"ns or services and move them to the cloud, you \\ndon\\u2019t necessarily have to fully rearchitect your app\", \"s. Rearchitecting an application by using an \\nadvanced approach like microservices isn\\u2019t always an o\", \"ption because of cost and time restraints. \\nDepending on the type of application, rearchitecting an \", \"app also might not be necessary. To optimize \\nthe cost-effectiveness of your organization\\u2019s cloud mi\", \"gration strategy, it\\u2019s important to consider the \\nneeds of your business and the requirements of you\", \"r apps. You\\u2019ll need to determine: \\n\\u2022 \\nWhich apps require a transformation or rearchitecting. \\n\\u2022 \\nWhi\", \"ch apps need to be only partially modernized. \\n\\u2022 \\nWhich apps you can \\u201clift and shift\\u201d directly to th\", \"e cloud. \\n \\nAbout this guide \\nThis guide focuses primarily on the initial modernization of existing \", \"Microsoft .NET Framework web or \\nservice-oriented applications, meaning the action of moving a workl\", \"oad to a newer or more modern \\nenvironment without significantly altering the application\\u2019s code and\", \" basic architecture. \\nThis guide also highlights the benefits of moving your apps to the cloud and p\", \"artially modernizing \\napps by using a specific set of new technologies and approaches, like Windows \", \"Containers and \\nrelated compute-platforms in Azure supporting Windows Containers. \\nPath to the cloud\", \" for existing .NET applications \\nOrganizations typically choose to move to the cloud for the agility\", \" and speed they can get for their \\napplications. You can set up thousands of servers (VMs) in the cl\", \"oud in minutes, compared to the \\nweeks it typically takes to set up on-premises servers. \\nThere isn\\u2019\", \"t a single, one-size-fits-all strategy for migrating applications to the cloud. The right \\nmigration\", \" strategy for you will depend on your organization\\u2019s needs and priorities, and the kind of \\napplicat\", \"ions you are migrating. Not all applications warrant the investment of moving to a platform as \\na se\", \"rvice (PaaS) model or developing a cloud-native application model. In many cases, you can take a \\nph\", \"ased or incremental approach to invest in moving your assets to the cloud, based on your business \\nn\", \"eeds. \\nFor modern applications with the best long-term agility and value for the organization, you m\", \"ight \\nbenefit from investing in cloud-native application architectures. However, for applications th\", \"at are \\nexisting or legacy assets, the key is to spend minimal time and money (no rearchitecting or \", \"code \\nchanges) while moving them to the cloud, to realize significant benefits. \\nFigure 1-1 shows th\", \"e possible paths you can take when you move existing .NET applications to the \\ncloud in incremental \", \"phases. \\n \\n \\n \\nFigure 1-1. Modernization paths for existing .NET applications and services \\nEach mig\", \"ration approach has different benefits and reasons for using it. You can choose a single \\napproach w\", \"hen you migrate apps to the cloud, or choose certain components from multiple \\napproaches. Individua\", \"l applications aren\\u2019t limited to a single approach or maturity state. For instance, \\na common hybrid\", \" approach would have certain on-premises components plus other components in \\nthe cloud. \\nThe defini\", \"tion and short explanation for each application maturity level are the following: \\nLevel 1: Cloud In\", \"frastructure-Ready applications: In this migration approach, you just migrate or \\nrehost your curren\", \"t on-premises applications to an infrastructure as a service (IaaS) platform. Your \\napps have almost\", \" the same composition as before, but now you deploy them to VMs in the cloud. \\nThis simple type of m\", \"igration is typically known in the industry as \\u201cLift & Shift.\\u201d \\nLevel 2: Cloud Optimized application\", \"s: At this level and still without rearchitecting or altering \\nsignificant code, you can gain additi\", \"onal benefits from running your app in the cloud with modern \\ntechnologies like containers and addit\", \"ional cloud-managed services. You improve the agility of your \\napplications to ship faster by refini\", \"ng your enterprise development operations (DevOps) processes. \\nYou achieve this functionality by usi\", \"ng technologies like Windows Containers, which is based on \\nDocker Engine. Containers remove the fri\", \"ction that\\u2019s caused by application dependencies when you \\ndeploy in multiple stages. In this maturit\", \"y model, you can deploy containers on IaaS or PaaS while \\nusing additional cloud-managed services re\", \"lated to databases, cache as a service, monitoring, and \\ncontinuous integration/continuous deploymen\", \"t (CI/CD) pipelines. \\nThe third level of maturity is the ultimate goal in the cloud, but it\\u2019s option\", \"al for many apps and not the \\nmain focus of this guide: \\n \\nLevel 3: Cloud-Native applications: This \", \"migration approach typically is driven by business need and \\ntargets modernizing your mission-critic\", \"al applications. At this level, you use PaaS services to move \\nyour apps to PaaS computing platforms\", \". You implement cloud-native applications and microservices \\narchitecture to evolve applications wit\", \"h long-term agility, and to scale to new limits. This type of \\nmodernization usually requires archit\", \"ecting specifically for the cloud. New code often must be written, \\nespecially when you move to clou\", \"d-native application and microservice-based models. This approach \\ncan help you gain benefits that a\", \"re difficult to achieve in your monolithic and on-premises application \\nenvironment. \\nTable 1-1 desc\", \"ribes the main benefits of and reasons for choosing each migration or modernization \\napproach. \\nClou\", \"d Infrastructure-Ready \\nLift and shift \\nCloud-Optimized \\nModernize \\nCloud-Native \\nModernize, rearchi\", \"tect, and \\nrewrite \\nApplication\\u2019s compute target \\n \\n \\nApplications deployed to VMs \\nin Azure \\nMonoli\", \"thic or N-Tier apps \\ndeployed to Azure App Service, \\nAzure Container Instance (ACI), \\nVMs with conta\", \"iners, or AKS \\n(Azure Kubernetes Service) \\nContainerized microservices on \\nAzure Kubernetes Service \", \"(AKS) \\nand/or serverless microservices \\nbased on Azure Functions. \\nData target \\n \\n \\nSQL or any relat\", \"ional database \\non a VM \\nAzure SQL Database Managed \\nInstance or another managed \\ndatabase in the cl\", \"oud. \\nFined-grain databases per \\nmicroservice, based on Azure \\nSQL Database, Azure Cosmos \\nDB, or an\", \"other managed \\ndatabase in the cloud \\nAdvantages \\n \\n \\n \\n \\n \\nChallenges \\n \\n \\n \\n \\n \\nTable 1-1. Benefit\", \"s and challenges of modernization paths for existing .NET applications and services \\nKey technologie\", \"s and architectures by maturity level \\n.NET Framework applications initially started with .NET Frame\", \"work version 1.0, which was released in \\nlate 2001. Then, companies moved towards newer versions (su\", \"ch as 2.0, 3.5 and .NET Framework 4.x). \\nMost of those applications ran on Windows Server and Intern\", \"et Information Server (IIS), and used a \\nrelational database, like SQL Server, Oracle, MySQL, or any\", \" other RDBMS. \\nMost existing .NET applications might nowadays be based on .NET Framework 4.x, or eve\", \"n on .NET \\nFramework 3.5, and use web frameworks like ASP.NET MVC, ASP.NET Web Forms, ASP.NET Web AP\", \"I, \\nWindows Communication Foundation (WCF), ASP.NET SignalR, and ASP.NET Web Pages. These \\nestablish\", \"ed .NET Framework technologies depend on Windows. That dependency is important to \\n \\nconsider if you\", \" are simply migrating legacy apps and you want to make minimal changes to your \\napplication infrastr\", \"ucture. \\nFigure 1-2 shows the primary technologies and architecture styles used at each of the three\", \" cloud \\nmaturity levels: \\n \\nFigure 1-2. Primary technologies for each maturity level for modernizing\", \" existing .NET web applications \\nFigure 1-2 highlights the most common scenarios, but many hybrid an\", \"d mixed variations are possible \\nwhen it comes to architecture. For example, the maturity models app\", \"ly not only to monolithic \\narchitectures in existing web apps, but also to service orientation, N-Ti\", \"er, and other architecture style \\nvariations. The higher focus or percentage on one or another archi\", \"tecture type and related \\ntechnologies determines the overall maturity level of your applications. \\n\", \"Each maturity level in the modernization process is associated with the following key technologies a\", \"nd \\napproaches: \\n\\u2022 \\nCloud Infrastructure-Ready (rehost or basic lift & shift): As a first step, many\", \" organizations \\nwant only to quickly execute a cloud-migration strategy. In this case, applications \", \"are \\nrehosted. Most rehosting can be automated by using Azure Migrate, a service that provides \\nthe \", \"guidance, insights, and mechanisms needed to assist you in migrating to Azure based on \\ncloud tools \", \"like Azure Site Recovery and Azure Database Migration Service. You can also set \\nup rehosting manual\", \"ly, so that you can learn infrastructure details about your assets when \\nyou move legacy apps to the\", \" cloud. For example, you can move your applications to VMs in \\nAzure with little modification-probab\", \"ly with only minor configuration changes. The \\nnetworking in this case is similar to an on-premises \", \"environment, especially if you create \\nvirtual networks in Azure. \\n\\u2022 \\nCloud-Optimized (Managed Servi\", \"ces and Windows Containers): This model is about making \\na few important deployment optimizations to\", \" gain some significant benefits from the cloud, \\n \\nwithout changing the core architecture of the app\", \"lication. The fundamental step here is to \\nadd Windows Containers support to your existing .NET Fram\", \"ework applications. This \\nimportant step (containerization) doesn\\u2019t require touching the code, so th\", \"e overall lift and \\nshift effort is light. You can use tools like Image2Docker or Visual Studio, wit\", \"h its tools for \\nDocker. Visual Studio automatically chooses smart defaults for ASP.NET applications\", \" and \\nWindows Containers images. These tools offer both a rapid inner loop, and a fast path to get \\n\", \"the containers to Azure. Your agility is improved when you deploy to multiple environments. \\nThen, m\", \"oving to production, you can deploy your Windows Containers to Azure Web App for \\nContainers, Azure \", \"Container Instances (ACI), and Azure VMs with Windows Server 2016 and \\ncontainers if you prefer an I\", \"aaS approach. For more complex multi-container applications, \\nconsider using orchestrators like Azur\", \"e Kubernetes Service (AKS/ACS). \\nDuring this initial modernization, you can also add assets from the\", \" cloud, such as monitoring with \\ntools like Azure Application Insights; CI/CD pipelines for your app\", \" lifecycles with Azure DevOps \\nServices; and many more data resource services that are available in \", \"Azure. For instance, you can \\nmodify a monolithic web app that was originally developed by using tra\", \"ditional ASP.NET Web Forms \\nor ASP.NET MVC, but now you deploy it by using Windows Containers. When \", \"you use Windows \\nContainers, you should also migrate your data to a database in Azure SQL Database M\", \"anaged \\nInstance, all without changing the core architecture of your application. \\n\\u2022 \\nCloud-Native: \", \"As introduced, you should think about architecting cloud-native applications \\nwhen you are targeting\", \" large and complex applications with multiple independent \\ndevelopment teams working on different mi\", \"croservices that can be developed and deployed \\nautonomously. Also, due to granularized and independ\", \"ent scalability per microservice. These \\narchitectural approaches face very important challenges and\", \" complexities but can be greatly \\nsimplified by using cloud PaaS and orchestrators like Azure Kubern\", \"etes Service (AKS/ACS) \\n(managed Kubernetes), and Azure Functions for a serverless approach. All the\", \"se approaches \\n(like microservices and Serverless) typically require you to architect for the cloud \", \"and write \\nnew code\\u2014code that is adapted to specific PaaS platforms, or code that aligns with specif\", \"ic \\narchitectures, like microservices. \\nFigure 1-3 shows the internal technologies that you can use \", \"for each maturity level: \\n \\n \\nFigure 1-3. Internal technologies for each modernization maturity leve\", \"l \\nLift and shift scenario \\nFor lift and shift migrations, keep in mind that you can use many differ\", \"ent variations of lift and shift in \\nyour application scenarios. If you only rehost your application\", \", you might have a scenario like the one \\nshown in Figure 1-4, where you use VMs in the cloud only f\", \"or your application and for your database \\nserver. \\n \\n \\nFigure 1-4. Example of a pure IaaS scenario \", \"in the cloud \\nModernization scenarios \\nFor modernization scenarios, you might have a pure Cloud-Opti\", \"mized application that uses elements \\nonly from that maturity level. Or, you might have an intermedi\", \"ate-state application with some \\nelements from Cloud Infrastructure-Ready and other elements from Cl\", \"oud-Optimized (a \\u201cpick and \\nchoose\\u201d or mixed model), like in Figure 1-5. \\n \\n \\nFigure 1-5. Example \\u201cp\", \"ick and choose\\u201d scenario, with database on IaaS, DevOps, and containerization assets \\nNext, as the i\", \"deal scenario for many existing .NET Framework applications to migrate, you could \\nmigrate to a Clou\", \"d-Optimized application, to get significant benefits from little work. This approach \\nalso sets you \", \"up for Cloud-Native as a possible future evolution. Figure 1-6 shows an example. \\n \\n \\nFigure 1-6. Ex\", \"ample Cloud-Optimized apps scenario, with Windows Containers and managed services \\nGoing even furthe\", \"r, you could extend your existing Cloud-Optimized application by adding a few \\nmicroservices for spe\", \"cific scenarios. This approach would move you partially to the level of Cloud-\\nNative model, which i\", \"s not the main focus of the present guidance. \\nWhat this guide does not cover \\nThis guide covers a s\", \"pecific subset of the example scenarios, as shown in Figure 1-7. This guide \\nfocuses only on the lif\", \"t and shift scenarios, and ultimately, on the Cloud-Optimized model. In the \\nCloud-Optimized model, \", \"a .NET Framework application is modernized by using Windows Containers, \\nplus additional components \", \"like monitoring and CI/CD pipelines. Each component is fundamental to \\ndeploying applications to the\", \" cloud, faster, and with agility. \\n \\n \\nFigure 1-7. Cloud-Native is not covered in this guide \\nThe fo\", \"cus of this guide is specific. It shows you the path you can take to achieve a lift and shift of you\", \"r \\nexisting .NET applications, without rearchitecting, and with no code changes. Ultimately, it show\", \"s you \\nhow to make your application Cloud-Optimized. \\nThis guide doesn\\u2019t show you how to create Clou\", \"d-Native applications, such as how to evolve to a \\nmicroservices architecture. To rearchitect your a\", \"pplications or to create brand-new applications that \\nare based on microservices, see the e-book .NE\", \"T Microservices: Architecture for containerized .NET \\napplications. \\nAdditional resources \\n\\u2022 \\nContai\", \"nerized Docker application lifecycle with Microsoft platform and tools \\n(downloadable e-book) \\nhttps\", \"://aka.ms/dockerlifecycleebook \\n\\u2022 \\n.NET Microservices: Architecture for containerized .NET applicati\", \"ons (downloadable e-\\nbook) \\nhttps://aka.ms/microservicesebook \\n\\u2022 \\nArchitecting modern web applicatio\", \"ns with ASP.NET Core and Azure (downloadable e-\\nbook) \\nhttps://aka.ms/webappebook \\nWho should use th\", \"is guide \\n \\nThis guide was written for developers and solution architects who want to modernize exis\", \"ting \\nASP.NET web applications or WCF services that are based on .NET Framework, for improved agilit\", \"y in \\nshipping and releasing applications. \\nYou also might find this guide useful if you are a techn\", \"ical decision maker, such as an enterprise \\narchitect or a development lead/director who just wants \", \"an overview of the benefits that you can get \\nby using Windows Containers, and by deploying to the c\", \"loud when using Microsoft Azure. \\nHow to use this guide \\nThis guide addresses the \\u201cwhy\\u201d-why you migh\", \"t want to modernize your existing applications, and the \\nspecific benefits you get from using Window\", \"s Containers when you move your apps to the cloud. The \\ncontent in the first few chapters of the gui\", \"de is designed for architects and technical decision makers \\nwho want an overview, but who don\\u2019t nee\", \"d to focus on implementation and technical, step-by-step \\ndetails. \\nThe last chapter of this guide i\", \"ntroduces multiple walkthroughs that focus on specific deployment \\nscenarios. This guide offers shor\", \"ter versions of the walkthroughs, to summarize the scenarios and \\nhighlight their benefits. The full\", \" walkthroughs drill down into setup and implementation details, and \\nare published as a set of wiki \", \"posts in the same public GitHub repo where related sample apps reside \\n(discussed in the next sectio\", \"n). The last chapter and the step-by-step wiki walkthroughs on GitHub will \\nbe of more interest to d\", \"evelopers and architects who want to focus on implementation details. \\nSample apps for modernizing l\", \"egacy apps: \\neShopModernizing \\nThe eShopModernizing repo on GitHub offers two sample applications th\", \"at simulate legacy \\nmonolithic web applications. One web app is developed by using ASP.NET MVC; the \", \"second web app \\nis developed by using ASP.NET Web Forms and the third app is an N-Tier app with a Wi\", \"nForms client \\ndesktop app consuming a WCF service backend. All these apps are based on the traditio\", \"nal .NET \\nFramework. These sample apps don\\u2019t use .NET Core/.NET 7 or ASP.NET Core as they are suppos\", \"ed to \\nbe existing/legacy .NET Framework applications to be modernized. \\nThese sample apps have a se\", \"cond version, with modernized code, and which are fairly straightforward. \\nThe most important differ\", \"ence between the app versions is that the second versions use Windows \\nContainers as the deployment \", \"choice. There also are a few additions to the second versions, like Azure \\nStorage Blobs for managin\", \"g images, Azure Active Directory for managing security, and Azure \\nApplication Insights for monitori\", \"ng and auditing the applications. \\n \\ni \\nContents \\n \\nContents \\nLift and shift existing .NET apps to A\", \"zure IaaS (Cloud Infrastructure-Ready) ................. 1 \\nWhy migrate existing .NET web applicatio\", \"ns to Azure IaaS ...................................................................................\", \" 2 \\nWhen to migrate to IaaS instead of to PaaS .....................................................\", \"............................................................ 2 \\nUse Azure Migrate to analyze and mig\", \"rate your existing applications to Azure ........................................... 2 \\nUse Azure Si\", \"te Recovery to migrate your existing VMs to Azure VMs ..............................................\", \"................ 3 \\nAdditional resources ...........................................................\", \"............................................................................................... 4 \\nM\", \"igrate your relational databases to Azure ..........................................................\", \"............... 6 \\nWhen to migrate to Azure SQL Database Managed Instance ..........................\", \"..................................................... 7 \\nWhen to migrate to Azure SQL Database .....\", \"....................................................................................................\", \"............. 8 \\nWhen to move your original RDBMS to a VM (IaaS) ...................................\", \".............................................................. 8 \\nWhen to migrate to SQL Server as a\", \" VM (IaaS) .........................................................................................\", \".................. 9 \\nUse Azure Database Migration Service to migrate your relational databases to A\", \"zure ............................. 9 \\nAdditional resources .........................................\", \"....................................................................................................\", \"............... 10 \\nModernize existing .NET apps to Cloud-Optimized applications ...................\", \"................. 11 \\nReasons to modernize existing .NET apps to Cloud-Optimized applications ......\", \"........................................ 12 \\nCloud-Optimized application principles and tenets .....\", \"..................................................................................... 12 \\nBenefits o\", \"f a Cloud-Optimized application ....................................................................\", \"....................................... 14 \\nMicrosoft technologies in cloud-optimized applications .\", \".................................................................................... 14 \\nMonolithic \", \"applications can be Cloud-Optimized ................................................................\", \".............................. 15 \\nWhat about Cloud-Native applications? ...........................\", \".......................................................................................... 16 \\nCloud\", \"-native applications details .......................................................................\", \"....................................................... 17 \\nWhat about microservices? ..............\", \"....................................................................................................\", \"........................ 18 \\nDeploy existing .NET apps as Windows containers .......................\", \".......................................................................... 19 \\nWhat are containers? \", \"(Linux or Windows)..................................................................................\", \"............................ 19 \\nBenefits of containers (Docker Engine on Linux or Windows) ........\", \"............................................................... 19 \\nWhat is Docker? ................\", \"....................................................................................................\", \"............................................ 20 \\nBenefits of Windows Containers for your existing .N\", \"ET applications ......................................................... 21 \\nChoose an OS to target\", \" with .NET-based containers ........................................................................\", \"................ 22 \\n \\nii \\nContents \\nWindows container types .......................................\", \"....................................................................................................\", \".. 23 \\nThe container ecosystem in Azure ............................................................\", \"................................................................ 24 \\nWhen not to deploy to Windows C\", \"ontainers ..........................................................................................\", \".................. 26 \\nWhen to deploy Windows Containers in your on-premises IaaS VM infrastructure \", \"................................. 26 \\nWhen to deploy Windows Containers to Azure VMs (IaaS cloud) ..\", \".................................................................. 26 \\nWhen to deploy Windows Contai\", \"ners to Azure Container Instances (ACI) ................................................... 27 \\nWhen\", \" to deploy Windows Containers to Azure Kubernetes Service (AKS) ....................................\", \"............... 28 \\nChoosing Azure compute platforms for container-based applications ..............\", \"............................................ 28 \\nBuild resilient services ready for the cloud: Embra\", \"ce transient failures in the cloud................................. 29 \\nHandling partial failure ...\", \"....................................................................................................\", \"........................................... 29 \\nModernize your apps with monitoring and telemetry ..\", \"......................................................................................... 31 \\nMonito\", \"r your application with Application Insights .......................................................\", \".................................... 31 \\nMonitor your Docker infrastructure with Log Analytics and i\", \"ts Container Monitoring solution...... 32 \\nModernize your app\\u2019s lifecycle with CI/CD pipelines and D\", \"evOps tools in the cloud .............................. 34 \\nMigrate to hybrid cloud scenarios ......\", \"....................................................................................................\", \"....................... 35 \\nAzure Stack ............................................................\", \"....................................................................................................\", \"......... 35 \\nWalkthroughs and technical get started overview ......................................\", \"...................... 38 \\nTechnical walkthrough list ..............................................\", \"................................................................................................... \", \"38 \\nWalkthrough 1: Tour of eShop legacy apps .......................................................\", \"........................................................ 39 \\nTechnical walkthrough availability ....\", \"....................................................................................................\", \".................... 39 \\nOverview ..................................................................\", \"....................................................................................................\", \"........ 39 \\nGoals .................................................................................\", \"....................................................................................................\", \". 39 \\nScenario 1: ASP.NET Web apps .................................................................\", \"................................................................. 39 \\nScenario 2: WCF service and Wi\", \"nForms client app (3-Tier app) .................................................................... \", \"40 \\nBenefits .......................................................................................\", \".......................................................................................... 41 \\nNext \", \"steps ..............................................................................................\", \"............................................................................. 41 \\nWalkthrough 2: Con\", \"tainerize your existing .NET applications with Windows Containers ....................... 41 \\nOvervi\", \"ew .................................................................................................\", \"............................................................................. 41 \\nGoals ............\", \"....................................................................................................\", \"...................................................................... 41 \\nScenario 1: Containerized\", \" ASP.NET web apps ..................................................................................\", \".................... 42 \\nScenario 2: Containerized WCF service .....................................\", \".............................................................................. 42 \\nBenefits ........\", \"....................................................................................................\", \"..................................................................... 43 \\n \\niii \\nContents \\nNext step\", \"s ..................................................................................................\", \"......................................................................... 43 \\nWalkthrough 3: Deploy \", \"your Windows Containers-based app to Azure VMs ............................................. 44 \\nTec\", \"hnical walkthrough availability ....................................................................\", \"........................................................ 44 \\nOverview ..............................\", \"....................................................................................................\", \"............................................ 44 \\nGoals .............................................\", \"....................................................................................................\", \"..................................... 44 \\nScenarios.................................................\", \"....................................................................................................\", \"......................... 44 \\nAzure VMs for Windows Containers .....................................\", \".................................................................................... 46 \\nBenefits ..\", \"....................................................................................................\", \"........................................................................... 46 \\nNext steps .........\", \"....................................................................................................\", \".............................................................. 46 \\nWalkthrough 4: Deploy your Window\", \"s Containers-based apps to Azure Container Instances (ACI) . 47 \\nTechnical walkthrough availability \", \"....................................................................................................\", \"........................ 47 \\nOverview ..............................................................\", \"....................................................................................................\", \"............ 47 \\nGoals .............................................................................\", \"....................................................................................................\", \"..... 47 \\nScenarios.................................................................................\", \"............................................................................................. 47 \\nBe\", \"nefits .............................................................................................\", \".................................................................................... 47 \\nConsiderati\", \"ons.................................................................................................\", \".................................................................. 48 \\nNext steps ..................\", \"....................................................................................................\", \"..................................................... 48 \\nWalkthrough 5: Deploy your Windows Contain\", \"ers-based apps to Kubernetes in Azure Container \\nService ...........................................\", \"....................................................................................................\", \"........................................ 48 \\nTechnical walkthrough availability ....................\", \"....................................................................................................\", \".... 48 \\nOverview ..................................................................................\", \"............................................................................................ 48 \\nGoa\", \"ls .................................................................................................\", \"..................................................................................... 49 \\nScenarios.\", \"....................................................................................................\", \"......................................................................... 49 \\nBenefits .............\", \"....................................................................................................\", \"................................................................ 50 \\nNext steps ....................\", \"....................................................................................................\", \"................................................... 51 \\nWalkthrough 6: Deploy your Windows Container\", \"s-based apps to Azure App Service for Containers\\n ..................................................\", \"....................................................................................................\", \"................................................ 51 \\nTechnical walkthrough availability ............\", \"....................................................................................................\", \"............ 51 \\nOverview ..........................................................................\", \"....................................................................................................\", \" 51 \\nGoals .........................................................................................\", \"............................................................................................. 51 \\nSc\", \"enario .............................................................................................\", \".................................................................................. 52 \\nBenefits ....\", \"....................................................................................................\", \"......................................................................... 52 \\n \\niv \\nContents \\nNext s\", \"teps ...............................................................................................\", \"............................................................................ 52 \\nConclusions .......\", \"....................................................................................................\", \"................. 53 \\n \\n1 \\nCHAPTER 1 | Lift and shift existing .NET apps to Azure IaaS (Cloud Infras\", \"tructure-Ready) \\n \\nCHAPTER 1 \\nLift and shift existing .NET \\napps to Azure IaaS (Cloud \\nInfrastructur\", \"e-Ready) \\nVision: As a first step, to reduce your on-premises investment and total cost of hardware \", \"and \\nnetworking maintenance, simply rehost your existing applications in the cloud. \\nBefore getting \", \"into how to migrate your existing applications to the Azure infrastructure as a service \\n(IaaS) plat\", \"form, it\\u2019s important to analyze the reasons why you\\u2019d want to migrate directly to IaaS in \\nAzure. Th\", \"e scenario at this modernization maturity level essentially is to start using VMs in the cloud, \\nins\", \"tead of continuing to use your current, on-premises infrastructure. \\nAnother point to analyze is why\", \" you might want to migrate to pure IaaS cloud instead of just adding \\nmore advanced managed services\", \" in Azure. Determine what cases might require IaaS in the first place. \\nFigure 2-1 positions Cloud I\", \"nfrastructure-Ready applications in the modernization maturity levels: \\n \\nFigure 2-1. Positioning Cl\", \"oud Infrastructure-Ready applications \\n \\n2 \\nCHAPTER 1 | Lift and shift existing .NET apps to Azure I\", \"aaS (Cloud Infrastructure-Ready) \\n \\nWhy migrate existing .NET web applications to \\nAzure IaaS \\nThe m\", \"ain reason to migrate to the cloud, even at an initial IaaS level, is to achieve cost reductions. By\", \" \\nusing more managed infrastructure services, your organization can lower its investment in hardware\", \" \\nmaintenance, server or VM provisioning and deployment, and infrastructure management. \\nAfter you m\", \"ake the decision to move your apps to the cloud, the main reason why you might choose \\nIaaS instead \", \"of more advanced options like PaaS is simply that the IaaS environment will be more \\nfamiliar. Movin\", \"g to an environment that\\u2019s similar to your current, on-premises environment offers a \\nlower learning\", \" curve, which makes it the quickest path to the cloud. \\nHowever, taking the quickest path to the clo\", \"ud doesn\\u2019t mean that you will gain the most benefit from \\nhaving your applications running in the cl\", \"oud. Any organization will gain the most significant benefits \\nfrom a cloud migration at the already\", \" introduced Cloud-Optimized and Cloud-Native maturity levels. \\nIt also has become evident that appli\", \"cations are easier to modernize and rearchitect in the future \\nwhen they are already running in the \", \"cloud, even on IaaS. Application data migration has already been \\nachieved. Also, your organization \", \"will have gained the skills required for working in the cloud and \\nmade the shift to operating in a \", \"\\u201ccloud culture.\\u201d \\nWhen to migrate to IaaS instead of to PaaS \\nThe next sections discuss Cloud-Optimi\", \"zed applications that are mostly based on PaaS platforms and \\nservices. These apps give you the most\", \" benefits from migrating to the cloud. \\nIf your goal is simply to move existing applications to the \", \"cloud, first, identify existing applications that \\nwould not require substantial modification to run\", \" in Azure App Service. These apps should be the first \\ncandidates for Cloud-Optimized. \\nThen, for th\", \"e apps that still cannot move to Windows Containers and PaaS such as App Service or \\norchestrators l\", \"ike Azure Kubernetes Service, migrate those apps to simple plain VMs (IaaS). \\nBut, keep in mind that\", \" correctly configuring, securing, and maintaining VMs requires much more time \\nand IT expertise comp\", \"ared to using PaaS services in Azure. If you are considering Azure Virtual \\nMachines, make sure that\", \" you take into account the ongoing maintenance effort required to patch, \\nupdate, and manage your VM\", \" environment. Azure Virtual Machines is IaaS. \\nUse Azure Migrate to analyze and migrate your \\nexisti\", \"ng applications to Azure \\nMigrating to the cloud doesn\\u2019t have to be difficult. But many organization\", \"s struggle to get started - to \\nget deep visibility into the environment and the tight interdependen\", \"cies between applications, \\nworkloads, and data. Without that visibility, it can be difficult to pla\", \"n the path forward. Without \\ndetailed information on what\\u2019s required for a successful migration, you\", \" can\\u2019t have the right \\n \\n3 \\nCHAPTER 1 | Lift and shift existing .NET apps to Azure IaaS (Cloud Infra\", \"structure-Ready) \\n \\nconversations within your organization. You don\\u2019t know enough about the potentia\", \"l cost benefits, or \\nwhether workloads could just lift-and-shift or would require significant rework\", \" to migrate successfully. \\nNo wonder many organizations hesitate. \\nAzure Migrate is a new service th\", \"at provides the guidance, insights, and mechanisms needed to assist \\nyou in migrating to Azure. Azur\", \"e Migrate provides: \\n\\u2022 \\nDiscovery and assessment for on-premises virtual machines \\n\\u2022 \\nInbuilt depend\", \"ency mapping for high-confidence discovery of multi-tier applications \\n\\u2022 \\nIntelligent right sizing t\", \"o Azure virtual machines \\n\\u2022 \\nCompatibility reporting with guidelines for remediating potential issue\", \"s \\n\\u2022 \\nIntegration with Azure Database Management Service for database discovery and migration \\nAzure\", \" Migrate gives you confidence that your workloads can migrate with minimal impact to the \\nbusiness a\", \"nd run as expected in Azure. With the right tools and guidance, you can achieve maximum \\nreturn on i\", \"nvestment while assuring that critical performance and reliability needs are met. \\nFigure 2-2 shows \", \"you the built-in dependency mapping for all server and application connections \\nperformed by Azure M\", \"igrate. \\n \\nFigure 2-2. Positioning Cloud Infrastructure-Ready applications \\nUse Azure Site Recovery \", \"to migrate your existing \\nVMs to Azure VMs \\nAs part of the end-to-end Azure Migrate, Azure Site Reco\", \"very is a tool that you can use to easily \\nmigrate your web apps to VMs in Azure. You can use Site R\", \"ecovery to replicate on-premises VMs and \\nphysical servers to Azure, or to replicate them to a secon\", \"dary on-premises location. You can even \\nreplicate a workload that\\u2019s running on a supported Azure VM\", \", on an on-premises Hyper-V VM, on a \\nVMware VM, or on a Windows or Linux physical server. Replicati\", \"on to Azure eliminates the cost and \\ncomplexity of maintaining a secondary datacenter. \\n \\n4 \\nCHAPTER\", \" 1 | Lift and shift existing .NET apps to Azure IaaS (Cloud Infrastructure-Ready) \\n \\nSite Recovery i\", \"s also made specifically for hybrid environments that are partly on-premises and partly \\non Azure. S\", \"ite Recovery helps ensure business continuity by keeping your apps that are running on \\nVMs and on-p\", \"remises physical servers available if a site goes down. It replicates workloads that are \\nrunning on\", \" VMs and physical servers so that they remain available in a secondary location if the \\nprimary site\", \" isn\\u2019t available. It recovers workloads to the primary site when it\\u2019s up and running again. \\nFigure \", \"2-3 shows the execution of multiple VM migrations by using Azure Site Recovery. \\n \\nFigure 2-3. Posit\", \"ioning Cloud Infrastructure-Ready applications \\nAdditional resources \\n\\u2022 \\nAzure Migrate Datasheet \\n  \", \"\\nhttps://aka.ms/azuremigration\\\\_datasheet \\n\\u2022 \\nAzure Migrate \\n  \\nhttps://aka.ms/azuremigrate \\n\\u2022 \\nAzur\", \"e migration and modernization center \\n  \\nhttps://azure.microsoft.com/migration/ \\n\\u2022 \\nMigrate to Azure\", \" with Site Recovery \\n  \\nhttps://learn.microsoft.com/azure/site-recovery/site-recovery-migrate-to-azu\", \"re \\n\\u2022 \\nAzure Site Recovery service overview \\n \\n5 \\nCHAPTER 1 | Lift and shift existing .NET apps to A\", \"zure IaaS (Cloud Infrastructure-Ready) \\n \\n  \\nhttps://learn.microsoft.com/azure/site-recovery/site-re\", \"covery-overview \\n\\u2022 \\nMigrating VMs in AWS to Azure VMs \\n  \\nhttps://learn.microsoft.com/azure/site-rec\", \"overy/site-recovery-migrate-aws-to-azure \\n \\n6 \\nCHAPTER 2 | Migrate your relational databases to Azur\", \"e \\n \\nCHAPTER 2 \\nMigrate your relational \\ndatabases to Azure \\nVision: Azure offers the most comprehen\", \"sive database migration. \\nIn Azure, you can migrate your database servers directly to IaaS VMs (pure\", \" lift and shift), or you can \\nmigrate to Azure SQL Database, for additional benefits. Azure SQL Data\", \"base offers the managed \\ninstance and full database-as-a-service (DBaaS) options. Figure 3-1 shows t\", \"he multiple relational \\ndatabase migration paths available in Azure. \\n \\nFigure 3-1. Database migrati\", \"on paths in Azure \\n \\n7 \\nCHAPTER 2 | Migrate your relational databases to Azure \\n \\nWhen to migrate to\", \" Azure SQL Database Managed \\nInstance \\nIn most cases, Azure SQL Database Managed Instance will be yo\", \"ur best option to consider when you \\nmigrate your data to Azure. If you are migrating SQL Server dat\", \"abases and need nearly 100% \\nassurance that you won\\u2019t need to rearchitect your application or make c\", \"hanges to your data or data \\naccess code, choose the Managed Instance feature of Azure SQL Database.\", \" \\nAzure SQL Database Managed Instance is the best option if you have additional requirements for SQL\", \" \\nServer instance-level functionality, or isolation requirements beyond the features provided in a \\n\", \"standard Azure SQL Database (single database model). This last one is the most PaaS-oriented choice,\", \" \\nbut it doesn\\u2019t offer the same features as that of a traditional SQL server. Migration might surfac\", \"e \\nfrictions. \\nFor example, an organization that has made deep investments in instance-level SQL Ser\", \"ver capabilities \\nwould benefit from migrating to SQL Managed Instance. Examples of instance-level S\", \"QL Server \\ncapabilities include SQL common language runtime (CLR) integration, SQL Server Agent, and\", \" cross-\\ndatabase querying. Support for these features is not available in standard Azure SQL Databas\", \"e (a \\nsingle-database model). \\nAn organization that operates in a highly regulated industry, and whi\", \"ch needs to maintain isolation for \\nsecurity purposes, also might benefit from choosing the SQL Mana\", \"ged Instance model. \\nManaged Instance in Azure SQL Database has the following characteristics: \\n\\u2022 \\nS\", \"ecurity isolation through Azure Virtual Network \\n\\u2022 \\nApplication surface compatibility, with these fe\", \"atures: \\n\\u2013 \\nSQL Server Agent and SQL Server Profiler \\n\\u2013 \\nCross-database references and queries, SQL \", \"CLR, replication, change data capture \\n(CDC), and Service Broker \\n\\u2022 \\nDatabase sizes up to 35 TB \\n\\u2022 \\n\", \"Minimum-downtime migration, with these features: \\n\\u2013 \\nAzure Database Migration Service \\n\\u2013 \\nNative bac\", \"kup and restore, and log shipping \\nWith these capabilities, when you migrate existing application da\", \"tabases to Azure SQL Database, the \\nManaged Instance model offers nearly 100% of the benefits of Paa\", \"S for SQL Server. Managed Instance \\nis a SQL Server environment where you continue using instance-le\", \"vel capabilities without changing \\nyour application design. \\nManaged Instance is probably the best f\", \"it for enterprises that currently are using SQL Server, and \\nwhich require flexibility in their netw\", \"ork security in the cloud. It\\u2019s like having a private virtual network \\nfor your SQL databases. \\n \\n8 \", \"\\nCHAPTER 2 | Migrate your relational databases to Azure \\n \\nWhen to migrate to Azure SQL Database \\nAs\", \" mentioned, the standard Azure SQL Database is a fully managed, relational DBaaS. SQL Database \\ncurr\", \"ently manages millions of production databases, across 38 datacenters, around the world. It \\nsupport\", \"s a broad range of applications and workloads, from managing straightforward transactional \\ndata, to\", \" driving the most data-intensive, mission-critical applications that require advanced data \\nprocessi\", \"ng at a global scale. \\nBecause of its full PaaS features, better pricing-and ultimately lower cost-y\", \"ou should move to the \\nstandard Azure SQL Database as your \\u201cby-default choice\\u201d if you have an applic\", \"ation that uses basic, \\nstandard SQL databases, and no additional instance features. SQL Server feat\", \"ures like SQL CLR \\nintegration, SQL Server Agent, and cross-database querying are not supported in t\", \"he standard Azure \\nSQL Database. Those features are available only in the Azure SQL Database Managed\", \" Instance model. \\nAzure SQL Database is the only intelligent cloud database service that\\u2019s built for\", \" app developers. It\\u2019s \\nalso the only cloud database service that scales on-the-fly, without downtime\", \", to help you efficiently \\ndeliver multitenant apps. Ultimately, Azure SQL Database leaves you more \", \"time to innovate, and it \\naccelerates your time to market. You can build secure apps and connect to \", \"your SQL database by \\nusing the languages and platforms that you prefer. \\nAzure SQL Database offers \", \"the following benefits: \\n\\u2022 \\nBuilt-in intelligence (machine learning) that learns and adapts to your \", \"app \\n\\u2022 \\nOn-demand database provisioning \\n\\u2022 \\nA range of offers, for all workloads \\n\\u2022 \\n99.99% availabi\", \"lity SLA, zero maintenance \\n\\u2022 \\nGeo-replication and restore services for data protection \\n\\u2022 \\nAzure SQ\", \"L Database Point in Time Restore feature \\n\\u2022 \\nCompatibility with SQL Server 2016, including hybrid an\", \"d migration \\nThe standard Azure SQL Database is closer to PaaS than Azure SQL Database Managed Insta\", \"nce. \\nPrefer the standard Azure SQL Database because you\\u2019ll get more benefits from a managed cloud. \", \"\\nHowever, Azure SQL Database has some key differences from regular and on-premises SQL Server \\ninsta\", \"nces. Depending on your existing application\\u2019s database requirements, and your enterprise \\nrequireme\", \"nts and policies, it might not be the best choice when you are planning your migration to \\nthe cloud\", \". \\nWhen to move your original RDBMS to a VM (IaaS) \\nOne of your migration options is to move your or\", \"iginal relational database management system \\n(RDBMS), including Oracle, IBM DB2, MySQL, PostgreSQL,\", \" or SQL Server, to a similar server that\\u2019s \\nrunning on an Azure VM. If you have existing application\", \"s that require the fastest migration to the \\ncloud with minimal changes, or no changes at all, a dir\", \"ect migration to IaaS in the cloud might be a \\n \\n9 \\nCHAPTER 2 | Migrate your relational databases to\", \" Azure \\n \\nfair option. It might not be the best way to take advantage of all the cloud\\u2019s benefits, b\", \"ut it\\u2019s probably \\nthe fastest initial path. \\nCurrently, Microsoft Azure supports up to 331 different\", \" database servers deployed as IaaS VMs. These \\ninclude popular RDBMS like SQL Server, Oracle, MySQL,\", \" PostgreSQL, and IBM DB2, and many other \\nNoSQL databases like MongoDB, Cassandra, DataStax, MariaDB\", \", and Cloudera. \\nNote \\nAlthough moving your RDBMS to an Azure VM might be the fastest way to migrate\", \" your data to the \\ncloud (because it is IaaS), this approach requires a significant investment in yo\", \"ur IT teams (database \\nadministrators and IT pros). Enterprise teams need to be able to set up and m\", \"anage high availability, \\ndisaster recovery, and patching for SQL Server. This context also needs a \", \"customized environment, \\nwith full administrative rights. \\nWhen to migrate to SQL Server as a VM (Ia\", \"aS) \\nThere might be a few cases where you still need to migrate to SQL Server as a regular VM. An \\ne\", \"xample scenario is if you need to use SQL Server Reporting Services. In most cases, though, Azure \\nS\", \"QL Database Managed Instance can provide everything you need to migrate from on-premises SQL \\nserver\", \"s, so migration to a SQL Server VM should be your last resort to try. \\nUse Azure Database Migration \", \"Service to migrate \\nyour relational databases to Azure \\nYou can use Azure Database Migration Service\", \" to migrate relational databases like SQL Server, and \\nMySQL to Azure, whether your target database \", \"is Azure SQL Database, Azure SQL Database Managed \\nInstance, or SQL Server on an Azure VM. \\nThe auto\", \"mated workflow, with assessment reporting, guides you through the changes you need to \\nmake before y\", \"ou migrate the database. When you are ready, the service migrates the source database \\nto Azure. \\nWh\", \"enever you change an original RDBMS, you might need to retest. You also might need to change \\nthe SQ\", \"L sentences or Object-Relational Mapping (ORM) code in your application, depending on \\ntesting resul\", \"ts. \\nIf you have any other database (for example, IBM DB2) and you opt for a lift and shift approach\", \", you \\nmight want to continue using those databases as IaaS VMs in Azure, unless you are willing to \", \"perform \\na more complex data migration. A more complex data migration will require additional effort\", \" because \\nyou\\u2019d be migrating to a different database type with the new schema and different programm\", \"ing \\nlibraries. \\n \\n10 \\nCHAPTER 2 | Migrate your relational databases to Azure \\n \\nAdditional resource\", \"s \\n\\u2022 \\nChoose a cloud SQL Server option: Azure SQL Database (PaaS) or SQL Server on Azure \\nVM (IaaS) \", \"\\n  \\nhttps://learn.microsoft.com/azure/sql-database/sql-database-paas-vs-sql-server-iaas \\n\\u2022 \\nSQL Serv\", \"er database migration to SQL Database in the cloud \\n  \\nhttps://learn.microsoft.com/azure/sql-databas\", \"e/sql-database-cloud-migrate \\n\\u2022 \\nAzure SQL Database \\n  \\nhttps://azure.microsoft.com/services/sql-dat\", \"abase/?v=16.50 \\n\\u2022 \\nSQL Server on virtual machines \\n  \\nhttps://azure.microsoft.com/services/virtual-m\", \"achines/sql-server/ \\n \\n11 \\nCHAPTER 3 | Modernize existing .NET apps to Cloud-Optimized applications \", \"\\n \\nCHAPTER 3 \\nModernize existing .NET \\napps to Cloud-Optimized \\napplications \\nVision: Modernize your\", \" existing .NET Framework applications to Cloud-Optimized applications to \\ndrastically improve your d\", \"eployment agility, so you can ship faster and lower application\\u2019s delivery \\ncosts. \\nTo take advantag\", \"e of the benefits of the cloud and new technologies like containers, you should at \\nleast partially \", \"modernize your existing .NET applications. Ultimately, modernizing your enterprise \\napplications wil\", \"l lower your total cost of ownership. \\nPartially modernizing an app doesn\\u2019t necessarily mean a full \", \"migration and rearchitecture. You can \\ninitially modernize your existing applications with important\", \" but easy to do modernization. You can \\nmaintain your current code base, written in existing .NET Fr\", \"amework versions, with any Windows and \\nIIS dependencies. Figure 4-1 highlights how Cloud-Optimized \", \"apps are positioned in Azure \\napplication modernization maturity models. \\n \\nFigure 4-1. Positioning \", \"Cloud-Optimized applications \\n \\n12 \\nCHAPTER 3 | Modernize existing .NET apps to Cloud-Optimized appl\", \"ications \\n \\nReasons to modernize existing .NET apps to Cloud-\\nOptimized applications \\nWith a Cloud-O\", \"ptimized application, you can rapidly and repeatedly deliver reliable applications to \\nyour customer\", \"s. You gain essential agility and reliability by deferring much of the operational \\ncomplexity of yo\", \"ur app to the platform. \\nIf you can\\u2019t get your applications to market quickly, by the time you ship \", \"your app, the market you \\nwere targeting will have evolved. You might be too late, no matter how wel\", \"l the application was \\narchitected or engineered. You might be failing or not reaching your full pot\", \"ential because you can\\u2019t \\nsync app delivery with the needs of the market. \\nThe need for continuous b\", \"usiness innovation pushes development and operations teams to the limit. \\nThe only way to achieve th\", \"e agility you need in continuous business innovation is by modernizing \\nyour applications with techn\", \"ologies like containers and specific Cloud-Optimized application \\nprinciples. \\nThe bottom line is th\", \"at when an organization builds and manages applications that are Cloud-\\nOptimized, it can put soluti\", \"ons in the hands of customers sooner and bring new ideas to market when \\nthey are relevant. \\nCloud-O\", \"ptimized application principles and tenets \\nImprovements in the cloud are mostly focused on meeting \", \"two goals: Reduce costs and improve \\nbusiness growth by improving agility. These goals are achieved \", \"by simplifying processes and reducing \\nfriction when you release and ship applications. \\nYour applic\", \"ation is Cloud-Optimized if you can-in an agile manner-develop your app autonomously \\nfrom other on-\", \"premises apps, and then release, deploy, autoscale, monitor, and troubleshoot your \\napp in the cloud\", \". \\nThe key is agility. You can\\u2019t ship with agility unless you reduce to an absolute minimum any \\ndep\", \"loyment-to-production issues and dev/test environment issues. Containers (specifically, Docker, as \\n\", \"a de facto standard) and managed services were designed specifically for this purpose. \\nTo achieve a\", \"gility, you also need automated DevOps processes that are based on CI/CD pipelines that \\nrelease to \", \"scalable platforms in the cloud. CI/CD platforms (like Azure DevOps Services or Jenkins) that \\ndeplo\", \"y to a scalable and resilient cloud platform (like Azure App Service or Azure Kubernetes Service) \\na\", \"re key technologies for achieving agility in the cloud. \\nThe following list describes the main tenet\", \"s or practices for Cloud-Optimized applications. Note that \\nyou can adopt all or only some of these \", \"principles, in a progressive or incremental approach: \\n\\u2022 \\nContainers. Containers give you the abilit\", \"y to include application dependencies with the \\napplication itself. Containerization significantly r\", \"educes the number of issues you might \\nencounter when you deploy to production environments or test \", \"in staging environments. \\nUltimately, containers improve the agility of application delivery. \\n \\n13 \", \"\\nCHAPTER 3 | Modernize existing .NET apps to Cloud-Optimized applications \\n \\n\\u2022 \\nResilient and scalab\", \"le cloud. The cloud provides a platform that is managed, elastic, \\nscalable, and resilient. These ch\", \"aracteristics are fundamental to gain cost improvements and \\nship highly available and reliable appl\", \"ications in a continuous delivery. Managed services like \\nmanaged databases, managed cache as a serv\", \"ice (CaaS), and managed storage are \\nfundamental pieces in alleviating the maintenance costs of your\", \" application. \\n\\u2022 \\nMonitoring. You can\\u2019t have a reliable application without having a good way to det\", \"ect and \\ndiagnose exceptions and application performance issues. You need to get actionable insights\", \" \\nthrough application performance management and instant analytics. \\n\\u2022 \\nDevOps culture and continuou\", \"s delivery. Adopting DevOps practices requires a cultural \\nchange in which teams no longer work in i\", \"ndependent silos. CI/CD pipelines are possible only \\nwhen there is an increased collaboration betwee\", \"n development and IT operations teams, \\nsupported by containers and CI/CD tools. \\nFigure 4-2 shows t\", \"he main optional pillars of a Cloud-Optimized application. The more pillars you \\nimplement, the read\", \"ier your application will be to succeed in meeting your customers\\u2019 expectations. \\n \\nFigure 4-2. Main\", \" pillars of a Cloud-Optimized application \\nTo summarize, a Cloud-Optimized application is an approac\", \"h to building and managing applications \\nthat takes advantage of the cloud computing model, while us\", \"ing a combination of containers, \\nmanaged cloud infrastructure, resilient application techniques, mo\", \"nitoring, continuous delivery, and \\nDevOps, all without the need to rearchitect and recode your exis\", \"ting applications. \\nYour organization can adopt these technologies and approaches gradually. You don\", \"\\u2019t have to \\nembrace all of them, all at once. You can adopt them incrementally, depending on enterpr\", \"ise priorities \\nand user needs. \\n \\n14 \\nCHAPTER 3 | Modernize existing .NET apps to Cloud-Optimized a\", \"pplications \\n \\nBenefits of a Cloud-Optimized application \\nYou can get the following benefits by conv\", \"erting an existing application to a Cloud-Optimized \\napplication (without rearchitecting or coding):\", \" \\n\\u2022 \\nLower costs, because the managed infrastructure is handled by the cloud provider. \\nCloud-Optimi\", \"zed applications get the benefits of the cloud by using the cloud\\u2019s out-of-the-\\nbox elasticity, auto\", \"scale, and high availability. Benefits are related not only to the compute \\nfeatures (VMs and contai\", \"ners), but also depend on the resources in the cloud, like DBaaS, \\nCaaS, and any infrastructure an a\", \"pplication might needed. \\n\\u2022 \\nResilient application and infrastructure. When you migrate to the cloud\", \", you need to \\nembrace transient failures; failures will occur in the cloud. Also, cloud infrastruct\", \"ure and \\nhardware are \\u201creplaceable,\\u201d which increases opportunities for transient downtime. At the \\ns\", \"ame time, inner cloud capabilities and certain application development techniques that \\nimplement re\", \"siliency and automate recovery make it much easier to recover from unexpected \\nfailures in the cloud\", \". \\n\\u2022 \\nDeeper insights into application performance. Cloud monitoring tools like Azure \\nApplication I\", \"nsights provide visualization for health management, logging, and notifications. \\nAudit logs make ap\", \"plications easy to debug and audit, fundamental for a reliable cloud \\napplication. \\n\\u2022 \\nApplication p\", \"ortability, with agile deployments. Containers (either Linux or Windows \\ncontainers based on Docker \", \"Engine) offer the best solution to avoiding a cloud-locked \\napplication. By using containers, Docker\", \" hosts, and multi-cloud orchestrators, you can easily \\nmove from one environment or cloud to another\", \". Containers eliminate the friction that \\ntypically occurs in deployments to any environment (stage/\", \"test/production). \\nAll of these benefits ultimately provide key cost reductions for your end-to-end \", \"application lifecycle. \\nIn the following sections, these benefits are explained in more detail, and \", \"are linked to specific \\ntechnologies. \\nMicrosoft technologies in cloud-optimized \\napplications \\nThe \", \"following list describes the tools, technologies, and solutions that are recognized as requirements \", \"\\nfor Cloud-Optimized apps. You can adopt Cloud-Optimized elements selectively or gradually, \\ndependi\", \"ng on your priorities. \\n\\u2022 \\nCloud infrastructure: The infrastructure that provides the compute platfo\", \"rm, operating \\nsystem, network, and storage. Microsoft Azure is positioned at this level. \\n\\u2022 \\nRuntim\", \"e: This layer provides the environment for the application to run. If you are using \\ncontainers, thi\", \"s layer usually is based on Docker Engine, running either on Linux hosts or on \\nWindows hosts. (Wind\", \"ows Containers are supported beginning with Windows Server 2016. \\n \\n15 \\nCHAPTER 3 | Modernize existi\", \"ng .NET apps to Cloud-Optimized applications \\n \\nWindows Containers is the best choice for existing .\", \"NET Framework applications that run on \\nWindows.) \\n\\u2022 \\nManaged cloud: When you choose a managed cloud\", \" option, you can avoid the expense and \\ncomplexity of managing and supporting the underlying infrast\", \"ructure, VMs, OS patches, and \\nnetworking configuration. If you choose to migrate by using IaaS, you\", \" are responsible for all \\nof these tasks, and for associated costs. In a managed cloud option, you m\", \"anage only the \\napplications and services that you develop. The cloud service provider typically man\", \"ages \\neverything else. Examples of managed cloud services in Azure include Azure SQL Database, \\nAzur\", \"e Redis Cache, Azure Cosmos DB, Azure Storage, Azure Database for MySQL, Azure \\nDatabase for Postgre\", \"SQL, Azure Active Directory, and managed compute services like VM \\nscale sets, Azure App Service, an\", \"d Azure Kubernetes Service. \\n\\u2022 \\nApplication development: You can choose from many languages when you\", \" build \\napplications that run in containers. This guide focuses on .NET, but, you can develop \\nconta\", \"iner-based apps by using other languages, like Node.js, Python, Spring/Java, or Go. \\n\\u2022 \\nMonitoring, \", \"telemetry, logging, and auditing: The ability to monitor and audit applications \\nand containers that\", \" are running in the cloud is critical for any Cloud-Optimized application. \\nAzure Application Insigh\", \"ts and Microsoft Operations Management Suite are the main \\nMicrosoft tools that provide monitoring a\", \"nd auditing for Cloud-Optimized apps. \\n\\u2022 \\nProvisioning: Automation tools help you provision the infr\", \"astructure and deploy an \\napplication to multiple environments (production, testing, staging). You c\", \"an use tools like \\nChef and Puppet to manage an application\\u2019s configuration and environment. This la\", \"yer also \\ncan be implemented by using simpler and more direct approaches. For example, you can \\ndepl\", \"oy directly by using Azure command-line interface (Azure CLI) tooling, and then use the \\ncontinuous \", \"deployment and release management pipelines in Azure DevOps Services. \\n\\u2022 \\nApplication lifecycle: Azu\", \"re DevOps Services and other tools, like Jenkins, are built \\nautomation servers that help you implem\", \"ent CI/CD pipelines, including release management. \\nThe next sections of this chapter, and the relat\", \"ed walkthroughs, focus specifically on details about the \\nruntime layer (Windows Containers). The gu\", \"idance describes the ways you can deploy Windows \\nContainers on Windows Server 2016 (and later versi\", \"ons) VMs and Azure Container Instances. It also \\ncovers more advanced PaaS platforms like Azure App \", \"Service and orchestrator like Azure Kubernetes \\nService. \\nMonolithic applications can be Cloud-Optim\", \"ized \\nIt\\u2019s important to highlight that monolithic applications (applications that are not based on \\n\", \"microservices) can be Cloud-Optimized applications. You can build and operate monolithic \\napplicatio\", \"ns that take advantage of the cloud computing model by using a combination of containers, \\ncontinuou\", \"s delivery, and DevOps. If an existing monolithic application is right for your business goals, \\nyou\", \" can modernize it and make it Cloud-Optimized. \\nSimilarly, if monolithic applications can be Cloud-O\", \"ptimized applications, other, more complex \\narchitectures like N-Tier applications can also be moder\", \"nized as Cloud-Optimized applications. \\n \\n16 \\nCHAPTER 3 | Modernize existing .NET apps to Cloud-Opti\", \"mized applications \\n \\nWhat about Cloud-Native applications? \\nAlthough Cloud-Native applications are \", \"not the main focus of this guide, it\\u2019s helpful to have an \\nunderstanding of this modernization matur\", \"ity level, and to distinguish it from Cloud-Optimized \\napplications. \\nFigure 4-3 positions Cloud-Nat\", \"ive apps in the application modernization maturity levels: \\n \\nFigure 4-3. Positioning Cloud-Native a\", \"pplications \\nThe Cloud-Native modernization maturity level usually requires new development investme\", \"nts. \\nMoving to the Cloud-Native level typically is driven by business need to modernize application\", \"s as \\nmuch as possible to drastically improve scale in large applications by creating autonomous \\nsu\", \"bsystems (microservices) that can be deployed and scale independently from other areas of the \\nappli\", \"cation while lowering costs in the long term and increase evolution agility of those autonomous \\napp\", \"\\u2019s parts that provide significant compete advantages. \\nThe main pillars of Cloud-Native applications\", \" are based on microservices architecture approaches, \\nwhich can evolve with agility and scale to lim\", \"its that would be difficult to achieve in a monolithic \\narchitecture, deployed to either on-premises\", \" or cloud environment. \\nFigure 4-4 shows the main characteristics of the Cloud-Native model. \\n \\n17 \\n\", \"CHAPTER 3 | Modernize existing .NET apps to Cloud-Optimized applications \\n \\n \\nFigure 4-4. Cloud-Nati\", \"ve characteristics \\nIn addition, you can extend basic modern web apps and cloud-native apps by addin\", \"g other services, \\nlike artificial intelligence (AI), machine learning (ML), and IoT. You might use \", \"any of these services to \\nextend any of the possible Cloud-Optimized approaches. \\nThe fundamental di\", \"fference in applications at the Cloud-Native level is in the application architecture. \\nCloud-native\", \" applications are, by definition, apps that are based on microservices. Cloud-native apps \\nrequire s\", \"pecial architectures, technologies, and platforms, compared to a monolithic web application \\nor trad\", \"itional N-Tier application. \\nCloud-native applications details \\nCloud-Native is a more advanced or m\", \"ature state for large and mission-critical applications. Cloud-\\nNative applications usually require \", \"architecture and design that are created from scratch instead of by \\nmodernizing existing applicatio\", \"ns. The key difference between a Cloud-Native application and a \\nsimpler Cloud-Optimized web app is \", \"the recommendation to use microservices architectures in a \\ncloud-native approach. Cloud-Optimized a\", \"pps can also be monolithic web apps or N-Tier apps. \\nThe Twelve-Factor App (a collection of patterns\", \" that are closely related to microservices approaches) \\nis also considered a requirement for cloud-n\", \"ative application architectures. \\nThe Cloud Native Computing Foundation (CNCF) is a primary promoter\", \" of cloud-native principles. \\nMicrosoft is a member of the CNCF. \\nFor detailed guidance on how to de\", \"sign and develop cloud-native applications, read the following \\nfree e-books: \\n \\n18 \\nCHAPTER 3 | Mod\", \"ernize existing .NET apps to Cloud-Optimized applications \\n \\n\\u2022 \\nArchitecting Cloud-Native .NET Appli\", \"cations for Azure \\n\\u2022 \\n.NET Microservices: Architecture for containerized .NET applications. \\nThe mos\", \"t important factor to consider if you migrate a full application to the cloud-native model is \\nthat \", \"you must rearchitect to a microservices-based architecture. This approach clearly requires a \\nsignif\", \"icant investment in development because of the large refactoring process involved. This option \\nusua\", \"lly is chosen for mission-critical applications that need new levels of scalability and long-term \\na\", \"gility. But, you could start moving toward cloud-native by adding microservices for just a few new \\n\", \"scenarios, and eventually refactor the application fully as microservices. This step is an increment\", \"al \\napproach that is the best option for some scenarios. \\nWhat about microservices? \\nUnderstanding m\", \"icroservices and how they work is important when you are considering cloud-native \\napplications for \", \"your organization. \\nThe microservices architecture is an advanced approach that you can use for appl\", \"ications that are \\ncreated from scratch or when you evolve existing applications toward cloud-native\", \" applications. You \\ncan start by adding a few microservices to existing applications to learn about \", \"the new microservices \\nparadigms. But clearly, you need to architect and code, especially for this t\", \"ype of architectural \\napproach. \\nHowever, microservices are not mandatory for any new or modern appl\", \"ication. Microservices are not a \\n\\u201cmagic bullet,\\u201d and they aren\\u2019t the single, best way to create eve\", \"ry application. How and when you use \\nmicroservices depends on the type of application that you need\", \" to build. \\nThe microservices architecture is becoming the preferred approach for distributed and la\", \"rge or \\ncomplex mission-critical applications that are based on multiple, independent subsystems in \", \"the form \\nof autonomous services. In a microservices-based architecture, an application is built as \", \"a collection of \\nservices that can be independently developed, tested, versioned, deployed, and scal\", \"ed. This approach \\ncan include any related, autonomous database per microservice. \\nFor a detailed lo\", \"ok at a microservices architecture that you can implement by using .NET, see the \\ndownloadable PDF e\", \"-book .NET microservices: Architecture for containerized .NET applications. The \\nguide also is avail\", \"able online. \\nBut even in scenarios in which microservices offer powerful capabilities-independent d\", \"eployment, \\nstrong subsystem boundaries, and technology diversity-they also raise many new challenge\", \"s. The \\nchallenges are related to distributed application development, such as fragmented and indepe\", \"ndent \\ndata models; achieving resilient communication between microservices; the need for eventual \\n\", \"consistency; and operational complexity. Microservices introduce a higher level of complexity \\ncompa\", \"red to traditional monolithic applications. \\nBecause of the complexity of a microservices architectu\", \"re, only specific scenarios and certain \\napplication types are suitable for microservice-based appli\", \"cations. These include large and complex \\napplications that have multiple, evolving subsystems. In t\", \"hese cases, it\\u2019s worth investing in a more \\ncomplex software architecture, for increased long-term a\", \"gility and more efficient application \\nmaintenance. But for less complex scenarios, it might be bett\", \"er to continue with a monolithic \\napplication approach or simpler N-Tier approaches. \\n \\n19 \\nCHAPTER \", \"3 | Modernize existing .NET apps to Cloud-Optimized applications \\n \\nAs a final note, even at the ris\", \"k of being repetitive about this concept, you shouldn\\u2019t look at using \\nmicroservices in your applica\", \"tions as \\u201call-in or nothing at all.\\u201d You can extend and evolve existing \\nmonolithic applications by \", \"adding new, small scenarios based on microservices. You don\\u2019t need to \\nstart from scratch to start w\", \"orking with a microservices architecture approach. In fact, we recommend \\nthat you evolve from using\", \" an existing monolithic or N-Tier application by adding new scenarios. \\nEventually, you can break do\", \"wn the application into autonomous components or microservices. You \\ncan start evolving your monolit\", \"hic applications in a microservices direction, step by step. \\nIn any case, the rest of this present \", \"guidance focuses most of all on \\u201cno microservices-based apps\\u201d \\nbecause this guidance is mainly targe\", \"ting the modernization of existing apps that usually have \\nmonolithic or N-Tier architectures. \\nDepl\", \"oy existing .NET apps as Windows containers \\nDeployments that are based on Windows Containers are ap\", \"plicable to Cloud-Optimized applications \\nand Cloud-Native applications. \\nHowever, in this guide and\", \" especially in the following sections, it mostly focuses on using Windows \\nContainers for Cloud-Opti\", \"mized applications where you don\\u2019t need to rearchitect your application. \\nWhat are containers? (Linu\", \"x or Windows) \\nContainers are a way to wrap up an application into its own isolated package. In its \", \"container, the \\napplication is not affected by applications or processes that exist outside of the c\", \"ontainer. Everything \\nthe application depends on to run successfully as a process is inside the cont\", \"ainer. Wherever the \\ncontainer might move, the requirements of the application will always be met, i\", \"n terms of direct \\ndependencies, because it is bundled with everything that it needs to run (library\", \" dependencies, \\nruntimes, and so on). \\nThe main characteristic of a container is that it makes the e\", \"nvironment the same across different \\ndeployments because the container itself comes with all the de\", \"pendencies it needs. You can debug \\nthe application on your machine, and then deploy it to another m\", \"achine, with the same environment \\nguaranteed. \\nA container is an instance of a container image. A c\", \"ontainer image is a way to package an app or \\nservice (like a snapshot), and then deploy it in a rel\", \"iable and reproducible way. You could say that \\nDocker is not only a technology-it\\u2019s also a philosop\", \"hy and a process. \\nAs containers daily become more common, they are becoming an industry-wide \\u201cunit \", \"of deployment.\\u201d \\nBenefits of containers (Docker Engine on Linux or Windows) \\nBuilding applications b\", \"y using containers-which also might be defined as lightweight building blocks-\\noffers a significant \", \"increase in agility for building, shipping, and running any application, across any \\ninfrastructure.\", \" \\nWith containers, you can take any app from development to production with little or no code change\", \", \\nthanks to Docker integration across Microsoft developer tools, operating systems, and the cloud. \", \"\\n \\n20 \\nCHAPTER 3 | Modernize existing .NET apps to Cloud-Optimized applications \\n \\nWhen you deploy t\", \"o plain VMs, you probably already have a method in place for deploying ASP.NET \\napps to your VMs. It\", \"\\u2019s likely, though, that your method involves multiple manual steps or complex \\nautomated processes b\", \"y using a deployment tool like Puppet, or a similar tool. You might need to \\nperform tasks like modi\", \"fying configuration items, copying application content between servers, and \\nrunning interactive set\", \"up programs based on .msi setups, followed by testing. All those steps in the \\ndeployment add time a\", \"nd risk to deployments. You will get failures whenever a dependency is not \\npresent in the target en\", \"vironment. \\nIn Windows Containers, the process of packaging applications is fully automated. Windows\", \" Containers \\nis based on the Docker platform, which offers automatic updates and rollbacks for conta\", \"iner \\ndeployments. The main improvement you get from using the Docker engine is that you create imag\", \"es, \\nwhich are like snapshots of your application, with all its dependencies. The images are Docker \", \"images \\n(a Windows container image, in this case). The images run ASP.NET apps in containers, withou\", \"t going \\nback to source code. The container snapshot becomes the unit of deployment. \\nMany organizat\", \"ions are containerizing existing monolithic applications for the following reasons: \\n\\u2022 \\nRelease agil\", \"ity through improved deployment. Containers offer a consistent deployment \\ncontract between developm\", \"ent and operations. When you use containers, you won\\u2019t hear \\ndevelopers say, \\u201cIt works on my machine\", \", why not in production?\\u201d They can say, \\u201cIt runs as a \\ncontainer, so it will run in production.\\u201d The\", \" packaged application, with all its dependencies, \\ncan be executed in any supported container-based \", \"environment. It will run the way it was \\nintended to run in all deployment targets (dev, QA, staging\", \", production). Containers eliminate \\nmost frictions when they move from one stage to the next, which\", \" greatly improves \\ndeployment, and you can ship faster. \\n\\u2022 \\nCost reductions. Containers lead to lowe\", \"r costs, either by the consolidation and removal of \\nexisting hardware, or from running applications\", \" at a higher density per unit of hardware. \\n\\u2022 \\nPortability. Containers are modular and portable. Doc\", \"ker containers are supported on any \\nserver operating system (Linux and Windows), in any major publi\", \"c cloud (Microsoft Azure, \\nAmazon AWS, Google, IBM), and in on-premises and private or hybrid cloud \", \"environments. \\n\\u2022 \\nControl. Containers offer a flexible and secure environment that\\u2019s controlled at t\", \"he container \\nlevel. A container can be secured, isolated, and even limited by setting execution con\", \"straint \\npolicies on the container. As detailed in the section about Windows Containers, Windows \\nSe\", \"rver 2016 and Hyper-V containers offer additional enterprise support options. \\nSignificant improveme\", \"nts in agility, portability, and control ultimately lead to significant cost \\nreductions when you us\", \"e containers to develop and maintain applications. \\nWhat is Docker? \\nDocker is an open-source projec\", \"t that automates the deployment of applications as portable, self-\\nsufficient containers that can ru\", \"n in the cloud or on-premises. Docker is also a company that \\npromotes and evolves this technology. \", \"The company works in collaboration with cloud, Linux, and \\nWindows vendors, including Microsoft. \\n \\n\", \"21 \\nCHAPTER 3 | Modernize existing .NET apps to Cloud-Optimized applications \\n \\n \\nFigure 4-6. Docker\", \" deploys containers at all layers of the hybrid cloud \\nTo someone familiar with virtual machines, co\", \"ntainers might appear to be remarkably similar. A \\ncontainer runs an operating system, has a file sy\", \"stem, and can be accessed over a network, just like a \\nphysical or virtual computer system. However,\", \" the technology and concepts behind containers are \\nvastly different from virtual machines. From a d\", \"eveloper point of view, a container must be treated \\nmore like a single process. In fact, a containe\", \"r has a single entry point for one process. \\nDocker containers (for simplicity, containers) can run \", \"natively on Linux and Windows. When running \\nregular containers, Windows containers can run only on \", \"Windows hosts (a host server or a VM), and \\nLinux containers can run only on Linux hosts. However, i\", \"n recent versions of Windows Server and \\nHyper-V containers, a Linux container can also run natively\", \" on Windows Server by using the Hyper-V \\nisolation technology that currently is available only in Wi\", \"ndows Server Containers. \\nIn the near future, mixed environments that have both Linux and Windows co\", \"ntainers will be possible \\nand even common. \\nBenefits of Windows Containers for your existing .NET a\", \"pplications \\nThe benefits of using Windows Containers are fundamentally the same benefits you get fr\", \"om \\ncontainers in general. Using Windows Containers is about greatly improving agility, portability,\", \" and \\ncontrol. \\nExisting .NET applications refer to those applications that were created using the .\", \"NET Framework. For \\nexample, they might be traditional ASP.NET web applications-they don\\u2019t use .NET \", \"Core or .NET 5+, \\nwhich is newer and runs cross-platform on Linux, Windows, and MacOS. \\nThe main dep\", \"endency in the .NET Framework is Windows. It also has secondary dependencies, like IIS, \\nand System.\", \"Web in traditional ASP.NET. \\nA .NET Framework application must run on Windows, period. If you want t\", \"o containerize existing .NET \\nFramework applications and you can\\u2019t or don\\u2019t want to invest in a migr\", \"ation to .NET Core or later(\\u201cIf it \\n \\n22 \\nCHAPTER 3 | Modernize existing .NET apps to Cloud-Optimize\", \"d applications \\n \\nworks properly, don\\u2019t migrate it\\u201d), the only choice you have for containers is to \", \"use Windows \\nContainers. \\nSo, one of the main benefits of Windows Containers is that they offer you \", \"a way to modernize your \\nexisting .NET Framework applications that are running on Windows-through co\", \"ntainerization. \\nUltimately, Windows Containers gets you the benefits that you are looking for by us\", \"ing containers-\\nagility, portability, and better control. \\nChoose an OS to target with .NET-based co\", \"ntainers \\nGiven the diversity of operating systems that are supported by Docker, as well as the diff\", \"erences \\nbetween .NET Framework and .NET Core, you should target a specific OS and specific versions\", \" based \\non the framework you are using. \\nFor Windows, you can use Windows Server Core or Windows Nan\", \"o Server. These Windows versions \\nprovide different characteristics (like IIS versus a self-hosted w\", \"eb server like Kestrel) that might be \\nneeded by .NET Framework or .NET applications. \\nFor Linux, mu\", \"ltiple distros are available and supported in official .NET Docker images (like Debian). \\nFigure 4-7\", \" shows OS versions that you can target, depending on the app\\u2019s version of the .NET \\nFramework. \\n \\nFi\", \"gure 4-7. Operating systems to target based on .NET Framework version \\nIn migration scenarios for ex\", \"isting or legacy applications that are based on .NET Framework \\napplications, the main dependencies \", \"are on Windows and IIS. Your only option is to use Docker \\nimages based on Windows Server Core and t\", \"he .NET Framework. \\nWhen you add the image name to your Dockerfile file, you can select the operatin\", \"g system and \\nversion by using a tag, as in the following examples for .NET Framework-based Windows \", \"container \\nimages: \\n \\n23 \\nCHAPTER 3 | Modernize existing .NET apps to Cloud-Optimized applications \\n\", \" \\nTag \\nSystem and version \\nmcr.microsoft.com/dotnet/framework/runti\\nme:4.x-windowsservercore-20H2 \\n.\", \"NET Framework 4.x on Windows Server Core \\nmcr.microsoft.com/dotnet/framework/aspne\\nt:4.x-windowsserv\", \"ercore-20H2 \\n.NET Framework 4.x with additional ASP.NET \\ncustomization, on Windows Server Core \\nFor \", \".NET (cross-platform for Linux and Windows), the tags would look like the following: \\nTag \\nSystem an\", \"d version \\nmcr.microsoft.com/dotnet/runtime:7.0 \\n.NET runtime-only on Linux \\nmcr.microsoft.com/dotne\", \"t/runtime:7.0-\\nnanoserver-ltsc2022 \\n.NET runtime-only on Windows Nano Server \\nMulti-arch images \\nSin\", \"ce 2017, Docker has had a feature called multi-arch images. .NET Docker images can use multi-arch \\nt\", \"ags. Your Dockerfile files no longer need to define the operating system that you are targeting. The\", \" \\nmulti-arch feature allows a single tag to be used across multiple machine configurations. For inst\", \"ance, \\nwith multi-arch, you can use one common tag: mcr.microsoft.com/dotnet/runtime:7.0. If you pul\", \"l \\nthat tag from a Linux container environment, you get the Debian-based image. If you pull that tag\", \" \\nfrom a Windows container environment, you get the Nano Server-based image. \\nFor .NET Framework ima\", \"ges, because the traditional .NET Framework supports only Windows, you \\ncannot use the multi-arch fe\", \"ature. \\nWindows container types \\nLike Linux containers, Windows Server containers are managed by usi\", \"ng Docker Engine. Unlike Linux \\ncontainers, Windows containers include two different container types\", \", or run times-Windows Server \\ncontainers and Hyper-V isolation. \\nWindows Server containers: Provide\", \"s application isolation through process and namespace isolation \\ntechnology. A Windows Server contai\", \"ner shares a kernel with the container host and all containers \\nthat are running on the host. These \", \"containers do not provide a hostile security boundary and should \\nnot be used to isolate untrusted c\", \"ode. Because of the shared kernel space, these containers require \\nthe same kernel version and confi\", \"guration. \\nHyper-V isolation: Expands on the isolation provided by Windows Server Containers by runn\", \"ing each \\ncontainer on a highly optimized VM. In this configuration, the kernel of the container hos\", \"t is not \\nshared with other containers on the same host. These containers are designed for hostile m\", \"ultitenant \\nhosting, with the same security assurances of a VM. Because these containers don\\u2019t share\", \" the kernel \\nwith the host or other containers on the host, they can run kernels with different vers\", \"ions and \\nconfigurations (with supported versions). For example, all Windows containers on Windows 1\", \"0 use \\nHyper-V isolation to utilize the Windows Server kernel version and configuration. \\n \\n24 \\nCHAP\", \"TER 3 | Modernize existing .NET apps to Cloud-Optimized applications \\n \\nRunning a container on Windo\", \"ws with or without Hyper-V isolation is a run-time decision. You might \\nchoose to create the contain\", \"er with Hyper-V isolation initially, and at run time, choose to run it as a \\nWindows Server containe\", \"r instead. \\nAdditional resources \\n\\u2022 \\nWindows Containers documentation \\n  \\nhttps://learn.microsoft.co\", \"m/virtualization/windowscontainers/ \\n\\u2022 \\nWindows Containers fundamentals \\n  \\nhttps://learn.microsoft.\", \"com/virtualization/windowscontainers/about/ \\n\\u2022 \\nInfographic: Microsoft and containers \\n  \\nhttps://in\", \"fo.microsoft.com/rs/157-GQE-382/images/Container%20infographic%201.4.17.pdf \\nThe container ecosystem\", \" in Azure \\nIn previous sections, it\\u2019s been explained what the benefits of Docker containers are as w\", \"ell as details \\non the specific container images for .NET applications. All that generic information\", \" is fundamental in \\norder to develop or containerize an application. However, when thinking about th\", \"e production \\ndeployment environment or even QA and Dev/Test environments, Microsoft Azure provides \", \"an open \\nand broad variety of choices, a full container ecosystem in the cloud (shown in the diagram\", \" below). \\nDepending on your specific application\\u2019s needs, you should choose one or another Azure pro\", \"duct. \\n \\n25 \\nCHAPTER 3 | Modernize existing .NET apps to Cloud-Optimized applications \\n \\n \\nFigure 4-\", \"7.5. The container ecosystem in Azure \\nFrom the container ecosystem in Azure, the following products\", \" supporting containers that are \\nconsidered infrastructure: \\n\\u2022 \\nAzure Container Instances (ACI) \\n\\u2022 \\n\", \"Azure Virtual Machines (With container\\u2019s support) \\n\\u2022 \\nAzure Virtual Machine Scale Sets (With contain\", \"er\\u2019s support) \\nFrom those three, ACI provides a great benefit, which is the fact that you don\\u2019t need\", \" to maintain the \\nunderlying OS, no need for you to upgrade/patch, etc. but ACI still is positioned \", \"in the infrastructure \\nlevel, as better explained in the upcoming sections of this book. \\nThe produc\", \"ts in Azure supporting containers that are at the same time positioned more in the PaaS \\n(Platform a\", \"s a Service) level are: \\n\\u2022 \\nAzure App Service \\n\\u2022 \\nAzure Kubernetes Service (AKS and ACS) \\n\\u2022 \\nAzure B\", \"atch \\nThen, Azure Container Registry is a high scalable container registry hosted in Azure that you \", \"can use \\nfrom all the previous products when registering and deploying your custom container images.\", \" \\nIn addition, from your containers, you can consume other managed services in Azure like Azure SQL \", \"\\nDatabase, Azure Redis cache, Azure Cosmos DB, etc. plus there are third-party solutions/platforms \\n\", \" \\n26 \\nCHAPTER 3 | Modernize existing .NET apps to Cloud-Optimized applications \\n \\navailable in Azure\", \" Marketplace like Cloud Foundry and OpenShift where you can also use containers \\nwithin Azure. \\nIn t\", \"he next sections, you can explore Microsoft\\u2019s recommendations on when to use each of those \\nAzure pr\", \"oducts and solutions specifically when targeting Windows Containers. \\nWhen not to deploy to Windows \", \"Containers \\nSome Windows technologies are not supported by Windows Containers. In those cases, you s\", \"till need \\nto migrate to the standards VMs, usually with just Windows and IIS. \\nFor more information\", \", see the list of Applications not supported by Windows containers. \\nAdditional resources \\n\\u2022 \\nVirtua\", \"l machines and containers in Azure \\n  \\nhttps://azure.microsoft.com/overview/containers/ \\nWhen to dep\", \"loy Windows Containers in your on-\\npremises IaaS VM infrastructure \\n\\u2022 \\nYour organization might not b\", \"e ready to move to the cloud, or it might not be able to move \\nto the cloud for a business reason. B\", \"ut, you can still get the benefits of using Windows \\nContainers in your own datacenters. \\n\\u2022 \\nYou mig\", \"ht have other artifacts that are being used on-premises, and which might slow you \\ndown when you try\", \" to move to the cloud. For example, security or authentication \\ndependencies with on-premises Window\", \"s Server Active Directory, or any other on-premises \\nasset. \\n\\u2022 \\nIf you start using Windows Container\", \"s today, you can make a phased migration to the cloud \\ntomorrow from a much better position. Windows\", \" Containers is becoming a unit of \\ndeployment for any cloud, with no lock-in. \\nWhen to deploy Window\", \"s Containers to Azure VMs \\n(IaaS cloud) \\nIf your organization is using Azure VMs, even if you are al\", \"so using Windows Containers, you are still \\ndealing with IaaS. That means that dealing with infrastr\", \"ucture operations, VM OS patches, and \\ninfrastructure complexity for highly scalable applications wh\", \"en you need to deploy to multiple VMs in \\na load-balanced infrastructure. The main scenarios for usi\", \"ng Windows Containers in an Azure VM are: \\n\\u2022 \\nDev/test environment: A VM in the cloud is perfect for\", \" development and testing in the \\ncloud. You can rapidly create or stop the environment depending on \", \"your needs. \\n \\n27 \\nCHAPTER 3 | Modernize existing .NET apps to Cloud-Optimized applications \\n \\n\\u2022 \\nSm\", \"all and medium scalability needs: In scenarios where you might need just a couple of \\nVMs for your p\", \"roduction environment, managing a few VMs might be affordable until you \\ncan move to more advanced P\", \"aaS environments, like orchestrators. \\n\\u2022 \\nProduction environment with existing deployment tools: You\", \" might be moving from an \\non-premises environment in which you have invested in tools to make comple\", \"x deployments \\nto VMs or bare-metal servers (like Puppet or similar tools). To move to the cloud wit\", \"h minimal \\nchanges to production environment deployment procedures, you might continue to use \\nthose\", \" tools to deploy to Azure VMs. However, you\\u2019ll want to use Windows Containers as the \\nunit of deploy\", \"ment to improve the deployment experience. \\nWhen to deploy Windows Containers to Azure \\nContainer In\", \"stances (ACI) \\nThe main value proposition of Azure Container Instances is that you can right away de\", \"ploy containers \\nto it and you don\\u2019t need to maintain that environment, you don\\u2019t need to upgrade/pa\", \"tch the \\nunderlying operating system or VMs, all that is transparent and you just deploy containers \", \"into a \\nready-to-use environment. \\nThe reasons and scenarios when you would want to use ACI are simi\", \"lar to the main scenarios when \\nyou use Azure VMs with containers, so basically, the main scenarios \", \"for using Azure Container \\nInstances are: \\n\\u2022 \\nDev/Test scenarios \\n\\u2022 \\nTask automation \\n\\u2022 \\nCI/CD agent\", \"s \\n\\u2022 \\nSmall/scale batch processing \\n\\u2022 \\nSimple web apps \\nThe simple web apps scenario is a fair scena\", \"rio for ACI but take into account that since in ACI you can \\nonly have a single container instance p\", \"er container image, you won\\u2019t have high availability and only \\nhave limited scalability. \\nHowever, e\", \"ven when ACI is considered infrastructure because it just provides single container \\ninstances, ther\", \"e is a huge benefit compared to regular Azure VMs with Windows Server. With ACI, you \\njust deploy th\", \"e containers into a self-maintained environment and you just pay for those containers. \\nYou don\\u2019t ne\", \"ed to maintain/update/patch VMs, so it is a much better platform for most scenarios \\nwhere you might\", \" be using VMs with containers. Using ACI is straight forward, you just deploy a \\ncontainer, there\\u2019s \", \"no need to create a VM environment you just deploy containers. \\nThe main benefits of Azure Container\", \" Instances (ACI) are: \\n\\u2022 \\nRun containers without managing servers \\n\\u2022 \\nIncrease agility with containe\", \"rs on demand \\n\\u2022 \\nDeploy containers to the cloud with unprecedented simplicity and speed\\u2014with a singl\", \"e \\ncommand. \\n \\n28 \\nCHAPTER 3 | Modernize existing .NET apps to Cloud-Optimized applications \\n \\n\\u2022 \\nSe\", \"cure applications with hypervisor isolation \\nIn short, with ACI you can develop apps fast without ma\", \"naging virtual machines or having to learn \\nnew tools. It\\u2019s just your application, in a container, r\", \"unning in the cloud. \\nWhen to deploy Windows Containers to Azure \\nKubernetes Service (AKS) \\nAzure Ku\", \"bernetes Service (AKS) simplifies deploying a managed Kubernetes cluster in Azure by \\noffloading the\", \" operational overhead to Azure. You get an open solution that offers portability both for \\nyour cont\", \"ainers and for your application configuration. You select the size, the number of hosts, and \\nthe or\", \"chestrator tools. Azure Kubernetes Service handles the infrastructure for you. It also supports \\nWin\", \"dows Server containers alongside Linux containers. For more details on Windows OS support and \\nthe f\", \"eature differences between Windows and Linux, read the FAQ. \\nThe main benefits of Azure Kubernetes S\", \"ervice (AKS) are: \\n\\u2022 \\nIdentity and security management \\n\\u2022 \\nIntegrated logging and monitoring \\n\\u2022 \\nClu\", \"ster node and pod scaling. \\n\\u2022 \\nIngress with HTTP application routing \\n\\u2022 \\nAKS supports the Docker ima\", \"ge format. For private storage of your Docker images, you can \\nintegrate AKS with Azure Container Re\", \"gistry (ACR). \\nIf you are already working with open-source orchestrators like Kubernetes, Docker Swa\", \"rm, or DC/OS, \\nyou don\\u2019t need to change your existing management practices to move container workloa\", \"ds to the \\ncloud. Use the application management tools that you\\u2019re already familiar with and connect\", \" via the \\nstandard API endpoints for the orchestrator of your choice. \\nChoosing Azure compute platfo\", \"rms for container-\\nbased applications \\nAs you have noticed after reading the previous sections, Azur\", \"e is an open cloud that offers multiple \\nchoices. You can use the best fit for your needs, however, \", \"it also surfaces questions about what \\nproduct/technology you should use for your containerized appl\", \"ications. \\nAs a by-default recommendation, the following is the main criteria recommended in this gu\", \"idance: \\n\\u2022 \\nSingle monolithic app: Choose Azure App Service \\n\\u2022 \\nN-Tier app: Choose orchestrators suc\", \"h as Azure Kubernetes Service (AKS) or App Service if \\nyou have a single or a few back-end services \", \"\\n\\u2022 \\nMicroservices: Choose AKS or Azure Web Apps for Containers \\n\\u2022 \\nServerless functions & event hand\", \"lers: Choose Azure Functions \\n\\u2022 \\nLarge-scale Batch: Choose Azure Batch \\n \\n29 \\nCHAPTER 3 | Modernize \", \"existing .NET apps to Cloud-Optimized applications \\n \\nHowever, this recommendation should be taken w\", \"ith a pinch of salt, as the product\\u2019s selection will \\ndepend on your specific application\\u2019s needs an\", \"d characteristics. Not all applications are the same even \\nwhen initially they might look similar ty\", \"pes. \\nAfter a deeper analysis of the application\\u2019s needs, the product selected could be different. B\", \"ut, as a \\nstarting point, it is good to have initial guidance from where you can start evaluating an\", \"d testing \\nbased on certain priority. \\nAdditional resources \\n\\u2022 \\nChoose an Azure compute service for \", \"your application \\n  \\nhttps://learn.microsoft.com/azure/architecture/guide/technology-choices/compute\", \"-decision-\\ntree \\nBuild resilient services ready for the cloud: Embrace \\ntransient failures in the cl\", \"oud \\nResiliency is the ability to recover from failures and continue to function. Resiliency is not \", \"about \\navoiding failures, but accepting the fact that failures will occur, and then responding to th\", \"em in a way \\nthat avoids downtime or data loss. The goal of resiliency is to return the application \", \"to a fully \\nfunctioning state after a failure. \\nYour application is ready for the cloud when, at a m\", \"inimum, it implements a software-based model of \\nresiliency, rather than a hardware-based model. You\", \"r cloud application must embrace the partial \\nfailures that will certainly occur. Design or partiall\", \"y refactor your application to achieve resiliency with \\nexpected partial failures. It should be desi\", \"gned to cope with partial failures, like transient network \\noutages and nodes, or VMs crashing in th\", \"e cloud. Even containers being moved to a different node \\nwithin an orchestrator cluster can cause i\", \"ntermittent short failures within the application. \\nHandling partial failure \\nIn a cloud-based appli\", \"cation, there\\u2019s an ever-present risk of partial failure. For instance, a single \\nwebsite instance or\", \" a container might fail, or it might be unavailable or unresponsive for a short time. \\nOr, a single \", \"VM or server might crash. \\nBecause clients and services are separate processes, a service might not \", \"be able to respond in a timely \\nmanner to a client\\u2019s request. The service might be overloaded and re\", \"spond slowly to requests, or it \\nmight not be accessible for a short time because of network issues.\", \" \\nFor example, consider a monolithic .NET application that accesses a database in Azure SQL Database\", \". \\nIf the Azure SQL database or any other third-party service is unresponsive for a brief time (an A\", \"zure \\nSQL database might be moved to a different node or server, and be unresponsive for a few secon\", \"ds), \\nwhen the user tries to do any action, the application might crash and show an exception at the\", \" same \\nmoment. \\n \\n30 \\nCHAPTER 3 | Modernize existing .NET apps to Cloud-Optimized applications \\n \\nA \", \"similar scenario might occur in an app that consumes HTTP services. The network or the service \\nitse\", \"lf might not be available in the cloud during a short, transient failure. \\nA resilient application l\", \"ike the one shown in Figure 4-9 should implement techniques like \\u201cretries with \\nexponential backoff\\u201d\", \" to give the application an opportunity to handle transient failures in resources. \\nYou also should \", \"use \\u201ccircuit breakers\\u201d in your applications. A circuit breaker stops an application from \\ntrying to \", \"access a resource when it\\u2019s actually a long-term failure. By using a circuit breaker, the \\napplicati\", \"on avoids provoking a denial of service to itself. \\n \\nFigure 4-9. Partial failures handled by retrie\", \"s with exponential backoff \\nYou can use these techniques both in HTTP resources and in database reso\", \"urces. In Figure 4-9, the \\napplication is based on a 3-tier architecture, so you need these techniqu\", \"es at the services level (HTTP) \\nand at the data tier level (TCP). In a monolithic application that \", \"uses only a single app tier in addition \\nto the database (no additional services or microservices), \", \"handling transient failures at the database \\nconnection level might be enough. In that scenario, jus\", \"t a particular configuration of the database \\nconnection is required. \\nWhen implementing resilient c\", \"ommunications that access the database, depending on the version of \\n.NET you are using, it can be s\", \"traightforward (for example, with Entity Framework 6 or later. It\\u2019s just a \\nmatter of configuring th\", \"e database connection). Or, you might need to use additional libraries like the \\nTransient Fault Han\", \"dling Application Block (for earlier versions of .NET), or even implement your own \\nlibrary. \\nWhen i\", \"mplementing HTTP retries and circuit breakers, the recommendation for .NET is to use the \\nPolly libr\", \"ary, which targets .NET Standard 1.1 (coverage: .NET Core 1.0, Mono, Xamarin, UWP, WP8.1+) \\nand .NET\", \" Standard 2.0+ (coverage: .NET Core 2.0+, .NET Core 3.0 and later, Mono, Xamarin and UWP \\ntargets). \", \"The nuget package also includes direct targets for .NET Framework 4.6.1 and 4.7.2. \\nTo learn how to \", \"implement strategies for handling partial failures in the cloud, see the following \\nreferences. \\nAdd\", \"itional resources \\n\\u2022 \\nImplementing resilient communication to handle partial failure \\n \\n31 \\nCHAPTER \", \"3 | Modernize existing .NET apps to Cloud-Optimized applications \\n \\n  \\nhttps://learn.microsoft.com/d\", \"otnet/architecture/microservices/implement-resilient-\\napplications/partial-failure-strategies \\n\\u2022 \\nEn\", \"tity Framework connection resiliency and retry logic (version 6 and later) \\n  \\nhttps://learn.microso\", \"ft.com/ef/ef6/fundamentals/connection-resiliency/retry-logic \\n\\u2022 \\nThe Transient Fault Handling Applic\", \"ation Block \\n\\u2022 \\nhttps://learn.microsoft.com/previous-versions/msp-n-p/hh680934(v=pandp.50) \\n\\u2022 \\nPolly\", \" library for resilient HTTP communication \\n  \\nhttps://github.com/App-vNext/Polly \\nModernize your app\", \"s with monitoring and telemetry \\nWhen you run an application in production, it\\u2019s critical that you h\", \"ave insights about how your \\napplication is performing. Is it performing at a high level? Are users \", \"getting errors, or is the application \\nstable and reliable? You need rich performance monitoring, po\", \"werful alerting, and dashboards to help \\nensure that your application is available and performing as\", \" expected. You also need to be able to see \\nquickly if there\\u2019s a problem, determine how many custome\", \"rs are affected, and perform a root-cause \\nanalysis to find and fix the issue. \\nMonitor your applica\", \"tion with Application Insights \\nApplication Insights is an extensible Application Performance Manage\", \"ment (APM) service for web \\ndevelopers who work on multiple platforms. Use it to monitor your live w\", \"eb application. Application \\nInsights automatically detects performance anomalies. It includes power\", \"ful analytics tools to help you \\ndiagnose issues, and to help you understand what users actually do \", \"with your app. Application \\nInsights is designed to help you continuously improve performance and us\", \"ability. It works for apps on \\na wide variety of platforms, including .NET, Node.js, and J2EE, wheth\", \"er hosted on-premises or in the \\ncloud. Application Insights integrates with your DevOps processes, \", \"and has connection points to \\nvarious development tools. \\nFigure 4-10 shows an example of how Applic\", \"ation Insights monitors your application and how it \\nsurfaces those insights to a dashboard. \\n \\n32 \\n\", \"CHAPTER 3 | Modernize existing .NET apps to Cloud-Optimized applications \\n \\n \\nFigure 4-10. Applicati\", \"on Insights monitoring dashboard \\nMonitor your Docker infrastructure with Log Analytics and its \\nCon\", \"tainer Monitoring solution \\nAzure Log Analytics is part of the Microsoft Azure overall monitoring so\", \"lution. It\\u2019s also a service in \\nOperations Management Suite (OMS). Log Analytics monitors cloud and \", \"on-premises environments \\n(OMS for on-premises) to help maintain availability and performance. It co\", \"llects data generated by \\nresources in your cloud and on-premises environments and from other monito\", \"ring tools to provide \\nanalysis across multiple sources. \\nIn relation to Azure infrastructure logs, \", \"Log Analytics, as an Azure service, ingests log and metric data \\nfrom other Azure services (via Azur\", \"e Monitor), Azure VMs, Docker containers, and on-premises or \\nother cloud infrastructures. Log Analy\", \"tics offers flexible log search and out-of-the box analytics on top \\nof this data. It provides rich \", \"tools that you can use to analyze data across sources, it allows complex \\nqueries across all logs, a\", \"nd it can proactively alert based on specified conditions. You can even collect \\ncustom data in the \", \"central Log Analytics repository, where you can query and visualize it. You can also \\ntake advantage\", \" of the Log Analytics built-in solutions to immediately gain insights into the security \\nand functio\", \"nality of your infrastructure. \\nYou can access Log Analytics through the OMS portal or the Azure por\", \"tal, which run in any browser, \\nand provide you with access to configuration settings and multiple t\", \"ools to analyze and act on \\ncollected data. \\nThe Container Monitoring solution in Log Analytics help\", \"s you view and manage your Docker and \\nWindows Container hosts in a single location. The solution sh\", \"ows which containers are running, what \\n \\n33 \\nCHAPTER 3 | Modernize existing .NET apps to Cloud-Opti\", \"mized applications \\n \\ncontainer image they\\u2019re running, and where containers are running. You can vie\", \"w detailed audit \\ninformation, including commands that are being used with containers. You can also \", \"troubleshoot \\ncontainers by viewing and searching centralized logs, without needing to remotely view\", \" Docker or \\nWindows hosts. You can find containers that might be noisy and consuming excess resource\", \"s on a \\nhost. Additionally, you can view centralized CPU, memory, storage, and network usage, and \\np\", \"erformance information, for containers. On computers running Windows, you can centralize and \\ncompar\", \"e logs from Windows Server, Hyper-V, and Docker containers. The solution supports the \\nfollowing con\", \"tainer orchestrators: \\n\\u2022 \\nDocker Swarm \\n\\u2022 \\nDC/OS \\n\\u2022 \\nKubernetes \\n\\u2022 \\nRed Hat OpenShift \\nFigure 4-11 s\", \"hows the relationships between various container hosts and agents and OMS. \\n \\nFigure 4-11. Log Analy\", \"tics Container Monitoring solution \\nYou can use the Log Analytics Container Monitoring solution to: \", \"\\n\\u2022 \\nSee information about all container hosts in a single location. \\n\\u2022 \\nKnow which containers are ru\", \"nning, what image they\\u2019re running, and where they\\u2019re running. \\n\\u2022 \\nSee an audit trail for actions on \", \"containers. \\n\\u2022 \\nTroubleshoot by viewing and searching centralized logs without remote login to the D\", \"ocker \\nhosts. \\n\\u2022 \\nFind containers that might be \\u201cnoisy neighbors,\\u201d and be consuming excess resources\", \" on a \\nhost. \\n \\n34 \\nCHAPTER 3 | Modernize existing .NET apps to Cloud-Optimized applications \\n \\n\\u2022 \\nV\", \"iew centralized CPU, memory, storage, and network usage, and performance information, for \\ncontainer\", \"s. \\nAdditional resources \\n\\u2022 \\nOverview of monitoring in Microsoft Azure \\nhttps://learn.microsoft.com/\", \"azure/azure-monitor/overview \\n\\u2022 \\nWhat is Application Insights? \\nhttps://learn.microsoft.com/azure/az\", \"ure-monitor/app/app-insights-overview \\n\\u2022 \\nWhat is Log Analytics? \\nhttps://learn.microsoft.com/azure/\", \"log-analytics/log-analytics-overview \\n\\u2022 \\nContainer Monitoring solution in Azure Monitor \\nhttps://lea\", \"rn.microsoft.com/azure/azure-monitor/insights/containers \\n\\u2022 \\nOverview of Azure Monitor \\nhttps://lear\", \"n.microsoft.com/azure/azure-monitor/overview \\n\\u2022 \\nWhat is Operations Management Suite (OMS)? \\nhttps:/\", \"/learn.microsoft.com/azure/operations-management-suite/operations-management-suite-\\noverview \\nModern\", \"ize your app\\u2019s lifecycle with CI/CD pipelines \\nand DevOps tools in the cloud \\nToday\\u2019s businesses nee\", \"d to innovate at a rapid pace to be competitive in the marketplace. Delivering \\nhigh-quality, modern\", \" applications requires DevOps tools and processes that are critical to implement \\nthis constant cycl\", \"e of innovation. With the right DevOps tools, developers can streamline continuous \\ndeployment and g\", \"et innovative applications into the hands of users more quickly. \\nAlthough continuous integration an\", \"d deployment practices are well established, the introduction of \\ncontainers introduces new consider\", \"ations, particularly when you are working with multi-container \\napplications. \\nAzure DevOps Services\", \" supports continuous integration and deployment of multi-container \\napplications to various environm\", \"ents through the official Azure DevOps Services deployment tasks: \\n\\u2022 \\nDeploy to an Azure Web App for\", \" Containers \\n\\u2022 \\nDeploy to Azure Kubernetes Service \\nBut you can also deploy to Docker Swarm or DC/OS\", \" by using Azure DevOps Services script-based \\ntasks. \\n \\n35 \\nCHAPTER 3 | Modernize existing .NET apps\", \" to Cloud-Optimized applications \\n \\nTo continue facilitating deployment agility, these tools provide\", \" excellent dev-to-test-to-production \\ndeployment experiences for container workloads, with a choice \", \"of development and CI/CD solutions. \\nFigure 4-12 shows a continuous deployment pipeline that deploys\", \" to a Kubernetes cluster in Azure \\nContainer Service. \\n \\nFigure 4-12. Azure DevOps Services continuo\", \"us deployment pipeline, deploying to a Kubernetes cluster \\nMigrate to hybrid cloud scenarios \\nSome o\", \"rganizations and enterprises can\\u2019t migrate some of their applications to public clouds like \\nMicroso\", \"ft Azure or any other public cloud due to regulations or their own policies. However, it\\u2019s likely \\nt\", \"hat any organization might benefit from having some of their applications in the public cloud and \\no\", \"ther applications on-premises. But a mixed environment can lead to excessive complexity in \\nenvironm\", \"ents due to different platforms and technologies used in public clouds versus on-premises \\nenvironme\", \"nts. \\nMicrosoft provides the best hybrid cloud solution, one in which you can optimize your existing\", \" assets \\non-premises and in the public cloud, while you ensure consistency in an Azure hybrid cloud.\", \" You can \\nmaximize existing skills, and get a flexible, unified approach to building apps that can r\", \"un in the cloud \\nor on-premises, thanks to Azure Stack (on-premises) and Azure (public cloud). \\nWhen\", \" it comes to security, you can centralize management and security across your hybrid cloud. You \\ncan\", \" get control over all assets, from your datacenter to the cloud, by providing single sign-on to on-\\n\", \"premises and cloud apps. You accomplish this functionality by extending Active Directory to a hybrid\", \" \\ncloud, and by using identity management. \\nFinally, you can distribute and analyze data seamlessly,\", \" use the same query languages for cloud and \\non-premises assets, and apply analytics and deep learni\", \"ng in Azure to enrich your data, regardless of \\nits source. \\nAzure Stack \\nAzure Stack is a hybrid cl\", \"oud platform that lets you deliver Azure services from your organization\\u2019s \\ndatacenter. Azure Stack \", \"is designed to support new options for your modern applications in key \\n \\n36 \\nCHAPTER 3 | Modernize \", \"existing .NET apps to Cloud-Optimized applications \\n \\nscenarios, like edge and unconnected environme\", \"nts, or meeting specific security and compliance \\nrequirements. \\nFigure 4-13 shows an overview of th\", \"e true hybrid cloud platform that Microsoft offers. \\n \\nFigure 4-13. Microsoft hybrid cloud platform \", \"with Azure Stack and Azure \\nAzure Stack is offered in two deployment options, to meet your needs: \\n\\u2022\", \" \\nAzure Stack integrated systems \\n\\u2022 \\nAzure Stack Development Kit \\nAzure Stack integrated systems \\nAz\", \"ure Stack integrated systems are offered through a partnership of Microsoft and hardware partners. \\n\", \"The partnership creates a solution that offers cloud-paced innovation that is balanced with simplici\", \"ty \\nin management. Because Azure Stack is offered as an integrated system of hardware and software, \", \"\\nyou get the right amount of flexibility and control, while still adopting innovation from the cloud\", \". \\nAzure Stack integrated systems range in size from 4 to 12 nodes, and are jointly supported by the\", \" \\nhardware partner and Microsoft. Use Azure Stack integrated systems to implement new scenarios for \", \"\\nyour production workloads. \\nAzure Stack Development Kit \\nMicrosoft Azure Stack Development Kit is a\", \" single-node deployment of Azure Stack, which you can \\nuse to evaluate and learn about Azure Stack. \", \"You can also use Azure Stack Development Kit as a \\n \\n37 \\nCHAPTER 3 | Modernize existing .NET apps to\", \" Cloud-Optimized applications \\n \\ndeveloper environment, where you can develop using APIs and tooling\", \" that are consistent with Azure. \\nAzure Stack Development Kit is not intended to be used as a produc\", \"tion environment. \\nAdditional resources \\n\\u2022 \\nAzure hybrid cloud \\n  \\nhttps://azure.microsoft.com/overv\", \"iew/hybrid-cloud/ \\n\\u2022 \\nAzure Stack \\n  \\nhttps://azure.microsoft.com/overview/azure-stack/ \\n\\u2022 \\nActive D\", \"irectory Service Accounts for Windows Containers \\n  \\nhttps://learn.microsoft.com/virtualization/wind\", \"owscontainers/manage-containers/manage-\\nserviceaccounts \\n\\u2022 \\nCreate a container with Active Directory\", \" support \\n  \\nhttps://learn.microsoft.com/archive/blogs/containerstuff/create-a-container-with-active\", \"-\\ndirectory-support \\n\\u2022 \\nAzure Hybrid Benefit licensing \\n  \\nhttps://azure.microsoft.com/pricing/hybri\", \"d-benefit/ \\n \\n38 \\nCHAPTER 4 | Walkthroughs and technical get started overview \\n \\nCHAPTER 4 \\nWalkthro\", \"ughs and \\ntechnical get started \\noverview \\nTo limit the size of this e-book, additional technical do\", \"cumentation and the full walkthroughs were \\nmade available in a GitHub repository. The online series\", \" of walkthroughs that is described in this \\nchapter covers the step-by-step setup of the multiple en\", \"vironments that are based on Windows \\nContainers, and deployment to Azure. \\nThe following sections e\", \"xplain what each walkthrough is about, its objectives and high-level vision, \\nand provides a diagram\", \" of the tasks that are involved. You can get the walkthroughs themselves in the \\neShopModernizing ap\", \"ps GitHub repo wiki at https://github.com/dotnet-\\narchitecture/eShopModernizing/wiki. \\nTechnical wal\", \"kthrough list \\nThe following get-started walkthroughs provide consistent and comprehensive technical\", \" guidance for \\nsample apps that you can lift and shift by using containers, and then move by using m\", \"ultiple \\ndeployment choices in Azure. \\nEach of the following walkthroughs uses the new sample eShopL\", \"egacy and eShopModernizing apps, \\nwhich are available on GitHub at https://github.com/dotnet-archite\", \"cture/eShopModernizing. \\n\\u2022 \\nTour of eShop legacy apps (baseline apps to modernize) \\n\\u2022 \\nContainerize \", \"your existing ASP.NET web apps (WebForms & MVC) with Windows \\nContainers \\n\\u2022 \\nContainerize your exist\", \"ing WCF services (N-Tier apps) with Windows Containers \\n\\u2022 \\nDeploy your Windows Containers-based app \", \"to Azure VMs \\n\\u2022 \\nDeploy your Windows Containers-based apps to Kubernetes in Azure Container Service \", \"\\n \\n39 \\nCHAPTER 4 | Walkthroughs and technical get started overview \\n \\nWalkthrough 1: Tour of eShop l\", \"egacy apps \\nTechnical walkthrough availability \\nThe full technical walkthrough is available in the e\", \"ShopModernizing GitHub repo wiki: \\neShopModernizing wiki walkthroughs \\nOverview \\nIn this walkthrough\", \", you can explore the initial implementation of three sample legacy applications. \\nThe first two sam\", \"ple web apps have a monolithic architecture, and were created by using classic \\nASP.NET. One applica\", \"tion is based on ASP.NET 4.x MVC; the second application is based on ASP.NET \\n4.x Web Forms. The thi\", \"rd app is a 3-Tier app composed by a client WinForms app and a server-side \\nWindows Communication Fo\", \"undation (WCF) service. \\nAll these applications are available at the eShopModernizing GitHub repo. \\n\", \"Goals \\nThe main goal of this walkthrough is simply to get familiar with these apps, and with their c\", \"ode and \\nconfiguration. You can configure the apps so that they generate and use mock data, without \", \"using the \\nSQL database, for testing purposes. This optional config is based on dependency injection\", \", in a \\ndecoupled way. \\nScenario 1: ASP.NET Web apps \\nThe figure below shows the simple scenario of \", \"the original legacy ASP.NET web applications. \\n \\n40 \\nCHAPTER 4 | Walkthroughs and technical get star\", \"ted overview \\n \\n \\nFrom a business domain perspective, both apps offer the same catalog management fe\", \"atures. \\nMembers of the eShop enterprise team would use the app to view and edit the product catalog\", \". \\nThe next figure shows the initial app screenshots. \\n \\nDependencies in ASP.NET 4.x or earlier vers\", \"ions (either for MVC or for Web Forms) means that these \\napplications won\\u2019t run on .NET Core unless \", \"the code is fully rewritten by using ASP.NET Core MVC. \\nScenario 2: WCF service and WinForms client \", \"app (3-Tier app) \\nThe figure below shows the simple scenario of the original 3-Tier legacy applicati\", \"on. \\n \\n41 \\nCHAPTER 4 | Walkthroughs and technical get started overview \\n \\n \\nBenefits \\nThe benefits o\", \"f this walkthrough are simple: Just get familiar with the code and initial apps. \\nNext steps \\nExplor\", \"e this content more in-depth on the GitHub wiki: \\n\\u2022 \\nTour on the baseline ASP.NET MVC and Web Forms \", \"\\u201clegacy\\u201d apps \\n\\u2022 \\nTour on the baseline WCF service and WinForms (3-Tier) \\u201clegacy\\u201d app \\nWalkthrough 2\", \": Containerize your existing .NET \\napplications with Windows Containers \\nOverview \\nUse Windows Conta\", \"iners to improve deployment of existing .NET applications, like those based on \\nMVC, Web Forms, or W\", \"CF, to production, development, and test environments. \\nGoals \\nThe goal of this walkthrough is to sh\", \"ow you several options for containerizing an existing .NET \\nFramework application. You can: \\n\\u2022 \\nCont\", \"ainerize your application by using Visual Studio 2022 Tools for Docker (Visual Studio \\n2017 or later\", \" versions). \\n\\u2022 \\nContainerize your application by manually adding a Dockerfile, and then using the Do\", \"cker CLI. \\n\\u2022 \\nContainerize your application by using the Img2Docker tool (an open-source tool from \\n\", \"Docker). \\n \\n42 \\nCHAPTER 4 | Walkthroughs and technical get started overview \\n \\nThis walkthrough focu\", \"ses on the Visual Studio 2022 Tools for Docker approach, but the other two \\napproaches are fairly si\", \"milar in regard to using Dockerfiles. \\nScenario 1: Containerized ASP.NET web apps \\nFigure below show\", \"s the scenario for containerized eShop legacy web apps applications. \\n \\nScenario 2: Containerized WC\", \"F service \\nFigure below shows the scenario for a 3-Tier app with a containerized WCF service. \\n \\n43 \", \"\\nCHAPTER 4 | Walkthroughs and technical get started overview \\n \\n \\nBenefits \\nThere are advantages to \", \"running your monolithic application in a container. First, you create an image \\nfor the application.\", \" From that point on, every deployment runs in the same environment. Every \\ncontainer uses the same O\", \"S version, has the same version of dependencies installed, uses the same \\n.NET framework version, an\", \"d is built by using the same process. Basically, you control the \\ndependencies of your application b\", \"y using a Docker image. The dependencies travel with the \\napplication when you deploy the containers\", \". \\nAn additional benefit is that developers can run the application in the consistent environment th\", \"at\\u2019s \\nprovided by Windows Containers. Issues that appear only with certain versions can be spotted \\n\", \"immediately, instead of surfacing in a staging or production environment. Differences in development\", \" \\nenvironments used by members of the development team matter less when applications run in \\ncontain\", \"ers. \\nContainerized applications also have a flatter scale-out curve. Containerized apps enable you \", \"to have \\nmore application and service instances (based on containers) in a VM or physical machine co\", \"mpared \\nto regular application deployments per machine. This approach translates to higher density a\", \"nd fewer \\nrequired resources, especially when you use orchestrators like Kubernetes. \\nContainerizati\", \"on, in ideal situations, does not require making any changes to the application code \\n(C#). In most \", \"scenarios, you just need the Docker deployment metadata files (Dockerfiles and Docker \\nCompose files\", \"). \\nNext steps \\nExplore this content more in-depth on the GitHub wiki: \\n\\u2022 \\nHow to containerize the .\", \"NET Framework web apps with Windows Containers and Docker \\n\\u2022 \\nAdding Docker Support to a WCF service\", \" \\n \\n44 \\nCHAPTER 4 | Walkthroughs and technical get started overview \\n \\nWalkthrough 3: Deploy your Wi\", \"ndows Containers-\\nbased app to Azure VMs \\nTechnical walkthrough availability \\nThe full technical wal\", \"kthrough is available in the eShopModernizing GitHub repo wiki: \\nhttps://github.com/dotnet-architect\", \"ure/eShopModernizing/wiki/06.-Deploying-your-Windows-\\nContainers-based-app-into-Azure-VMs-(Including\", \"-CI-CD) \\nOverview \\nDeploying to a Docker host on a Windows Server 2016 Virtual Machine (VM) in Azure\", \" lets you quickly \\nset up development/test/staging environments. It also gives you a common place fo\", \"r testers or \\nbusiness users to validate the app. VMs also can be valid Infrastructure as a Service \", \"(IaaS) production \\nenvironments. \\nGoals \\nThe goal of this walkthrough is to show you the multiple al\", \"ternatives you have when you deploy \\nWindows Containers to Azure VMs that are based on Windows Serve\", \"r 2016 or later versions. \\nScenarios \\nSeveral scenarios are covered in this walkthrough. \\n \\n45 \\nCHAP\", \"TER 4 | Walkthroughs and technical get started overview \\n \\nScenario A: Deploy to an Azure VM from a \", \"dev PC through Docker Engine \\nconnection \\n \\nFigure 5-4. Deploy to an Azure VM from a dev PC through \", \"a Docker Engine connection \\nScenario B: Deploy to an Azure VM through a Docker Registry \\n \\nFigure 5-\", \"5. Deploy to an Azure VM through a Docker Registry \\n \\n46 \\nCHAPTER 4 | Walkthroughs and technical get\", \" started overview \\n \\nScenario C: Deploy to an Azure VM from CI/CD pipelines in Azure DevOps Services\", \" \\n \\nFigure 5-6. Deploy to an Azure VM from CI/CD pipelines in Azure DevOps Services \\nAzure VMs for W\", \"indows Containers \\nAzure VMs for Windows Containers are VMs based on Windows Server 2016, Windows 10\", \", or later \\nversions, both with Docker Engine set up. In most cases, Windows Server 2016 is used in \", \"the Azure \\nVMs. \\nAzure currently provides a VM named Windows Server 2016 with Containers. You can us\", \"e this VM \\nto try the new Windows Server Container feature, with either Windows Server Core or Windo\", \"ws Nano \\nServer. Container OS images are installed, and then the VM is ready to use with Docker. \\nBe\", \"nefits \\nAlthough Windows Containers can be deployed to on-premises Windows Server 2016 VMs, when you\", \" \\ndeploy to Azure, you get an easier way to get started, with ready-to-use Windows Server Container \", \"\\nVMs. You also get a common online location that\\u2019s accessible to testers, and automatic scalability \", \"\\nthrough Azure virtual machine scale sets. \\nNext steps \\nExplore this content more in-depth on the Gi\", \"tHub wiki: \\nhttps://github.com/dotnet-architecture/eShopModernizing/wiki/06.-Deploying-your-Windows-\", \"\\nContainers-based-app-into-Azure-VMs-(Including-CI-CD) \\n \\n47 \\nCHAPTER 4 | Walkthroughs and technical\", \" get started overview \\n \\nWalkthrough 4: Deploy your Windows Containers-\\nbased apps to Azure Containe\", \"r Instances (ACI) \\nTechnical walkthrough availability \\nThe full technical walkthrough is available i\", \"n the eShopModernizing GitHub repo wiki: \\nDeploying the Apps to ACI (Azure Container Instances) \\nOve\", \"rview \\nAzure Container Instances (ACI) is the quickest way to have a Containers dev/test/staging \\nen\", \"vironment where you can deploy single instances of containers. \\nGoals \\nThis walkthrough shows you th\", \"e main scenarios when deploying Windows Containers to Azure \\nContainer Instances (ACI) and how you c\", \"an deploy eShopModernizing Apps into ACI. \\nScenarios \\nThere can be variations about deploying the eS\", \"hopModernizing apps into ACI such as deploying just \\none or all of the apps (MVC app, WebForms app o\", \"r WCF service). In the following scenario shown \\nbelow, you can see the ASP.NET MVC app plus the SQL\", \" Server container both of them deployed as \\ncontainers into ACI (Azure Container Instances). \\n \\nBene\", \"fits \\nAzure Container Instances makes it easy to create and manage Docker containers in Azure, witho\", \"ut \\nhaving to provision virtual machines or adopt a higher-level service. With ACI, you can directly\", \" deploy \\na Windows container in Azure and expose it to the internet with a fully qualified domain na\", \"me (FQDN) \\n \\n48 \\nCHAPTER 4 | Walkthroughs and technical get started overview \\n \\nin a matter of secon\", \"ds (Provided that you have the Windows Container image ready in a Docker \\nregistry like Docker Hub o\", \"r Azure Container Registry). \\nConsiderations \\nDeploying Windows Containers with either full .NET Fra\", \"mework / ASP.NET or SQL Server into Azure \\nContainer Instances (ACI) is not quite as fast as deployi\", \"ng to a regular Docker Host (like a Windows \\nServer 2016 with Windows Containers) because the Docker\", \" image has to be downloaded (pulled from \\nthe Docker registry) every time and the sizes of the SQL c\", \"ontainer image (15.1 GB) and the ASP.NET \\ncontainer image (13.9 GB) are significantly large, however\", \" it is much cheaper than maintaining your \\nown docker host (permanently on-line Windows Server 2016 \", \"with Windows Containers VM in Azure) \\nnot to mention a whole orchestrator like Kubernetes in Azure (\", \"AKS) which is, on the other hand, a \\ngreat choice for production deployments. \\nAs the main conclusio\", \"n, using Azure Container Instances is a very compelling option for Dev/Test \\nscenarios and for CI/CD\", \" pipelines. \\nNext steps \\nExplore this content more in-depth on the GitHub wiki: \\nhttps://github.com/\", \"dotnet-architecture/eShopModernizing/wiki/05.-Deploying-the-Apps-to-ACI-\\n(Azure-Container-Instances)\", \" \\nWalkthrough 5: Deploy your Windows Containers-\\nbased apps to Kubernetes in Azure Container \\nServic\", \"e \\nTechnical walkthrough availability \\nThe full technical walkthrough is available in the eShopModer\", \"nizing GitHub repo wiki: \\nhttps://github.com/dotnet-architecture/eShopModernizing/wiki/04.-How-to-de\", \"ploy-your-Windows-\\nContainers-based-apps-into-Kubernetes-in-Azure-Container-Service-(Including-CI-CD\", \") \\nOverview \\nAn application that\\u2019s based on Windows Containers will quickly need to use platforms, m\", \"oving even \\nfurther away from IaaS VMs. This approach is needed to easily achieve high scalability a\", \"nd better \\nautomated scalability, and for a significant improvement in automated deployments and ver\", \"sioning. \\nYou can achieve these goals by using the orchestrator Kubernetes, available in Azure Conta\", \"iner \\nServices. \\n \\n49 \\nCHAPTER 4 | Walkthroughs and technical get started overview \\n \\nGoals \\nThe goa\", \"l of this walkthrough is to learn how to deploy a Windows Container\\u2013based application to \\nKubernetes\", \" (also called K8s) in Azure Container Service. Deploying to Kubernetes from scratch is a \\ntwo-step p\", \"rocess: \\n1. \\nDeploy a Kubernetes cluster to Azure Container Service. \\n2. \\nDeploy the application and\", \" related resources to the Kubernetes cluster. \\nScenarios \\nScenario A: Deploy directly to a Kubernete\", \"s cluster from a dev environment \\n \\nFigure 5-7. Deploy directly to a Kubernetes cluster from a devel\", \"opment environment \\n \\n50 \\nCHAPTER 4 | Walkthroughs and technical get started overview \\n \\nScenario B:\", \" Deploy to a Kubernetes cluster from CI/CD pipelines in Azure DevOps \\nServices \\n \\nFigure 5-8. Deploy\", \" to a Kubernetes cluster from CI/CD pipelines in Azure DevOps Services \\nBenefits \\nThere are many ben\", \"efits to deploying to a cluster in Kubernetes. The biggest benefit is that you get a \\nproduction-rea\", \"dy environment in which you can scale out the application based on the number of \\ncontainer instance\", \"s you want to use (inner-scalability in the existing nodes), and based on the number \\nof nodes or VM\", \"s in the cluster (global scalability of the cluster). \\nAzure Container Service optimizes popular ope\", \"n-source tools and technologies specifically for Azure. \\nYou get an open solution that offers portab\", \"ility, both for your containers and for your application \\nconfiguration. You select the size, the nu\", \"mber of hosts, and the orchestrator tools-Container Service \\nhandles everything else. \\nWith Kubernet\", \"es, developers can progress from thinking about physical and virtual machines, to \\nplanning a contai\", \"ner-centric infrastructure that facilitates the following capabilities, among others: \\n\\u2022 \\nApplicatio\", \"ns based on multiple containers \\n\\u2022 \\nReplicating container instances and horizontal autoscaling \\n\\u2022 \\nN\", \"aming and discovering (for example, internal DNS) \\n\\u2022 \\nBalancing loads \\n \\n51 \\nCHAPTER 4 | Walkthrough\", \"s and technical get started overview \\n \\n\\u2022 \\nRolling updates \\n\\u2022 \\nDistributing secrets \\n\\u2022 \\nApplication \", \"health checks \\nNext steps \\nExplore this content more in-depth on the GitHub wiki: https://github.com\", \"/dotnet-\\narchitecture/eShopModernizing/wiki/04.-How-to-deploy-your-Windows-Containers-based-apps-int\", \"o-\\nKubernetes-in-Azure-Container-Service-(Including-CI-CD) \\nWalkthrough 6: Deploy your Windows Conta\", \"iners-\\nbased apps to Azure App Service for Containers \\nTechnical walkthrough availability \\nThe full \", \"technical walkthrough is available in the eShopModernizing GitHub repo wiki: \\nhttps://github.com/dot\", \"net-architecture/eShopModernizing/wiki/Deploy-Windows-Container-to-\\nAzure-App-Service \\nOverview \\nA s\", \"imple containerized application using Windows Containers can easily be deployed to Azure App \\nServic\", \"e for Containers. This approach is the recommended approach for most Windows Container-\\nbased applic\", \"ations. \\nGoals \\nThe goal of this walkthrough is to learn how to deploy a Windows Container\\u2013based app\", \"lication to \\nAzure App Service for Containers from a registry (Docker Hub or Azure Container Registr\", \"y). \\n \\n52 \\nCHAPTER 4 | Walkthroughs and technical get started overview \\n \\nScenario \\n \\nBenefits \\nDepl\", \"oying to Azure App Service for Containers offers the benefits of containers paired with the PaaS \\nbe\", \"nefits of Azure App Service. The app service can easily be scaled both vertically and horizontally, \", \"\\nand can be configured to autoscale to meet changing demands. Updates can be performed with zero \\ndo\", \"wntime and the configuration of continuous deployment from a registry is easily configured as well. \", \"\\nNext steps \\nExplore this content more in-depth on the GitHub wiki: https://github.com/dotnet-\\narchi\", \"tecture/eShopModernizing/wiki/Deploy-Windows-Container-to-Azure-App-Service \\n \\n53 \\nCHAPTER 5 | Concl\", \"usions \\n \\nCHAPTER 5 \\nConclusions \\n\\u2022 \\nContainer-based solutions ultimately provide cost savings benef\", \"its. Containers are a solution \\nto deployment problems because they remove the friction caused by an\", \" absence of \\ndependencies in production environments. By removing those issues, it improves Dev/Test\", \", \\nDevOps, and production operations significantly. \\n\\u2022 \\nA Docker container is becoming the standard \", \"unit of deployment for any server-based \\napplication or service. \\n\\u2022 \\nFor production environments, yo\", \"u should use an orchestrator (like Kubernetes) to host \\nscalable containers\\u2013based applications. \\n\\u2022 \\n\", \"Azure VMs hosting containers are a fast and simple way to create small Dev/Test \\nenvironments in the\", \" cloud. \\n\\u2022 \\nAzure SQL Database Managed Instance is recommended by default when migrating your \\nrelat\", \"ional databases from existing applications to Azure. \\n\\u2022 \\nVisual Studio 2022 and Image2Docker are bas\", \"ic tools for you to start modernizing your \\nexisting .NET applications with Windows Containers by ac\", \"celerating the getting started \\nlearning curve. \\n\\u2022 \\nWhen placing containerized applications in produ\", \"ction you will always create or adopt a \\nDevOps culture and DevOps tools for CI/CD pipelines, like A\", \"zure DevOps Services or Jenkins. \\n\\u2022 \\nMicrosoft Azure provides the most comprehensive and complete en\", \"vironment to modernize \\nyour existing .NET Framework applications with Windows Containers, cloud inf\", \"rastructure and \\nPaaS services. \\n\"]"