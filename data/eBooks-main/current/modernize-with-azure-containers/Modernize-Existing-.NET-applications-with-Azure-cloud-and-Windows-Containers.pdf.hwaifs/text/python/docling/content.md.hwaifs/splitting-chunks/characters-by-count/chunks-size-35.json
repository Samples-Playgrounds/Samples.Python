"[\"<!-- image -->\\n\\n## Modernize existing Windows Containers\\n\\n<!-- image -->\\n\\n<!-- image -->\\n\\n<!-- image\", \" -->\\n\\nCesar de la Torre Microsoft Corp.\\n\\n## EDITION v7.0\\n\\nRefer changelog for the book updates and c\", \"ommunity contributions.\\n\\nPUBLISHED BY Microsoft Press and Microsoft DevDiv Divisions of Microsoft Co\", \"rporation One Microsoft Way Redmond, Washington 98052-6399\\n\\nCopyright \\u00a9 2023 by Microsoft Corporatio\", \"n\\n\\nAll rights reserved. No part of the contents of this book may be reproduced in any form or by any\", \" means without the written permission of the publisher.\\n\\nThis book is available for free in the form\", \" of an electronic book (e-book) available through multiple channels at Microsoft such as https://dot\", \".net/architecture.\\n\\nIf you have questions related to this book, email at dotnet-architecture-ebooksf\", \"eedback@service.microsoft.com.\\n\\nThis book is provided 'as -is' and expresses the author's views and \", \"opinions. The views, opinions, and information expressed in this book, including URL and other Inter\", \"net website references, may change without notice.\\n\\nSome examples depicted herein are provided for i\", \"llustration only and are fictitious. No real association or connection is intended or should be infe\", \"rred.\\n\\nMicrosoft and the trademarks listed at https://www.microsoft.com on the 'Trademarks' webpage \", \"are trademarks of the Microsoft group of companies. All other marks are property of their respective\", \" owners.\\n\\nAuthor: &gt; Cesar de la Torre , Sr. PM, .NET Product Team, Microsoft Corp.\\n\\nParticipants \", \"and reviewers: &gt; Scott Hunter , Partner Director PM, .NET team, Microsoft &gt; Paul Yuknewicz , P\", \"rincipal PM Manager, Visual Studio Tools team, Microsoft &gt; Lisa Guthrie , Sr. PM, Visual Studio T\", \"ools team, Microsoft &gt; Ankit Asthana , Principal PM Manager, .NET team, Microsoft &gt; Unai Zorri\", \"lla , Developer Lead, Plain Concepts &gt; Javier Valero , Chief Operating Officer at Grupo Solutio &\", \"gt; Steve Smith , Architect, NimblePros\\n\\n## Introduction\\n\\nWhen you decide to modernize your web appl\", \"ications or services and move them to the cloud, you don't necessarily have to fully rearchitect you\", \"r apps. Rearchitecting an application by using an advanced approach like microservices isn't always \", \"an option because of cost and time restraints. Depending on the type of application, rearchitecting \", \"an app also might not be necessary. To optimize the cost-effecti veness of your organization's cloud\", \" migration strategy, it's important to consider the needs of your business and the requirements of y\", \"our apps. You'll need to determine:\\n\\n- Which apps require a transformation or rearchitecting.\\n- Whic\", \"h apps need to be only partially modernized.\\n- Which apps you can 'lift and shift' directly to the c\", \"loud.\\n\\n<!-- image -->\\n\\n## About this guide\\n\\nThis guide focuses primarily on the initial modernizatio\", \"n of existing Microsoft .NET Framework web or service-oriented applications, meaning the action of m\", \"oving a workload to a newer or more modern environment without significantly altering the applicatio\", \" n's code and basic architecture.\\n\\nThis guide also highlights the benefits of moving your apps to th\", \"e cloud and partially modernizing apps by using a specific set of new technologies and approaches, l\", \"ike Windows Containers and related compute-platforms in Azure supporting Windows Containers.\\n\\n## Pat\", \"h to the cloud for existing .NET applications\\n\\nOrganizations typically choose to move to the cloud f\", \"or the agility and speed they can get for their applications. You can set up thousands of servers (V\", \"Ms) in the cloud in minutes, compared to the weeks it typically takes to set up on-premises servers.\", \"\\n\\nThere isn't a single, one -size-fits-all strategy for migrating applications to the cloud. The rig\", \"ht migration strategy for you will depend on your organization's needs and priorities, and the kind \", \"of applications you are migrating. Not all applications warrant the investment of moving to a platfo\", \"rm as a service (PaaS) model or developing a cloud-native application model. In many cases, you can \", \"take a phased or incremental approach to invest in moving your assets to the cloud, based on your bu\", \"siness needs.\\n\\nFor modern applications with the best long-term agility and value for the organizatio\", \"n, you might benefit from investing in cloud-native application architectures. However, for applicat\", \"ions that are existing or legacy assets, the key is to spend minimal time and money (no rearchitecti\", \"ng or code changes) while moving them to the cloud, to realize significant benefits.\\n\\nFigure 1-1 sho\", \"ws the possible paths you can take when you move existing .NET applications to the cloud in incremen\", \"tal phases.\\n\\n<!-- image -->\\n\\nThe Journey to the Cloud\\n\\nMicrosoft\\n\\nMigrate\\n\\nExisting apps &amp; servi\", \"ces\\n\\n.NET Framework on-premises\\n\\nOn-Premises\\n\\nInfrastructure Platform\\n\\nRehost\\n\\nCloud\\n\\nInfrastructure\", \"-\\n\\nContainerize\\n\\n## + cloud managed services Cloud\\n\\nOptimized\\n\\nCloud-Native apps\\n\\nFigure 1-1. Modern\", \"ization paths for existing .NET applications and services\\n\\n<!-- image -->\\n\\nEach migration approach h\", \"as different benefits and reasons for using it. You can choose a single approach when you migrate ap\", \"ps to the cloud, or choose certain components from multiple approaches. Individual applications aren\", \"'t limited to a single approach or maturity state. For instance, a common hybrid approach would have\", \" certain on-premises components plus other components in the cloud.\\n\\nThe definition and short explan\", \"ation for each application maturity level are the following:\\n\\nLevel 1: Cloud Infrastructure-Ready ap\", \"plications: In this migration approach, you just migrate or rehost your current on-premises applicat\", \"ions to an infrastructure as a service (IaaS) platform. Your apps have almost the same composition a\", \"s before, but now you deploy them to VMs in the cloud. This simple type of migration is typically kn\", \"own in the industry as 'Lift &amp; Shift.'\\n\\nLevel 2: Cloud Optimized applications: At this level and\", \" still without rearchitecting or altering significant code, you can gain additional benefits from ru\", \"nning your app in the cloud with modern technologies like containers and additional cloud-managed se\", \"rvices. You improve the agility of your applications to ship faster by refining your enterprise deve\", \"lopment operations (DevOps) processes. You achieve this functionality by using technologies like Win\", \"dows Containers, which is based on Docker Engine. Contai ners remove the friction that's caused by a\", \"pplication dependencies when you deploy in multiple stages. In this maturity model, you can deploy c\", \"ontainers on IaaS or PaaS while using additional cloud-managed services related to databases, cache \", \"as a service, monitoring, and continuous integration/continuous deployment (CI/CD) pipelines.\\n\\nThe t\", \"hird level of maturity is the ultimate goal in the cloud, but it's optional for many apps and not th\", \"e main focus of this guide:\\n\\nModernize\\n\\n<!-- image -->\\n\\n<!-- image -->\\n\\nLevel 3: Cloud-Native applic\", \"ations: This migration approach typically is driven by business need and targets modernizing your mi\", \"ssion-critical applications. At this level, you use PaaS services to move your apps to PaaS computin\", \"g platforms. You implement cloud-native applications and microservices architecture to evolve applic\", \"ations with long-term agility, and to scale to new limits. This type of modernization usually requir\", \"es architecting specifically for the cloud. New code often must be written, especially when you move\", \" to cloud-native application and microservice-based models. This approach can help you gain benefits\", \" that are difficult to achieve in your monolithic and on-premises application environment.\\n\\nTable 1-\", \"1 describes the main benefits of and reasons for choosing each migration or modernization approach.\\n\", \"\\nTable 1-1. Benefits and challenges of modernization paths for existing .NET applications and servic\", \"es\\n\\n| Cloud Infrastructure-Ready Lift and shift   | Cloud-Optimized Modernize                       \", \"                                                                                                | Cl\", \"oud-Native Modernize, rearchitect, and rewrite                                                      \", \"                         |\\n|---------------------------------------------|--------------------------\", \"----------------------------------------------------------------------------------------------------\", \"-------------------|--------------------------------------------------------------------------------\", \"------------------------------------------------|\\n| Application's compute target                |   \", \"                                                                                                    \", \"                                          |                                                         \", \"                                                                       |\\n| Applications deployed to \", \"VMs in Azure       | Monolithic or N-Tier apps deployed to Azure App Service, Azure Container Instan\", \"ce (ACI), VMs with containers, or AKS (Azure Kubernetes Service) | Containerized microservices on Az\", \"ure Kubernetes Service (AKS) and/or serverless microservices based on Azure Functions.        |\\n| Da\", \"ta target                                 |                                                         \", \"                                                                                        |           \", \"                                                                                                    \", \"                 |\\n| SQL or any relational database on a VM      | Azure SQL Database Managed Instan\", \"ce or another managed database in the cloud.                                                        \", \"           | Fined-grain databases per microservice, based on Azure SQL Database, Azure Cosmos DB, o\", \"r another managed database in the cloud |\\n| Advantages                                  |           \", \"                                                                                                    \", \"                                  |                                                                 \", \"                                                               |\\n| Challenges                       \", \"           |                                                                                        \", \"                                                         |                                          \", \"                                                                                      |\\n\\n## Key tech\", \"nologies and architectures by maturity level\\n\\n.NET Framework applications initially started with .NE\", \"T Framework version 1.0, which was released in late 2001. Then, companies moved towards newer versio\", \"ns (such as 2.0, 3.5 and .NET Framework 4.x). Most of those applications ran on Windows Server and I\", \"nternet Information Server (IIS), and used a relational database, like SQL Server, Oracle, MySQL, or\", \" any other RDBMS.\\n\\nMost existing .NET applications might nowadays be based on .NET Framework 4.x, or\", \" even on .NET Framework 3.5, and use web frameworks like ASP.NET MVC, ASP.NET Web Forms, ASP.NET Web\", \" API, Windows Communication Foundation (WCF), ASP.NET SignalR, and ASP.NET Web Pages. These establis\", \"hed .NET Framework technologies depend on Windows. That dependency is important to\\n\\nMaturity model f\", \"or NET applications modernization\\n\\nExisting apps\\n\\nMicrosoft\\n\\n.NET web apps (on-premises)\\n\\nCloud\\n\\nInf\", \"rastructure-Ready\\n\\nMonolithic or N-Tier architectures\\n\\n.NET\\n\\nMonolithic or N-Tier\\n\\nCloud-Optimized\\n\\n\", \"Paas\\n\\nMonolithic or N-Tier consider if you are simply migrating legacy apps and you want to make min\", \"imal changes to your application infrastructure. architectures architectures NET\\n\\nRelational\\n\\nDataba\", \"se\\n\\nOn-premises\\n\\nMicrosoft\\n\\nCloud-Native\\n\\nPaas for microservices and serverless\\n\\nMicroservices and s\", \"erverless architectures\\n\\nFigure 1-2 shows the primary technologies and architecture styles used at e\", \"ach of the three cloud maturity levels: laas Managed services SQL\\n\\nSQL\\n\\nFigure 1-2. Primary technolo\", \"gies for each maturity level for modernizing existing .NET web applications\\n\\n<!-- image -->\\n\\nFigure \", \"1-2 highlights the most common scenarios, but many hybrid and mixed variations are possible when it \", \"comes to architecture. For example, the maturity models apply not only to monolithic architectures i\", \"n existing web apps, but also to service orientation, N-Tier, and other architecture style variation\", \"s. The higher focus or percentage on one or another architecture type and related technologies deter\", \"mines the overall maturity level of your applications.\\n\\nEach maturity level in the modernization pro\", \"cess is associated with the following key technologies and approaches:\\n\\n- Cloud Infrastructure-Ready\", \" (rehost or basic lift &amp; shift): As a first step, many organizations want only to quickly execut\", \"e a cloud-migration strategy. In this case, applications are rehosted. Most rehosting can be automat\", \"ed by using Azure Migrate, a service that provides the guidance, insights, and mechanisms needed to \", \"assist you in migrating to Azure based on cloud tools like Azure Site Recovery and Azure Database Mi\", \"gration Service. You can also set up rehosting manually, so that you can learn infrastructure detail\", \"s about your assets when you move legacy apps to the cloud. For example, you can move your applicati\", \"ons to VMs in Azure with little modification-probably with only minor configuration changes. The net\", \"working in this case is similar to an on-premises environment, especially if you create virtual netw\", \"orks in Azure.\\n- Cloud-Optimized (Managed Services and Windows Containers): This model is about maki\", \"ng a few important deployment optimizations to gain some significant benefits from the cloud,\\n\\n<!-- \", \"image -->\\n\\n<!-- image -->\\n\\nwithout changing the core architecture of the application. The fundamenta\", \"l step here is to add Windows Containers support to your existing .NET Framework applications. This \", \"important step (containerization) doesn't require touching the code, so the overall lift and shift e\", \"ffort is light. You can use tools like Image2Docker or Visual Studio, with its tools for Docker. Vis\", \"ual Studio automatically chooses smart defaults for ASP.NET applications and Windows Containers imag\", \"es. These tools offer both a rapid inner loop, and a fast path to get the containers to Azure. Your \", \"agility is improved when you deploy to multiple environments. Then, moving to production, you can de\", \"ploy your Windows Containers to Azure Web App for Containers, Azure Container Instances (ACI), and A\", \"zure VMs with Windows Server 2016 and containers if you prefer an IaaS approach. For more complex mu\", \"lti-container applications, consider using orchestrators like Azure Kubernetes Service (AKS/ACS).\\n\\nD\", \"uring this initial modernization, you can also add assets from the cloud, such as monitoring with to\", \"ols like Azure Application Insights; CI/CD pipelines for your app lifecycles with Azure DevOps Servi\", \"ces; and many more data resource services that are available in Azure. For instance, you can modify \", \"a monolithic web app that was originally developed by using traditional ASP.NET Web Forms or ASP.NET\", \" MVC, but now you deploy it by using Windows Containers. When you use Windows Containers, you should\", \" also migrate your data to a database in Azure SQL Database Managed Instance, all without changing t\", \"he core architecture of your application.\\n\\n- Cloud-Native : As introduced, you should think about ar\", \"chitecting cloud-native applications when you are targeting large and complex applications with mult\", \"iple independent development teams working on different microservices that can be developed and depl\", \"oyed autonomously. Also, due to granularized and independent scalability per microservice. These arc\", \"hitectural approaches face very important challenges and complexities but can be greatly simplified \", \"by using cloud PaaS and orchestrators like Azure Kubernetes Service (AKS/ACS) (managed Kubernetes), \", \"and Azure Functions for a serverless approach. All these approaches (like microservices and Serverle\", \"ss) typically require you to architect for the cloud and write new code -code that is adapted to spe\", \"cific PaaS platforms, or code that aligns with specific architectures, like microservices.\\n\\nFigure 1\", \"-3 shows the internal technologies that you can use for each maturity level:\\n\\nExisting\\n\\n.NET applica\", \"tions (on-prem.)\\n\\nMonolithic or N-Tier\\n\\nASP.NET\\n\\nMVC\\n\\nWebForms\\n\\nWeb API\\n\\nSignalR\\n\\nWeb Pages\\n\\nWCF\\n\\nRe\", \"lational Database\\n\\n(SQL, Oracle, MySQL, etc.)\\n\\n.NET\\n\\nMicrosoft\\n\\n<!-- image -->\\n\\nFigure 1-3. Internal\", \" technologies for each modernization maturity level\\n\\n<!-- image -->\\n\\n## Lift and shift scenario\\n\\nFor\", \" lift and shift migrations, keep in mind that you can use many different variations of lift and shif\", \"t in your application scenarios. If you only rehost your application, you might have a scenario like\", \" the one shown in Figure 1-4, where you use VMs in the cloud only for your application and for your \", \"database server.\\n\\n.NET applications (on-prem.)\\n\\nMonolithic Architecture\\n\\nRelational Database\\n\\n(SQL, \", \"Oracle, MySQL, etc.)\\n\\nMicrosoft\\n\\n<!-- image -->\\n\\nFigure 1-4. Example of a pure IaaS scenario in the \", \"cloud\\n\\n<!-- image -->\\n\\n## Modernization scenarios\\n\\nFor modernization scenarios, you might have a pur\", \"e Cloud-Optimized application that uses elements only from that maturity level. Or, you might have a\", \"n intermediate-state application with some elements from Cloud Infrastructure-Ready and other elemen\", \"ts from CloudOptimized (a 'pick and choose' or mixed model), like in Figure 1 -5.\\n\\nExisting\\n\\n.NET ap\", \"plications (on-prem.)\\n\\nMonolithic or N-Tier\\n\\nASP.NET\\n\\nMVC\\n\\nWebForms\\n\\nWeb API\\n\\nSignalR\\n\\nWeb Pages\\n\\nWC\", \"F\\n\\nRelational Database\\n\\n(SQL, Oracle, MySQL, etc.)\\n\\n.NET\\n\\nMicrosoft\\n\\n<!-- image -->\\n\\nFigure 1-5. Exa\", \"mple 'pick and choose' scenario, with database on IaaS, DevOps, and containerization assets\\n\\n<!-- im\", \"age -->\\n\\nNext, as the ideal scenario for many existing .NET Framework applications to migrate, you c\", \"ould migrate to a Cloud-Optimized application, to get significant benefits from little work. This ap\", \"proach also sets you up for Cloud-Native as a possible future evolution. Figure 1-6 shows an example\", \".\\n\\nExisting\\n\\n.NET applications (on-prem.)\\n\\nMonolithic or N-Tier\\n\\nASP NET\\n\\nMVC\\n\\nWebForms\\n\\nWeb API\\n\\nSi\", \"gnalR\\n\\nWeb Pages\\n\\nWCF\\n\\nRelational Database\\n\\n(SQL, Oracle, MySQL, etc.)\\n\\nMicrosoft\\n\\n.NET\\n\\nMicrosoft\\n\\n\", \"<!-- image -->\\n\\nFigure 1-6. Example Cloud-Optimized apps scenario, with Windows Containers and manag\", \"ed services\\n\\n<!-- image -->\\n\\nGoing even further, you could extend your existing Cloud-Optimized appl\", \"ication by adding a few microservices for specific scenarios. This approach would move you partially\", \" to the level of CloudNative model, which is not the main focus of the present guidance.\\n\\n## What th\", \"is guide does not cover\\n\\nThis guide covers a specific subset of the example scenarios, as shown in F\", \"igure 1-7. This guide focuses only on the lift and shift scenarios, and ultimately, on the Cloud-Opt\", \"imized model. In the Cloud-Optimized model, a .NET Framework application is modernized by using Wind\", \"ows Containers, plus additional components like monitoring and CI/CD pipelines. Each component is fu\", \"ndamental to deploying applications to the cloud, faster, and with agility.\\n\\nExisting\\n\\nNET applicati\", \"ons (on-prem.)\\n\\nMonolithic or N-Tier\\n\\nASP.NET\\n\\nMVC\\n\\nWebForms\\n\\nWeb API\\n\\nSignalR\\n\\nWeb Pages\\n\\nWCF\\n\\nRela\", \"tional Database\\n\\n(SQL, Oracle, MySQL, etc.)\\n\\n.NET\\n\\nMicrosoft\\n\\n<!-- image -->\\n\\nFigure 1-7. Cloud-Nati\", \"ve is not covered in this guide\\n\\n<!-- image -->\\n\\nThe focus of this guide is specific. It shows you t\", \"he path you can take to achieve a lift and shift of your existing .NET applications, without rearchi\", \"tecting, and with no code changes. Ultimately, it shows you how to make your application Cloud-Optim\", \"ized.\\n\\nThis guide doesn't show you how to create Cloud -Native applications, such as how to evolve t\", \"o a microservices architecture. To rearchitect your applications or to create brand-new applications\", \" that are based on microservices, see the e-book .NET Microservices: Architecture for containerized \", \".NET applications.\\n\\n## Additional resources\\n\\n- Containerized Docker application lifecycle with Micro\", \"soft platform and tools (downloadable e-book) https://aka.ms/dockerlifecycleebook\\n- .NET Microservic\", \"es: Architecture for containerized .NET applications (downloadable ebook) https://aka.ms/microservic\", \"esebook\\n- Architecting modern web applications with ASP.NET Core and Azure (downloadable ebook) http\", \"s://aka.ms/webappebook\\n\\n## Who should use this guide\\n\\n<!-- image -->\\n\\nThis guide was written for dev\", \"elopers and solution architects who want to modernize existing ASP.NET web applications or WCF servi\", \"ces that are based on .NET Framework, for improved agility in shipping and releasing applications.\\n\\n\", \"You also might find this guide useful if you are a technical decision maker, such as an enterprise a\", \"rchitect or a development lead/director who just wants an overview of the benefits that you can get \", \"by using Windows Containers, and by deploying to the cloud when using Microsoft Azure.\\n\\n## How to us\", \"e this guide\\n\\nThis guide addresses the 'why' -why you might want to modernize your existing applicat\", \"ions, and the specific benefits you get from using Windows Containers when you move your apps to the\", \" cloud. The content in the first few chapters of the guide is designed for architects and technical \", \"decision makers who want an overview, but who don't need to focus on implementation and technical, s\", \"tep -by-step details.\\n\\nThe last chapter of this guide introduces multiple walkthroughs that focus on\", \" specific deployment scenarios. This guide offers shorter versions of the walkthroughs, to summarize\", \" the scenarios and highlight their benefits. The full walkthroughs drill down into setup and impleme\", \"ntation details, and are published as a set of wiki posts in the same public GitHub repo where relat\", \"ed sample apps reside (discussed in the next section). The last chapter and the step-by-step wiki wa\", \"lkthroughs on GitHub will be of more interest to developers and architects who want to focus on impl\", \"ementation details.\\n\\n## Sample apps for modernizing legacy apps: eShopModernizing\\n\\nThe eShopModerniz\", \"ing repo on GitHub offers two sample applications that simulate legacy monolithic web applications. \", \"One web app is developed by using ASP.NET MVC; the second web app is developed by using ASP.NET Web \", \"Forms and the third app is an N-Tier app with a WinForms client desktop app consuming a WCF service \", \"backend. All these apps are based on the traditional .NET Framework. These sample apps don't use .NE\", \"T Core/.NET 7 or ASP.NET Core as they are supposed to be existing/legacy .NET Framework applications\", \" to be modernized.\\n\\nThese sample apps have a second version, with modernized code, and which are fai\", \"rly straightforward. The most important difference between the app versions is that the second versi\", \"ons use Windows Containers as the deployment choice. There also are a few additions to the second ve\", \"rsions, like Azure Storage Blobs for managing images, Azure Active Directory for managing security, \", \"and Azure Application Insights for monitoring and auditing the applications.\\n\\n## Contents\\n\\n| Lift an\", \"d shift existing .NET apps to Azure IaaS (Cloud Infrastructure-Ready) ................. 1           \", \"                                                                         |\\n|------------------------\", \"----------------------------------------------------------------------------------------------------\", \"---------------------------------------------------------|\\n| Why migrate existing .NET web applicati\", \"ons to Azure IaaS ..................................................................................\", \".2                                       |\\n| When to migrate to IaaS instead of to PaaS.............\", \"....................................................................................................\", \"2                        |\\n| Use Azure Migrate to analyze and migrate your existing applications to \", \"Azure...........................................2                                                   \", \"         |\\n| Use Azure Site Recovery to migrate your existing VMs to Azure VMs......................\", \"........................................3                                                    |\\n| Add\", \"itional resources...................................................................................\", \".......................................................................4     |\\n| Migrate your relati\", \"onal databases to Azure......................................................................... 6  \", \"                                                             |\\n| When to migrate to Azure SQL Databa\", \"se Managed Instance...............................................................................7 \", \"                                             |\\n| When to migrate to Azure SQL Database..............\", \"....................................................................................................\", \"....8                        |\\n| When to move your original RDBMS to a VM (IaaS)....................\", \".............................................................................8                      \", \"             |\\n| When to migrate to SQL Server as a VM (IaaS) ......................................\", \".....................................................................9                           |\\n|\", \" Use Azure Database Migration Service to migrate your relational databases to Azure ................\", \".............9                                                                   |\\n| Additional reso\", \"urces...............................................................................................\", \"............................................................. 10 |\\n| Modernize existing .NET apps to\", \" Cloud-Optimized applications .................................... 11                               \", \"                                                 |\\n| Reasons to modernize existing .NET apps to Clou\", \"d-Optimized applications.............................................. 12                           \", \"                                 |\\n| Cloud-Optimized application principles and tenets .............\", \".............................................................................12                     \", \"                 |\\n| Benefits of a Cloud-Optimized application .....................................\", \"......................................................................14                            \", \" |\\n| Microsoft technologies in cloud-optimized applications.........................................\", \"............................................ 14                                      |\\n| Monolithic \", \"applications can be Cloud-Optimized.................................................................\", \".............................15                                      |\\n| What about Cloud-Native app\", \"lications? .........................................................................................\", \"............................ 16                      |\\n| Cloud-native applications details .........\", \"....................................................................................................\", \".................17                  |\\n| What about microservices?..................................\", \"....................................................................................................\", \"....18               |\\n| existing .NET apps as Windows containers...................................\", \".............................................................. 19                                   \", \"     |\\n| Deploy                                                                                     \", \"                                                                                         |\\n| What ar\", \"e containers? (Linux or Windows)....................................................................\", \"..........................................19                             |\\n| Benefits of containers \", \"(Docker Engine on Linux or Windows).................................................................\", \"......19                                                 |\\n| What is Docker?........................\", \"....................................................................................................\", \"....................................20   |\\n| Choose an OS to target with .NET-based containers .....\", \"...................................................................................22               \", \"                         |\\n\\n| Windows container types ..............................................\", \"...............................................................................................23   \", \"                    |    |\\n|------------------------------------------------------------------------\", \"----------------------------------------------------------------------------------------------------\", \"-------------------|----|\\n| The container ecosystem in Azure .......................................\", \".....................................................................................24             \", \"                  |    |\\n| When not to deploy to Windows Containers.................................\", \"...........................................................................                         \", \"                 | 26 |\\n| When to deploy Windows Containers in your on-premises IaaS VM infrastructu\", \"re.................................                                                                 \", \"                | 26 |\\n| When to deploy Windows Containers to Azure VMs (IaaS cloud)................\", \"....................................................                                                \", \"               | 26 |\\n| When to deploy Windows Containers to Azure Container Instances (ACI)........\", \"...........................................                                                         \", \"              | 27 |\\n| When to deploy Windows Containers to Azure Kubernetes Service (AKS)..........\", \".........................................                                                           \", \"             | 28 |\\n| Choosing Azure compute platforms for container-based applications.............\", \".............................................                                                       \", \"            | 28 |\\n| Build resilient services ready for the cloud: Embrace transient failures in the\", \" cloud.................................                                                             \", \"           | 29 |\\n| Handling partial failure .......................................................\", \"...........................................................................................29       \", \"          |    |\\n| Modernize your apps with monitoring and telemetry................................\", \"...........................................................                                         \", \"         | 31 |\\n| Monitor your application with Application Insights................................\", \"...........................................................31                                       \", \"        |    |\\n| Monitor your Docker infrastructure with Log Analytics and its Container Monitoring \", \"solution......32                                                                                    \", \"       |    |\\n| Modernize your app's lifecycle with CI/CD pipelines and DevOps tools in the cloud ..\", \"............................                                                                        \", \"      | 34 |\\n| Migrate to hybrid cloud scenarios....................................................\", \".............................................................................                       \", \"     | 35 |\\n| Azure Stack...........................................................................\", \"..............................................................................................35    \", \"    |    |\\n| Walkthroughs and technical get started overview........................................\", \"....................                                                                                \", \"   | 38 |\\n| Technical walkthrough list..............................................................\", \"...................................................................................                 \", \"  | 38 |\\n| Walkthrough 1: Tour of eShop legacy apps.................................................\", \"..............................................................                                      \", \" | 39 |\\n| Technical walkthrough availability .......................................................\", \".....................................................................39                             \", \"|    |\\n| Overview...................................................................................\", \"...........................................................................................39      |\", \"    |\\n| Goals.......................................................................................\", \"...............................................................................................39 | \", \"   |\\n| Scenario 1: ASP.NET Web apps ................................................................\", \"..................................................................39                             |  \", \"  |\\n| Scenario 2: WCF service and WinForms client app (3-Tier app)..................................\", \"..................................40                                                            |   \", \" |\\n| Benefits.......................................................................................\", \"..........................................................................................41   |    \", \"|\\n| Next steps .....................................................................................\", \"......................................................................................41      |    |\", \"\\n| Walkthrough 2: Containerize your existing .NET applications with Windows Containers..............\", \".........                                                                                    | 41 |\\n\", \"| Overview..........................................................................................\", \"....................................................................................41      |    |\\n|\", \" Goals..............................................................................................\", \"........................................................................................41 |    |\\n| \", \"Scenario 1: Containerized ASP.NET web apps..........................................................\", \"............................................42                                            |    |\\n| S\", \"cenario 2: Containerized WCF service ...............................................................\", \"....................................................42                                   |    |\\n| Be\", \"nefits..............................................................................................\", \"...................................................................................43   |    |\\n\\n| Ne\", \"xt steps ...........................................................................................\", \"................................................................................43                  \", \"                                                                                          |         \", \"                                                                                                    \", \"                                                                               |\\n|------------------\", \"----------------------------------------------------------------------------------------------------\", \"----------------------------------------------------------------------------------------------------\", \"---------------------------------------------------------------------------|------------------------\", \"----------------------------------------------------------------------------------------------------\", \"----------------------------------------------------------------|\\n| Walkthrough 3: Deploy your Windo\", \"ws Containers-based app to Azure VMs.............................................                   \", \"                                                                                                    \", \"                                                            | 44                                    \", \"                                                                                                    \", \"                                                 |\\n| Technical walkthrough availability ............\", \"....................................................................................................\", \"............44                                                                                      \", \"                                             |                                                      \", \"                                                                                                    \", \"                                  |\\n| Overview......................................................\", \"....................................................................................................\", \"....................44                                                                              \", \"                              |                                                                     \", \"                                                                                                    \", \"                   |\\n| Goals........................................................................\", \"....................................................................................................\", \"..........44                                                                                        \", \"               |                                                                                    \", \"                                                                                                    \", \"    |\\n| Scenarios...................................................................................\", \"...........................................................................................44       \", \"                                                                                                    \", \"|                                                                                                   \", \"                                                                                         |\\n| Azure V\", \"Ms for Windows Containers...........................................................................\", \"..............................................46                                                    \", \"                                                                                     |              \", \"                                                                                                    \", \"                                                                          |\\n| Benefits..............\", \"....................................................................................................\", \"...............................................................46                                   \", \"                                                                      |                             \", \"                                                                                                    \", \"                                                           |\\n| Next steps ..........................\", \"....................................................................................................\", \".............................................46                                                     \", \"                                                       |                                            \", \"                                                                                                    \", \"                                            |\\n| Walkthrough 4: Deploy your Windows Containers-based \", \"apps to Azure Container Instances (ACI).                                                            \", \"                                                                                                    \", \"                                        | 47                                                        \", \"                                                                                                    \", \"                             |\\n| Technical walkthrough availability ................................\", \"............................................................................................47      \", \"                                                                                                    \", \"                         |                                                                          \", \"                                                                                                    \", \"              |\\n| Overview..........................................................................\", \"....................................................................................................\", \"47                                                                                                  \", \"          |                                                                                         \", \"                                                                                                   |\", \"\\n| Goals............................................................................................\", \"..........................................................................................47        \", \"                                                                                               |    \", \"                                                                                                    \", \"                                                                                    |\\n| Scenarios...\", \"....................................................................................................\", \".......................................................................47                           \", \"                                                                                |                   \", \"                                                                                                    \", \"                                                                     |\\n| Benefits...................\", \"....................................................................................................\", \"..........................................................47                                        \", \"                                                                 |                                  \", \"                                                                                                    \", \"                                                      |\\n| Considerations............................\", \"....................................................................................................\", \"...................................48                                                               \", \"                                                  |                                                 \", \"                                                                                                    \", \"                                       |\\n| Next steps ..............................................\", \"....................................................................................................\", \".........................48                                                                         \", \"                                   |                                                                \", \"                                                                                                    \", \"                        |\\n| Walkthrough 5: Deploy your Windows Containers-based apps to Kubernetes i\", \"n Azure Container Service                                                                           \", \"                                                                                                    \", \"                    | ..............................................................................\", \"....................................................................................................\", \"..... 48 |\\n| Technical walkthrough availability ....................................................\", \"........................................................................48                          \", \"                                                                                                    \", \"     |                                                                                              \", \"                                                                                              |\\n| Ov\", \"erview..............................................................................................\", \"................................................................................48                  \", \"                                                                                          |         \", \"                                                                                                    \", \"                                                                               |\\n| Goals............\", \"....................................................................................................\", \"......................................................................49                            \", \"                                                                           |                        \", \"                                                                                                    \", \"                                                                |\\n| Scenarios.......................\", \"....................................................................................................\", \"...................................................49                                               \", \"                                                            |                                       \", \"                                                                                                    \", \"                                                 |\\n| Benefits.......................................\", \"....................................................................................................\", \"......................................50                                                            \", \"                                             |                                                      \", \"                                                                                                    \", \"                                  |\\n| Next steps ...................................................\", \"....................................................................................................\", \"....................51                                                                              \", \"                              |                                                                     \", \"                                                                                                    \", \"                   |\\n| Walkthrough 6: Deploy your Windows Containers-based apps to Azure App Service\", \" for Containers ....................................................................................\", \"....................................................................................................\", \".............. | 51                                                                                 \", \"                                                                                                    \", \"    |\\n| Technical walkthrough availability .........................................................\", \"...................................................................51                               \", \"                                                                                                    \", \"|                                                                                                   \", \"                                                                                         |\\n| Overvie\", \"w...................................................................................................\", \"...........................................................................51                       \", \"                                                                                     |              \", \"                                                                                                    \", \"                                                                          |\\n| Goals.................\", \"....................................................................................................\", \".................................................................51                                 \", \"                                                                      |                             \", \"                                                                                                    \", \"                                                           |\\n| Scenario ............................\", \"....................................................................................................\", \"...............................................52                                                   \", \"                                                       |                                            \", \"                                                                                                    \", \"                                            |\\n| Benefits............................................\", \"....................................................................................................\", \".................................52                                                                 \", \"                                        |                                                           \", \"                                                                                                    \", \"                             |\\n\\n- Next steps .......................................................\", \"....................................................................................................\", \"................  52\\n\\n## Conclusions ...............................................................\", \"............................................................. 53\\n\\nExisting .NET application moderniz\", \"ation: Maturity models\\n\\nExisting apps\\n\\nNET web apps (on-premises)\\n\\nMonolithic architecture\\n\\nOn-premi\", \"ses\\n\\nCloud\\n\\nInfrastructure-Ready\\n\\nMonolithic &amp; N-Tier\\n\\nAzure\\n\\nCloud-Optimized\\n\\nContainerized &am\", \"p; Managed\\n\\nMonolithic &amp; N-Tier\\n\\nAzure\\n\\nCloud-Native\\n\\nMicroservice architecture\\n\\nMicroservices a\", \"rchitectures\\n\\nAzure\\n\\n## Lift and shift existing .NET apps to Azure IaaS (Cloud Infrastructure-Ready)\", \"\\n\\nVision: As a first step, to reduce your on-premises investment and total cost of hardware and netw\", \"orking maintenance, simply rehost your existing applications in the cloud.\\n\\nBefore getting into how \", \"to migrate your existing applications to the Azure infrastructure as a service (IaaS) platform, it's\", \" important to analyze the reasons why you'd want to migrate directly to IaaS in Azure. The scenario \", \"at this modernization maturity level essentially is to start using VMs in the cloud, instead of cont\", \"inuing to use your current, on-premises infrastructure.\\n\\nAnother point to analyze is why you might w\", \"ant to migrate to pure IaaS cloud instead of just adding more advanced managed services in Azure. De\", \"termine what cases might require IaaS in the first place.\\n\\nFigure 2-1 positions Cloud Infrastructure\", \"-Ready applications in the modernization maturity levels:\\n\\nFigure 2-1. Positioning Cloud Infrastruct\", \"ure-Ready applications\\n\\n<!-- image -->\\n\\n## Why migrate existing .NET web applications to Azure IaaS\\n\", \"\\nThe main reason to migrate to the cloud, even at an initial IaaS level, is to achieve cost reductio\", \"ns. By using more managed infrastructure services, your organization can lower its investment in har\", \"dware maintenance, server or VM provisioning and deployment, and infrastructure management.\\n\\nAfter y\", \"ou make the decision to move your apps to the cloud, the main reason why you might choose IaaS inste\", \"ad of more advanced options like PaaS is simply that the IaaS environment will be more familiar. Mov\", \"ing to an environment that's similar to your current, on -premises environment offers a lower learni\", \"ng curve, which makes it the quickest path to the cloud.\\n\\nHowever, taking the quickest path to the c\", \"loud doesn't mean that you will gain the most benefit from having your applications running in the c\", \"loud. Any organization will gain the most significant benefits from a cloud migration at the already\", \" introduced Cloud-Optimized and Cloud-Native maturity levels.\\n\\nIt also has become evident that appli\", \"cations are easier to modernize and rearchitect in the future when they are already running in the c\", \"loud, even on IaaS. Application data migration has already been achieved. Also, your organization wi\", \"ll have gained the skills required for working in the cloud and made the shift to operating in a 'cl\", \"oud culture.'\\n\\n## When to migrate to IaaS instead of to PaaS\\n\\nThe next sections discuss Cloud-Optimi\", \"zed applications that are mostly based on PaaS platforms and services. These apps give you the most \", \"benefits from migrating to the cloud.\\n\\nIf your goal is simply to move existing applications to the c\", \"loud, first, identify existing applications that would not require substantial modification to run i\", \"n Azure App Service. These apps should be the first candidates for Cloud-Optimized.\\n\\nThen, for the a\", \"pps that still cannot move to Windows Containers and PaaS such as App Service or orchestrators like \", \"Azure Kubernetes Service, migrate those apps to simple plain VMs (IaaS).\\n\\nBut, keep in mind that cor\", \"rectly configuring, securing, and maintaining VMs requires much more time and IT expertise compared \", \"to using PaaS services in Azure. If you are considering Azure Virtual Machines, make sure that you t\", \"ake into account the ongoing maintenance effort required to patch, update, and manage your VM enviro\", \"nment. Azure Virtual Machines is IaaS.\\n\\n## Use Azure Migrate to analyze and migrate your existing ap\", \"plications to Azure\\n\\nMigrating to the cloud doesn't have to be difficult. But many organizations str\", \"uggle to get started - to get deep visibility into the environment and the tight interdependencies b\", \"etween applications, workloads, and data. Without that visibility, it can be difficult to plan the p\", \"ath forward. Without detailed information on what's required for a successful migration, you can't h\", \"ave the right\\n\\nDependencies - Micros X\\n\\nMicrosoft Azure Demo &gt; contoso payroll app &gt; Dependenc\", \"ies\\n\\n=\\n\\n+ New\\n\\nI Dashboard\\n\\nI All resources\\n\\n\\u2022 Resource groups\\n\\nMigration projects\\n\\n* Solutions\\n\\n* L\", \"og Analytics\\n\\nRecovery Services vaults\\n\\n[al Virtual machines\\n\\nMonitor\\n\\n4 Advisor\\n\\nI Subscriptions\\n\\nM\", \"ore services &gt;\\n\\nDependencies\\n\\n\\u043e\\u0432\\u043e, \\u0440\\u0430\\u0443\\u0433\\u043e, app\\n\\n+ Add machine(s)\\n\\n- Remove machine(s)\\n\\nU Refresh\\n\\n\", \"O Configure agents\\n\\nUse Ctri - Click to multiselect machines on the map to add or remove from the gr\", \"oup\\n\\n\\u00a9 Time Range: 9/21/2017 7:00 AM \\u2014 8:00 AM (1 hour)\\n\\n\\u2022 *\\n\\nLegend shons@microsoft.com\\n\\n\\u00ab\\n\\nconvers\", \"ations within your organization. You don't know enough about the potential cost benefits, or whether\", \" workloads could just lift-and-shift or would require significant rework to migrate successfully. No\", \" wonder many organizations hesitate.\\n\\nAzure Migrate is a new service that provides the guidance, ins\", \"ights, and mechanisms needed to assist you in migrating to Azure. Azure Migrate provides:\\n\\n- Discove\", \"ry and assessment for on-premises virtual machines\\n- Inbuilt dependency mapping for high-confidence \", \"discovery of multi-tier applications\\n- Intelligent right sizing to Azure virtual machines\\n- Compatib\", \"ility reporting with guidelines for remediating potential issues\\n- Integration with Azure Database M\", \"anagement Service for database discovery and migration\\n\\nAzure Migrate gives you confidence that your\", \" workloads can migrate with minimal impact to the business and run as expected in Azure. With the ri\", \"ght tools and guidance, you can achieve maximum return on investment while assuring that critical pe\", \"rformance and reliability needs are met.\\n\\nFigure 2-2 shows you the built-in dependency mapping for a\", \"ll server and application connections performed by Azure Migrate.\\n\\nFigure 2-2. Positioning Cloud Inf\", \"rastructure-Ready applications\\n\\n<!-- image -->\\n\\n## Use Azure Site Recovery to migrate your existing \", \"VMs to Azure VMs\\n\\nAs part of the end-to-end Azure Migrate, Azure Site Recovery is a tool that you ca\", \"n use to easily migrate your web apps to VMs in Azure. You can use Site Recovery to replicate on-pre\", \"mises VMs and physical servers to Azure, or to replicate them to a secondary on-premises location. Y\", \"ou can even replicate a workload t hat's running on a supported Azure VM, on an on -premises Hyper-V\", \" VM, on a VMware VM, or on a Windows or Linux physical server. Replication to Azure eliminates the c\", \"ost and complexity of maintaining a secondary datacenter.\\n\\nRestore default configuration Report a bu\", \"g P Q &gt;\\n\\nMICROSOFT\\n\\n\\\"J\\n\\nReplicated items\\n\\nContosoRecoveryServices\\n\\nEE Columns\\n\\nU Refresh + Replic\", \"ate\\n\\nLast refreshed at: 10/13/2016, 2:59:17 PM\\n\\n&gt; Filter item.s....\\n\\nNAME\\n\\nAWSServer2012\\n\\nSite Re\", \"covery is also made specifically for hybrid environments that are partly on-premises and partly on A\", \"zure. Site Recovery helps ensure business continuity by keeping your apps that are running on VMs an\", \"d on-premises physical servers available if a site goes down. It replicates workloads that are runni\", \"ng on VMs and physical servers so that they remain available in a secondary location if the primary \", \"site isn't available. It recovers workloads to the primary site when it's up and running again.\\n\\nFab\", \"rikamMarketing\\n\\nFigure 2-3 shows the execution of multiple VM migrations by using Azure Site Recover\", \"y.\\n\\nFabrikamFinance\\n\\n\\u2022 ContosoReplicationGr...\\n\\nFigure 2-3. Positioning Cloud Infrastructure-Ready a\", \"pplications\\n\\n<!-- image -->\\n\\n## Additional resources\\n\\n- Azure Migrate Datasheet\\n- https://aka.ms/azu\", \"remigration\\\\_datasheet\\n- Azure Migrate https://aka.ms/azuremigrate\\n- Azure migration and modernizati\", \"on center https://azure.microsoft.com/migration/\\n- Migrate to Azure with Site Recovery https://learn\", \".microsoft.com/azure/site-recovery/site-recovery-migrate-to-azure\\n- Azure Site Recovery service over\", \"view\\n\\nChange PIT\\n\\n- \\u2022 x\\n\\nhttps://learn.microsoft.com/azure/site-recovery/site-recovery-overview\\n\\n- M\", \"igrating VMs in AWS to Azure VMs https://learn.microsoft.com/azure/site-recovery/site-recovery-migra\", \"te-aws-to-azure\\n\\nOn-premises\\n\\nSQL\\n\\nServer\\n\\nORACLE\\n\\nMYSQL\\n\\nPostgre SOL\\n\\nIBM\\n\\nDB2\\n\\nOther\\n\\nInstance mig\", \"ration\\n\\nADMS\\n\\nService\\n\\nSQL Server\\n\\nVM\\n\\nSQL\\n\\nSQL\\n\\nSQL\\n\\nOracle\\n\\nInstance migration\\n\\nADMS\\n\\nService\\n\\n\\u2022 M\", \"icrosoft Azure\\n\\nAzure SQL Database Services\\n\\nSQL\\n\\nSQL\\n\\nSQL\\n\\nSQL\\n\\nDatabase migration\\\"\\n\\nADMS\\n\\n## Migra\", \"te your relational databases to Azure VM\\n\\nInstance migration\\n\\nDatabase migration\\n\\nAzure Database\\n\\nAz\", \"ure Database\\n\\nVision: Azure offers the most comprehensive database migration.\\n\\n(*) ADMS: Azure Datab\", \"ase\\n\\nMigration Service\\n\\nVMs model\\n\\nIn Azure, you can migrate your database servers directly to IaaS \", \"VMs (pure lift and shift), or you can migrate to Azure SQL Database, for additional benefits. Azure \", \"SQL Database offers the managed instance and full database-as-a-service (DBaaS) options. Figure 3-1 \", \"shows the multiple relational database migration paths available in Azure.\\n\\nFigure 3-1. Database mig\", \"ration paths in Azure\\n\\n<!-- image -->\\n\\nSQL\\n\\n## When to migrate to Azure SQL Database Managed Instanc\", \"e\\n\\nIn most cases, Azure SQL Database Managed Instance will be your best option to consider when you \", \"migrate your data to Azure. If you are migrating SQL Server databases and need nearly 100% assurance\", \" that you won't need to rearchitect your application or mak e changes to your data or data access co\", \"de, choose the Managed Instance feature of Azure SQL Database.\\n\\nAzure SQL Database Managed Instance \", \"is the best option if you have additional requirements for SQL Server instance-level functionality, \", \"or isolation requirements beyond the features provided in a standard Azure SQL Database (single data\", \"base model). This last one is the most PaaS-oriented choice, but it doesn't offer the same features \", \"as that of a traditional SQL server. Migration might surface frictions.\\n\\nFor example, an organizatio\", \"n that has made deep investments in instance-level SQL Server capabilities would benefit from migrat\", \"ing to SQL Managed Instance. Examples of instance-level SQL Server capabilities include SQL common l\", \"anguage runtime (CLR) integration, SQL Server Agent, and crossdatabase querying. Support for these f\", \"eatures is not available in standard Azure SQL Database (a single-database model).\\n\\nAn organization \", \"that operates in a highly regulated industry, and which needs to maintain isolation for security pur\", \"poses, also might benefit from choosing the SQL Managed Instance model.\\n\\nManaged Instance in Azure S\", \"QL Database has the following characteristics:\\n\\n- Security isolation through Azure Virtual Network\\n-\", \" Application surface compatibility, with these features:\\n- -SQL Server Agent and SQL Server Profiler\", \"\\n- -Cross-database references and queries, SQL CLR, replication, change data capture (CDC), and Serv\", \"ice Broker\\n- Database sizes up to 35 TB\\n- Minimum-downtime migration, with these features:\\n- -Azure \", \"Database Migration Service\\n- -Native backup and restore, and log shipping\\n\\nWith these capabilities, \", \"when you migrate existing application databases to Azure SQL Database, the Managed Instance model of\", \"fers nearly 100% of the benefits of PaaS for SQL Server. Managed Instance is a SQL Server environmen\", \"t where you continue using instance-level capabilities without changing your application design.\\n\\nMa\", \"naged Instance is probably the best fit for enterprises that currently are using SQL Server, and whi\", \"ch require flexibility in their network security in the cloud. It's like having a private virtual ne\", \"twork for your SQL databases.\\n\\n## When to migrate to Azure SQL Database\\n\\nAs mentioned, the standard \", \"Azure SQL Database is a fully managed, relational DBaaS. SQL Database currently manages millions of \", \"production databases, across 38 datacenters, around the world. It supports a broad range of applicat\", \"ions and workloads, from managing straightforward transactional data, to driving the most data-inten\", \"sive, mission-critical applications that require advanced data processing at a global scale.\\n\\nBecaus\", \"e of its full PaaS features, better pricing-and ultimately lower cost-you should move to the standar\", \"d Azure SQL Database as your 'by -default choice' if you have an application that uses basic, standa\", \"rd SQL databases, and no additional instance features. SQL Server features like SQL CLR integration,\", \" SQL Server Agent, and cross-database querying are not supported in the standard Azure SQL Database.\", \" Those features are available only in the Azure SQL Database Managed Instance model.\\n\\nAzure SQL Data\", \"base is the only intelligent cloud database service that's built for app developers. It's also the o\", \"nly cloud database service that scales on-the-fly, without downtime, to help you efficiently deliver\", \" multitenant apps. Ultimately, Azure SQL Database leaves you more time to innovate, and it accelerat\", \"es your time to market. You can build secure apps and connect to your SQL database by using the lang\", \"uages and platforms that you prefer.\\n\\nAzure SQL Database offers the following benefits:\\n\\n- Built-in \", \"intelligence (machine learning) that learns and adapts to your app\\n- On-demand database provisioning\", \"\\n- A range of offers, for all workloads\\n- 99.99% availability SLA, zero maintenance\\n- Geo-replicatio\", \"n and restore services for data protection\\n- Azure SQL Database Point in Time Restore feature\\n- Comp\", \"atibility with SQL Server 2016, including hybrid and migration\\n\\nThe standard Azure SQL Database is c\", \"loser to PaaS than Azure SQL Database Managed Instance. Prefer the standard Azure SQL Database becau\", \"se you'll get more benefits from a managed cloud. However, Azure SQL Database has some key differenc\", \"es from regular and on-premises SQL Server instances. Depending on your existing application's datab\", \"ase requirements, and your enterprise requirements and policies, it might not be the best choice whe\", \"n you are planning your migration to the cloud.\\n\\n## When to move your original RDBMS to a VM (IaaS)\\n\", \"\\nOne of your migration options is to move your original relational database management system (RDBMS\", \"), including Oracle, IBM DB2, MySQL, PostgreSQL, or SQL Server, to a similar server that's running o\", \"n an Azure VM. If you have existing applications that require the fastest migration to the cloud wit\", \"h minimal changes, or no changes at all, a direct migration to IaaS in the cloud might be a\\n\\nfair op\", \"tion. It might not be the best way to take advantage of all the cloud's benefits, but it's probably \", \"the fastest initial path.\\n\\nCurrently, Microsoft Azure supports up to 331 different database servers \", \"deployed as IaaS VMs. These include popular RDBMS like SQL Server, Oracle, MySQL, PostgreSQL, and IB\", \"M DB2, and many other NoSQL databases like MongoDB, Cassandra, DataStax, MariaDB, and Cloudera.\\n\\n## \", \"Note\\n\\nAlthough moving your RDBMS to an Azure VM might be the fastest way to migrate your data to the\", \" cloud (because it is IaaS), this approach requires a significant investment in your IT teams (datab\", \"ase administrators and IT pros). Enterprise teams need to be able to set up and manage high availabi\", \"lity, disaster recovery, and patching for SQL Server. This context also needs a customized environme\", \"nt, with full administrative rights.\\n\\n## When to migrate to SQL Server as a VM (IaaS)\\n\\nThere might b\", \"e a few cases where you still need to migrate to SQL Server as a regular VM. An example scenario is \", \"if you need to use SQL Server Reporting Services. In most cases, though, Azure SQL Database Managed \", \"Instance can provide everything you need to migrate from on-premises SQL servers, so migration to a \", \"SQL Server VM should be your last resort to try.\\n\\n## Use Azure Database Migration Service to migrate\", \" your relational databases to Azure\\n\\nYou can use Azure Database Migration Service to migrate relatio\", \"nal databases like SQL Server, and MySQL to Azure, whether your target database is Azure SQL Databas\", \"e, Azure SQL Database Managed Instance, or SQL Server on an Azure VM.\\n\\nThe automated workflow, with \", \"assessment reporting, guides you through the changes you need to make before you migrate the databas\", \"e. When you are ready, the service migrates the source database to Azure.\\n\\nWhenever you change an or\", \"iginal RDBMS, you might need to retest. You also might need to change the SQL sentences or Object-Re\", \"lational Mapping (ORM) code in your application, depending on testing results.\\n\\nIf you have any othe\", \"r database (for example, IBM DB2) and you opt for a lift and shift approach, you might want to conti\", \"nue using those databases as IaaS VMs in Azure, unless you are willing to perform a more complex dat\", \"a migration. A more complex data migration will require additional effort because you'd be migrating\", \" to a different database type with the new schema and different programming libraries.\\n\\n## Additiona\", \"l resources\\n\\n- Choose a cloud SQL Server option: Azure SQL Database (PaaS) or SQL Server on Azure VM\", \" (IaaS)\\n\\nhttps://learn.microsoft.com/azure/sql-database/sql-database-paas-vs-sql-server-iaas\\n\\n- SQL \", \"Server database migration to SQL Database in the cloud\\n- https://learn.microsoft.com/azure/sql-datab\", \"ase/sql-database-cloud-migrate\\n- Azure SQL Database https://azure.microsoft.com/services/sql-databas\", \"e/?v=16.50\\n- SQL Server on virtual machines https://azure.microsoft.com/services/virtual-machines/sq\", \"l-server/\\n\\nExisting NET application modernization: Maturity models\\n\\nExisting apps\\n\\nNET web apps (on-\", \"premises)\\n\\nMonolithic architecture\\n\\nOn-premises\\n\\nCloud\\n\\nInfrastructure-Ready\\n\\nMonolithic &amp; N-Tie\", \"r\\n\\nAzure\\n\\nCloud-Optimized\\n\\nContainerized &amp; Managed\\n\\nMonolithic &amp; N-Tier\\n\\nAzure\\n\\nCloud-Native\", \"\\n\\nMicroservice architecture\\n\\nMicroservices architectures\\n\\nAzure\\n\\n## Modernize existing .NET apps to \", \"Cloud-Optimized applications\\n\\nVision: Modernize your existing .NET Framework applications to Cloud-O\", \"ptimized applications to drastically improve your deployment agility, so you can ship faster and low\", \"er application's delivery costs.\\n\\nTo take advantage of the benefits of the cloud and new technologie\", \"s like containers, you should at least partially modernize your existing .NET applications. Ultimate\", \"ly, modernizing your enterprise applications will lower your total cost of ownership.\\n\\nPartially mod\", \"ernizing an app doesn't necessarily mean a full migration and rearchitecture. You can initially mode\", \"rnize your existing applications with important but easy to do modernization. You can maintain your \", \"current code base, written in existing .NET Framework versions, with any Windows and IIS dependencie\", \"s. Figure 4-1 highlights how Cloud-Optimized apps are positioned in Azure application modernization \", \"maturity models.\\n\\nFigure 4-1. Positioning Cloud-Optimized applications\\n\\n<!-- image -->\\n\\n## Reasons t\", \"o modernize existing .NET apps to CloudOptimized applications\\n\\nWith a Cloud-Optimized application, y\", \"ou can rapidly and repeatedly deliver reliable applications to your customers. You gain essential ag\", \"ility and reliability by deferring much of the operational complexity of your app to the platform.\\n\\n\", \"If you can't get your applications to market quickly, by the time you ship your app, the market you \", \"were targeting will have evolved. You might be too late, no matter how well the application was arch\", \"itected or engineered. You might be failing or not reach ing your full potential because you can't s\", \"ync app delivery with the needs of the market.\\n\\nThe need for continuous business innovation pushes d\", \"evelopment and operations teams to the limit. The only way to achieve the agility you need in contin\", \"uous business innovation is by modernizing your applications with technologies like containers and s\", \"pecific Cloud-Optimized application principles.\\n\\nThe bottom line is that when an organization builds\", \" and manages applications that are CloudOptimized, it can put solutions in the hands of customers so\", \"oner and bring new ideas to market when they are relevant.\\n\\n## Cloud-Optimized application principle\", \"s and tenets\\n\\nImprovements in the cloud are mostly focused on meeting two goals: Reduce costs and im\", \"prove business growth by improving agility. These goals are achieved by simplifying processes and re\", \"ducing friction when you release and ship applications.\\n\\nYour application is Cloud-Optimized if you \", \"can-in an agile manner-develop your app autonomously from other on-premises apps, and then release, \", \"deploy, autoscale, monitor, and troubleshoot your app in the cloud.\\n\\nThe key is agility . You can't \", \"ship with agility unless you reduce to an absolute minimum any deployment-to-production issues and d\", \"ev/test environment issues. Containers (specifically, Docker, as a de facto standard) and managed se\", \"rvices were designed specifically for this purpose.\\n\\nTo achieve agility, you also need automated Dev\", \"Ops processes that are based on CI/CD pipelines that release to scalable platforms in the cloud. CI/\", \"CD platforms (like Azure DevOps Services or Jenkins) that deploy to a scalable and resilient cloud p\", \"latform (like Azure App Service or Azure Kubernetes Service) are key technologies for achieving agil\", \"ity in the cloud.\\n\\nThe following list describes the main tenets or practices for Cloud-Optimized app\", \"lications. Note that you can adopt all or only some of these principles, in a progressive or increme\", \"ntal approach:\\n\\n- Containers . Containers give you the ability to include application dependencies w\", \"ith the application itself. Containerization significantly reduces the number of issues you might en\", \"counter when you deploy to production environments or test in staging environments. Ultimately, cont\", \"ainers improve the agility of application delivery.\\n\\nCloud-Optimized application\\n\\n- Resilient and sc\", \"alable cloud . The cloud provides a platform that is managed, elastic, scalable, and resilient. Thes\", \"e characteristics are fundamental to gain cost improvements and ship highly available and reliable a\", \"pplications in a continuous delivery. Managed services like managed databases, managed cache as a se\", \"rvice (CaaS), and managed storage are fundamental pieces in alleviating the maintenance costs of you\", \"r application.\\n- Monitoring . You can't have a reliable application without having a good way to det\", \"ect and diagnose exceptions and application performance issues. You need to get actionable insights \", \"through application performance management and instant analytics.\\n- DevOps culture and continuous de\", \"livery . Adopting DevOps practices requires a cultural change in which teams no longer work in indep\", \"endent silos. CI/CD pipelines are possible only when there is an increased collaboration between dev\", \"elopment and IT operations teams, supported by containers and CI/CD tools.\\n\\nFigure 4-2 shows the mai\", \"n optional pillars of a Cloud-Optimized application. The more pillars you implement, the readier you\", \"r application will be to succeed in meeting your customers' expectations.\\n\\nFigure 4-2. Main pillars \", \"of a Cloud-Optimized application\\n\\nTo summarize, a Cloud-Optimized application is an approach to buil\", \"ding and managing applications that takes advantage of the cloud computing model, while using a comb\", \"ination of containers, managed cloud infrastructure, resilient application techniques, monitoring, c\", \"ontinuous delivery, and DevOps, all without the need to rearchitect and recode your existing applica\", \"tions.\\n\\nYour organization can adopt these technologies and approaches gradually. You don't have to e\", \"mbrace all of them, all at once. You can adopt them incrementally, depending on enterprise prioritie\", \"s and user needs.\\n\\n## Benefits of a Cloud-Optimized application\\n\\nYou can get the following benefits \", \"by converting an existing application to a Cloud-Optimized application (without rearchitecting or co\", \"ding):\\n\\n- Lower costs, because the managed infrastructure is handled by the cloud provider . CloudOp\", \"timized applications get the benefits of the cloud by using the cloud's out -of-thebox elasticity, a\", \"utoscale, and high availability. Benefits are related not only to the compute features (VMs and cont\", \"ainers), but also depend on the resources in the cloud, like DBaaS, CaaS, and any infrastructure an \", \"application might needed.\\n- Resilient application and infrastructure . When you migrate to the cloud\", \", you need to embrace transient failures; failures will occur in the cloud. Also, cloud infrastructu\", \"re and hardware are 'replaceable,' which increases opportunities for transient downtime. At the same\", \" time, inner cloud capabilities and certain application development techniques that implement resili\", \"ency and automate recovery make it much easier to recover from unexpected failures in the cloud.\\n- D\", \"eeper insights into application performance . Cloud monitoring tools like Azure Application Insights\", \" provide visualization for health management, logging, and notifications. Audit logs make applicatio\", \"ns easy to debug and audit, fundamental for a reliable cloud application.\\n- Application portability,\", \" with agile deployments . Containers (either Linux or Windows containers based on Docker Engine) off\", \"er the best solution to avoiding a cloud-locked application. By using containers, Docker hosts, and \", \"multi-cloud orchestrators, you can easily move from one environment or cloud to another. Containers \", \"eliminate the friction that typically occurs in deployments to any environment (stage/test/productio\", \"n).\\n\\nAll of these benefits ultimately provide key cost reductions for your end-to-end application li\", \"fecycle.\\n\\nIn the following sections, these benefits are explained in more detail, and are linked to \", \"specific technologies.\\n\\n## Microsoft technologies in cloud-optimized applications\\n\\nThe following lis\", \"t describes the tools, technologies, and solutions that are recognized as requirements for Cloud-Opt\", \"imized apps. You can adopt Cloud-Optimized elements selectively or gradually, depending on your prio\", \"rities.\\n\\n- Cloud infrastructure : The infrastructure that provides the compute platform, operating s\", \"ystem, network, and storage. Microsoft Azure is positioned at this level.\\n- Runtime : This layer pro\", \"vides the environment for the application to run. If you are using containers, this layer usually is\", \" based on Docker Engine, running either on Linux hosts or on Windows hosts. (Windows Containers are \", \"supported beginning with Windows Server 2016.\\n\\nWindows Containers is the best choice for existing .N\", \"ET Framework applications that run on Windows.)\\n\\n- Managed cloud : When you choose a managed cloud o\", \"ption, you can avoid the expense and complexity of managing and supporting the underlying infrastruc\", \"ture, VMs, OS patches, and networking configuration. If you choose to migrate by using IaaS, you are\", \" responsible for all of these tasks, and for associated costs. In a managed cloud option, you manage\", \" only the applications and services that you develop. The cloud service provider typically manages e\", \"verything else. Examples of managed cloud services in Azure include Azure SQL Database, Azure Redis \", \"Cache, Azure Cosmos DB, Azure Storage, Azure Database for MySQL, Azure Database for PostgreSQL, Azur\", \"e Active Directory, and managed compute services like VM scale sets, Azure App Service, and Azure Ku\", \"bernetes Service.\\n- Application development : You can choose from many languages when you build appl\", \"ications that run in containers. This guide focuses on .NET, but, you can develop container-based ap\", \"ps by using other languages, like Node.js, Python, Spring/Java, or Go.\\n- Monitoring, telemetry, logg\", \"ing, and auditing : The ability to monitor and audit applications and containers that are running in\", \" the cloud is critical for any Cloud-Optimized application. Azure Application Insights and Microsoft\", \" Operations Management Suite are the main Microsoft tools that provide monitoring and auditing for C\", \"loud-Optimized apps.\\n- Provisioning : Automation tools help you provision the infrastructure and dep\", \"loy an application to multiple environments (production, testing, staging). You can use tools like C\", \"hef and Puppet to manage an application's configuration and environment. This layer also can be impl\", \"emented by using simpler and more direct approaches. For example, you can deploy directly by using A\", \"zure command-line interface (Azure CLI) tooling, and then use the continuous deployment and release \", \"management pipelines in Azure DevOps Services.\\n- Application lifecycle : Azure DevOps Services and o\", \"ther tools, like Jenkins, are built automation servers that help you implement CI/CD pipelines, incl\", \"uding release management.\\n\\nThe next sections of this chapter, and the related walkthroughs, focus sp\", \"ecifically on details about the runtime layer (Windows Containers). The guidance describes the ways \", \"you can deploy Windows Containers on Windows Server 2016 (and later versions) VMs and Azure Containe\", \"r Instances. It also covers more advanced PaaS platforms like Azure App Service and orchestrator lik\", \"e Azure Kubernetes Service.\\n\\n## Monolithic applications can be Cloud-Optimized\\n\\nIt's important to hi\", \"ghlight that monolithic applications (applications that are not based on microservices) can be Cloud\", \"-Optimized applications. You can build and operate monolithic applications that take advantage of th\", \"e cloud computing model by using a combination of containers, continuous delivery, and DevOps. If an\", \" existing monolithic application is right for your business goals, you can modernize it and make it \", \"Cloud-Optimized.\\n\\nSimilarly, if monolithic applications can be Cloud-Optimized applications, other, \", \"more complex architectures like N-Tier applications can also be modernized as Cloud-Optimized applic\", \"ations.\\n\\nExisting .NET application modernization: Maturity models\\n\\nExisting apps\\n\\n.NET web apps (on-\", \"premises)\\n\\nMonolithic architecture\\n\\nCloud\\n\\nInfrastructure-Ready\\n\\nMonolithic &amp; N-Tier\\n\\nCloud-Opti\", \"mized\\n\\nContainerized &amp; Managed\\n\\nMonolithic &amp; N-Tier\\n\\nCloud-Native\\n\\nMicroservice architecture\", \"\\n\\nMicroservices architectures\\n\\n## What about Cloud-Native applications?\\n\\nOn-premises\\n\\nAlthough Cloud\", \"-Native applications are not the main focus of this guide, it's helpful to have an understanding of \", \"this modernization maturity level, and to distinguish it from Cloud-Optimized applications. Minimal \", \"code changes Architected for the cloud, needs new code\\n\\nFigure 4-3 positions Cloud-Native apps in th\", \"e application modernization maturity levels:\\n\\nFigure 4-3. Positioning Cloud-Native applications\\n\\n<!-\", \"- image -->\\n\\nThe Cloud-Native modernization maturity level usually requires new development investme\", \"nts. Moving to the Cloud-Native level typically is driven by business need to modernize applications\", \" as much as possible to drastically improve scale in large applications by creating autonomous subsy\", \"stems (microservices) that can be deployed and scale independently from other areas of the applicati\", \"on while lowering costs in the long term and increase evolution agility of those autonomous app's pa\", \"rts that provide signific ant compete advantages.\\n\\nThe main pillars of Cloud-Native applications are\", \" based on microservices architecture approaches, which can evolve with agility and scale to limits t\", \"hat would be difficult to achieve in a monolithic architecture, deployed to either on-premises or cl\", \"oud environment.\\n\\nFigure 4-4 shows the main characteristics of the Cloud-Native model.\\n\\nCloud-Native\", \" in Azure\\n\\nMain characteristics\\n\\n<!-- image -->\\n\\n## Cloud-native\\n\\nMicroservices\\n\\nDocker containers\\n\\n\", \"Orchestrators (AKS/Kubernetes, Service Fabric)\\n\\nServerless (Azure Functions) Cloud-resilient .NET Co\", \"re (cross-platform, Linux/Windows) Other languages\\n\\nFigure 4-4. Cloud-Native characteristics\\n\\nIn add\", \"ition, you can extend basic modern web apps and cloud-native apps by adding other services, like art\", \"ificial intelligence (AI), machine learning (ML), and IoT. You might use any of these services to ex\", \"tend any of the possible Cloud-Optimized approaches.\\n\\nThe fundamental difference in applications at \", \"the Cloud-Native level is in the application architecture. Cloud-native applications are, by definit\", \"ion, apps that are based on microservices. Cloud-native apps require special architectures, technolo\", \"gies, and platforms, compared to a monolithic web application or traditional N-Tier application.\\n\\n##\", \" Cloud-native applications details\\n\\nCloud-Native is a more advanced or mature state for large and mi\", \"ssion-critical applications. CloudNative applications usually require architecture and design that a\", \"re created from scratch instead of by modernizing existing applications. The key difference between \", \"a Cloud-Native application and a simpler Cloud-Optimized web app is the recommendation to use micros\", \"ervices architectures in a cloud-native approach. Cloud-Optimized apps can also be monolithic web ap\", \"ps or N-Tier apps.\\n\\nThe Twelve-Factor App (a collection of patterns that are closely related to micr\", \"oservices approaches) is also considered a requirement for cloud-native application architectures.\\n\\n\", \"The Cloud Native Computing Foundation (CNCF) is a primary promoter of cloud-native principles. Micro\", \"soft is a member of the CNCF.\\n\\nFor detailed guidance on how to design and develop cloud-native appli\", \"cations, read the following free e-books:\\n\\n- Architecting Cloud-Native .NET Applications for Azure\\n-\", \" .NET Microservices: Architecture for containerized .NET applications.\\n\\nThe most important factor to\", \" consider if you migrate a full application to the cloud-native model is that you must rearchitect t\", \"o a microservices-based architecture. This approach clearly requires a significant investment in dev\", \"elopment because of the large refactoring process involved. This option usually is chosen for missio\", \"n-critical applications that need new levels of scalability and long-term agility. But, you could st\", \"art moving toward cloud-native by adding microservices for just a few new scenarios, and eventually \", \"refactor the application fully as microservices. This step is an incremental approach that is the be\", \"st option for some scenarios.\\n\\n## What about microservices?\\n\\nUnderstanding microservices and how the\", \"y work is important when you are considering cloud-native applications for your organization.\\n\\nThe m\", \"icroservices architecture is an advanced approach that you can use for applications that are created\", \" from scratch or when you evolve existing applications toward cloud-native applications. You can sta\", \"rt by adding a few microservices to existing applications to learn about the new microservices parad\", \"igms. But clearly, you need to architect and code, especially for this type of architectural approac\", \"h.\\n\\nHowever, microservices are not mandatory for any new or modern application. Microservices are no\", \"t a 'magic bullet,' and they aren't the single, best way to create every application. How and when y\", \"ou use microservices depends on the type of application that you need to build.\\n\\nThe microservices a\", \"rchitecture is becoming the preferred approach for distributed and large or complex mission-critical\", \" applications that are based on multiple, independent subsystems in the form of autonomous services.\", \" In a microservices-based architecture, an application is built as a collection of services that can\", \" be independently developed, tested, versioned, deployed, and scaled. This approach can include any \", \"related, autonomous database per microservice.\\n\\nFor a detailed look at a microservices architecture \", \"that you can implement by using .NET, see the downloadable PDF e-book .NET microservices: Architectu\", \"re for containerized .NET applications. The guide also is available online.\\n\\nBut even in scenarios i\", \"n which microservices offer powerful capabilities-independent deployment, strong subsystem boundarie\", \"s, and technology diversity-they also raise many new challenges. The challenges are related to distr\", \"ibuted application development, such as fragmented and independent data models; achieving resilient \", \"communication between microservices; the need for eventual consistency; and operational complexity. \", \"Microservices introduce a higher level of complexity compared to traditional monolithic applications\", \".\\n\\nBecause of the complexity of a microservices architecture, only specific scenarios and certain ap\", \"plication types are suitable for microservice-based applications. These include large and complex ap\", \"plications that have multiple, evolving subsystems. In thes e cases, it's worth investing in a more \", \"complex software architecture, for increased long-term agility and more efficient application mainte\", \"nance. But for less complex scenarios, it might be better to continue with a monolithic application \", \"approach or simpler N-Tier approaches.\\n\\nAs a final note, even at the risk of being repetitive about \", \"this concept, you shouldn't look at using microservices in your applications as 'all -in or nothing \", \"at all.' You can extend and evolve existing monolithic applications by adding new, small scenario s \", \"based on microservices. You don't need to start from scratch to start working with a microservices a\", \"rchitecture approach. In fact, we recommend that you evolve from using an existing monolithic or N-T\", \"ier application by adding new scenarios. Eventually, you can break down the application into autonom\", \"ous components or microservices. You can start evolving your monolithic applications in a microservi\", \"ces direction, step by step.\\n\\nIn any case, the rest of this present guidance focuses most of all on \", \"'no microservices -based apps' because this guidance is mainly targeting the modernization of existi\", \"ng apps that usually have monolithic or N-Tier architectures.\\n\\n## Deploy existing .NET apps as Windo\", \"ws containers\\n\\nDeployments that are based on Windows Containers are applicable to Cloud-Optimized ap\", \"plications and Cloud-Native applications.\\n\\nHowever, in this guide and especially in the following se\", \"ctions, it mostly focuses on using Windows Containers for Cloud-Optimized applications where you don\", \"'t need to rearchitect your application.\\n\\n## What are containers? (Linux or Windows)\\n\\nContainers are\", \" a way to wrap up an application into its own isolated package. In its container, the application is\", \" not affected by applications or processes that exist outside of the container. Everything the appli\", \"cation depends on to run successfully as a process is inside the container. Wherever the container m\", \"ight move, the requirements of the application will always be met, in terms of direct dependencies, \", \"because it is bundled with everything that it needs to run (library dependencies, runtimes, and so o\", \"n).\\n\\nThe main characteristic of a container is that it makes the environment the same across differe\", \"nt deployments because the container itself comes with all the dependencies it needs. You can debug \", \"the application on your machine, and then deploy it to another machine, with the same environment gu\", \"aranteed.\\n\\nA container is an instance of a container image. A container image is a way to package an\", \" app or service (like a snapshot), and then deploy it in a reliable and reproducible way. You could \", \"say that Docker is not only a technologyit's also a philosophy and a process.\\n\\nAs containers daily b\", \"ecome more common, they are becoming an industrywide 'unit of deployment.'\\n\\n## Benefits of container\", \"s (Docker Engine on Linux or Windows)\\n\\nBuilding applications by using containers-which also might be\", \" defined as lightweight building blocksoffers a significant increase in agility for building, shippi\", \"ng, and running any application, across any infrastructure.\\n\\nWith containers, you can take any app f\", \"rom development to production with little or no code change, thanks to Docker integration across Mic\", \"rosoft developer tools, operating systems, and the cloud.\\n\\nWhen you deploy to plain VMs, you probabl\", \"y already have a method in place for deploying ASP.NET apps to your VMs. It's likely, though, that y\", \"our method involves multiple manual steps or complex automated processes by using a deployment tool \", \"like Puppet, or a similar tool. You might need to perform tasks like modifying configuration items, \", \"copying application content between servers, and running interactive setup programs based on .msi se\", \"tups, followed by testing. All those steps in the deployment add time and risk to deployments. You w\", \"ill get failures whenever a dependency is not present in the target environment.\\n\\nIn Windows Contain\", \"ers, the process of packaging applications is fully automated. Windows Containers is based on the Do\", \"cker platform, which offers automatic updates and rollbacks for container deployments. The main impr\", \"ovement you get from using the Docker engine is that you create images, which are like snapshots of \", \"your application, with all its dependencies. The images are Docker images (a Windows container image\", \", in this case). The images run ASP.NET apps in containers, without going back to source code. The c\", \"ontainer snapshot becomes the unit of deployment.\\n\\nMany organizations are containerizing existing mo\", \"nolithic applications for the following reasons:\\n\\n- Release agility through improved deployment . Co\", \"ntainers offer a consistent deployment contract between development and operations. When you use con\", \"tainers, you won't hear developers say, 'It works on my machine, why not in production?' They can sa\", \"y, 'It runs as a container, so it will run in produc tion.' The packaged application, with all its d\", \"ependencies, can be executed in any supported container-based environment. It will run the way it wa\", \"s intended to run in all deployment targets (dev, QA, staging, production). Containers eliminate mos\", \"t frictions when they move from one stage to the next, which greatly improves deployment, and you ca\", \"n ship faster.\\n- Cost reductions . Containers lead to lower costs, either by the consolidation and r\", \"emoval of existing hardware, or from running applications at a higher density per unit of hardware.\\n\", \"- Portability . Containers are modular and portable. Docker containers are supported on any server o\", \"perating system (Linux and Windows), in any major public cloud (Microsoft Azure, Amazon AWS, Google,\", \" IBM), and in on-premises and private or hybrid cloud environments.\\n- Control . Containers offer a f\", \"lexible and secure environment that's controlled at the container level. A container can be secured,\", \" isolated, and even limited by setting execution constraint policies on the container. As detailed i\", \"n the section about Windows Containers, Windows Server 2016 and Hyper-V containers offer additional \", \"enterprise support options.\\n\\nSignificant improvements in agility, portability, and control ultimatel\", \"y lead to significant cost reductions when you use containers to develop and maintain applications.\\n\", \"\\n## What is Docker?\\n\\nDocker is an open-source project that automates the deployment of applications \", \"as portable, selfsufficient containers that can run in the cloud or on-premises. Docker is also a co\", \"mpany that promotes and evolves this technology. The company works in collaboration with cloud, Linu\", \"x, and Windows vendors, including Microsoft.\\n\\nWindows Server\\n\\nCustomer\\n\\nDatacenter\\n\\n<!-- image -->\\n\\n\", \"Container\\n\\nFigure 4-6. Docker deploys containers at all layers of the hybrid cloud\\n\\nTo someone famil\", \"iar with virtual machines, containers might appear to be remarkably similar. A container runs an ope\", \"rating system, has a file system, and can be accessed over a network, just like a physical or virtua\", \"l computer system. However, the technology and concepts behind containers are vastly different from \", \"virtual machines. From a developer point of view, a container must be treated more like a single pro\", \"cess. In fact, a container has a single entry point for one process.\\n\\nDocker containers (for simplic\", \"ity, containers ) can run natively on Linux and Windows. When running regular containers, Windows co\", \"ntainers can run only on Windows hosts (a host server or a VM), and Linux containers can run only on\", \" Linux hosts. However, in recent versions of Windows Server and Hyper-V containers, a Linux containe\", \"r can also run natively on Windows Server by using the Hyper-V isolation technology that currently i\", \"s available only in Windows Server Containers.\\n\\nIn the near future, mixed environments that have bot\", \"h Linux and Windows containers will be possible and even common.\\n\\n## Benefits of Windows Containers \", \"for your existing .NET applications\\n\\nThe benefits of using Windows Containers are fundamentally the \", \"same benefits you get from containers in general. Using Windows Containers is about greatly improvin\", \"g agility, portability, and control.\\n\\nExisting .NET applications refer to those applications that we\", \"re created using the .NET Framework. For example, they might be traditional ASP.NET web applications\", \"they don't use .NET Core or .NET 5+, which is newer and runs cross-platform on Linux, Windows, and M\", \"acOS.\\n\\nThe main dependency in the .NET Framework is Windows. It also has secondary dependencies, lik\", \"e IIS, and System.Web in traditional ASP.NET.\\n\\nA .NET Framework application must run on Windows, per\", \"iod. If you want to containerize existing .NET Framework applications and you can't or don't want to\", \" invest in a migration to .NET Core or later('If it\\n\\nExisting\\n\\n\\u2022NET\\n\\napps\\n\\nWhat OS to target with .N\", \"ET containers\\n\\n.NET Framework\\n\\nWindows\\n\\nCompatible with works properly, don't migrate it'), the only\", \" choice you have for containers is to use Windows Containers. Larger Image\\n\\nSo, one of the main bene\", \"fits of Windows Containers is that they offer you a way to modernize your existing .NET Framework ap\", \"plications that are running on Windows-through containerization. Ultimately, Windows Containers gets\", \" you the benefits that you are looking for by using containersagility, portability, and better contr\", \"ol.\\n\\nDebian, Alpine, etc.\\n\\nKestrel\\n\\n## Choose an OS to target with .NET-based containers\\n\\nGiven the \", \"diversity of operating systems that are supported by Docker, as well as the differences between .NET\", \" Framework and .NET Core, you should target a specific OS and specific versions based on the framewo\", \"rk you are using.\\n\\nFor Windows, you can use Windows Server Core or Windows Nano Server. These Window\", \"s versions provide different characteristics (like IIS versus a self-hosted web server like Kestrel)\", \" that might be needed by .NET Framework or .NET applications.\\n\\nFor Linux, multiple distros are avail\", \"able and supported in official .NET Docker images (like Debian).\\n\\nFigure 47 shows OS versions that y\", \"ou can target, depending on the app's version of the .NET Framework.\\n\\nFigure 4-7. Operating systems \", \"to target based on .NET Framework version\\n\\n<!-- image -->\\n\\nIn migration scenarios for existing or le\", \"gacy applications that are based on .NET Framework applications, the main dependencies are on Window\", \"s and IIS. Your only option is to use Docker images based on Windows Server Core and the .NET Framew\", \"ork.\\n\\nWhen you add the image name to your Dockerfile file, you can select the operating system and v\", \"ersion by using a tag, as in the following examples for .NET Framework-based Windows container image\", \"s:\\n\\n| Tag                                                                    | System and version   \", \"                                                            |\\n|-------------------------------------\", \"-----------------------------------|----------------------------------------------------------------\", \"------------------|\\n| mcr.microsoft.com/dotnet/framework/runti me:4.x-windowsservercore-20H2 | .NET \", \"Framework 4.x on Windows Server Core                                        |\\n| mcr.microsoft.com/do\", \"tnet/framework/aspne t:4.x-windowsservercore-20H2  | .NET Framework 4.x with additional ASP.NET cust\", \"omization, on Windows Server Core |\\n\\nFor .NET (cross-platform for Linux and Windows), the tags would\", \" look like the following:\\n\\n| Tag                                                       | System and \", \"version                       |\\n|-----------------------------------------------------------|-------\", \"-----------------------------------|\\n| mcr.microsoft.com/dotnet/runtime:7.0                      | .\", \"NET runtime-only on Linux               |\\n| mcr.microsoft.com/dotnet/runtime:7.0- nanoserver-ltsc202\", \"2 | .NET runtime-only on Windows Nano Server |\\n\\n## Multi-arch images\\n\\nSince 2017, Docker has had a f\", \"eature called multi-arch images. .NET Docker images can use multi-arch tags. Your Dockerfile files n\", \"o longer need to define the operating system that you are targeting. The multi-arch feature allows a\", \" single tag to be used across multiple machine configurations. For instance, with multi-arch, you ca\", \"n use one common tag: mcr.microsoft.com/dotnet/runtime:7.0 . If you pull that tag from a Linux conta\", \"iner environment, you get the Debian-based image. If you pull that tag from a Windows container envi\", \"ronment, you get the Nano Server-based image.\\n\\nFor .NET Framework images, because the traditional .N\", \"ET Framework supports only Windows, you cannot use the multi-arch feature.\\n\\n## Windows container typ\", \"es\\n\\nLike Linux containers, Windows Server containers are managed by using Docker Engine. Unlike Linu\", \"x containers, Windows containers include two different container types, or run times-Windows Server \", \"containers and Hyper-V isolation.\\n\\nWindows Server containers : Provides application isolation throug\", \"h process and namespace isolation technology. A Windows Server container shares a kernel with the co\", \"ntainer host and all containers that are running on the host. These containers do not provide a host\", \"ile security boundary and should not be used to isolate untrusted code. Because of the shared kernel\", \" space, these containers require the same kernel version and configuration.\\n\\nHyper-V isolation : Exp\", \"ands on the isolation provided by Windows Server Containers by running each container on a highly op\", \"timized VM. In this configuration, the kernel of the container host is not shared with other contain\", \"ers on the same host. These containers are designed for hostile multitenant hosting, with the same s\", \"ecurity assurances of a VM. Because these containers don't share the kernel with the host or other c\", \"ontainers on the host, they can run kernels with different versions and configurations (with support\", \"ed versions). For example, all Windows containers on Windows 10 use Hyper-V isolation to utilize the\", \" Windows Server kernel version and configuration.\\n\\nRunning a container on Windows with or without Hy\", \"per-V isolation is a run-time decision. You might choose to create the container with Hyper-V isolat\", \"ion initially, and at run time, choose to run it as a Windows Server container instead.\\n\\n## Addition\", \"al resources\\n\\n- Windows Containers documentation https://learn.microsoft.com/virtualization/windowsc\", \"ontainers/\\n- Windows Containers fundamentals https://learn.microsoft.com/virtualization/windowsconta\", \"iners/about/\\n- Infographic: Microsoft and containers\\n\\nhttps://info.microsoft.com/rs/157-GQE-382/imag\", \"es/Container%20infographic%201.4.17.pdf\\n\\n## The container ecosystem in Azure\\n\\nIn previous sections, \", \"it's been explained what the benefits of Docker containers are as well as details on the specific co\", \"ntainer images for .NET applications. All that generic information is fundamental in order to develo\", \"p or containerize an application. However, when thinking about the production deployment environment\", \" or even QA and Dev/Test environments, Microsoft Azure provides an open and broad variety of choices\", \", a full container ecosystem in the cloud (shown in the diagram below). Depending on your specific a\", \"pplication's needs, you should choose one or another Azure product.\\n\\nPartner services\\n\\nOpenShift\\n\\nPi\", \"votal Cloud\\n\\nFoundry\\n\\nDocker Enterprise\\n\\nEdition\\n\\nMesosphere\\n\\nDC/OS\\n\\nAzure container ecosystem\\n\\n## O\", \"SBA App Service Azure Container Registry\\n\\nAzure services\\n\\n(ACR)\\n\\nFigure 4-7.5. The container ecosyst\", \"em in Azure\\n\\n<!-- image -->\\n\\nFrom the container ecosystem in Azure, the following products supportin\", \"g containers that are considered infrastructure:\\n\\n- Azure Container Instances (ACI)\\n- Azure Virtual \", \"Machines (With container's support)\\n- Azure Virtual Machine Scale Sets (With container's support)\\n\\nF\", \"rom those three, ACI provides a great benefit, which is the fact that you don't need to maintain the\", \" underlying OS, no need for you to upgrade/patch, etc. but ACI still is positioned in the infrastruc\", \"ture level, as better explained in the upcoming sections of this book.\\n\\nThe products in Azure suppor\", \"ting containers that are at the same time positioned more in the PaaS (Platform as a Service) level \", \"are:\\n\\n- Azure App Service\\n- Azure Kubernetes Service (AKS and ACS)\\n- Azure Batch\\n\\nThen, Azure Contai\", \"ner Registry is a high scalable container registry hosted in Azure that you can use from all the pre\", \"vious products when registering and deploying your custom container images.\\n\\nIn addition, from your \", \"containers, you can consume other managed services in Azure like Azure SQL Database, Azure Redis cac\", \"he, Azure Cosmos DB, etc. plus there are third-party solutions/platforms\\n\\navailable in Azure Marketp\", \"lace like Cloud Foundry and OpenShift where you can also use containers within Azure.\\n\\nIn the next s\", \"ections, you can explore Microsoft's recommendations on when to use each of those Azure products and\", \" solutions specifically when targeting Windows Containers.\\n\\n## When not to deploy to Windows Contain\", \"ers\\n\\nSome Windows technologies are not supported by Windows Containers. In those cases, you still ne\", \"ed to migrate to the standards VMs, usually with just Windows and IIS.\\n\\nFor more information, see th\", \"e list of Applications not supported by Windows containers.\\n\\n## Additional resources\\n\\n- Virtual mach\", \"ines and containers in Azure\\n\\nhttps://azure.microsoft.com/overview/containers/\\n\\n## When to deploy Wi\", \"ndows Containers in your onpremises IaaS VM infrastructure\\n\\n- Your organization might not be ready t\", \"o move to the cloud, or it might not be able to move to the cloud for a business reason. But, you ca\", \"n still get the benefits of using Windows Containers in your own datacenters.\\n- You might have other\", \" artifacts that are being used on-premises, and which might slow you down when you try to move to th\", \"e cloud. For example, security or authentication dependencies with on-premises Windows Server Active\", \" Directory, or any other on-premises asset.\\n- If you start using Windows Containers today, you can m\", \"ake a phased migration to the cloud tomorrow from a much better position. Windows Containers is beco\", \"ming a unit of deployment for any cloud, with no lock-in.\\n\\n## When to deploy Windows Containers to A\", \"zure VMs (IaaS cloud)\\n\\nIf your organization is using Azure VMs, even if you are also using Windows C\", \"ontainers, you are still dealing with IaaS. That means that dealing with infrastructure operations, \", \"VM OS patches, and infrastructure complexity for highly scalable applications when you need to deplo\", \"y to multiple VMs in a load-balanced infrastructure. The main scenarios for using Windows Containers\", \" in an Azure VM are:\\n\\n- Dev/test environment : A VM in the cloud is perfect for development and test\", \"ing in the cloud. You can rapidly create or stop the environment depending on your needs.\\n\\n- Small a\", \"nd medium scalability needs : In scenarios where you might need just a couple of VMs for your produc\", \"tion environment, managing a few VMs might be affordable until you can move to more advanced PaaS en\", \"vironments, like orchestrators.\\n- Production environment with existing deployment tools : You might \", \"be moving from an on-premises environment in which you have invested in tools to make complex deploy\", \"ments to VMs or bare-metal servers (like Puppet or similar tools). To move to the cloud with minimal\", \" changes to production environment deployment procedures, you might continue to use those tools to d\", \"eploy to Azure VMs. However, you'll want to use Windows Containers as the unit of deployment to impr\", \"ove the deployment experience.\\n\\n## When to deploy Windows Containers to Azure Container Instances (A\", \"CI)\\n\\nThe main value proposition of Azure Container Instances is that you can right away deploy conta\", \"iners to it and you don't need to maintain that environment, you don't need to upgrade/patch the und\", \"erlying operating system or VMs, all that is transparent and you just deploy containers into a ready\", \"-to-use environment.\\n\\nThe reasons and scenarios when you would want to use ACI are similar to the ma\", \"in scenarios when you use Azure VMs with containers, so basically, the main scenarios for using Azur\", \"e Container Instances are:\\n\\n- Dev/Test scenarios\\n- Task automation\\n- CI/CD agents\\n- Small/scale batc\", \"h processing\\n- Simple web apps\\n\\nThe simple web apps scenario is a fair scenario for ACI but take int\", \"o account that since in ACI you can only have a single container instance per container image, you w\", \"on't have high availability and only have limited scalability.\\n\\nHowever, even when ACI is considered\", \" infrastructure because it just provides single container instances, there is a huge benefit compare\", \"d to regular Azure VMs with Windows Server. With ACI, you just deploy the containers into a self-mai\", \"ntained environment and you just pay for those containers. You don't need to maintain/update/patch V\", \"Ms, so it is a much better platform for most scenarios where you might be using VMs with containers.\", \" Using ACI is straight forward, you just deploy a container, there's no need to create a VM environm\", \"ent you just deploy containers.\\n\\nThe main benefits of Azure Container Instances (ACI) are:\\n\\n- Run co\", \"ntainers without managing servers\\n- Increase agility with containers on demand\\n- Deploy containers t\", \"o the cloud with unprecedented simplicity and speed -with a single command.\\n\\n- Secure applications w\", \"ith hypervisor isolation\\n\\nIn short, with ACI you can develop apps fast without managing virtual mach\", \"ines or having to learn new tools. It's just your application, in a container, running in the cloud.\", \"\\n\\n## When to deploy Windows Containers to Azure Kubernetes Service (AKS)\\n\\nAzure Kubernetes Service (\", \"AKS) simplifies deploying a managed Kubernetes cluster in Azure by offloading the operational overhe\", \"ad to Azure. You get an open solution that offers portability both for your containers and for your \", \"application configuration. You select the size, the number of hosts, and the orchestrator tools. Azu\", \"re Kubernetes Service handles the infrastructure for you. It also supports Windows Server containers\", \" alongside Linux containers. For more details on Windows OS support and the feature differences betw\", \"een Windows and Linux, read the FAQ.\\n\\nThe main benefits of Azure Kubernetes Service (AKS) are:\\n\\n- Id\", \"entity and security management\\n- Integrated logging and monitoring\\n- Cluster node and pod scaling.\\n-\", \" Ingress with HTTP application routing\\n- AKS supports the Docker image format. For private storage o\", \"f your Docker images, you can integrate AKS with Azure Container Registry (ACR).\\n\\nIf you are already\", \" working with open-source orchestrators like Kubernetes, Docker Swarm, or DC/OS, you don't need to c\", \"hange your existing management practices to move container workloads to the cloud. Use the applicati\", \"on management tools that you're already familiar with and connect via the standard API endpoints for\", \" the orchestrator of your choice.\\n\\n## Choosing Azure compute platforms for containerbased applicatio\", \"ns\\n\\nAs you have noticed after reading the previous sections, Azure is an open cloud that offers mult\", \"iple choices. You can use the best fit for your needs, however, it also surfaces questions about wha\", \"t product/technology you should use for your containerized applications.\\n\\nAs a by-default recommenda\", \"tion, the following is the main criteria recommended in this guidance:\\n\\n- Single monolithic app: Cho\", \"ose Azure App Service\\n- N-Tier app: Choose orchestrators such as Azure Kubernetes Service (AKS) or A\", \"pp Service if you have a single or a few back-end services\\n- Microservices: Choose AKS or Azure Web \", \"Apps for Containers\\n- Serverless functions &amp; event handlers: Choose Azure Functions\\n- Large-scal\", \"e Batch: Choose Azure Batch\\n\\nHowever, this recommendation should be taken with a pinch of salt, as t\", \"he product's selection will depend on your specific application's needs and characteristics. Not all\", \" applications are the same even when initially they might look similar types.\\n\\nAfter a deeper analys\", \"is of the application's needs, the product selected could be different. But, as a starting point, it\", \" is good to have initial guidance from where you can start evaluating and testing based on certain p\", \"riority.\\n\\n## Additional resources\\n\\n- Choose an Azure compute service for your application\\n\\nhttps://l\", \"earn.microsoft.com/azure/architecture/guide/technology-choices/compute-decisiontree\\n\\n## Build resili\", \"ent services ready for the cloud: Embrace transient failures in the cloud\\n\\nResiliency is the ability\", \" to recover from failures and continue to function. Resiliency is not about avoiding failures, but a\", \"ccepting the fact that failures will occur, and then responding to them in a way that avoids downtim\", \"e or data loss. The goal of resiliency is to return the application to a fully functioning state aft\", \"er a failure.\\n\\nYour application is ready for the cloud when, at a minimum, it implements a software-\", \"based model of resiliency, rather than a hardware-based model. Your cloud application must embrace t\", \"he partial failures that will certainly occur. Design or partially refactor your application to achi\", \"eve resiliency with expected partial failures. It should be designed to cope with partial failures, \", \"like transient network outages and nodes, or VMs crashing in the cloud. Even containers being moved \", \"to a different node within an orchestrator cluster can cause intermittent short failures within the \", \"application.\\n\\n## Handling partial failure\\n\\nIn a cloudbased application, there's an ever -present ris\", \"k of partial failure. For instance, a single website instance or a container might fail, or it might\", \" be unavailable or unresponsive for a short time. Or, a single VM or server might crash.\\n\\nBecause cl\", \"ients and services are separate processes, a service might not be able to respond in a timely manner\", \" to a client's request. The service might be overloaded and respond slowly to requests, or it might \", \"not be accessible for a short time because of network issues.\\n\\nFor example, consider a monolithic .N\", \"ET application that accesses a database in Azure SQL Database. If the Azure SQL database or any othe\", \"r third-party service is unresponsive for a brief time (an Azure SQL database might be moved to a di\", \"fferent node or server, and be unresponsive for a few seconds), when the user tries to do any action\", \", the application might crash and show an exception at the same moment.\\n\\nResilient communication in \", \"cloud applications\\n\\nASP.NET app (MVC or WebForms) on\\n\\nASP.NET Web API or WCF on\\n\\nSQL database\\n\\nA sim\", \"ilar scenario might occur in an app that consumes HTTP services. The network or the service itself m\", \"ight not be available in the cloud during a short, transient failure.\\n\\nMicrosoft\\n\\nA resilient applic\", \"ation like the one shown in Figure 49 should implement techniques like 'retries with exponential bac\", \"koff' to give the application an opportunity to handle transient failures in resources. You also sho\", \"uld use 'circuit breakers' in your ap plications. A circuit breaker stops an application from trying\", \" to access a resource when it's actually a long -term failure. By using a circuit breaker, the appli\", \"cation avoids provoking a denial of service to itself.\\n\\nFigure 4-9. Partial failures handled by retr\", \"ies with exponential backoff\\n\\n<!-- image -->\\n\\nYou can use these techniques both in HTTP resources an\", \"d in database resources. In Figure 4-9, the application is based on a 3-tier architecture, so you ne\", \"ed these techniques at the services level (HTTP) and at the data tier level (TCP). In a monolithic a\", \"pplication that uses only a single app tier in addition to the database (no additional services or m\", \"icroservices), handling transient failures at the database connection level might be enough. In that\", \" scenario, just a particular configuration of the database connection is required.\\n\\nWhen implementin\", \"g resilient communications that access the database, depending on the version of .NET you are using,\", \" it can be straightforward (for example, with Entity Framework 6 or later . It's just a matter of co\", \"nfiguring the database connection). Or, you might need to use additional libraries like the Transien\", \"t Fault Handling Application Block (for earlier versions of .NET), or even implement your own librar\", \"y.\\n\\nWhen implementing HTTP retries and circuit breakers, the recommendation for .NET is to use the P\", \"olly library, which targets .NET Standard 1.1 (coverage: .NET Core 1.0, Mono, Xamarin, UWP, WP8.1+) \", \"and .NET Standard 2.0+ (coverage: .NET Core 2.0+, .NET Core 3.0 and later, Mono, Xamarin and UWP tar\", \"gets). The nuget package also includes direct targets for .NET Framework 4.6.1 and 4.7.2.\\n\\nTo learn \", \"how to implement strategies for handling partial failures in the cloud, see the following references\", \".\\n\\n## Additional resources\\n\\n- Implementing resilient communication to handle partial failure\\n\\nhttps:\", \"//learn.microsoft.com/dotnet/architecture/microservices/implement-resilientapplications/partial-fail\", \"ure-strategies\\n\\n- Entity Framework connection resiliency and retry logic (version 6 and later)\\n\\nhttp\", \"s://learn.microsoft.com/ef/ef6/fundamentals/connection-resiliency/retry-logic\\n\\n- The Transient Fault\", \" Handling Application Block\\n- https://learn.microsoft.com/previous-versions/msp-n-p/hh680934(v=pandp\", \".50)\\n- Polly library for resilient HTTP communication\\n- https://github.com/App-vNext/Polly\\n\\n## Moder\", \"nize your apps with monitoring and telemetry\\n\\nWhen you run an application in production, it's critic\", \"al that you have insights about how your application is performing. Is it performing at a high level\", \"? Are users getting errors, or is the application stable and reliable? You need rich performance mon\", \"itoring, powerful alerting, and dashboards to help ensure that your application is available and per\", \"forming as expected. You also need to be able to see quickly if there's a problem, determine how man\", \"y customers are affected, and perform a root -cause analysis to find and fix the issue.\\n\\n## Monitor \", \"your application with Application Insights\\n\\nApplication Insights is an extensible Application Perfor\", \"mance Management (APM) service for web developers who work on multiple platforms. Use it to monitor \", \"your live web application. Application Insights automatically detects performance anomalies. It incl\", \"udes powerful analytics tools to help you diagnose issues, and to help you understand what users act\", \"ually do with your app. Application Insights is designed to help you continuously improve performanc\", \"e and usability. It works for apps on a wide variety of platforms, including .NET, Node.js, and J2EE\", \", whether hosted on-premises or in the cloud. Application Insights integrates with your DevOps proce\", \"sses, and has connection points to various development tools.\\n\\nFigure 4-10 shows an example of how A\", \"pplication Insights monitors your application and how it surfaces those insights to a dashboard.\\n\\n5:\", \"20 PM TO 5:23 PM 5/18/2015 (IO SECOND GRAIN) - ASP NET WEB APPLICATION\\n\\nSettings\\n\\nTime range\\n\\nDelete\", \"\\n\\nEssentials\\n\\nApplication health\\n\\nOverview timeline\\n\\n35OMS\\n\\n30OMS\\n\\n250MS\\n\\n20OMS\\n\\n150MS\\n\\n100MS\\n\\nSOMS\\n\", \"\\nIMS\\n\\n2.55\\n\\n1S\\n\\n0.\\n\\n0.3\\n\\n15:20\\n\\nBrowsers\\n\\n5:20 PM TO 5:23 PM 5/18/2015 (09 SECOND GRAIN) - METRICS E\", \"XPLORER - MYPACKAGESEARCH\\n\\n+\\n\\nAlert rules\\n\\nSave favorite\\n\\nRestore defauits\\n\\nAdd chart\\n\\nTimeline\\n\\n2.5\", \"5\\n\\nFigure 4-10. Application Insights monitoring dashboard\\n\\n<!-- image -->\\n\\n## Monitor your Docker in\", \"frastructure with Log Analytics and its Container Monitoring solution\\n\\nAzure Log Analytics is part o\", \"f the Microsoft Azure overall monitoring solution . It's also a service in Operations Management Sui\", \"te (OMS). Log Analytics monitors cloud and on-premises environments (OMS for on-premises) to help ma\", \"intain availability and performance. It collects data generated by resources in your cloud and on-pr\", \"emises environments and from other monitoring tools to provide analysis across multiple sources.\\n\\nIn\", \" relation to Azure infrastructure logs, Log Analytics, as an Azure service, ingests log and metric d\", \"ata from other Azure services (via Azure Monitor), Azure VMs, Docker containers, and on-premises or \", \"other cloud infrastructures. Log Analytics offers flexible log search and out-of-the box analytics o\", \"n top of this data. It provides rich tools that you can use to analyze data across sources, it allow\", \"s complex queries across all logs, and it can proactively alert based on specified conditions. You c\", \"an even collect custom data in the central Log Analytics repository, where you can query and visuali\", \"ze it. You can also take advantage of the Log Analytics built-in solutions to immediately gain insig\", \"hts into the security and functionality of your infrastructure.\\n\\nYou can access Log Analytics throug\", \"h the OMS portal or the Azure portal, which run in any browser, and provide you with access to confi\", \"guration settings and multiple tools to analyze and act on collected data.\\n\\nThe Container Monitoring\", \" solution in Log Analytics helps you view and manage your Docker and Windows Container hosts in a si\", \"ngle location. The solution shows which containers are running, what\\n\\nTime range\\n\\nFiter\\n\\nCLENT PROCT\", \"SSING T..\\n\\nOther Clouds\\n\\nLocal\\n\\nVM\\n\\nVM\\n\\ncontainer image they're running, and where containers are ru\", \"nning. You can view detailed audit information, including commands that are being used with containe\", \"rs. You can also troubleshoot containers by viewing and searching centralized logs, without needing \", \"to remotely view Docker or Windows hosts. You can find containers that might be noisy and consuming \", \"excess resources on a host. Additionally, you can view centralized CPU, memory, storage, and network\", \" usage, and performance information, for containers. On computers running Windows, you can centraliz\", \"e and compare logs from Windows Server, Hyper-V, and Docker containers. The solution supports the fo\", \"llowing container orchestrators: vM\\n\\nPortal\\n\\nVM with agent\\n\\n- Docker Swarm\\n- DC/OS\\n- Kubernetes\\n- Re\", \"d Hat OpenShift\\n\\nFigure 4-11 shows the relationships between various container hosts and agents and \", \"OMS.\\n\\nFigure 4-11. Log Analytics Container Monitoring solution\\n\\n<!-- image -->\\n\\nYou can use the Log \", \"Analytics Container Monitoring solution to:\\n\\n- See information about all container hosts in a single\", \" location.\\n- Know which containers are running, what image they're running, and where they're runnin\", \"g.\\n- See an audit trail for actions on containers.\\n- Troubleshoot by viewing and searching centraliz\", \"ed logs without remote login to the Docker hosts.\\n- Find containers that might be 'noisy neighbors,'\", \" and be consuming excess resources on a host.\\n\\nAzure\\n\\n- View centralized CPU, memory, storage, and n\", \"etwork usage, and performance information, for containers.\\n\\n## Additional resources\\n\\n- Overview of m\", \"onitoring in Microsoft Azure\\n\\nhttps://learn.microsoft.com/azure/azure-monitor/overview\\n\\n- What is Ap\", \"plication Insights?\\n\\nhttps://learn.microsoft.com/azure/azure-monitor/app/app-insights-overview\\n\\n- Wh\", \"at is Log Analytics?\\n\\nhttps://learn.microsoft.com/azure/log-analytics/log-analytics-overview\\n\\n- Cont\", \"ainer Monitoring solution in Azure Monitor\\n\\nhttps://learn.microsoft.com/azure/azure-monitor/insights\", \"/containers\\n\\n- Overview of Azure Monitor\\n\\nhttps://learn.microsoft.com/azure/azure-monitor/overview\\n\\n\", \"- What is Operations Management Suite (OMS)?\\n\\nhttps://learn.microsoft.com/azure/operations-managemen\", \"t-suite/operations-management-suiteoverview\\n\\n## Modernize your app's lifecycle with CI/CD pipelines \", \"and DevOps tools in the cloud\\n\\nToday's businesses need to innovate at a rapid pace to be competitive\", \" in the marketplace. Delivering high-quality, modern applications requires DevOps tools and processe\", \"s that are critical to implement this constant cycle of innovation. With the right DevOps tools, dev\", \"elopers can streamline continuous deployment and get innovative applications into the hands of users\", \" more quickly.\\n\\nAlthough continuous integration and deployment practices are well established, the i\", \"ntroduction of containers introduces new considerations, particularly when you are working with mult\", \"i-container applications.\\n\\nAzure DevOps Services supports continuous integration and deployment of m\", \"ulti-container applications to various environments through the official Azure DevOps Services deplo\", \"yment tasks:\\n\\n- Deploy to an Azure Web App for Containers\\n- Deploy to Azure Kubernetes Service\\n\\nBut \", \"you can also deploy to Docker Swarm or DC/OS by using Azure DevOps Services script-based tasks.\\n\\neSh\", \"opModernizing V Dashboards Code Work Build and Release Test Wiki* Wiki \\u2022\\n\\nBuilds\\n\\nReleases Library T\", \"ask Groups Deployment Groups*\\n\\n* All definitions &gt; eShopModernizingMVC-Kubernetes-PROD-ENV\\n\\nPipel\", \"ine Tasks ~ Variables Retention Options History\\n\\nPROD eShopModernizing Kubernetes\\n\\nDeploymeni proces\", \"s\\n\\nAgent phase\\n\\n- Run an agent\\n\\n* Deploy SQL container\\n\\nDeploy to Kubernetes\\n\\nDeploy to ber app cont\", \"ainer\\n\\nRefresh MVC pod\\n\\n* Refresh AVC p\\n\\nDeploy to Kubernetes O\\n\\nVersion 0.^\\n\\nTo continue facilitati\", \"ng deployment agility, these tools provide excellent dev-to-test-to-production deployment experience\", \"s for container workloads, with a choice of development and CI/CD solutions.\\n\\nKubernetes Service Con\", \"nection \\u00ae | Manage E\\n\\nFigure 4-12 shows a continuous deployment pipeline that deploys to a Kubernete\", \"s cluster in Azure Container Service. Container Registry Details ^\\n\\nContainer Registry type ' O\\n\\nFig\", \"ure 4-12. Azure DevOps Services continuous deployment pipeline, deploying to a Kubernetes cluster\\n\\n<\", \"!-- image -->\\n\\n## Migrate to hybrid cloud scenarios\\n\\nSome organizations and enterprises can't migrat\", \"e some of their applications to public clouds like Microsoft Azure or any other public cloud due to \", \"regulations or their own policies. However, it's likely that any organization might benefit from hav\", \"ing some of their applications in the public cloud and other applications on-premises. But a mixed e\", \"nvironment can lead to excessive complexity in environments due to different platforms and technolog\", \"ies used in public clouds versus on-premises environments.\\n\\nMicrosoft provides the best hybrid cloud\", \" solution, one in which you can optimize your existing assets on-premises and in the public cloud, w\", \"hile you ensure consistency in an Azure hybrid cloud. You can maximize existing skills, and get a fl\", \"exible, unified approach to building apps that can run in the cloud or on-premises, thanks to Azure \", \"Stack (on-premises) and Azure (public cloud).\\n\\nWhen it comes to security, you can centralize managem\", \"ent and security across your hybrid cloud. You can get control over all assets, from your datacenter\", \" to the cloud, by providing single sign-on to onpremises and cloud apps. You accomplish this functio\", \"nality by extending Active Directory to a hybrid cloud, and by using identity management.\\n\\nFinally, \", \"you can distribute and analyze data seamlessly, use the same query languages for cloud and on-premis\", \"es assets, and apply analytics and deep learning in Azure to enrich your data, regardless of its sou\", \"rce.\\n\\n## Azure Stack\\n\\nAzure Stack is a hybrid cloud platform that lets you deliver Azure services fr\", \"om your organization's datacenter. Azure Stack is designed to support new options for your modern ap\", \"plications in key\\n\\nX Remove\\n\\nB Save\\n\\nMicrosoft's hybrid cloud platform scenarios, like edge and unco\", \"nnected environments, or meeting specific security and compliance requirements.\\n\\nFigure 4-13 shows a\", \"n overview of the true hybrid cloud platform that Microsoft offers.\\n\\nFigure 4-13. Microsoft hybrid c\", \"loud platform with Azure Stack and Azure\\n\\n<!-- image -->\\n\\nAzure Stack is offered in two deployment o\", \"ptions, to meet your needs:\\n\\n- Azure Stack integrated systems\\n- Azure Stack Development Kit\\n\\n## Azur\", \"e Stack integrated systems\\n\\nAzure Stack integrated systems are offered through a partnership of Micr\", \"osoft and hardware partners. The partnership creates a solution that offers cloud-paced innovation t\", \"hat is balanced with simplicity in management. Because Azure Stack is offered as an integrated syste\", \"m of hardware and software, you get the right amount of flexibility and control, while still adoptin\", \"g innovation from the cloud. Azure Stack integrated systems range in size from 4 to 12 nodes, and ar\", \"e jointly supported by the hardware partner and Microsoft. Use Azure Stack integrated systems to imp\", \"lement new scenarios for your production workloads.\\n\\n## Azure Stack Development Kit\\n\\nMicrosoft Azure\", \" Stack Development Kit is a single-node deployment of Azure Stack, which you can use to evaluate and\", \" learn about Azure Stack. You can also use Azure Stack Development Kit as a\\n\\ndeveloper environment, \", \"where you can develop using APIs and tooling that are consistent with Azure. Azure Stack Development\", \" Kit is not intended to be used as a production environment.\\n\\n## Additional resources\\n\\n- Azure hybri\", \"d cloud\\n- https://azure.microsoft.com/overview/hybrid-cloud/\\n- Azure Stack https://azure.microsoft.c\", \"om/overview/azure-stack/\\n- Active Directory Service Accounts for Windows Containers\\n- https://learn.\", \"microsoft.com/virtualization/windowscontainers/manage-containers/manageserviceaccounts\\n- Create a co\", \"ntainer with Active Directory support\\n- https://learn.microsoft.com/archive/blogs/containerstuff/cre\", \"ate-a-container-with-activedirectory-support\\n- Azure Hybrid Benefit licensing\\n- https://azure.micros\", \"oft.com/pricing/hybrid-benefit/\\n\\n## Walkthroughs and technical get started overview\\n\\nTo limit the si\", \"ze of this e-book, additional technical documentation and the full walkthroughs were made available \", \"in a GitHub repository. The online series of walkthroughs that is described in this chapter covers t\", \"he step-by-step setup of the multiple environments that are based on Windows Containers, and deploym\", \"ent to Azure.\\n\\nThe following sections explain what each walkthrough is about, its objectives and hig\", \"h-level vision, and provides a diagram of the tasks that are involved. You can get the walkthroughs \", \"themselves in the eShopModernizing apps GitHub repo wiki at https://github.com/dotnetarchitecture/eS\", \"hopModernizing/wiki.\\n\\n## Technical walkthrough list\\n\\nThe following get-started walkthroughs provide \", \"consistent and comprehensive technical guidance for sample apps that you can lift and shift by using\", \" containers, and then move by using multiple deployment choices in Azure.\\n\\nEach of the following wal\", \"kthroughs uses the new sample eShopLegacy and eShopModernizing apps, which are available on GitHub a\", \"t https://github.com/dotnet-architecture/eShopModernizing.\\n\\n- Tour of eShop legacy apps (baseline ap\", \"ps to modernize)\\n- Containerize your existing ASP.NET web apps (WebForms &amp; MVC) with Windows Con\", \"tainers\\n- Containerize your existing WCF services (N-Tier apps) with Windows Containers\\n- Deploy you\", \"r Windows Containers-based app to Azure VMs\\n- Deploy your Windows Containers-based apps to Kubernete\", \"s in Azure Container Service\\n\\n<!-- image -->\\n\\n## Walkthrough 1: Tour of eShop legacy apps\\n\\n## Techni\", \"cal walkthrough availability\\n\\nThe full technical walkthrough is available in the eShopModernizing Gi\", \"tHub repo wiki:\\n\\neShopModernizing wiki walkthroughs\\n\\n## Overview\\n\\nIn this walkthrough, you can explo\", \"re the initial implementation of three sample legacy applications. The first two sample web apps hav\", \"e a monolithic architecture, and were created by using classic ASP.NET. One application is based on \", \"ASP.NET 4.x MVC; the second application is based on ASP.NET 4.x Web Forms. The third app is a 3-Tier\", \" app composed by a client WinForms app and a server-side Windows Communication Foundation (WCF) serv\", \"ice.\\n\\nAll these applications are available at the eShopModernizing GitHub repo.\\n\\n## Goals\\n\\nThe main \", \"goal of this walkthrough is simply to get familiar with these apps, and with their code and configur\", \"ation. You can configure the apps so that they generate and use mock data, without using the SQL dat\", \"abase, for testing purposes. This optional config is based on dependency injection, in a decoupled w\", \"ay.\\n\\n## Scenario 1: ASP.NET Web apps\\n\\nThe figure below shows the simple scenario of the original leg\", \"acy ASP.NET web applications.\\n\\nONCONTAINERS\\n\\nA.\\n\\nBrowser with\\n\\nCatalog editor\\n\\nHAMI\\n\\nNET Black &amp;\", \" White Mug\\n\\nMVC app\\n\\n(ASP.NET\\n\\nBRAND TIERCE TURNAME\\n\\nNET Bot Black Hoodie NET T-SN $7950 1p0g\\n\\nNET B\", \"lack &amp; White Mug NET\\n\\nPriam White T-Shit\\n\\nPrism White T-Shit\\n\\nNET Foundallen T-shirt NET Foundat\", \"ion T-shit NET T-Sh $1209 4png\\n\\nRoslyn Red Sheet\\n\\nB.\\n\\nRoslyn Red Shast\\n\\nMock data\\n\\n(ASP.NET 4.x Web \", \"Forms)\\n\\neshop eSHOP\\n\\nonCONTAINERS\\n\\nCatalog editor\\n\\nWindows Server\\n\\nCREATE NEW\\n\\nIIS\\n\\nNAME\\n\\nDESCRIPTIO\", \"N\\n\\nBRAND TYPE PRICE PICTURE NAME STOCK RESTOCK MAXSTOCK\\n\\nNET Bot Bleck Hoodie NET T-Shirt $1950 1png\", \"\\n\\n100 0\\n\\nCoDe allegelee\\n\\n<!-- image -->\\n\\nFrom a business domain perspective, both apps offer the sam\", \"e catalog management features. Members of the eShop enterprise team would use the app to view and ed\", \"it the product catalog.\\n\\nThe next figure shows the initial app screenshots.\\n\\n<!-- image -->\\n\\nDepende\", \"ncies in ASP.NET 4.x or earlier versions (either for MVC or for Web Forms) means that these applicat\", \"ions won't run on .NET Core unless the code is fully rewritten by using ASP.NET Core MVC.\\n\\n## Scenar\", \"io 2: WCF service and WinForms client app (3-Tier app)\\n\\nThe figure below shows the simple scenario o\", \"f the original 3-Tier legacy application.\\n\\nProduct\\n\\n100\\n\\n4.x MVC)\\n\\nDetaileDelete\\n\\nHTTP\\n\\nWil eShop Wi\", \"nForms e ONCONTAINERS\\n\\nMain Catalog inventory\\n\\nType e-ShopOnContainers. By Microsoft Corp.\\n\\ntrand Aa\", \"\\n\\nName escrotion.\\n\\nNET Bot Black Hoode\\n\\nNET Bot Black Hoode\\n\\nPrice\\n\\n$19.50\\n\\nWindows Server\\n\\nIIS\\n\\n<!-\", \"- image -->\\n\\n## Benefits\\n\\nThe benefits of this walkthrough are simple: Just get familiar with the co\", \"de and initial apps.\\n\\n## Next steps\\n\\nExplore this content more in-depth on the GitHub wiki:\\n\\n- Tour \", \"on the baseline ASP.NET MVC and Web Forms 'legacy' apps\\n- Tour on the baseline WCF service and WinFo\", \"rms (3Tier) 'legacy' app\\n\\n## Walkthrough 2: Containerize your existing .NET applications with Window\", \"s Containers\\n\\n## Overview\\n\\nUse Windows Containers to improve deployment of existing .NET application\", \"s, like those based on MVC, Web Forms, or WCF, to production, development, and test environments.\\n\\n#\", \"# Goals\\n\\nThe goal of this walkthrough is to show you several options for containerizing an existing \", \".NET Framework application. You can:\\n\\n- Containerize your application by using Visual Studio 2022 To\", \"ols for Docker (Visual Studio 2017 or later versions).\\n- Containerize your application by manually a\", \"dding a Dockerfile, and then using the Docker CLI.\\n- Containerize your application by using the Img2\", \"Docker tool (an open-source tool from Docker).\\n\\nWinForms\\n\\nDesktop app\\n\\nMock data\\n\\neShop\\n\\nA.\\n\\nB.\\n\\nBro\", \"wser with\\n\\nMVC app\\n\\nDocker host (PC dev environment)\\n\\nWindows 10 or later\\n\\nDocker for Windows\\n\\nMock \", \"lIS\\n\\nThis walkthrough focuses on the Visual Studio 2022 Tools for Docker approach, but the other two\", \" approaches are fairly similar in regard to using Dockerfiles. SQL Server application\\n\\nWindows Conta\", \"iner\\n\\n## Scenario 1: Containerized ASP.NET web apps\\n\\neshop\\n\\nProduct\\n\\n(*)\\n\\nFigure below shows the sce\", \"nario for containerized eShop legacy web apps applications.\\n\\nWeb Forms app\\n\\n<!-- image -->\\n\\n## Scena\", \"rio 2: Containerized WCF service\\n\\nFigure below shows the scenario for a 3-Tier app with a containeri\", \"zed WCF service.\\n\\nele niemi\\n\\nLe:..\\n\\nWinForms\\n\\nDesktop app\\n\\nMET Ba Baik Hoede MET Bo Bad Hoade |81950\", \"\\n\\nMT Bad a wAu Mp MET Fad S He Mg 1830\\n\\nDocker host (PC dev environment)\\n\\nWindows 10 or later\\n\\nDocke\", \"r for Windows\\n\\nWCF service (.NET Framework) on\\n\\n<!-- image -->\\n\\n## Benefits\\n\\nThere are advantages to\", \" running your monolithic application in a container. First, you create an image for the application.\", \" From that point on, every deployment runs in the same environment. Every container uses the same OS\", \" version, has the same version of dependencies installed, uses the same .NET framework version, and \", \"is built by using the same process. Basically, you control the dependencies of your application by u\", \"sing a Docker image. The dependencies travel with the application when you deploy the containers.\\n\\nA\", \"n additional benefit is that developers can run the application in the consistent environment that's\", \" provided by Windows Containers. Issues that appear only with certain versions can be spotted immedi\", \"ately, instead of surfacing in a staging or production environment. Differences in development envir\", \"onments used by members of the development team matter less when applications run in containers.\\n\\nCo\", \"ntainerized applications also have a flatter scale-out curve. Containerized apps enable you to have \", \"more application and service instances (based on containers) in a VM or physical machine compared to\", \" regular application deployments per machine. This approach translates to higher density and fewer r\", \"equired resources, especially when you use orchestrators like Kubernetes.\\n\\nContainerization, in idea\", \"l situations, does not require making any changes to the application code (C#). In most scenarios, y\", \"ou just need the Docker deployment metadata files (Dockerfiles and Docker Compose files).\\n\\n## Next s\", \"teps\\n\\nExplore this content more in-depth on the GitHub wiki:\\n\\n- How to containerize the .NET Framewo\", \"rk web apps with Windows Containers and Docker\\n- Adding Docker Support to a WCF service\\n\\n## Walkthro\", \"ugh 3: Deploy your Windows Containersbased app to Azure VMs\\n\\n## Technical walkthrough availability\\n\\n\", \"The full technical walkthrough is available in the eShopModernizing GitHub repo wiki: https://github\", \".com/dotnet-architecture/eShopModernizing/wiki/06.-Deploying-your-WindowsContainers-based-app-into-A\", \"zure-VMs-(Including-CI-CD)\\n\\n## Overview\\n\\nDeploying to a Docker host on a Windows Server 2016 Virtual\", \" Machine (VM) in Azure lets you quickly set up development/test/staging environments. It also gives \", \"you a common place for testers or business users to validate the app. VMs also can be valid Infrastr\", \"ucture as a Service (IaaS) production environments.\\n\\n## Goals\\n\\nThe goal of this walkthrough is to sh\", \"ow you the multiple alternatives you have when you deploy Windows Containers to Azure VMs that are b\", \"ased on Windows Server 2016 or later versions.\\n\\n## Scenarios\\n\\nSeveral scenarios are covered in this \", \"walkthrough.\\n\\nScenario: Deploy to Azure VM through the Docker Registry\\n\\nScenario: Deploy to Azure VM\", \" through Docker Engine connection\\n\\nDocker Registry\\n\\nAzure\\n\\nMicrosoft Azure\\n\\nVM for test environment\\n\", \"\\nPC dev environment\\n\\nVM for test environment\\n\\nPC dev environment\\n\\n## Scenario A: Deploy to an Azure \", \"VM from a dev PC through Docker Engine connection VM 13.91.44.153 or Container Registry\\n\\nWindows Ser\", \"ver Core Container\\n\\nWindows Server Core Container\\n\\nWindows Server Core Container\\n\\nASP.NET (.NET Fram\", \"ework) on\\n\\nWindows Server Core Container\\n\\nDocker engine and Docker CLI docker-compose docker run Doc\", \"ker engine and Docker CLI Docker engine and Docker CLI Docker engine and Docker CLI ASP.NET app\\n\\n\\u2192\\n\\n\", \"<!-- image -->\\n\\nWindows Server Core Container\\n\\nFigure 5-4. Deploy to an Azure VM from a dev PC throu\", \"gh a Docker Engine connection\\n\\n## Scenario B: Deploy to an Azure VM through a Docker Registry\\n\\nFigur\", \"e 5-5. Deploy to an Azure VM through a Docker Registry\\n\\n<!-- image -->\\n\\nCode, run,\\n\\ndebug\\n\\nScenario:\", \" Deploy to Azure VM through CI/CD pipelines\\n\\nA Acrosoft\\n\\n5. Test/staging\\n\\nAzure VM\\n\\n## Scenario C: D\", \"eploy to an Azure VM from CI/CD pipelines in Azure DevOps Services\\n\\n2\\n\\ncode repo\\n\\n(SCC)\\n\\nCode push\\n\\n\", \"git push\\n\\nInner loop\\n\\n1.\\n\\nDev environment\\n\\nVSTS\\n\\nVSTS\\n\\nFigure 5-6. Deploy to an Azure VM from CI/CD \", \"pipelines in Azure DevOps Services\\n\\n<!-- image -->\\n\\n## Azure VMs for Windows Containers\\n\\nAzure VMs f\", \"or Windows Containers are VMs based on Windows Server 2016, Windows 10, or later versions, both with\", \" Docker Engine set up. In most cases, Windows Server 2016 is used in the Azure VMs.\\n\\nAzure currently\", \" provides a VM named Windows Server 2016 with Containers . You can use this VM to try the new Window\", \"s Server Container feature, with either Windows Server Core or Windows Nano Server. Container OS ima\", \"ges are installed, and then the VM is ready to use with Docker.\\n\\n## Benefits\\n\\nAlthough Windows Conta\", \"iners can be deployed to on-premises Windows Server 2016 VMs, when you deploy to Azure, you get an e\", \"asier way to get started, with ready-to-use Windows Server Container VMs. You also get a common onli\", \"ne location that's accessible to t esters, and automatic scalability through Azure virtual machine s\", \"cale sets.\\n\\n## Next steps\\n\\nExplore this content more in-depth on the GitHub wiki:\\n\\nhttps://github.co\", \"m/dotnet-architecture/eShopModernizing/wiki/06.-Deploying-your-WindowsContainers-based-app-into-Azur\", \"e-VMs-(Including-CI-CD)\\n\\n## SQL (*)\\n\\nPC Dev Environment\\n\\nWindows 10 or later\\n\\nDocker for Windows\\n\\n##\", \" Overview\\n\\nAzure Container Instances (ACI) is the quickest way to have a Containers dev/test/staging\", \" environment where you can deploy single instances of containers.\\n\\n## Goals\\n\\nThis walkthrough shows \", \"you the main scenarios when deploying Windows Containers to Azure Container Instances (ACI) and how \", \"you can deploy eShopModernizing Apps into ACI.\\n\\n## Scenarios\\n\\nThere can be variations about deployin\", \"g the eShopModernizing apps into ACI such as deploying just one or all of the apps (MVC app, WebForm\", \"s app or WCF service). In the following scenario shown below, you can see the ASP.NET MVC app plus t\", \"he SQL Server container both of them deployed as containers into ACI (Azure Container Instances).\\n\\n<\", \"!-- image -->\\n\\n## Benefits\\n\\nAzure Container Instances makes it easy to create and manage Docker cont\", \"ainers in Azure, without having to provision virtual machines or adopt a higher-level service. With \", \"ACI, you can directly deploy a Windows container in Azure and expose it to the internet with a fully\", \" qualified domain name (FQDN)\\n\\nDocker Registry\\n\\n00\\n\\nDocker Hub or\\n\\n## Walkthrough 4: Deploy your Win\", \"dows Containersbased apps to Azure Container Instances (ACI) Azure Container Registry\\n\\ndocker push\\n\\n\", \"## Technical walkthrough availability\\n\\nSQL\\n\\n()\\n\\nThe full technical walkthrough is available in the e\", \"ShopModernizing GitHub repo wiki:\\n\\nor\\n\\nDeploying the Apps to ACI (Azure Container Instances)\\n\\nenviro\", \"nments\\n\\nA Azure\\n\\nAzure Container Instances\\n\\n(ACI)\\n\\nDNS name\\n\\nin a matter of seconds (Provided that y\", \"ou have the Windows Container image ready in a Docker registry like Docker Hub or Azure Container Re\", \"gistry).\\n\\n## Considerations\\n\\nDeploying Windows Containers with either full .NET Framework / ASP.NET \", \"or SQL Server into Azure Container Instances (ACI) is not quite as fast as deploying to a regular Do\", \"cker Host (like a Windows Server 2016 with Windows Containers) because the Docker image has to be do\", \"wnloaded (pulled from the Docker registry) every time and the sizes of the SQL container image (15.1\", \" GB) and the ASP.NET container image (13.9 GB) are significantly large, however it is much cheaper t\", \"han maintaining your own docker host (permanently on-line Windows Server 2016 with Windows Container\", \"s VM in Azure) not to mention a whole orchestrator like Kubernetes in Azure (AKS) which is, on the o\", \"ther hand, a great choice for production deployments.\\n\\nAs the main conclusion, using Azure Container\", \" Instances is a very compelling option for Dev/Test scenarios and for CI/CD pipelines.\\n\\n## Next step\", \"s\\n\\nExplore this content more in-depth on the GitHub wiki:\\n\\nhttps://github.com/dotnet-architecture/eS\", \"hopModernizing/wiki/05.-Deploying-the-Apps-to-ACI(Azure-Container-Instances)\\n\\n## Walkthrough 5: Depl\", \"oy your Windows Containersbased apps to Kubernetes in Azure Container Service\\n\\n## Technical walkthro\", \"ugh availability\\n\\nThe full technical walkthrough is available in the eShopModernizing GitHub repo wi\", \"ki:\\n\\nhttps://github.com/dotnet-architecture/eShopModernizing/wiki/04.-How-to-deploy-your-WindowsCont\", \"ainers-based-apps-into-Kubernetes-in-Azure-Container-Service-(Including-CI-CD)\\n\\n## Overview\\n\\nAn appl\", \"ication that's based on Windows Containers will quickly need to use platforms, moving even further a\", \"way from IaaS VMs. This approach is needed to easily achieve high scalability and better automated s\", \"calability, and for a significant improvement in automated deployments and versioning. You can achie\", \"ve these goals by using the orchestrator Kubernetes, available in Azure Container Services.\\n\\nScenari\", \"o: Direct deployment to a Kubernetes cluster in Azure Container Service\\n\\nDocker Registry\\n\\nDocker Hub\", \"\\n\\nAzure Container Registry\\n\\nAzure\\n\\nPC dev environment\\n\\n## Goals\\n\\nASPNET app\\n\\nACS\\n\\n\\u2022 Kubernetes clust\", \"er - Production\\n\\nK8s Cluster\\n\\nThe goal of this walkthrough is to learn how to deploy a Windows Conta\", \"iner -based application to Kubernetes (also called K8s ) in Azure Container Service. Deploying to Ku\", \"bernetes from scratch is a two-step process: Repository to cluster \\u00b7 Docker host Master Node\\n\\n1. Dep\", \"loy a Kubernetes cluster to Azure Container Service.\\n\\nNode\\n\\n- Scheduler\\n\\n- Proxy kubectl'create\\n\\nKub\", \"ectl (K8s CLI)\\n\\n## Scenarios\\n\\nAzure\\n\\n2. Deploy the application and related resources to the Kubernet\", \"es cluster.\\n\\n\\u2022 Docker host\\n\\nAdditional nodes\\n\\n## Scenario A: Deploy directly to a Kubernetes cluster\", \" from a dev environment\\n\\nMove to a highly available system like Azure SQL Database for production en\", \"vironments.\\n\\nFigure 5-7. Deploy directly to a Kubernetes cluster from a development environment\\n\\n<!-\", \"- image -->\\n\\nExternal access\\n\\nWindows Server 2016 nodes\\n\\nScenario: Deploy to Kubernetes through CI/C\", \"D pipelines\\n\\nAzure\\n\\nA Acrosoft\\n\\nContainer Service -\\n\\nKubernetes\\n\\n## Scenario B: Deploy to a Kubernet\", \"es cluster from CI/CD pipelines in Azure DevOps Services Private nel Master Node\\n\\nPrOXy\\n\\nCode, run,\\n\", \"\\ndebug\\n\\nCode\\n\\nPush git push\\n\\nInner loop\\n\\n1.\\n\\nDev environment\\n\\n## VSTS VSTS\\n\\ndocker push\\n\\nAdditional \", \"nodes\\n\\nFigure 5-8. Deploy to a Kubernetes cluster from CI/CD pipelines in Azure DevOps Services\\n\\n<!-\", \"- image -->\\n\\n## Benefits\\n\\nThere are many benefits to deploying to a cluster in Kubernetes. The bigge\", \"st benefit is that you get a production-ready environment in which you can scale out the application\", \" based on the number of container instances you want to use (inner-scalability in the existing nodes\", \"), and based on the number of nodes or VMs in the cluster (global scalability of the cluster).\\n\\nAzur\", \"e Container Service optimizes popular open-source tools and technologies specifically for Azure. You\", \" get an open solution that offers portability, both for your containers and for your application con\", \"figuration. You select the size, the number of hosts, and the orchestrator tools-Container Service h\", \"andles everything else.\\n\\nWith Kubernetes, developers can progress from thinking about physical and v\", \"irtual machines, to planning a container-centric infrastructure that facilitates the following capab\", \"ilities, among others:\\n\\n- Applications based on multiple containers\\n- Replicating container instance\", \"s and horizontal autoscaling\\n- Naming and discovering (for example, internal DNS)\\n- Balancing loads\\n\", \"\\n2.\\n\\n- Rolling updates\\n- Distributing secrets\\n- Application health checks\\n\\n## Next steps\\n\\nExplore th\", \"is content more in-depth on the GitHub wiki: https://github.com/dotnetarchitecture/eShopModernizing/\", \"wiki/04.-How-to-deploy-your-Windows-Containers-based-apps-intoKubernetes-in-Azure-Container-Service-\", \"(Including-CI-CD)\\n\\n## Walkthrough 6: Deploy your Windows Containersbased apps to Azure App Service f\", \"or Containers\\n\\n## Technical walkthrough availability\\n\\nThe full technical walkthrough is available in\", \" the eShopModernizing GitHub repo wiki:\\n\\nhttps://github.com/dotnet-architecture/eShopModernizing/wik\", \"i/Deploy-Windows-Container-toAzure-App-Service\\n\\n## Overview\\n\\nA simple containerized application usin\", \"g Windows Containers can easily be deployed to Azure App Service for Containers. This approach is th\", \"e recommended approach for most Windows Containerbased applications.\\n\\n## Goals\\n\\nThe goal of this wal\", \"kthrough is to learn how to deploy a Windows Container -based application to Azure App Service for C\", \"ontainers from a registry (Docker Hub or Azure Container Registry).\\n\\nScenario: Deploy to Azure App S\", \"ervice (Windows Containers)\\n\\nDocker Registry\\n\\n## Scenario\\n\\nWindows 10\\n\\nASP.NET (NET Framework) on\\n\\nW\", \"indows Server Core Container\\n\\nASP.NET app\\n\\nSOL Server on\\n\\nWindows Server Core Container\\n\\nSQL\\n\\nAzure \", \"App Service\\n\\nA Azure\\n\\n(With support for Windows Containers)\\n\\n<!-- image -->\\n\\n## Benefits\\n\\nDeploying \", \"to Azure App Service for Containers offers the benefits of containers paired with the PaaS benefits \", \"of Azure App Service. The app service can easily be scaled both vertically and horizontally, and can\", \" be configured to autoscale to meet changing demands. Updates can be performed with zero downtime an\", \"d the configuration of continuous deployment from a registry is easily configured as well.\\n\\n## Next \", \"steps\\n\\nExplore this content more in-depth on the GitHub wiki: https://github.com/dotnetarchitecture/\", \"eShopModernizing/wiki/Deploy-Windows-Container-to-Azure-App-Service\\n\\n## Conclusions\\n\\n- Container-bas\", \"ed solutions ultimately provide cost savings benefits. Containers are a solution to deployment probl\", \"ems because they remove the friction caused by an absence of dependencies in production environments\", \". By removing those issues, it improves Dev/Test, DevOps, and production operations significantly.\\n-\", \" A Docker container is becoming the standard unit of deployment for any server-based application or \", \"service.\\n- For production environments, you should use an orchestrator (like Kubernetes) to host sca\", \"lable containers -based applications.\\n- Azure VMs hosting containers are a fast and simple way to cr\", \"eate small Dev/Test environments in the cloud.\\n- Azure SQL Database Managed Instance is recommended \", \"by default when migrating your relational databases from existing applications to Azure.\\n- Visual St\", \"udio 2022 and Image2Docker are basic tools for you to start modernizing your existing .NET applicati\", \"ons with Windows Containers by accelerating the getting started learning curve.\\n- When placing conta\", \"inerized applications in production you will always create or adopt a DevOps culture and DevOps tool\", \"s for CI/CD pipelines, like Azure DevOps Services or Jenkins.\\n- Microsoft Azure provides the most co\", \"mprehensive and complete environment to modernize your existing .NET Framework applications with Win\", \"dows Containers, cloud infrastructure and PaaS services.\"]"