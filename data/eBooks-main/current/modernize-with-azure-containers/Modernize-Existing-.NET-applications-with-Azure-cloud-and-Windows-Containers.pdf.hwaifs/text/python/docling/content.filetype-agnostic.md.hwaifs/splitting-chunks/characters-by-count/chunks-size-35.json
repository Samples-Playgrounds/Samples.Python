"[\"<!-- image -->\\n\\n## Modernize existing .NET applications with Azure cloud and Windows Containers\\n\\n<!-\", \"- image -->\\n\\n<!-- image -->\\n\\n<!-- image -->\\n\\nCesar de la Torre Microsoft Corp.\\n\\n## EDITION v7.0\\n\\nRef\", \"er changelog for the book updates and community contributions.\\n\\nPUBLISHED BY Microsoft Press and Mic\", \"rosoft DevDiv Divisions of Microsoft Corporation One Microsoft Way Redmond, Washington 98052-6399\\n\\nC\", \"opyright \\u00a9 2023 by Microsoft Corporation\\n\\nAll rights reserved. No part of the contents of this book \", \"may be reproduced in any form or by any means without the written permission of the publisher.\\n\\nThis\", \" book is available for free in the form of an electronic book (e-book) available through multiple ch\", \"annels at Microsoft such as https://dot.net/architecture .\\n\\nIf you have questions related to this bo\", \"ok, email at dotnet-architecture-ebooksfeedback@service.microsoft.com .\\n\\nThis book is provided \\\"as-i\", \"s\\\" and expresses the author's views and opinions. The views, opinions, and information expressed in \", \"this book, including URL and other Internet website references, may change without notice.\\n\\nSome exa\", \"mples depicted herein are provided for illustration only and are fictitious. No real association or \", \"connection is intended or should be inferred.\\n\\nMicrosoft and the trademarks listed at https://www.mi\", \"crosoft.com on the \\\"Trademarks\\\" webpage are trademarks of the Microsoft group of companies. All othe\", \"r marks are property of their respective owners.\\n\\nAuthor: &gt; Cesar de la Torre, Sr. PM, .NET Produ\", \"ct Team, Microsoft Corp.\\n\\nParticipants and reviewers: &gt; Scott Hunter, Partner Director PM, .NET t\", \"eam, Microsoft &gt; Paul Yuknewicz, Principal PM Manager, Visual Studio Tools team, Microsoft &gt; L\", \"isa Guthrie, Sr. PM, Visual Studio Tools team, Microsoft &gt; Ankit Asthana, Principal PM Manager, .\", \"NET team, Microsoft &gt; Unai Zorrilla, Developer Lead, Plain Concepts &gt; Javier Valero, Chief Ope\", \"rating Officer at Grupo Solutio &gt; Steve Smith, Architect, NimblePros\\n\\n## Introduction\\n\\nWhen you d\", \"ecide to modernize your web applications or services and move them to the cloud, you don't necessari\", \"ly have to fully rearchitect your apps. Rearchitecting an application by using an advanced approach \", \"like microservices isn't always an option because of cost and time restraints. Depending on the type\", \" of application, rearchitecting an app also might not be necessary. To optimize the cost -effectiven\", \"ess of your organization's cloud migration strategy, it's important to consider the needs of your bu\", \"siness and the requirements of your apps. You'll need to determine:\\n\\n- Which apps require a transfor\", \"mation or rearchitecting.\\n- Which apps need to be only partially modernized.\\n- Which apps you can \\\"l\", \"ift and shift\\\" directly to the cloud.\\n\\n<!-- image -->\\n\\n## About this guide\\n\\nThis guide focuses prima\", \"rily on the initial modernization of existing Microsoft .NET Framework web or service -oriented appl\", \"ications, meaning the action of moving a workload to a newer or more modern environment without sign\", \"ificantly altering the application's code and basic architecture.\\n\\nThis guide also highlights the be\", \"nefits of moving your apps to the cloud and partially modernizing apps by using a specific set of ne\", \"w technologies and approaches, like Windows Containers and related compute-platforms in Azure suppor\", \"ting Windows Containers .\\n\\n## Path to the cloud for existing .NET applications\\n\\nOrganizations typica\", \"lly choose to move to the cloud for the agility and speed they can get for their applications. You c\", \"an set up thousands of servers (VMs) in the cloud in minutes, compared to the weeks it typically tak\", \"es to set up on-premises servers.\\n\\nThere isn't a single, one-size-fits-all strategy for migrating ap\", \"plications to the cloud. The right migration strategy for you will depend on your organization's nee\", \"ds and priorities, and the kind of applications you are migrating. Not all applications warrant the \", \"investment of moving to a platform as a service (PaaS) model or developing a cloud-native applicatio\", \"n model. In many cases, you can take a phased or incremental approach to invest in moving your asset\", \"s to the cloud, based on your business needs.\\n\\nFor modern applications with the best long-term agili\", \"ty and value for the organization, you might benefit from investing in cloud-native application arch\", \"itectures. However, for applications that are existing or legacy assets, the key is to spend minimal\", \" time and money (no rearchitecting or code changes) while moving them to the cloud, to realize signi\", \"ficant benefits.\\n\\nFigure 1-1 shows the possible paths you can take when you move existing .NET appli\", \"cations to the cloud in incremental phases.\\n\\n<!-- image -->\\n\\nThe Journey to the Cloud\\n\\nMicrosoft\\n\\nMi\", \"grate\\n\\nExisting apps &amp; services\\n\\n.NET Framework on-premises\\n\\nOn-Premises\\n\\nInfrastructure Platfor\", \"m\\n\\nRehost\\n\\nCloud\\n\\nInfrastructure-\\n\\nContainerize\\n\\n## + cloud managed services Cloud\\n\\nOptimized\\n\\nCloud\", \"-Native apps\\n\\nFigure 1 -1. Modernization paths for existing .NET applications and services\\n\\n<!-- ima\", \"ge -->\\n\\nEach migration approach has different benefits and reasons for using it. You can choose a si\", \"ngle approach when you migrate apps to the cloud, or choose certain components from multiple approac\", \"hes. Individual applications aren't limited to a single approach or maturity state. For instance, a \", \"common hybrid approach would have certain on-premises components plus other components in the cloud.\", \"\\n\\nThe definition and short explanation for each application maturity level are the following:\\n\\nLevel\", \" 1: Cloud Infrastructure -Ready applications: In this migration approach, you just migrate or rehost\", \" your current on-premises applications to an infrastructure as a service (IaaS) platform. Your apps \", \"have almost the same composition as before, but now you deploy them to VMs in the cloud. This simple\", \" type of migration is typically known in the industry as \\\"Lift &amp; Shift.\\\"\\n\\nLevel 2: Cloud Optimiz\", \"ed applications: At this level and still without rearchitecting or altering significant code, you ca\", \"n gain additional benefits from running your app in the cloud with modern technologies like containe\", \"rs and additional cloud-managed services. You improve the agility of your applications to ship faste\", \"r by refining your enterprise development operations (DevOps) processes. You achieve this functional\", \"ity by using technologies like Windows Containers, which is based on Docker Engine. Containers remov\", \"e the friction that's caused by application dependencies when you deploy in multiple stages. In this\", \" maturity model, you can deploy containers on IaaS or PaaS while using additional cloud-managed serv\", \"ices related to databases, cache as a service, monitoring, and continuous integration/continuous dep\", \"loyment (CI/CD) pipelines.\\n\\nThe third level of maturity is the ultimate goal in the cloud, but it's \", \"optional for many apps and not the main focus of this guide:\\n\\nModernize\\n\\n<!-- image -->\\n\\n<!-- image \", \"-->\\n\\nLevel 3: Cloud -Native applications: This migration approach typically is driven by business ne\", \"ed and targets modernizing your mission-critical applications. At this level, you use PaaS services \", \"to move your apps to PaaS computing platforms. You implement cloud-native applications and microserv\", \"ices architecture to evolve applications with long-term agility, and to scale to new limits. This ty\", \"pe of modernization usually requires architecting specifically for the cloud. New code often must be\", \" written, especially when you move to cloud-native application and microservice-based models. This a\", \"pproach can help you gain benefits that are difficult to achieve in your monolithic and on-premises \", \"application environment.\\n\\nTable 1 -1 describes the main benefits of and reasons for choosing each mi\", \"gration or modernization approach.\\n\\nTable 1 -1. Benefits and challenges of modernization paths for e\", \"xisting .NET applications and services\\n\\n| Cloud Infrastructure - Ready Lift and shift   | Cloud - Op\", \"timized Modernize                                                                                   \", \"                                        | Cloud - Native Modernize, rearchitect, and  rewrite       \", \"                                                                           |\\n|----------------------\", \"-------------------------|--------------------------------------------------------------------------\", \"-----------------------------------------------------------------------------|----------------------\", \"----------------------------------------------------------------------------------------------------\", \"------------|\\n| Application\\u2019s compute target                  |                                     \", \"                                                                                                    \", \"              |                                                                                     \", \"                                                 |\\n| Applications deployed to VMs  in Azure        |\", \" Monolithic or N - Tier apps  deployed to Azure App Service,  Azure Container Instance (ACI),  VMs w\", \"ith containers, or AKS  (Azure Kubernetes Service) | Containerized microservices on  Azure Kubernete\", \"s Service (AKS)  and/or serverless microservices  based on Azure Functions.           |\\n| Data targe\", \"t                                   |                                                               \", \"                                                                                        |           \", \"                                                                                                    \", \"                       |\\n| SQL or any relational database  on a VM       | Azure SQL Database Manage\", \"d  Instance or another managed  database in the cloud.                                              \", \"                         | Fined - grain databases per  microservice, based on Azure  SQL Database, \", \"Azure Cosmos  DB, or another managed  database in the cloud |\\n| Advantages                          \", \"          |                                                                                         \", \"                                                              |                                     \", \"                                                                                                 |\\n|\", \" Challenges                                    |                                                    \", \"                                                                                                   |\", \"                                                                                                    \", \"                                  |\\n\\n## Key technologies and architectures by maturity level\\n\\n.NET F\", \"ramework applications initially started with .NET Framework version 1.0, which was released in late \", \"2001. Then, companies moved towards newer versions (such as 2.0, 3.5 and .NET Framework 4.x). Most o\", \"f those applications ran on Windows Server and Internet Information Server (IIS), and used a relatio\", \"nal database, like SQL Server, Oracle, MySQL, or any other RDBMS.\\n\\nMost existing .NET applications m\", \"ight nowadays be based on .NET Framework 4.x, or even on .NET Framework 3.5, and use web frameworks \", \"like ASP.NET MVC, ASP.NET Web Forms, ASP.NET Web API, Windows Communication Foundation (WCF), ASP.NE\", \"T SignalR, and ASP.NET Web Pages. These established .NET Framework technologies depend on Windows. T\", \"hat dependency is important to\\n\\nMaturity model for NET applications modernization\\n\\nExisting apps\\n\\nMi\", \"crosoft\\n\\n.NET web apps (on-premises)\\n\\nCloud\\n\\nInfrastructure-Ready\\n\\nMonolithic or N-Tier architecture\", \"s\\n\\n.NET\\n\\nMonolithic or N-Tier\\n\\nCloud-Optimized\\n\\nPaas\\n\\nMonolithic or N-Tier consider if you are simpl\", \"y migrating legacy apps and you want to make minimal changes to your application infrastructure. arc\", \"hitectures architectures NET\\n\\nRelational\\n\\nDatabase\\n\\nOn-premises\\n\\nMicrosoft\\n\\nCloud-Native\\n\\nPaas for m\", \"icroservices and serverless\\n\\nMicroservices and serverless architectures\\n\\nFigure 1-2 shows the primar\", \"y technologies and architecture styles used at each of the three cloud maturity levels: laas Managed\", \" services SQL\\n\\nSQL\\n\\nFigure 1 -2. Primary technologies for each maturity level for modernizing existi\", \"ng .NET web applications\\n\\n<!-- image -->\\n\\nFigure 1-2 highlights the most common scenarios, but many \", \"hybrid and mixed variations are possible when it comes to architecture. For example, the maturity mo\", \"dels apply not only to monolithic architectures in existing web apps, but also to service orientatio\", \"n, N-Tier, and other architecture style variations. The higher focus or percentage on one or another\", \" architecture type and related technologies determines the overall maturity level of your applicatio\", \"ns.\\n\\nEach maturity level in the modernization process is associated with the following key technolog\", \"ies and approaches:\\n\\n- Cloud Infrastructure -Ready (rehost or basic lift &amp; shift): As a first st\", \"ep, many organizations want only to quickly execute a cloud-migration strategy. In this case, applic\", \"ations are rehosted. Most rehosting can be automated by using Azure Migrate, a service that provides\", \" the guidance, insights, and mechanisms needed to assist you in migrating to Azure based on cloud to\", \"ols like Azure Site Recovery and Azure Database Migration Service. You can also set up rehosting man\", \"ually, so that you can learn infrastructure details about your assets when you move legacy apps to t\", \"he cloud. For example, you can move your applications to VMs in Azure with little modification -prob\", \"ably with only minor configuration changes. The networking in this case is similar to an on-premises\", \" environment, especially if you create virtual networks in Azure.\\n- Cloud -Optimized (Managed Servic\", \"es and Windows Containers): This model is about making a few important deployment optimizations to g\", \"ain some significant benefits from the cloud,\\n\\n<!-- image -->\\n\\n<!-- image -->\\n\\nwithout changing the \", \"core architecture of the application. The fundamental step here is to add Windows Containers support\", \" to your existing .NET Framework applications. This important step (containerization) doesn't requir\", \"e touching the code, so the overall lift and shift effort is light. You can use tools like Image2Doc\", \"ker or Visual Studio, with its tools for Docker. Visual Studio automatically chooses smart defaults \", \"for ASP.NET applications and Windows Containers images. These tools offer both a rapid inner loop, a\", \"nd a fast path to get the containers to Azure. Your agility is improved when you deploy to multiple \", \"environments. Then, moving to production, you can deploy your Windows Containers to Azure Web App fo\", \"r Containers , Azure Container Instances (ACI), and Azure VMs with Windows Server 2016 and container\", \"s if you prefer an IaaS approach. For more complex multi-container applications, consider using orch\", \"estrators like Azure Kubernetes Service (AKS/ACS) .\\n\\nDuring this initial modernization, you can also\", \" add assets from the cloud, such as monitoring with tools like Azure Application Insights; CI/CD pip\", \"elines for your app lifecycles with Azure DevOps Services; and many more data resource services that\", \" are available in Azure. For instance, you can modify a monolithic web app that was originally devel\", \"oped by using traditional ASP.NET Web Forms or ASP.NET MVC, but now you deploy it by using Windows C\", \"ontainers. When you use Windows Containers, you should also migrate your data to a database in Azure\", \" SQL Database Managed Instance, all without changing the core architecture of your application.\\n\\n- C\", \"loud -Native: As introduced, you should think about architecting cloud-native applications when you \", \"are targeting large and complex applications with multiple independent development teams working on \", \"different microservices that can be developed and deployed autonomously. Also, due to granularized a\", \"nd independent scalability per microservice. These architectural approaches face very important chal\", \"lenges and complexities but can be greatly simplified by using cloud PaaS and orchestrators like Azu\", \"re Kubernetes Service (AKS/ACS) (managed Kubernetes), and Azure Functions for a serverless approach.\", \" All these approaches (like microservices and Serverless) typically require you to architect for the\", \" cloud and write new code \\u2014 code that is adapted to specific PaaS platforms, or code that aligns wit\", \"h specific architectures, like microservices.\\n\\nFigure 1-3 shows the internal technologies that you c\", \"an use for each maturity level:\\n\\nExisting\\n\\n.NET applications (on-prem.)\\n\\nMonolithic or N-Tier\\n\\nASP.N\", \"ET\\n\\nMVC\\n\\nWebForms\\n\\nWeb API\\n\\nSignalR\\n\\nWeb Pages\\n\\nWCF\\n\\nRelational Database\\n\\n(SQL, Oracle, MySQL, etc.)\", \"\\n\\n.NET\\n\\nMicrosoft\\n\\n<!-- image -->\\n\\nFigure 1 -3. Internal technologies for each modernization maturit\", \"y level\\n\\n<!-- image -->\\n\\n## Lift and shift scenario\\n\\nFor lift and shift migrations, keep in mind tha\", \"t you can use many different variations of lift and shift in your application scenarios. If you only\", \" rehost your application, you might have a scenario like the one shown in Figure 1-4, where you use \", \"VMs in the cloud only for your application and for your database server.\\n\\n.NET applications (on-prem\", \".)\\n\\nMonolithic Architecture\\n\\nRelational Database\\n\\n(SQL, Oracle, MySQL, etc.)\\n\\nMicrosoft\\n\\n<!-- image \", \"-->\\n\\nFigure 1 -4. Example of a pure IaaS scenario in the cloud\\n\\n<!-- image -->\\n\\n## Modernization sce\", \"narios\\n\\nFor modernization scenarios, you might have a pure Cloud-Optimized application that uses ele\", \"ments only from that maturity level. Or, you might have an intermediate-state application with some \", \"elements from Cloud Infrastructure -Ready and other elements from Cloud-Optimized (a \\\"pick and choos\", \"e\\\" or mixed model), like in Figure 1-5.\\n\\nExisting\\n\\n.NET applications (on-prem.)\\n\\nMonolithic or N-Tie\", \"r\\n\\nASP.NET\\n\\nMVC\\n\\nWebForms\\n\\nWeb API\\n\\nSignalR\\n\\nWeb Pages\\n\\nWCF\\n\\nRelational Database\\n\\n(SQL, Oracle, MySQ\", \"L, etc.)\\n\\n.NET\\n\\nMicrosoft\\n\\n<!-- image -->\\n\\nFigure 1 -5. Example \\\"pick and choose\\\" scenario, with dat\", \"abase on IaaS, DevOps, and containerization assets\\n\\n<!-- image -->\\n\\nNext, as the ideal scenario for \", \"many existing .NET Framework applications to migrate, you could migrate to a Cloud-Optimized applica\", \"tion, to get significant benefits from little work. This approach also sets you up for Cloud-Native \", \"as a possible future evolution. Figure 1-6 shows an example.\\n\\nExisting\\n\\n.NET applications (on-prem.)\", \"\\n\\nMonolithic or N-Tier\\n\\nASP NET\\n\\nMVC\\n\\nWebForms\\n\\nWeb API\\n\\nSignalR\\n\\nWeb Pages\\n\\nWCF\\n\\nRelational Databas\", \"e\\n\\n(SQL, Oracle, MySQL, etc.)\\n\\nMicrosoft\\n\\n.NET\\n\\nMicrosoft\\n\\n<!-- image -->\\n\\nFigure 1 -6. Example Clou\", \"d -Optimized apps scenario, with Windows Containers and managed services\\n\\n<!-- image -->\\n\\nGoing even\", \" further, you could extend your existing Cloud-Optimized application by adding a few microservices f\", \"or specific scenarios. This approach would move you partially to the level of CloudNative model, whi\", \"ch is not the main focus of the present guidance.\\n\\n## What this guide does not cover\\n\\nThis guide cov\", \"ers a specific subset of the example scenarios, as shown in Figure 1-7. This guide focuses only on t\", \"he lift and shift scenarios, and ultimately, on the Cloud-Optimized model. In the Cloud -Optimized m\", \"odel, a .NET Framework application is modernized by using Windows Containers, plus additional compon\", \"ents like monitoring and CI/CD pipelines. Each component is fundamental to deploying applications to\", \" the cloud, faster, and with agility.\\n\\nExisting\\n\\nNET applications (on-prem.)\\n\\nMonolithic or N-Tier\\n\\n\", \"ASP.NET\\n\\nMVC\\n\\nWebForms\\n\\nWeb API\\n\\nSignalR\\n\\nWeb Pages\\n\\nWCF\\n\\nRelational Database\\n\\n(SQL, Oracle, MySQL, \", \"etc.)\\n\\n.NET\\n\\nMicrosoft\\n\\n<!-- image -->\\n\\nFigure 1 -7. Cloud -Native is not covered in this guide\\n\\n<!-\", \"- image -->\\n\\nThe focus of this guide is specific. It shows you the path you can take to achieve a li\", \"ft and shift of your existing .NET applications, without rearchitecting, and with no code changes. U\", \"ltimately, it shows you how to make your application Cloud-Optimized.\\n\\nThis guide doesn't show you h\", \"ow to create Cloud-Native applications, such as how to evolve to a microservices architecture. To re\", \"architect your applications or to create brand-new applications that are based on microservices, see\", \" the e-book .NET Microservices: Architecture for containerized .NET applications .\\n\\n## Additional re\", \"sources\\n\\n- Containerized Docker application lifecycle with Microsoft platform and tools (downloadabl\", \"e e-book) https://aka.ms/dockerlifecycleebook\\n- .NET Microservices: Architecture for containerized .\", \"NET applications (downloadable ebook) https://aka.ms/microservicesebook\\n- Architecting modern web ap\", \"plications with ASP.NET Core and Azure (downloadable ebook) https://aka.ms/webappebook\\n\\n## Who shoul\", \"d use this guide\\n\\n<!-- image -->\\n\\nThis guide was written for developers and solution architects who \", \"want to modernize existing ASP.NET web applications or WCF services that are based on .NET Framework\", \", for improved agility in shipping and releasing applications.\\n\\nYou also might find this guide usefu\", \"l if you are a technical decision maker, such as an enterprise architect or a development lead/direc\", \"tor who just wants an overview of the benefits that you can get by using Windows Containers, and by \", \"deploying to the cloud when using Microsoft Azure.\\n\\n## How to use this guide\\n\\nThis guide addresses t\", \"he \\\"why\\\"-why you might want to modernize your existing applications, and the specific benefits you g\", \"et from using Windows Containers when you move your apps to the cloud. The content in the first few \", \"chapters of the guide is designed for architects and technical decision makers who want an overview,\", \" but who don't need to focus on implementation and technical, step-by-step details.\\n\\nThe last chapte\", \"r of this guide introduces multiple walkthroughs that focus on specific deployment scenarios. This g\", \"uide offers shorter versions of the walkthroughs, to summarize the scenarios and highlight their ben\", \"efits. The full walkthroughs drill down into setup and implementation details, and are published as \", \"a set of wiki posts in the same public GitHub repo where related sample apps reside (discussed in th\", \"e next section). The last chapter and the step-by-step wiki walkthroughs on GitHub will be of more i\", \"nterest to developers and architects who want to focus on implementation details.\\n\\n## Sample apps fo\", \"r modernizing legacy apps: eShopModernizing\\n\\nThe eShopModernizing repo on GitHub offers two sample a\", \"pplications that simulate legacy monolithic web applications. One web app is developed by using ASP.\", \"NET MVC; the second web app is developed by using ASP.NET Web Forms and the third app is an N-Tier a\", \"pp with a WinForms client desktop app consuming a WCF service backend. All these apps are based on t\", \"he traditional .NET Framework. These sample apps don't use .NET Core/.NET 7 or ASP.NET Core as they \", \"are supposed to be existing/legacy .NET Framework applications to be modernized.\\n\\nThese sample apps \", \"have a second version, with modernized code, and which are fairly straightforward. The most importan\", \"t difference between the app versions is that the second versions use Windows Containers as the depl\", \"oyment choice. There also are a few additions to the second versions, like Azure Storage Blobs for m\", \"anaging images, Azure Active Directory for managing security, and Azure Application Insights for mon\", \"itoring and auditing the applications.\\n\\n## Contents\\n\\n| Lift and shift existing .NET apps to Azure Ia\", \"aS (Cloud Infrastructure-Ready)  .................  1                                               \", \"                                        |\\n|---------------------------------------------------------\", \"----------------------------------------------------------------------------------------------------\", \"-----------------------------|\\n| Why migrate existing .NET web applications to Azure IaaS  .........\", \"....................................................... ................... 2                       \", \"                  |\\n| When to migrate to IaaS instead of to PaaS ................................ ..\", \".............................................................. ................. 2                  \", \"       |\\n| Use Azure Migrate to analyze and migrate your existing applications to Azure  ...........\", \"..................... ........... 2                                                             |\\n| \", \"Use Azure Site Recovery to migrate your existing VMs to Azure VMs  ................................ \", \".............................. 3                                                     |\\n| Additional \", \"resources  ................................................................ ........................\", \"........................................ .......................... 4     |\\n| Migrate your relationa\", \"l databases to Azure .........................................................................  6   \", \"                                                               |\\n| When to migrate to Azure SQL Data\", \"base Managed Instance  ................................................................ ............\", \"... 7                                               |\\n| When to migrate to Azure SQL Database ......\", \".......................... ................................................................ ........\", \".............. 8                         |\\n| When to move your original RDBMS to a VM (IaaS) .......\", \"......................... ................................ ................................. 8      \", \"                              |\\n| When to migrate to SQL Server as a VM (IaaS)  ....................\", \"............ ................................................................ ........... 9         \", \"                   |\\n| Use Azure Database Migration Service to migrate your relational databases to \", \"Azure  ............................. 9                                                              \", \"        |\\n| Additional resources ................................ ..................................\", \".............................. ................................ ............................  10 |\\n|\", \" Modernize existing .NET apps to Cloud-Optimized applications  .................................... \", \" 11                                                                                   |\\n| Reasons to\", \" modernize existing .NET apps to Cloud-Optimized applications  ................................ ....\", \"..........  12                                                             |\\n| Cloud - Optimized app\", \"lication principles and tenets  ................................................................ ...\", \".......................  12                                     |\\n| Benefits of a Cloud - Optimized \", \"application  ................................ ......................................................\", \".......... ...........  14                           |\\n| Microsoft technologies in cloud-optimized a\", \"pplications  ................................................................ ..................... \", \" 14                                       |\\n| Monolithic applications can be Cloud-Optimized .......\", \"......................... ................................ ..............................  15       \", \"                               |\\n| What about Cloud - Native applications?  ........................\", \"........ ................................................................ .....................  16 \", \"                    |\\n| Cloud - native applications details  .......................................\", \"......................... ................................ ..............................  17       \", \"         |\\n| What about microservices?  ............................................................\", \".... ................................................................ ..........  18              |\\n\", \"| ................................ ................................................................ \", \".  19                                                                                  |\\n| Deploy ex\", \"isting .NET apps as Windows containers                                                              \", \"                                                                            |\\n| What are containers?\", \" (Linux or Windows) ................................ ...............................................\", \"................. ..............  19                             |\\n| Benefits of containers (Docker \", \"Engine on Linux or Windows) ................................................................ .......\", \"  19                                                  |\\n| ..........................................\", \"......................                                                                              \", \"                                           |\\n| Choose an OS to target with .NET-based containers  ..\", \"......................  22                                                                          \", \"                                |\\n\\n| Windows container types  ......................................\", \".......................... ................................................................ ........\", \".....                        | 23                    |\\n|--------------------------------------------\", \"----------------------------------------------------------------------------------------------------\", \"-------------------------------------------------|-----------------------|\\n| The container ecosystem\", \" in Azure  ................................................................ ........................\", \"........ ............................                                | 24                    |\\n| Whe\", \"n not to deploy to Windows Containers  ................................ ............................\", \".................................... ............                                        | 26       \", \"             |\\n| When to deploy Windows Containers in your on-premises IaaS VM infrastructure ......\", \"..........................                                                                          \", \"         | .  26                 |\\n| When to deploy Windows Containers to Azure VMs (IaaS cloud) ...\", \".............................................................                                       \", \"                             | ....  26              |\\n| When to deploy Windows Containers to Azure \", \"Container Instances (ACI) ................................ ...................                      \", \"                                                 | 27                    |\\n| When to deploy Windows \", \"Containers to Azure Kubernetes Service (AKS) ................................ ...................   \", \"                                                                     | 28                    |\\n| Cho\", \"osing Azure compute platforms for container-based applications ................................ ....\", \"......................                                                                   | 28       \", \"             |\\n| Build resilient services ready for the cloud: Embrace transient failures in the clo\", \"ud ................................                                                                 \", \"         | .  29                 |\\n| Handling partial failure  .....................................\", \"........................... ................................................................ .......\", \"...........                  | 29                    |\\n| Modernize your apps with monitoring and tel\", \"emetry ................................................................ ........................... \", \"                                                 | 31                    |\\n| Monitor your applicatio\", \"n with Application Insights ................................................................ .......\", \"....................                                                 | 31                    |\\n| Mon\", \"itor your Docker infrastructure with Log Analytics and its Container Monitoring solution ......     \", \"                                                                                         | 32       \", \"             |\\n| Modernize your app\\u2019s lifecycle with CI/CD pipelines and DevOps tools in the cloud .\", \".............................                                                                       \", \"         | 34                    |\\n| Migrate to hybrid cloud scenarios  ............................\", \".................................... ...............................................................\", \".                            | .  35                 |\\n| Azure Stack  ..............................\", \".. ................................................................ ................................\", \"................................                 | .........  35         |\\n| Walkthroughs and techni\", \"cal get started overview ............................................................               \", \"                                                                     | 38                    |\\n| Tec\", \"hnical walkthrough list ................................................................ ...........\", \"..................................................... .................                  | 38       \", \"             |\\n| Walkthrough 1: Tour of eShop legacy apps ................................ .........\", \"....................................................... ...............                             \", \"         | 39                    |\\n| Technical walkthrough availability  ...........................\", \"..................................... ................................ ............................ \", \"                             | 39                    |\\n| Overview ................................ .\", \"............................................................... ....................................\", \"............................ ..............      | 39                    |\\n| Goals .................\", \"............... ................................................................ ...................\", \"............................................. ...................... | 39                    |\\n| Sce\", \"nario 1: ASP.NET Web apps  ................................................................ ........\", \"........................................................                                 | ..  39   \", \"             |\\n| Scenario 2: WCF service and WinForms client app (3-Tier app) ......................\", \"..........................................                                                          \", \"         | ....  40              |\\n| Benefits ................................ .....................\", \"........................................... ........................................................\", \"........ .................   | 41                    |\\n| Next steps  ...............................\", \". ................................................................ .................................\", \"............................... ...........      | 41                    |\\n| Walkthrough 2: Containe\", \"rize your existing .NET applications with Windows Containers .......................                \", \"                                                                     | 41                    |\\n| Ove\", \"rview ................................ .............................................................\", \"... ................................................................ ..............      | 41       \", \"             |\\n| Goals ................................ ............................................\", \".................... ................................................................ ..............\", \"........ | 41                    |\\n| Scenario 1: Containerized ASP.NET web apps ....................\", \"............ ................................................................                       \", \"                             | ......  42            |\\n| Scenario 2: Containerized WCF service  ....\", \"............................ ................................................................ ......\", \".............                                    | 42                    |\\n| Benefits ..............\", \".................. ................................................................ ................\", \"................................................                     | .................  43 |\\n\\n| Ne\", \"xt steps  ................................ .........................................................\", \"....... ................................................................ ...........                \", \"                                                                                             |   43 \", \"|\\n|-------------------------------------------------------------------------------------------------\", \"----------------------------------------------------------------------------------------------------\", \"---------------------------------------------------------------------------------------------------|\", \"------|\\n| Walkthrough 3: Deploy your Windows Containers-based app to Azure VMs .....................\", \"........... .............                                                                           \", \"                                                                                                    \", \"     |   44 |\\n| Technical walkthrough availability  ................................................\", \"................ ................................ ............................                      \", \"                                                                                                    \", \"           |   44 |\\n| Overview ................................ ....................................\", \"............................ ................................................................ ......\", \"........                                                                                            \", \"                 |   44 |\\n| Goals ................................ .................................\", \"............................... ................................................................ ...\", \"...................                                                                                 \", \"                       |   44 |\\n| Scenarios ................................ .......................\", \"......................................... ..........................................................\", \"...... ..............                                                                               \", \"                             |   44 |\\n| Azure VMs for Windows Containers ...........................\", \"..... ................................................................ .........................    \", \"                                                                                                    \", \"                                   |   46 |\\n| Benefits ................................ ............\", \".................................................... ...............................................\", \"................. .................                                                                 \", \"                                         |   46 |\\n| Next steps  ................................ ...\", \"............................................................. ......................................\", \".......................... ...........                                                              \", \"                                               |   46 |\\n| Walkthrough 4: Deploy your Windows Contain\", \"ers-based apps to Azure Container Instances (ACI) .                                                 \", \"                                                                                                    \", \"                                                     |   47 |\\n| Technical walkthrough availability  \", \"................................................................ ................................ ..\", \"..........................                                                                          \", \"                                                           |   47 |\\n| Overview .....................\", \"........... ................................................................ .......................\", \"......................................... ..............                                            \", \"                                                                 |   47 |\\n| Goals ..................\", \".............. ................................................................ ....................\", \"............................................ ......................                                 \", \"                                                                       |   47 |\\n| Scenarios ........\", \"........................ ................................................................ ..........\", \"...................................................... ..............                               \", \"                                                                             |   47 |\\n| Benefits ...\", \"............................. ................................................................ .....\", \"........................................................... .................                       \", \"                                                                                   |   47 |\\n| Consid\", \"erations ................................ ..........................................................\", \"...... ................................................................ ...                         \", \"                                                                                         |   48 |\\n| \", \"Next steps  ................................ .......................................................\", \"......... ................................................................ ...........              \", \"                                                                                               |   4\", \"8 |\\n| Walkthrough 5: Deploy your Windows Containers-based apps to Kubernetes in Azure Container  Ser\", \"vice  ................................ .............................................................\", \"... ................................................................ .......................        \", \" |   48 |\\n| Technical walkthrough availability  ....................................................\", \"............ ................................ ............................                          \", \"                                                                                                    \", \"       |   48 |\\n| Overview ................................ ........................................\", \"........................ ................................................................ ..........\", \"....                                                                                                \", \"             |   48 |\\n| Goals ................................ .....................................\", \"........................... ................................................................ .......\", \"...............                                                                                     \", \"                   |   49 |\\n| Scenarios ................................ ...........................\", \"..................................... ..............................................................\", \".. ..............                                                                                   \", \"                         |   49 |\\n| Benefits ................................ ......................\", \".......................................... .........................................................\", \"....... .................                                                                           \", \"                               |   50 |\\n| Next steps  ................................ .............\", \"................................................... ................................................\", \"................ ...........                                                                        \", \"                                     |   51 |\\n| Walkthrough 6: Deploy your Windows Containers-based \", \"apps to Azure App Service for Containers ...........................................................\", \"..... ................................................................ .............................\", \"................................... ...... |   51 |\\n| Technical walkthrough availability  ..........\", \"...................................................... ................................ ............\", \"................                                                                                    \", \"                                                 |   51 |\\n| Overview ...............................\", \". ................................................................ .................................\", \"............................... ..............                                                      \", \"                                                       |   51 |\\n| Goals ............................\", \".... ................................................................ ..............................\", \".................................. ......................                                           \", \"                                                             |   51 |\\n| Scenario  ..................\", \".............. ................................................................ ....................\", \"............................................ ...............                                        \", \"                                                                   |   52 |\\n| Benefits .............\", \"................... ................................................................ ...............\", \"................................................. .................                                 \", \"                                                                         |   52 |\\n\\n- Next steps ....\", \"............................ ................................................................ ......\", \".......................................................... ........... 52\\n\\n## Conclusions ..........\", \"....................................................................................................\", \".............. 53\\n\\nExisting .NET application modernization: Maturity models\\n\\nExisting apps\\n\\nNET web \", \"apps (on-premises)\\n\\nMonolithic architecture\\n\\nOn-premises\\n\\nCloud\\n\\nInfrastructure-Ready\\n\\nMonolithic &a\", \"mp; N-Tier\\n\\nAzure\\n\\nCloud-Optimized\\n\\nContainerized &amp; Managed\\n\\nMonolithic &amp; N-Tier\\n\\nAzure\\n\\nClo\", \"ud-Native\\n\\nMicroservice architecture\\n\\nMicroservices architectures\\n\\nAzure\\n\\n## Lift and shift existing\", \" .NET apps to Azure IaaS (Cloud Infrastructure -Ready)\\n\\nVision: As a first step, to reduce your on-p\", \"remises investment and total cost of hardware and networking maintenance, simply rehost your existin\", \"g applications in the cloud.\\n\\nBefore getting into how to migrate your existing applications to the A\", \"zure infrastructure as a service (IaaS) platform, it's important to analyze the reasons why you'd wa\", \"nt to migrate directly to IaaS in Azure. The scenario at this modernization maturity level essential\", \"ly is to start using VMs in the cloud, instead of continuing to use your current, on-premises infras\", \"tructure.\\n\\nAnother point to analyze is why you might want to migrate to pure IaaS cloud instead of j\", \"ust adding more advanced managed services in Azure. Determine what cases might require IaaS in the f\", \"irst place.\\n\\nFigure 2-1 positions Cloud Infrastructure-Ready applications in the modernization matur\", \"ity levels:\\n\\nFigure 2 -1. Positioning Cloud Infrastructure -Ready applications\\n\\n<!-- image -->\\n\\n## W\", \"hy migrate existing .NET web applications to Azure IaaS\\n\\nThe main reason to migrate to the cloud, ev\", \"en at an initial IaaS level, is to achieve cost reductions. By using more managed infrastructure ser\", \"vices, your organization can lower its investment in hardware maintenance, server or VM provisioning\", \" and deployment, and infrastructure management.\\n\\nAfter you make the decision to move your apps to th\", \"e cloud, the main reason why you might choose IaaS instead of more advanced options like PaaS is sim\", \"ply that the IaaS environment will be more familiar. Moving to an environment that's similar to your\", \" current, on-premises environment offers a lower learning curve, which makes it the quickest path to\", \" the cloud.\\n\\nHowever, taking the quickest path to the cloud doesn't mean that you will gain the most\", \" benefit from having your applications running in the cloud. Any organization will gain the most sig\", \"nificant benefits from a cloud migration at the already introduced Cloud-Optimized and Cloud-Native \", \"maturity levels.\\n\\nIt also has become evident that applications are easier to modernize and rearchite\", \"ct in the future when they are already running in the cloud, even on IaaS. Application data migratio\", \"n has already been achieved. Also, your organization will have gained the skills required for workin\", \"g in the cloud and made the shift to operating in a \\\"cloud culture.\\\"\\n\\n## When to migrate to IaaS ins\", \"tead of to PaaS\\n\\nThe next sections discuss Cloud -Optimized applications that are mostly based on Pa\", \"aS platforms and services. These apps give you the most benefits from migrating to the cloud.\\n\\nIf yo\", \"ur goal is simply to move existing applications to the cloud, first, identify existing applications \", \"that would not require substantial modification to run in Azure App Service. These apps should be th\", \"e first candidates for Cloud -Optimized.\\n\\nThen, for the apps that still cannot move to Windows Conta\", \"iners and PaaS such as App Service or orchestrators like Azure Kubernetes Service, migrate those app\", \"s to simple plain VMs (IaaS).\\n\\nBut, keep in mind that correctly configuring, securing, and maintaini\", \"ng VMs requires much more time and IT expertise compared to using PaaS services in Azure. If you are\", \" considering Azure Virtual Machines, make sure that you take into account the ongoing maintenance ef\", \"fort required to patch, update, and manage your VM environment. Azure Virtual Machines is IaaS.\\n\\n## \", \"Use Azure Migrate to analyze and migrate your existing applications to Azure\\n\\nMigrating to the cloud\", \" doesn't have to be difficult. But many organizations struggle to get started - to get deep visibili\", \"ty into the environment and the tight interdependencies between applications, workloads, and data. W\", \"ithout that visibility, it can be difficult to plan the path forward. Without detailed information o\", \"n what's required for a successful migration, you can't have the right\\n\\nDependencies - Micros X\\n\\n+ ~\", \"\\n\\nMicrosoft Azure Demo &gt; contoso payroll app &gt; Dependencies\\n\\n=\\n\\n+ New\\n\\nI Dashboard\\n\\nI All reso\", \"urces\\n\\n\\u2022 Resource groups\\n\\nMigration projects\\n\\n* Solutions\\n\\n* Log Analytics\\n\\nRecovery Services vaults\", \"\\n\\n[al Virtual machines\\n\\nMonitor\\n\\n4 Advisor\\n\\nI Subscriptions\\n\\nMore services &gt;\\n\\nDependencies\\n\\n\\u043e\\u0432\\u043e, \", \"\\u0440\\u0430\\u0443\\u0433\\u043e, app\\n\\n+ Add machine(s)\\n\\n- Remove machine(s)\\n\\nU Refresh\\n\\nO Configure agents\\n\\nUse Ctri - Click t\", \"o multiselect machines on the map to add or remove from the group\\n\\n\\u00a9 Time Range: 9/21/2017 7:00 AM \\u2014\", \" 8:00 AM (1 hour)\\n\\n\\u2022 *\\n\\nLegend shons@microsoft.com\\n\\n\\u00ab\\n\\nconversations within your organization. You d\", \"on't know enough about the potential cost benefits, or whether workloads could just lift-and-shift o\", \"r would require significant rework to migrate successfully. No wonder many organizations hesitate.\\n\\n\", \"Azure Migrate is a new service that provides the guidance, insights, and mechanisms needed to assist\", \" you in migrating to Azure. Azure Migrate provides:\\n\\n- Discovery and assessment for on-premises virt\", \"ual machines\\n- Inbuilt dependency mapping for high-confidence discovery of multi-tier applications\\n-\", \" Intelligent right sizing to Azure virtual machines\\n- Compatibility reporting with guidelines for re\", \"mediating potential issues\\n- Integration with Azure Database Management Service for database discove\", \"ry and migration\\n\\nAzure Migrate gives you confidence that your workloads can migrate with minimal im\", \"pact to the business and run as expected in Azure. With the right tools and guidance, you can achiev\", \"e maximum return on investment while assuring that critical performance and reliability needs are me\", \"t.\\n\\nFigure 2-2 shows you the built-in dependency mapping for all server and application connections \", \"performed by Azure Migrate.\\n\\nFigure 2 -2. Positioning Cloud Infrastructure -Ready applications\\n\\n<!--\", \" image -->\\n\\n## Use Azure Site Recovery to migrate your existing VMs to Azure VMs\\n\\nAs part of the end\", \"-to-end Azure Migrate , Azure Site Recovery is a tool that you can use to easily migrate your web ap\", \"ps to VMs in Azure. You can use Site Recovery to replicate on-premises VMs and physical servers to A\", \"zure, or to replicate them to a secondary on-premises location. You can even replicate a workload th\", \"at's running on a supported Azure VM, on an on-premises Hyper-V VM, on a VMware VM, or on a Windows \", \"or Linux physical server. Replication to Azure eliminates the cost and complexity of maintaining a s\", \"econdary datacenter.\\n\\nRestore default configuration Report a bug P Q &gt;\\n\\nMICROSOFT\\n\\n\\\"J\\n\\nReplicated\", \" items\\n\\nContosoRecoveryServices\\n\\nEE Columns\\n\\nU Refresh + Replicate\\n\\nLast refreshed at: 10/13/2016, 2\", \":59:17 PM\\n\\n&gt; Filter item.s....\\n\\nNAME\\n\\nAWSServer2012\\n\\nSite Recovery is also made specifically for \", \"hybrid environments that are partly on-premises and partly on Azure. Site Recovery helps ensure busi\", \"ness continuity by keeping your apps that are running on VMs and on -premises physical servers avail\", \"able if a site goes down. It replicates workloads that are running on VMs and physical servers so th\", \"at they remain available in a secondary location if the primary site isn't available. It recovers wo\", \"rkloads to the primary site when it's up and running again.\\n\\nFabrikamMarketing\\n\\nFigure 2-3 shows the\", \" execution of multiple VM migrations by using Azure Site Recovery.\\n\\nFabrikamFinance\\n\\n\\u2022 ContosoReplic\", \"ationGr...\\n\\nFigure 2 -3. Positioning Cloud Infrastructure -Ready applications\\n\\n<!-- image -->\\n\\n## Ad\", \"ditional resources\\n\\n- Azure Migrate Datasheet https://aka.ms/azuremigration\\\\_datasheet\\n- Azure Migra\", \"te https://aka.ms/azuremigrate\\n- Azure migration and modernization center https://azure.microsoft.co\", \"m/migration/\\n- Migrate to Azure with Site Recovery https://learn.microsoft.com/azure/site-recovery/s\", \"ite-recovery-migrate-to-azure\\n- Azure Site Recovery service overview\\n\\nChange PIT\\n\\n- \\u2022 x\\n\\nhttps://lea\", \"rn.microsoft.com/azure/site-recovery/site-recovery-overview\\n\\n- Migrating VMs in AWS to Azure VMs htt\", \"ps://learn.microsoft.com/azure/site-recovery/site-recovery-migrate-aws-to-azure\\n\\nOn-premises\\n\\nSQL\\n\\nS\", \"erver\\n\\nORACLE\\n\\nMYSQL\\n\\nPostgre SOL\\n\\nIBM\\n\\nDB2\\n\\nOther\\n\\nInstance migration\\n\\nADMS\\n\\nService\\n\\nSQL Server\\n\\nV\", \"M\\n\\nSQL\\n\\nSQL\\n\\nSQL\\n\\nOracle\\n\\nInstance migration\\n\\nADMS\\n\\nService\\n\\n\\u2022 Microsoft Azure\\n\\nAzure SQL Database S\", \"ervices\\n\\nSQL\\n\\nSQL\\n\\nSQL\\n\\nSQL\\n\\nDatabase migration\\\"\\n\\nADMS\\n\\n## Migrate your relational databases to Azur\", \"e\\n\\nInstance migration\\n\\nDatabase\\n\\nMy migration\\n\\nAzure Database\\n\\nAzure Database\\n\\nVision: Azure offers \", \"the most comprehensive database migration.\\n\\n(*) ADMS: Azure Database\\n\\nMigration Service\\n\\nVMs\\n\\nIn Azu\", \"re, you can migrate your database servers directly to IaaS VMs (pure lift and shift), or you can mig\", \"rate to Azure SQL Database, for additional benefits. Azure SQL Database offers the managed instance \", \"and full database -as-a-service (DBaaS) options. Figure 3-1 shows the multiple relational database m\", \"igration paths available in Azure.\\n\\nFigure 3 -1. Database migration paths in Azure\\n\\n<!-- image -->\\n\\n\", \"SQL\\n\\n## When to migrate to Azure SQL Database Managed Instance\\n\\nIn most cases, Azure SQL Database Ma\", \"naged Instance will be your best option to consider when you migrate your data to Azure. If you are \", \"migrating SQL Server databases and need nearly 100% assurance that you won't need to rearchitect you\", \"r application or make changes to your data or data access code, choose the Managed Instance feature \", \"of Azure SQL Database.\\n\\nAzure SQL Database Managed Instance is the best option if you have additiona\", \"l requirements for SQL Server instance -level functionality, or isolation requirements beyond the fe\", \"atures provided in a standard Azure SQL Database (single database model). This last one is the most \", \"PaaS-oriented choice, but it doesn't offer the same features as that of a traditional SQL server. Mi\", \"gration might surface frictions.\\n\\nFor example, an organization that has made deep investments in ins\", \"tance-level SQL Server capabilities would benefit from migrating to SQL Managed Instance. Examples o\", \"f instance-level SQL Server capabilities include SQL common language runtime (CLR) integration, SQL \", \"Server Agent, and crossdatabase querying. Support for these features is not available in standard Az\", \"ure SQL Database (a single-database model).\\n\\nAn organization that operates in a highly regulated ind\", \"ustry, and which needs to maintain isolation for security purposes, also might benefit from choosing\", \" the SQL Managed Instance model.\\n\\nManaged Instance in Azure SQL Database has the following character\", \"istics:\\n\\n- Security isolation through Azure Virtual Network\\n- Application surface compatibility, wit\", \"h these features:\\n- \\u2013 SQL Server Agent and SQL Server Profiler\\n- \\u2013 Cross -database references and qu\", \"eries, SQL CLR, replication, change data capture (CDC), and Service Broker\\n- Database sizes up to 35\", \" TB\\n- Minimum -downtime migration, with these features:\\n- \\u2013 Azure Database Migration Service\\n- \\u2013 Nat\", \"ive backup and restore, and log shipping\\n\\nWith these capabilities, when you migrate existing applica\", \"tion databases to Azure SQL Database, the Managed Instance model offers nearly 100% of the benefits \", \"of PaaS for SQL Server. Managed Instance is a SQL Server environment where you continue using instan\", \"ce-level capabilities without changing your application design.\\n\\nManaged Instance is probably the be\", \"st fit for enterprises that currently are using SQL Server, and which require flexibility in their n\", \"etwork security in the cloud. It's like having a private virtual network for your SQL databases.\\n\\n##\", \" When to migrate to Azure SQL Database\\n\\nAs mentioned, the standard Azure SQL Database is a fully man\", \"aged, relational DBaaS. SQL Database currently manages millions of production databases, across 38 d\", \"atacenters, around the world. It supports a broad range of applications and workloads, from managing\", \" straightforward transactional data, to driving the most data-intensive, mission-critical applicatio\", \"ns that require advanced data processing at a global scale.\\n\\nBecause of its full PaaS features, bett\", \"er pricing-and ultimately lower cost-you should move to the standard Azure SQL Database as your \\\"by-\", \"default choice\\\" if you have an application that uses basic, standard SQL databases, and no additiona\", \"l instance features. SQL Server features like SQL CLR integration, SQL Server Agent, and cross-datab\", \"ase querying are not supported in the standard Azure SQL Database. Those features are available only\", \" in the Azure SQL Database Managed Instance model.\\n\\nAzure SQL Database is the only intelligent cloud\", \" database service that's built for app developers. It's also the only cloud database service that sc\", \"ales on-the-fly, without downtime, to help you efficiently deliver multitenant apps. Ultimately, Azu\", \"re SQL Database leaves you more time to innovate, and it accelerates your time to market. You can bu\", \"ild secure apps and connect to your SQL database by using the languages and platforms that you prefe\", \"r.\\n\\nAzure SQL Database offers the following benefits:\\n\\n- Built -in intelligence (machine learning) t\", \"hat learns and adapts to your app\\n- On -demand database provisioning\\n- A range of offers, for all wo\", \"rkloads\\n- 99.99% availability SLA, zero maintenance\\n- Geo -replication and restore services for data\", \" protection\\n- Azure SQL Database Point in Time Restore feature\\n- Compatibility with SQL Server 2016,\", \" including hybrid and migration\\n\\nThe standard Azure SQL Database is closer to PaaS than Azure SQL Da\", \"tabase Managed Instance. Prefer the standard Azure SQL Database because you'll get more benefits fro\", \"m a managed cloud. However, Azure SQL Database has some key differences from regular and on-premises\", \" SQL Server instances. Depending on your existing application's database requirements, and your ente\", \"rprise requirements and policies, it might not be the best choice when you are planning your migrati\", \"on to the cloud.\\n\\n## When to move your original RDBMS to a VM (IaaS)\\n\\nOne of your migration options \", \"is to move your original relational database management system (RDBMS), including Oracle, IBM DB2, M\", \"ySQL, PostgreSQL, or SQL Server, to a similar server that's running on an Azure VM. If you have exis\", \"ting applications that require the fastest migration to the cloud with minimal changes, or no change\", \"s at all, a direct migration to IaaS in the cloud might be a\\n\\nfair option. It might not be the best \", \"way to take advantage of all the cloud's benefits, but it's probably the fastest initial path.\\n\\nCurr\", \"ently, Microsoft Azure supports up to 331 different database servers deployed as IaaS VMs. These inc\", \"lude popular RDBMS like SQL Server, Oracle, MySQL, PostgreSQL, and IBM DB2, and many other NoSQL dat\", \"abases like MongoDB, Cassandra, DataStax, MariaDB, and Cloudera.\\n\\n## Note\\n\\nAlthough moving your RDBM\", \"S to an Azure VM might be the fastest way to migrate your data to the cloud (because it is IaaS), th\", \"is approach requires a significant investment in your IT teams (database administrators and IT pros)\", \". Enterprise teams need to be able to set up and manage high availability, disaster recovery, and pa\", \"tching for SQL Server. This context also needs a customized environment, with full administrative ri\", \"ghts.\\n\\n## When to migrate to SQL Server as a VM (IaaS)\\n\\nThere might be a few cases where you still n\", \"eed to migrate to SQL Server as a regular VM. An example scenario is if you need to use SQL Server R\", \"eporting Services. In most cases, though, Azure SQL Database Managed Instance can provide everything\", \" you need to migrate from on-premises SQL servers, so migration to a SQL Server VM should be your la\", \"st resort to try.\\n\\n## Use Azure Database Migration Service to migrate your relational databases to A\", \"zure\\n\\nYou can use Azure Database Migration Service to migrate relational databases like SQL Server, \", \"and MySQL to Azure, whether your target database is Azure SQL Database, Azure SQL Database Managed I\", \"nstance, or SQL Server on an Azure VM.\\n\\nThe automated workflow, with assessment reporting, guides yo\", \"u through the changes you need to make before you migrate the database. When you are ready, the serv\", \"ice migrates the source database to Azure.\\n\\nWhenever you change an original RDBMS, you might need to\", \" retest. You also might need to change the SQL sentences or Object-Relational Mapping (ORM) code in \", \"your application, depending on testing results.\\n\\nIf you have any other database (for example, IBM DB\", \"2) and you opt for a lift and shift approach, you might want to continue using those databases as Ia\", \"aS VMs in Azure, unless you are willing to perform a more complex data migration. A more complex dat\", \"a migration will require additional effort because you'd be migrating to a different database type w\", \"ith the new schema and different programming libraries.\\n\\n## Additional resources\\n\\n- Choose a cloud S\", \"QL Server option: Azure SQL Database (PaaS) or SQL Server on Azure VM (IaaS)\\n\\nhttps://learn.microsof\", \"t.com/azure/sql-database/sql-database-paas-vs-sql-server-iaas\\n\\n- SQL Server database migration to SQ\", \"L Database in the cloud https://learn.microsoft.com/azure/sql-database/sql-database-cloud-migrate\\n- \", \"Azure SQL Database https://azure.microsoft.com/services/sql-database/?v=16.50\\n- SQL Server on virtua\", \"l machines https://azure.microsoft.com/services/virtual-machines/sql-server/\\n\\nExisting NET applicati\", \"on modernization: Maturity models\\n\\nExisting apps\\n\\nNET web apps (on-premises)\\n\\nMonolithic architectur\", \"e\\n\\nOn-premises\\n\\nCloud\\n\\nInfrastructure-Ready\\n\\nMonolithic &amp; N-Tier\\n\\nAzure\\n\\nCloud-Optimized\\n\\nContai\", \"nerized &amp; Managed\\n\\nMonolithic &amp; N-Tier\\n\\nAzure\\n\\nCloud-Native\\n\\nMicroservice architecture\\n\\nMicr\", \"oservices architectures\\n\\nAzure\\n\\n## Modernize existing .NET apps to Cloud -Optimized applications\\n\\nVi\", \"sion: Modernize your existing .NET Framework applications to Cloud-Optimized applications to drastic\", \"ally improve your deployment agility, so you can ship faster and lower application's delivery costs.\", \"\\n\\nTo take advantage of the benefits of the cloud and new technologies like containers, you should at\", \" least partially modernize your existing .NET applications. Ultimately, modernizing your enterprise \", \"applications will lower your total cost of ownership.\\n\\nPartially modernizing an app doesn't necessar\", \"ily mean a full migration and rearchitecture. You can initially modernize your existing applications\", \" with important but easy to do modernization. You can maintain your current code base, written in ex\", \"isting .NET Framework versions, with any Windows and IIS dependencies. Figure 4-1 highlights how Clo\", \"ud-Optimized apps are positioned in Azure application modernization maturity models.\\n\\nFigure 4 -1. P\", \"ositioning Cloud -Optimized applications\\n\\n<!-- image -->\\n\\n## Reasons to modernize existing .NET apps\", \" to Cloud -Optimized applications\\n\\nWith a Cloud -Optimized application, you can rapidly and repeated\", \"ly deliver reliable applications to your customers. You gain essential agility and reliability by de\", \"ferring much of the operational complexity of your app to the platform.\\n\\nIf you can't get your appli\", \"cations to market quickly, by the time you ship your app, the market you were targeting will have ev\", \"olved. You might be too late, no matter how well the application was architected or engineered. You \", \"might be failing or not reaching your full potential because you can't sync app delivery with the ne\", \"eds of the market.\\n\\nThe need for continuous business innovation pushes development and operations te\", \"ams to the limit. The only way to achieve the agility you need in continuous business innovation is \", \"by modernizing your applications with technologies like containers and specific Cloud-Optimized appl\", \"ication principles.\\n\\nThe bottom line is that when an organization builds and manages applications th\", \"at are CloudOptimized, it can put solutions in the hands of customers sooner and bring new ideas to \", \"market when they are relevant.\\n\\n## Cloud -Optimized application principles and tenets\\n\\nImprovements \", \"in the cloud are mostly focused on meeting two goals: Reduce costs and improve business growth by im\", \"proving agility. These goals are achieved by simplifying processes and reducing friction when you re\", \"lease and ship applications.\\n\\nYour application is Cloud-Optimized if you can-in an agile manner-deve\", \"lop your app autonomously from other on -premises apps, and then release, deploy, autoscale, monitor\", \", and troubleshoot your app in the cloud.\\n\\nThe key is agility. You can't ship with agility unless yo\", \"u reduce to an absolute minimum any deployment-to-production issues and dev/test environment issues.\", \" Containers (specifically, Docker, as a de facto standard) and managed services were designed specif\", \"ically for this purpose.\\n\\nTo achieve agility, you also need automated DevOps processes that are base\", \"d on CI/CD pipelines that release to scalable platforms in the cloud. CI/CD platforms (like Azure De\", \"vOps Services or Jenkins) that deploy to a scalable and resilient cloud platform (like Azure App Ser\", \"vice or Azure Kubernetes Service) are key technologies for achieving agility in the cloud.\\n\\nThe foll\", \"owing list describes the main tenets or practices for Cloud-Optimized applications. Note that you ca\", \"n adopt all or only some of these principles, in a progressive or incremental approach:\\n\\n- Container\", \"s. Containers give you the ability to include application dependencies with the application itself. \", \"Containerization significantly reduces the number of issues you might encounter when you deploy to p\", \"roduction environments or test in staging environments. Ultimately, containers improve the agility o\", \"f application delivery.\\n\\nCloud-Optimized application\\n\\n- Resilient and scalable cloud. The cloud prov\", \"ides a platform that is managed, elastic, scalable, and resilient. These characteristics are fundame\", \"ntal to gain cost improvements and ship highly available and reliable applications in a continuous d\", \"elivery. Managed services like managed databases, managed cache as a service (CaaS), and managed sto\", \"rage are fundamental pieces in alleviating the maintenance costs of your application.\\n- Monitoring. \", \"You can't have a reliable application without having a good way to detect and diagnose exceptions an\", \"d application performance issues. You need to get actionable insights through application performanc\", \"e management and instant analytics.\\n- DevOps culture and continuous delivery. Adopting DevOps practi\", \"ces requires a cultural change in which teams no longer work in independent silos. CI/CD pipelines a\", \"re possible only when there is an increased collaboration between development and IT operations team\", \"s, supported by containers and CI/CD tools.\\n\\nFigure 4-2 shows the main optional pillars of a Cloud-O\", \"ptimized application. The more pillars you implement, the readier your application will be to succee\", \"d in meeting your customers' expectations.\\n\\nFigure 4 -2. Main pillars of a Cloud-Optimized applicati\", \"on\\n\\nTo summarize, a Cloud-Optimized application is an approach to building and managing applications\", \" that takes advantage of the cloud computing model, while using a combination of containers, managed\", \" cloud infrastructure, resilient application techniques, monitoring, continuous delivery, and DevOps\", \", all without the need to rearchitect and recode your existing applications.\\n\\nYour organization can \", \"adopt these technologies and approaches gradually. You don't have to embrace all of them, all at onc\", \"e. You can adopt them incrementally, depending on enterprise priorities and user needs.\\n\\n## Benefits\", \" of a Cloud -Optimized application\\n\\nYou can get the following benefits by converting an existing app\", \"lication to a Cloud-Optimized application (without rearchitecting or coding):\\n\\n- Lower costs, becaus\", \"e the managed infrastructure is handled by the cloud provider . Cloud -Optimized applications get th\", \"e benefits of the cloud by using the cloud's out-of-thebox elasticity, autoscale, and high availabil\", \"ity. Benefits are related not only to the compute features (VMs and containers), but also depend on \", \"the resources in the cloud, like DBaaS, CaaS, and any infrastructure an application might needed.\\n- \", \"Resilient application and infrastructure. When you migrate to the cloud, you need to embrace transie\", \"nt failures; failures will occur in the cloud. Also, cloud infrastructure and hardware are \\\"replacea\", \"ble,\\\" which increases opportunities for transient downtime. At the same time, inner cloud capabiliti\", \"es and certain application development techniques that implement resiliency and automate recovery ma\", \"ke it much easier to recover from unexpected failures in the cloud.\\n- Deeper insights into applicati\", \"on performance. Cloud monitoring tools like Azure Application Insights provide visualization for hea\", \"lth management, logging, and notifications. Audit logs make applications easy to debug and audit, fu\", \"ndamental for a reliable cloud application.\\n- Application portability, with agile deployments. Conta\", \"iners (either Linux or Windows containers based on Docker Engine) offer the best solution to avoidin\", \"g a cloud-locked application. By using containers, Docker hosts, and multi-cloud orchestrators, you \", \"can easily move from one environment or cloud to another. Containers eliminate the friction that typ\", \"ically occurs in deployments to any environment (stage/test/production).\\n\\nAll of these benefits ulti\", \"mately provide key cost reductions for your end-to-end application lifecycle. In the following secti\", \"ons, these benefits are explained in more detail, and are linked to specific technologies.\\n\\n## Micro\", \"soft technologies in cloud -optimized applications\\n\\nThe following list describes the tools, technolo\", \"gies, and solutions that are recognized as requirements for Cloud -Optimized apps. You can adopt Clo\", \"ud-Optimized elements selectively or gradually, depending on your priorities.\\n\\n- Cloud infrastructur\", \"e: The infrastructure that provides the compute platform, operating system, network, and storage. Mi\", \"crosoft Azure is positioned at this level.\\n- Runtime: This layer provides the environment for the ap\", \"plication to run. If you are using containers, this layer usually is based on Docker Engine, running\", \" either on Linux hosts or on Windows hosts. (Windows Containers are supported beginning with Windows\", \" Server 2016.\\n\\nWindows Containers is the best choice for existing .NET Framework applications that r\", \"un on Windows.)\\n\\n- Managed cloud: When you choose a managed cloud option, you can avoid the expense \", \"and complexity of managing and supporting the underlying infrastructure, VMs, OS patches, and networ\", \"king configuration. If you choose to migrate by using IaaS, you are responsible for all of these tas\", \"ks, and for associated costs. In a managed cloud option, you manage only the applications and servic\", \"es that you develop. The cloud service provider typically manages everything else. Examples of manag\", \"ed cloud services in Azure include Azure SQL Database , Azure Redis Cache , Azure Cosmos DB , Azure \", \"Storage , Azure Database for MySQL , Azure Database for PostgreSQL , Azure Active Directory, and man\", \"aged compute services like VM scale sets , Azure App Service, and Azure Kubernetes Service .\\n- Appli\", \"cation development: You can choose from many languages when you build applications that run in conta\", \"iners. This guide focuses on .NET, but, you can develop container -based apps by using other languag\", \"es, like Node.js, Python, Spring/Java, or Go.\\n- Monitoring, telemetry, logging, and auditing: The ab\", \"ility to monitor and audit applications and containers that are running in the cloud is critical for\", \" any Cloud-Optimized application. Azure Application Insights and Microsoft Operations Management Sui\", \"te are the main Microsoft tools that provide monitoring and auditing for Cloud-Optimized apps.\\n- Pro\", \"visioning: Automation tools help you provision the infrastructure and deploy an application to multi\", \"ple environments (production, testing, staging). You can use tools like Chef and Puppet to manage an\", \" application's configuration and environment. This layer also can be implemented by using simpler an\", \"d more direct approaches. For example, you can deploy directly by using Azure command-line interface\", \" (Azure CLI) tooling, and then use the continuous deployment and release management pipelines in Azu\", \"re DevOps Services .\\n- Application lifecycle: Azure DevOps Services and other tools, like Jenkins, a\", \"re built automation servers that help you implement CI/CD pipelines, including release management.\\n\\n\", \"The next sections of this chapter, and the related walkthroughs, focus specifically on details about\", \" the runtime layer (Windows Containers). The guidance describes the ways you can deploy Windows Cont\", \"ainers on Windows Server 2016 (and later versions) VMs and Azure Container Instances. It also covers\", \" more advanced PaaS platforms like Azure App Service and orchestrator like Azure Kubernetes Service.\", \"\\n\\n## Monolithic applications can be Cloud-Optimized\\n\\nIt's important to highlight that monolithic app\", \"lications (applications that are not based on microservices) can be Cloud-Optimized applications. Yo\", \"u can build and operate monolithic applications that take advantage of the cloud computing model by \", \"using a combination of containers, continuous delivery, and DevOps. If an existing monolithic applic\", \"ation is right for your business goals, you can modernize it and make it Cloud-Optimized.\\n\\nSimilarly\", \", if monolithic applications can be Cloud-Optimized applications, other, more complex architectures \", \"like N -Tier applications can also be modernized as Cloud-Optimized applications.\\n\\nExisting .NET app\", \"lication modernization: Maturity models\\n\\nExisting apps\\n\\n.NET web apps (on-premises)\\n\\nMonolithic arch\", \"itecture\\n\\nCloud\\n\\nInfrastructure-Ready\\n\\nMonolithic &amp; N-Tier\\n\\nCloud-Optimized\\n\\nContainerized &amp;\", \" Managed\\n\\nMonolithic &amp; N-Tier\\n\\nCloud-Native\\n\\nMicroservice architecture\\n\\nMicroservices architectu\", \"res\\n\\n## What about Cloud -Native applications?\\n\\nOn-premises\\n\\nAlthough Cloud-Native applications are \", \"not the main focus of this guide, it's helpful to have an understanding of this modernization maturi\", \"ty level, and to distinguish it from Cloud-Optimized applications. Minimal code changes Architected \", \"for the cloud, needs new code\\n\\nFigure 4-3 positions Cloud-Native apps in the application modernizati\", \"on maturity levels:\\n\\nFigure 4 -3. Positioning Cloud -Native applications\\n\\n<!-- image -->\\n\\nThe Cloud \", \"-Native modernization maturity level usually requires new development investments. Moving to the Clo\", \"ud-Native level typically is driven by business need to modernize applications as much as possible t\", \"o drastically improve scale in large applications by creating autonomous subsystems (microservices) \", \"that can be deployed and scale independently from other areas of the application while lowering cost\", \"s in the long term and increase evolution agility of those autonomous app's parts that provide signi\", \"ficant compete advantages.\\n\\nThe main pillars of Cloud-Native applications are based on microservices\", \" architecture approaches, which can evolve with agility and scale to limits that would be difficult \", \"to achieve in a monolithic architecture, deployed to either on-premises or cloud environment.\\n\\nFigur\", \"e 4-4 shows the main characteristics of the Cloud-Native model.\\n\\nCloud-Native in Azure\\n\\nMain charact\", \"eristics\\n\\n<!-- image -->\\n\\n## Cloud-native\\n\\nMicroservices\\n\\nDocker containers\\n\\nOrchestrators (AKS/Kube\", \"rnetes, Service Fabric)\\n\\nServerless (Azure Functions) Cloud-resilient .NET Core (cross-platform, Lin\", \"ux/Windows) Other languages\\n\\nFigure 4 -4. Cloud -Native characteristics\\n\\nIn addition, you can extend\", \" basic modern web apps and cloud-native apps by adding other services, like artificial intelligence \", \"(AI), machine learning (ML), and IoT. You might use any of these services to extend any of the possi\", \"ble Cloud-Optimized approaches.\\n\\nThe fundamental difference in applications at the Cloud-Native leve\", \"l is in the application architecture. Cloud -native applications are, by definition, apps that are b\", \"ased on microservices. Cloud-native apps require special architectures, technologies, and platforms,\", \" compared to a monolithic web application or traditional N -Tier application.\\n\\n## Cloud -native appl\", \"ications details\\n\\nCloud -Native is a more advanced or mature state for large and mission-critical ap\", \"plications. CloudNative applications usually require architecture and design that are created from s\", \"cratch instead of by modernizing existing applications. The key difference between a Cloud-Native ap\", \"plication and a simpler Cloud-Optimized web app is the recommendation to use microservices architect\", \"ures in a cloud -native approach. Cloud-Optimized apps can also be monolithic web apps or N-Tier app\", \"s.\\n\\nThe Twelve -Factor App (a collection of patterns that are closely related to microservices appro\", \"aches) is also considered a requirement for cloud-native application architectures.\\n\\nThe Cloud Nativ\", \"e Computing Foundation (CNCF) is a primary promoter of cloud-native principles. Microsoft is a membe\", \"r of the CNCF .\\n\\nFor detailed guidance on how to design and develop cloud-native applications, read \", \"the following free e -books:\\n\\n- Architecting Cloud-Native .NET Applications for Azure\\n- .NET Microse\", \"rvices: Architecture for containerized .NET applications .\\n\\nThe most important factor to consider if\", \" you migrate a full application to the cloud-native model is that you must rearchitect to a microser\", \"vices-based architecture. This approach clearly requires a significant investment in development bec\", \"ause of the large refactoring process involved. This option usually is chosen for mission-critical a\", \"pplications that need new levels of scalability and long-term agility. But, you could start moving t\", \"oward cloud-native by adding microservices for just a few new scenarios, and eventually refactor the\", \" application fully as microservices. This step is an incremental approach that is the best option fo\", \"r some scenarios.\\n\\n## What about microservices?\\n\\nUnderstanding microservices and how they work is im\", \"portant when you are considering cloud-native applications for your organization.\\n\\nThe microservices\", \" architecture is an advanced approach that you can use for applications that are created from scratc\", \"h or when you evolve existing applications toward cloud-native applications. You can start by adding\", \" a few microservices to existing applications to learn about the new microservices paradigms. But cl\", \"early, you need to architect and code, especially for this type of architectural approach.\\n\\nHowever,\", \" microservices are not mandatory for any new or modern application. Microservices are not a \\\"magic b\", \"ullet,\\\" and they aren't the single, best way to create every application. How and when you use micro\", \"services depends on the type of application that you need to build.\\n\\nThe microservices architecture \", \"is becoming the preferred approach for distributed and large or complex mission-critical application\", \"s that are based on multiple, independent subsystems in the form of autonomous services. In a micros\", \"ervices -based architecture, an application is built as a collection of services that can be indepen\", \"dently developed, tested, versioned, deployed, and scaled. This approach can include any related, au\", \"tonomous database per microservice.\\n\\nFor a detailed look at a microservices architecture that you ca\", \"n implement by using .NET, see the downloadable PDF e -book .NET microservices: Architecture for con\", \"tainerized .NET applications. The guide also is available online .\\n\\nBut even in scenarios in which m\", \"icroservices offer powerful capabilities-independent deployment, strong subsystem boundaries, and te\", \"chnology diversity-they also raise many new challenges. The challenges are related to distributed ap\", \"plication development, such as fragmented and independent data models; achieving resilient communica\", \"tion between microservices; the need for eventual consistency; and operational complexity. Microserv\", \"ices introduce a higher level of complexity compared to traditional monolithic applications.\\n\\nBecaus\", \"e of the complexity of a microservices architecture, only specific scenarios and certain application\", \" types are suitable for microservice-based applications. These include large and complex application\", \"s that have multiple, evolving subsystems. In these cases, it's worth investing in a more complex so\", \"ftware architecture, for increased long-term agility and more efficient application maintenance. But\", \" for less complex scenarios, it might be better to continue with a monolithic application approach o\", \"r simpler N-Tier approaches.\\n\\nAs a final note, even at the risk of being repetitive about this conce\", \"pt, you shouldn't look at using microservices in your applications as \\\"all-in or nothing at all.\\\" Yo\", \"u can extend and evolve existing monolithic applications by adding new, small scenarios based on mic\", \"roservices. You don't need to start from scratch to start working with a microservices architecture \", \"approach. In fact, we recommend that you evolve from using an existing monolithic or N-Tier applicat\", \"ion by adding new scenarios. Eventually, you can break down the application into autonomous componen\", \"ts or microservices. You can start evolving your monolithic applications in a microservices directio\", \"n, step by step.\\n\\nIn any case, the rest of this present guidance focuses most of all on \\\"no microser\", \"vices-based apps\\\" because this guidance is mainly targeting the modernization of existing apps that \", \"usually have monolithic or N -Tier architectures.\\n\\n## Deploy existing .NET apps as Windows container\", \"s\\n\\nDeployments that are based on Windows Containers are applicable to Cloud-Optimized applications a\", \"nd Cloud -Native applications.\\n\\nHowever, in this guide and especially in the following sections, it \", \"mostly focuses on using Windows Containers for Cloud -Optimized applications where you don't need to\", \" rearchitect your application.\\n\\n## What are containers? (Linux or Windows)\\n\\nContainers are a way to \", \"wrap up an application into its own isolated package. In its container, the application is not affec\", \"ted by applications or processes that exist outside of the container. Everything the application dep\", \"ends on to run successfully as a process is inside the container. Wherever the container might move,\", \" the requirements of the application will always be met, in terms of direct dependencies, because it\", \" is bundled with everything that it needs to run (library dependencies, runtimes, and so on).\\n\\nThe m\", \"ain characteristic of a container is that it makes the environment the same across different deploym\", \"ents because the container itself comes with all the dependencies it needs. You can debug the applic\", \"ation on your machine, and then deploy it to another machine, with the same environment guaranteed.\\n\", \"\\nA container is an instance of a container image. A container image is a way to package an app or se\", \"rvice (like a snapshot), and then deploy it in a reliable and reproducible way. You could say that D\", \"ocker is not only a technology-it's also a philosophy and a process.\\n\\nAs containers daily become mor\", \"e common, they are becoming an industry-wide \\u201cunit of deployment.\\u201d\\n\\n## Benefits of containers (Docke\", \"r Engine on Linux or Windows)\\n\\nBuilding applications by using containers-which also might be defined\", \" as lightweight building blocksoffers a significant increase in agility for building, shipping, and \", \"running any application, across any infrastructure.\\n\\nWith containers, you can take any app from deve\", \"lopment to production with little or no code change, thanks to Docker integration across Microsoft d\", \"eveloper tools, operating systems, and the cloud.\\n\\nWhen you deploy to plain VMs, you probably alread\", \"y have a method in place for deploying ASP.NET apps to your VMs. It's likely, though, that your meth\", \"od involves multiple manual steps or complex automated processes by using a deployment tool like Pup\", \"pet, or a similar tool. You might need to perform tasks like modifying configuration items, copying \", \"application content between servers, and running interactive setup programs based on .msi setups, fo\", \"llowed by testing. All those steps in the deployment add time and risk to deployments. You will get \", \"failures whenever a dependency is not present in the target environment.\\n\\nIn Windows Containers, the\", \" process of packaging applications is fully automated. Windows Containers is based on the Docker pla\", \"tform, which offers automatic updates and rollbacks for container deployments. The main improvement \", \"you get from using the Docker engine is that you create images, which are like snapshots of your app\", \"lication, with all its dependencies. The images are Docker images (a Windows container image, in thi\", \"s case). The images run ASP.NET apps in containers, without going back to source code. The container\", \" snapshot becomes the unit of deployment.\\n\\nMany organizations are containerizing existing monolithic\", \" applications for the following reasons:\\n\\n- Release agility through improved deployment. Containers \", \"offer a consistent deployment contract between development and operations. When you use containers, \", \"you won't hear developers say, \\\"It works on my machine, why not in production?\\\" They can say, \\\"It ru\", \"ns as a container, so it will run in production.\\\" The packaged application, with all its dependencie\", \"s, can be executed in any supported container-based environment. It will run the way it was intended\", \" to run in all deployment targets (dev, QA, staging, production). Containers eliminate most friction\", \"s when they move from one stage to the next, which greatly improves deployment, and you can ship fas\", \"ter.\\n- Cost reductions. Containers lead to lower costs, either by the consolidation and removal of e\", \"xisting hardware, or from running applications at a higher density per unit of hardware.\\n- Portabili\", \"ty. Containers are modular and portable. Docker containers are supported on any server operating sys\", \"tem (Linux and Windows), in any major public cloud (Microsoft Azure, Amazon AWS, Google, IBM), and i\", \"n on-premises and private or hybrid cloud environments.\\n- Control. Containers offer a flexible and s\", \"ecure environment that's controlled at the container level. A container can be secured, isolated, an\", \"d even limited by setting execution constraint policies on the container. As detailed in the section\", \" about Windows Containers, Windows Server 2016 and Hyper-V containers offer additional enterprise su\", \"pport options.\\n\\nSignificant improvements in agility, portability, and control ultimately lead to sig\", \"nificant cost reductions when you use containers to develop and maintain applications.\\n\\n## What is D\", \"ocker?\\n\\nDocker is an open-source project that automates the deployment of applications as portable, \", \"selfsufficient containers that can run in the cloud or on -premises. Docker is also a company that p\", \"romotes and evolves this technology. The company works in collaboration with cloud, Linux, and Windo\", \"ws vendors, including Microsoft.\\n\\nWindows Server\\n\\nCustomer\\n\\nDatacenter\\n\\n<!-- image -->\\n\\nContainer\\n\\nF\", \"igure 4 -6. Docker deploys containers at all layers of the hybrid cloud\\n\\nTo someone familiar with vi\", \"rtual machines, containers might appear to be remarkably similar. A container runs an operating syst\", \"em, has a file system, and can be accessed over a network, just like a physical or virtual computer \", \"system. However, the technology and concepts behind containers are vastly different from virtual mac\", \"hines. From a developer point of view, a container must be treated more like a single process. In fa\", \"ct, a container has a single entry point for one process.\\n\\nDocker containers (for simplicity, contai\", \"ners) can run natively on Linux and Windows. When running regular containers, Windows containers can\", \" run only on Windows hosts (a host server or a VM), and Linux containers can run only on Linux hosts\", \". However, in recent versions of Windows Server and Hyper -V containers, a Linux container can also \", \"run natively on Windows Server by using the Hyper-V isolation technology that currently is available\", \" only in Windows Server Containers.\\n\\nIn the near future, mixed environments that have both Linux and\", \" Windows containers will be possible and even common.\\n\\n## Benefits of Windows Containers for your ex\", \"isting .NET applications\\n\\nThe benefits of using Windows Containers are fundamentally the same benefi\", \"ts you get from containers in general. Using Windows Containers is about greatly improving agility, \", \"portability, and control.\\n\\nExisting .NET applications refer to those applications that were created \", \"using the .NET Framework. For example, they might be traditional ASP.NET web applications-they don't\", \" use .NET Core or .NET 5+, which is newer and runs cross -platform on Linux, Windows, and MacOS.\\n\\nTh\", \"e main dependency in the .NET Framework is Windows. It also has secondary dependencies, like IIS, an\", \"d System.Web in traditional ASP.NET.\\n\\nA .NET Framework application must run on Windows, period. If y\", \"ou want to containerize existing .NET Framework applications and you can't or don't want to invest i\", \"n a migration to .NET Core or later(\\\"If it\\n\\nExisting\\n\\n\\u2022NET\\n\\napps\\n\\nWhat OS to target with .NET contai\", \"ners\\n\\n.NET Framework\\n\\nWindows\\n\\nCompatible with works properly, don't migrate it\\\"), the only choice y\", \"ou have for containers is to use Windows Containers.\\n\\nSo, one of the main benefits of Windows Contai\", \"ners is that they offer you a way to modernize your existing .NET Framework applications that are ru\", \"nning on Windows-through containerization. Ultimately, Windows Containers gets you the benefits that\", \" you are looking for by using containersagility, portability, and better control.\\n\\nDebian, Alpine, e\", \"tc.\\n\\nKestrel\\n\\n## Choose an OS to target with .NET-based containers\\n\\nGiven the diversity of operating\", \" systems that are supported by Docker, as well as the differences between .NET Framework and .NET Co\", \"re, you should target a specific OS and specific versions based on the framework you are using.\\n\\nFor\", \" Windows, you can use Windows Server Core or Windows Nano Server. These Windows versions provide dif\", \"ferent characteristics (like IIS versus a self-hosted web server like Kestrel) that might be needed \", \"by .NET Framework or .NET applications.\\n\\nFor Linux, multiple distros are available and supported in \", \"official .NET Docker images (like Debian).\\n\\nFigure 4-7 shows OS versions that you can target, depend\", \"ing on the app's version of the .NET Framework.\\n\\nFigure 4 -7. Operating systems to target based on .\", \"NET Framework version\\n\\n<!-- image -->\\n\\nIn migration scenarios for existing or legacy applications th\", \"at are based on .NET Framework applications, the main dependencies are on Windows and IIS. Your only\", \" option is to use Docker images based on Windows Server Core and the .NET Framework.\\n\\nWhen you add t\", \"he image name to your Dockerfile file, you can select the operating system and version by using a ta\", \"g, as in the following examples for .NET Framework-based Windows container images:\\n\\n| Tag           \", \"                                                             | System and version                   \", \"                                             |\\n|----------------------------------------------------\", \"------------------------|---------------------------------------------------------------------------\", \"--------|\\n| mcr.microsoft.com/dotnet/framework/runti me:4.x - windowsservercore - 20H2 | .NET Framew\", \"ork 4.x on Windows Server Core                                         |\\n| mcr.microsoft.com/dotnet/\", \"framework/aspne t:4.x - windowsservercore - 20H2  | .NET Framework 4.x with additional ASP.NET  cust\", \"omization, on Windows Server Core |\\n\\nFor .NET (cross-platform for Linux and Windows), the tags would\", \" look like the following:\\n\\n| Tag                                                       | System and \", \"version                         |\\n|-----------------------------------------------------------|-----\", \"---------------------------------------|\\n| mcr.microsoft.com/dotnet/runtime:7.0                     \", \" | .NET runtime - only on Linux               |\\n| mcr.microsoft.com/dotnet/runtime:7.0- nanoserver-l\", \"tsc2022 | .NET runtime - only on Windows Nano Server |\\n\\n## Multi -arch images\\n\\nSince 2017, Docker ha\", \"s had a feature called multi -arch images. .NET Docker images can use multi-arch tags. Your Dockerfi\", \"le files no longer need to define the operating system that you are targeting. The multi -arch featu\", \"re allows a single tag to be used across multiple machine configurations. For instance, with multi -\", \"arch, you can use one common tag: mcr.microsoft.com/dotnet/runtime:7.0. If you pull that tag from a \", \"Linux container environment, you get the Debian-based image. If you pull that tag from a Windows con\", \"tainer environment, you get the Nano Server-based image.\\n\\nFor .NET Framework images, because the tra\", \"ditional .NET Framework supports only Windows, you cannot use the multi -arch feature.\\n\\n## Windows c\", \"ontainer types\\n\\nLike Linux containers, Windows Server containers are managed by using Docker Engine.\", \" Unlike Linux containers, Windows containers include two different container types, or run times-Win\", \"dows Server containers and Hyper-V isolation.\\n\\nWindows Server containers: Provides application isola\", \"tion through process and namespace isolation technology. A Windows Server container shares a kernel \", \"with the container host and all containers that are running on the host. These containers do not pro\", \"vide a hostile security boundary and should not be used to isolate untrusted code. Because of the sh\", \"ared kernel space, these containers require the same kernel version and configuration.\\n\\nHyper-V isol\", \"ation: Expands on the isolation provided by Windows Server Containers by running each container on a\", \" highly optimized VM. In this configuration, the kernel of the container host is not shared with oth\", \"er containers on the same host. These containers are designed for hostile multitenant hosting, with \", \"the same security assurances of a VM. Because these containers don't share the kernel with the host \", \"or other containers on the host, they can run kernels with different versions and configurations (wi\", \"th supported versions). For example, all Windows containers on Windows 10 use Hyper -V isolation to \", \"utilize the Windows Server kernel version and configuration.\\n\\nRunning a container on Windows with or\", \" without Hyper-V isolation is a run-time decision. You might choose to create the container with Hyp\", \"er-V isolation initially, and at run time, choose to run it as a Windows Server container instead.\\n\\n\", \"## Additional resources\\n\\n- Windows Containers documentation https://learn.microsoft.com/virtualizati\", \"on/windowscontainers/\\n- Windows Containers fundamentals https://learn.microsoft.com/virtualization/w\", \"indowscontainers/about/\\n- Infographic: Microsoft and containers https://info.microsoft.com/rs/157-GQ\", \"E-382/images/Container%20infographic%201.4.17.pdf\\n\\n## The container ecosystem in Azure\\n\\nIn previous \", \"sections, it's been explained what the benefits of Docker containers are as well as details on the s\", \"pecific container images for .NET applications. All that generic information is fundamental in order\", \" to develop or containerize an application. However, when thinking about the production deployment e\", \"nvironment or even QA and Dev/Test environments, Microsoft Azure provides an open and broad variety \", \"of choices, a full container ecosystem in the cloud (shown in the diagram below). Depending on your \", \"specific application's needs, you should choose one or another Azure product.\\n\\nPartner services\\n\\nOpe\", \"nShift\\n\\nPivotal Cloud\\n\\nFoundry\\n\\nDocker Enterprise\\n\\nEdition\\n\\nMesosphere\\n\\nDC/OS\\n\\nAzure container ecosy\", \"stem\\n\\n## OSBA App Service Azure Container Registry\\n\\nAzure services\\n\\n(ACR)\\n\\nFigure 4 -7.5. The contai\", \"ner ecosystem in Azure\\n\\n<!-- image -->\\n\\nFrom the container ecosystem in Azure, the following product\", \"s supporting containers that are considered infrastructure:\\n\\n- Azure Container Instances (ACI)\\n- Azu\", \"re Virtual Machines (With container's support)\\n- Azure Virtual Machine Scale Sets (With container's \", \"support)\\n\\nFrom those three, ACI provides a great benefit, which is the fact that you don't need to m\", \"aintain the underlying OS, no need for you to upgrade/patch, etc. but ACI still is positioned in the\", \" infrastructure level, as better explained in the upcoming sections of this book.\\n\\nThe products in A\", \"zure supporting containers that are at the same time positioned more in the PaaS (Platform as a Serv\", \"ice) level are:\\n\\n- Azure App Service\\n- Azure Kubernetes Service (AKS and ACS)\\n- Azure Batch\\n\\nThen, A\", \"zure Container Registry is a high scalable container registry hosted in Azure that you can use from \", \"all the previous products when registering and deploying your custom container images.\\n\\nIn addition,\", \" from your containers, you can consume other managed services in Azure like Azure SQL Database, Azur\", \"e Redis cache, Azure Cosmos DB, etc. plus there are third-party solutions/platforms\\n\\navailable in Az\", \"ure Marketplace like Cloud Foundry and OpenShift where you can also use containers within Azure.\\n\\nIn\", \" the next sections, you can explore Microsoft's recommendations on when to use each of those Azure p\", \"roducts and solutions specifically when targeting Windows Containers.\\n\\n## When not to deploy to Wind\", \"ows Containers\\n\\nSome Windows technologies are not supported by Windows Containers. In those cases, y\", \"ou still need to migrate to the standards VMs, usually with just Windows and IIS.\\n\\nFor more informat\", \"ion, see the list of Applications not supported by Windows containers .\\n\\n## Additional resources\\n\\n- \", \"Virtual machines and containers in Azure\\n\\nhttps://azure.microsoft.com/overview/containers/\\n\\n## When \", \"to deploy Windows Containers in your on -premises IaaS VM infrastructure\\n\\n- Your organization might \", \"not be ready to move to the cloud, or it might not be able to move to the cloud for a business reaso\", \"n. But, you can still get the benefits of using Windows Containers in your own datacenters.\\n- You mi\", \"ght have other artifacts that are being used on-premises, and which might slow you down when you try\", \" to move to the cloud. For example, security or authentication dependencies with on-premises Windows\", \" Server Active Directory, or any other on-premises asset.\\n- If you start using Windows Containers to\", \"day, you can make a phased migration to the cloud tomorrow from a much better position. Windows Cont\", \"ainers is becoming a unit of deployment for any cloud, with no lock-in.\\n\\n## When to deploy Windows C\", \"ontainers to Azure VMs (IaaS cloud)\\n\\nIf your organization is using Azure VMs, even if you are also u\", \"sing Windows Containers, you are still dealing with IaaS. That means that dealing with infrastructur\", \"e operations, VM OS patches, and infrastructure complexity for highly scalable applications when you\", \" need to deploy to multiple VMs in a load -balanced infrastructure. The main scenarios for using Win\", \"dows Containers in an Azure VM are:\\n\\n- Dev/test environment: A VM in the cloud is perfect for develo\", \"pment and testing in the cloud. You can rapidly create or stop the environment depending on your nee\", \"ds.\\n\\n- Small and medium scalability needs: In scenarios where you might need just a couple of VMs fo\", \"r your production environment, managing a few VMs might be affordable until you can move to more adv\", \"anced PaaS environments, like orchestrators.\\n- Production environment with existing deployment tools\", \": You might be moving from an on-premises environment in which you have invested in tools to make co\", \"mplex deployments to VMs or bare -metal servers (like Puppet or similar tools). To move to the cloud\", \" with minimal changes to production environment deployment procedures, you might continue to use tho\", \"se tools to deploy to Azure VMs. However, you'll want to use Windows Containers as the unit of deplo\", \"yment to improve the deployment experience.\\n\\n## When to deploy Windows Containers to Azure Container\", \" Instances (ACI)\\n\\nThe main value proposition of Azure Container Instances is that you can right away\", \" deploy containers to it and you don't need to maintain that environment, you don't need to upgrade/\", \"patch the underlying operating system or VMs, all that is transparent and you just deploy containers\", \" into a ready-to-use environment.\\n\\nThe reasons and scenarios when you would want to use ACI are simi\", \"lar to the main scenarios when you use Azure VMs with containers, so basically, the main scenarios f\", \"or using Azure Container Instances are:\\n\\n- Dev/Test scenarios\\n- Task automation\\n- CI/CD agents\\n- Sma\", \"ll/scale batch processing\\n- Simple web apps\\n\\nThe simple web apps scenario is a fair scenario for ACI\", \" but take into account that since in ACI you can only have a single container instance per container\", \" image, you won't have high availability and only have limited scalability.\\n\\nHowever, even when ACI \", \"is considered infrastructure because it just provides single container instances, there is a huge be\", \"nefit compared to regular Azure VMs with Windows Server. With ACI, you just deploy the containers in\", \"to a self-maintained environment and you just pay for those containers. You don't need to maintain/u\", \"pdate/patch VMs, so it is a much better platform for most scenarios where you might be using VMs wit\", \"h containers. Using ACI is straight forward, you just deploy a container, there's no need to create \", \"a VM environment you just deploy containers.\\n\\nThe main benefits of Azure Container Instances (ACI) a\", \"re:\\n\\n- Run containers without managing servers\\n- Increase agility with containers on demand\\n- Deploy\", \" containers to the cloud with unprecedented simplicity and speed\\u2014with a single command.\\n\\n- Secure ap\", \"plications with hypervisor isolation\\n\\nIn short, with ACI you can develop apps fast without managing \", \"virtual machines or having to learn new tools. It's just your application, in a container, running i\", \"n the cloud.\\n\\n## When to deploy Windows Containers to Azure Kubernetes Service (AKS)\\n\\nAzure Kubernet\", \"es Service (AKS) simplifies deploying a managed Kubernetes cluster in Azure by offloading the operat\", \"ional overhead to Azure. You get an open solution that offers portability both for your containers a\", \"nd for your application configuration. You select the size, the number of hosts, and the orchestrato\", \"r tools. Azure Kubernetes Service handles the infrastructure for you. It also supports Windows Serve\", \"r containers alongside Linux containers. For more details on Windows OS support and the feature diff\", \"erences between Windows and Linux, read the FAQ .\\n\\nThe main benefits of Azure Kubernetes Service (AK\", \"S) are:\\n\\n- Identity and security management\\n- Integrated logging and monitoring\\n- Cluster node and p\", \"od scaling.\\n- Ingress with HTTP application routing\\n- AKS supports the Docker image format. For priv\", \"ate storage of your Docker images, you can integrate AKS with Azure Container Registry (ACR).\\n\\nIf yo\", \"u are already working with open-source orchestrators like Kubernetes, Docker Swarm, or DC/OS, you do\", \"n't need to change your existing management practices to move container workloads to the cloud. Use \", \"the application management tools that you're already familiar with and connect via the standard API \", \"endpoints for the orchestrator of your choice.\\n\\n## Choosing Azure compute platforms for container -b\", \"ased applications\\n\\nAs you have noticed after reading the previous sections, Azure is an open cloud t\", \"hat offers multiple choices. You can use the best fit for your needs, however, it also surfaces ques\", \"tions about what product/technology you should use for your containerized applications.\\n\\nAs a by-def\", \"ault recommendation, the following is the main criteria recommended in this guidance:\\n\\n- Single mono\", \"lithic app: Choose Azure App Service\\n- N -Tier app: Choose orchestrators such as Azure Kubernetes Se\", \"rvice (AKS) or App Service if you have a single or a few back-end services\\n- Microservices: Choose A\", \"KS or Azure Web Apps for Containers\\n- Serverless functions &amp; event handlers: Choose Azure Functi\", \"ons\\n- Large-scale Batch: Choose Azure Batch\\n\\nHowever, this recommendation should be taken with a pin\", \"ch of salt, as the product's selection will depend on your specific application's needs and characte\", \"ristics. Not all applications are the same even when initially they might look similar types.\\n\\nAfter\", \" a deeper analysis of the application's needs, the product selected could be different. But, as a st\", \"arting point, it is good to have initial guidance from where you can start evaluating and testing ba\", \"sed on certain priority.\\n\\n## Additional resources\\n\\n- Choose an Azure compute service for your applic\", \"ation\\n\\nhttps://learn.microsoft.com/azure/architecture/guide/technology-choices/compute-decisiontree\\n\", \"\\n## Build resilient services ready for the cloud: Embrace transient failures in the cloud\\n\\nResilienc\", \"y is the ability to recover from failures and continue to function. Resiliency is not about avoiding\", \" failures, but accepting the fact that failures will occur, and then responding to them in a way tha\", \"t avoids downtime or data loss. The goal of resiliency is to return the application to a fully funct\", \"ioning state after a failure.\\n\\nYour application is ready for the cloud when, at a minimum, it implem\", \"ents a software-based model of resiliency, rather than a hardware-based model. Your cloud applicatio\", \"n must embrace the partial failures that will certainly occur. Design or partially refactor your app\", \"lication to achieve resiliency with expected partial failures. It should be designed to cope with pa\", \"rtial failures, like transient network outages and nodes, or VMs crashing in the cloud. Even contain\", \"ers being moved to a different node within an orchestrator cluster can cause intermittent short fail\", \"ures within the application.\\n\\n## Handling partial failure\\n\\nIn a cloud -based application, there's an\", \" ever-present risk of partial failure. For instance, a single website instance or a container might \", \"fail, or it might be unavailable or unresponsive for a short time. Or, a single VM or server might c\", \"rash.\\n\\nBecause clients and services are separate processes, a service might not be able to respond i\", \"n a timely manner to a client's request. The service might be overloaded and respond slowly to reque\", \"sts, or it might not be accessible for a short time because of network issues.\\n\\nFor example, conside\", \"r a monolithic .NET application that accesses a database in Azure SQL Database. If the Azure SQL dat\", \"abase or any other third-party service is unresponsive for a brief time (an Azure SQL database might\", \" be moved to a different node or server, and be unresponsive for a few seconds), when the user tries\", \" to do any action, the application might crash and show an exception at the same moment.\\n\\nResilient \", \"communication in cloud applications\\n\\nASP.NET app (MVC or WebForms) on\\n\\nASP.NET Web API or WCF on\\n\\nSQ\", \"L database\\n\\nA similar scenario might occur in an app that consumes HTTP services. The network or the\", \" service itself might not be available in the cloud during a short, transient failure.\\n\\nMicrosoft\\n\\nA\", \" resilient application like the one shown in Figure 4-9 should implement techniques like \\\"retries wi\", \"th exponential backoff\\\" to give the application an opportunity to handle transient failures in resou\", \"rces. You also should use \\\"circuit breakers\\\" in your applications. A circuit breaker stops an applic\", \"ation from trying to access a resource when it's actually a long-term failure. By using a circuit br\", \"eaker, the application avoids provoking a denial of service to itself.\\n\\nFigure 4 -9. Partial failure\", \"s handled by retries with exponential backoff\\n\\n<!-- image -->\\n\\nYou can use these techniques both in \", \"HTTP resources and in database resources. In Figure 4-9, the application is based on a 3-tier archit\", \"ecture, so you need these techniques at the services level (HTTP) and at the data tier level (TCP). \", \"In a monolithic application that uses only a single app tier in addition to the database (no additio\", \"nal services or microservices), handling transient failures at the database connection level might b\", \"e enough. In that scenario, just a particular configuration of the database connection is required.\\n\", \"\\nWhen implementing resilient communications that access the database, depending on the version of .N\", \"ET you are using, it can be straightforward (for example, with Entity Framework 6 or later. It's jus\", \"t a matter of configuring the database connection). Or, you might need to use additional libraries l\", \"ike the Transient Fault Handling Application Block (for earlier versions of .NET), or even implement\", \" your own library.\\n\\nWhen implementing HTTP retries and circuit breakers, the recommendation for .NET\", \" is to use the Polly library, which targets .NET Standard 1.1 (coverage: .NET Core 1.0, Mono, Xamari\", \"n, UWP, WP8.1+) and .NET Standard 2.0+ (coverage: .NET Core 2.0+, .NET Core 3.0 and later, Mono, Xam\", \"arin and UWP targets). The nuget package also includes direct targets for .NET Framework 4.6.1 and 4\", \".7.2.\\n\\nTo learn how to implement strategies for handling partial failures in the cloud, see the foll\", \"owing references.\\n\\n## Additional resources\\n\\n- Implementing resilient communication to handle partial\", \" failure\\n\\nhttps://learn.microsoft.com/dotnet/architecture/microservices/implement-resilientapplicati\", \"ons/partial-failure-strategies\\n\\n- Entity Framework connection resiliency and retry logic (version 6 \", \"and later)\\n\\nhttps://learn.microsoft.com/ef/ef6/fundamentals/connection-resiliency/retry-logic\\n\\n- The\", \" Transient Fault Handling Application Block\\n- https://learn.microsoft.com/previous-versions/msp-n-p/\", \"hh680934(v=pandp.50)\\n- Polly library for resilient HTTP communication\\n\\nhttps://github.com/App-vNext/\", \"Polly\\n\\n## Modernize your apps with monitoring and telemetry\\n\\nWhen you run an application in producti\", \"on, it's critical that you have insights about how your application is performing. Is it performing \", \"at a high level? Are users getting errors, or is the application stable and reliable? You need rich \", \"performance monitoring, powerful alerting, and dashboards to help ensure that your application is av\", \"ailable and performing as expected. You also need to be able to see quickly if there's a problem, de\", \"termine how many customers are affected, and perform a root-cause analysis to find and fix the issue\", \".\\n\\n## Monitor your application with Application Insights\\n\\nApplication Insights is an extensible Appl\", \"ication Performance Management (APM) service for web developers who work on multiple platforms. Use \", \"it to monitor your live web application. Application Insights automatically detects performance anom\", \"alies. It includes powerful analytics tools to help you diagnose issues, and to help you understand \", \"what users actually do with your app. Application Insights is designed to help you continuously impr\", \"ove performance and usability. It works for apps on a wide variety of platforms, including .NET, Nod\", \"e.js, and J2EE, whether hosted on-premises or in the cloud. Application Insights integrates with you\", \"r DevOps processes, and has connection points to various development tools.\\n\\nFigure 4-10 shows an ex\", \"ample of how Application Insights monitors your application and how it surfaces those insights to a \", \"dashboard.\\n\\nmypackagesearch\\n\\n5:20 PM TO 5:23 PM 5/18/2015 (IO SECOND GRAIN) - ASP NET WEB APPLICATIO\", \"N\\n\\nSettings\\n\\nTime range\\n\\nDelete\\n\\nEssentials\\n\\nApplication health\\n\\nOverview timeline\\n\\n35OMS\\n\\n30OMS\\n\\n25\", \"0MS\\n\\n20OMS\\n\\n150MS\\n\\n100MS\\n\\nSOMS\\n\\nIMS\\n\\n2.55\\n\\n1S\\n\\n0.\\n\\n0.3\\n\\n15:20\\n\\nBrowsers\\n\\n5:20 PM TO 5:23 PM 5/18/201\", \"5 (09 SECOND GRAIN) - METRICS EXPLORER - MYPACKAGESEARCH\\n\\n+\\n\\nAlert rules\\n\\nSave favorite\\n\\nRestore def\", \"auits\\n\\nAdd chart\\n\\nTimeline\\n\\n2.55\\n\\nFigure 4 -10. Application Insights monitoring dashboard\\n\\n<!-- imag\", \"e -->\\n\\n## Monitor your Docker infrastructure with Log Analytics and its Container Monitoring solutio\", \"n\\n\\nAzure Log Analytics is part of the Microsoft Azure overall monitoring solution. It's also a servi\", \"ce in Operations Management Suite (OMS). Log Analytics monitors cloud and on-premises environments (\", \"OMS for on-premises) to help maintain availability and performance. It collects data generated by re\", \"sources in your cloud and on-premises environments and from other monitoring tools to provide analys\", \"is across multiple sources.\\n\\nIn relation to Azure infrastructure logs, Log Analytics, as an Azure se\", \"rvice, ingests log and metric data from other Azure services (via Azure Monitor), Azure VMs, Docker \", \"containers, and on-premises or other cloud infrastructures. Log Analytics offers flexible log search\", \" and out-of-the box analytics on top of this data. It provides rich tools that you can use to analyz\", \"e data across sources, it allows complex queries across all logs, and it can proactively alert based\", \" on specified conditions. You can even collect custom data in the central Log Analytics repository, \", \"where you can query and visualize it. You can also take advantage of the Log Analytics built-in solu\", \"tions to immediately gain insights into the security and functionality of your infrastructure.\\n\\nYou \", \"can access Log Analytics through the OMS portal or the Azure portal, which run in any browser, and p\", \"rovide you with access to configuration settings and multiple tools to analyze and act on collected \", \"data.\\n\\nThe Container Monitoring solution in Log Analytics helps you view and manage your Docker and \", \"Windows Container hosts in a single location. The solution shows which containers are running, what\\n\", \"\\nTime range\\n\\nFiter\\n\\nCLENT PROCTSSING T..\\n\\nOther Clouds\\n\\nLocal\\n\\nVM\\n\\nVM\\n\\ncontainer image they're runni\", \"ng, and where containers are running. You can view detailed audit information, including commands th\", \"at are being used with containers. You can also troubleshoot containers by viewing and searching cen\", \"tralized logs, without needing to remotely view Docker or Windows hosts. You can find containers tha\", \"t might be noisy and consuming excess resources on a host. Additionally, you can view centralized CP\", \"U, memory, storage, and network usage, and performance information, for containers. On computers run\", \"ning Windows, you can centralize and compare logs from Windows Server, Hyper-V, and Docker container\", \"s. The solution supports the following container orchestrators: vM\\n\\nPortal\\n\\nVM with agent\\n\\n- Docker \", \"Swarm\\n- DC/OS\\n- Kubernetes\\n- Red Hat OpenShift\\n\\nFigure 4-11 shows the relationships between various \", \"container hosts and agents and OMS.\\n\\nFigure 4 -11. Log Analytics Container Monitoring solution\\n\\n<!--\", \" image -->\\n\\nYou can use the Log Analytics Container Monitoring solution to:\\n\\n- See information about\", \" all container hosts in a single location.\\n- Know which containers are running, what image they're r\", \"unning, and where they're running.\\n- See an audit trail for actions on containers.\\n- Troubleshoot by\", \" viewing and searching centralized logs without remote login to the Docker hosts.\\n- Find containers \", \"that might be \\\"noisy neighbors,\\\" and be consuming excess resources on a host.\\n\\nAzure\\n\\n- View central\", \"ized CPU, memory, storage, and network usage, and performance information, for containers.\\n\\n## Addit\", \"ional resources\\n\\n- Overview of monitoring in Microsoft Azure\\n\\nhttps://learn.microsoft.com/azure/azur\", \"e-monitor/overview\\n\\n- What is Application Insights?\\n\\nhttps://learn.microsoft.com/azure/azure-monitor\", \"/app/app-insights-overview\\n\\n- What is Log Analytics?\\n\\nhttps://learn.microsoft.com/azure/log-analytic\", \"s/log-analytics-overview\\n\\n- Container Monitoring solution in Azure Monitor\\n\\nhttps://learn.microsoft.\", \"com/azure/azure-monitor/insights/containers\\n\\n- Overview of Azure Monitor\\n\\nhttps://learn.microsoft.co\", \"m/azure/azure-monitor/overview\\n\\n- What is Operations Management Suite (OMS)?\\n\\nhttps://learn.microsof\", \"t.com/azure/operations-management-suite/operations-management-suiteoverview\\n\\n## Modernize your app's\", \" lifecycle with CI/CD pipelines and DevOps tools in the cloud\\n\\nToday's businesses need to innovate a\", \"t a rapid pace to be competitive in the marketplace. Delivering high-quality, modern applications re\", \"quires DevOps tools and processes that are critical to implement this constant cycle of innovation. \", \"With the right DevOps tools, developers can streamline continuous deployment and get innovative appl\", \"ications into the hands of users more quickly.\\n\\nAlthough continuous integration and deployment pract\", \"ices are well established, the introduction of containers introduces new considerations, particularl\", \"y when you are working with multi-container applications.\\n\\nAzure DevOps Services supports continuous\", \" integration and deployment of multi-container applications to various environments through the offi\", \"cial Azure DevOps Services deployment tasks:\\n\\n- Deploy to an Azure Web App for Containers\\n- Deploy t\", \"o Azure Kubernetes Service\\n\\nBut you can also deploy to Docker Swarm or DC/OS by using Azure DevOps S\", \"ervices script-based tasks.\\n\\neShopModernizing V Dashboards Code Work Build and Release Test Wiki* Wi\", \"ki \\u2022\\n\\nBuilds\\n\\nReleases Library Task Groups Deployment Groups*\\n\\n* All definitions &gt; eShopModernizi\", \"ngMVC-Kubernetes-PROD-ENV\\n\\nPipeline Tasks ~ Variables Retention Options History\\n\\nPROD eShopModernizi\", \"ng Kubernetes\\n\\nDeploymeni process\\n\\nAgent phase\\n\\n- Run an agent\\n\\n* Deploy SQL container\\n\\nDeploy to Ku\", \"bernetes\\n\\nDeploy to ber app container\\n\\nRefresh MVC pod\\n\\n* Refresh AVC p\\n\\nDeploy to Kubernetes O\\n\\nVer\", \"sion 0.^\\n\\nTo continue facilitating deployment agility, these tools provide excellent dev-to-test-to-\", \"production deployment experiences for container workloads, with a choice of development and CI/CD so\", \"lutions.\\n\\nKubernetes Service Connection \\u00ae | Manage E\\n\\nFigure 4-12 shows a continuous deployment pipe\", \"line that deploys to a Kubernetes cluster in Azure Container Service. Container Registry Details ^\\n\\n\", \"Container Registry type ' O\\n\\nFigure 4 -12. Azure DevOps Services continuous deployment pipeline, dep\", \"loying to a Kubernetes cluster\\n\\n<!-- image -->\\n\\n## Migrate to hybrid cloud scenarios\\n\\nSome organizat\", \"ions and enterprises can't migrate some of their applications to public clouds like Microsoft Azure \", \"or any other public cloud due to regulations or their own policies. However, it's likely that any or\", \"ganization might benefit from having some of their applications in the public cloud and other applic\", \"ations on-premises. But a mixed environment can lead to excessive complexity in environments due to \", \"different platforms and technologies used in public clouds versus on-premises environments.\\n\\nMicroso\", \"ft provides the best hybrid cloud solution, one in which you can optimize your existing assets on-pr\", \"emises and in the public cloud, while you ensure consistency in an Azure hybrid cloud. You can maxim\", \"ize existing skills, and get a flexible, unified approach to building apps that can run in the cloud\", \" or on-premises, thanks to Azure Stack (on-premises) and Azure (public cloud).\\n\\nWhen it comes to sec\", \"urity, you can centralize management and security across your hybrid cloud. You can get control over\", \" all assets, from your datacenter to the cloud, by providing single sign-on to onpremises and cloud \", \"apps. You accomplish this functionality by extending Active Directory to a hybrid cloud, and by usin\", \"g identity management.\\n\\nFinally, you can distribute and analyze data seamlessly, use the same query \", \"languages for cloud and on-premises assets, and apply analytics and deep learning in Azure to enrich\", \" your data, regardless of its source.\\n\\n## Azure Stack\\n\\nAzure Stack is a hybrid cloud platform that l\", \"ets you deliver Azure services from your organization's datacenter. Azure Stack is designed to suppo\", \"rt new options for your modern applications in key\\n\\nX Remove\\n\\nB Save\\n\\nMicrosoft's hybrid cloud platf\", \"orm scenarios, like edge and unconnected environments, or meeting specific security and compliance r\", \"equirements.\\n\\nFigure 4-13 shows an overview of the true hybrid cloud platform that Microsoft offers.\", \"\\n\\nFigure 4 -13. Microsoft hybrid cloud platform with Azure Stack and Azure\\n\\n<!-- image -->\\n\\nAzure St\", \"ack is offered in two deployment options, to meet your needs:\\n\\n- Azure Stack integrated systems\\n- Az\", \"ure Stack Development Kit\\n\\n## Azure Stack integrated systems\\n\\nAzure Stack integrated systems are off\", \"ered through a partnership of Microsoft and hardware partners. The partnership creates a solution th\", \"at offers cloud-paced innovation that is balanced with simplicity in management. Because Azure Stack\", \" is offered as an integrated system of hardware and software, you get the right amount of flexibilit\", \"y and control, while still adopting innovation from the cloud. Azure Stack integrated systems range \", \"in size from 4 to 12 nodes, and are jointly supported by the hardware partner and Microsoft. Use Azu\", \"re Stack integrated systems to implement new scenarios for your production workloads.\\n\\n## Azure Stac\", \"k Development Kit\\n\\nMicrosoft Azure Stack Development Kit is a single-node deployment of Azure Stack,\", \" which you can use to evaluate and learn about Azure Stack. You can also use Azure Stack Development\", \" Kit as a\\n\\ndeveloper environment, where you can develop using APIs and tooling that are consistent w\", \"ith Azure. Azure Stack Development Kit is not intended to be used as a production environment.\\n\\n## A\", \"dditional resources\\n\\n- Azure hybrid cloud\\n\\nhttps://azure.microsoft.com/overview/hybrid-cloud/\\n\\n- Azu\", \"re Stack\\n\\nhttps://azure.microsoft.com/overview/azure-stack/\\n\\n- Active Directory Service Accounts for\", \" Windows Containers\\n- https://learn.microsoft.com/virtualization/windowscontainers/manage-containers\", \"/manageserviceaccounts\\n- Create a container with Active Directory support\\n- https://learn.microsoft.\", \"com/archive/blogs/containerstuff/create-a-container-with-activedirectory-support\\n- Azure Hybrid Bene\", \"fit licensing\\n\\nhttps://azure.microsoft.com/pricing/hybrid-benefit/\\n\\n## Walkthroughs and technical ge\", \"t started overview\\n\\nTo limit the size of this e -book, additional technical documentation and the fu\", \"ll walkthroughs were made available in a GitHub repository. The online series of walkthroughs that i\", \"s described in this chapter covers the step-by-step setup of the multiple environments that are base\", \"d on Windows Containers, and deployment to Azure.\\n\\nThe following sections explain what each walkthro\", \"ugh is about, its objectives and high-level vision, and provides a diagram of the tasks that are inv\", \"olved. You can get the walkthroughs themselves in the eShopModernizing apps GitHub repo wiki at http\", \"s://github.com/dotnetarchitecture/eShopModernizing/wiki .\\n\\n## Technical walkthrough list\\n\\nThe follow\", \"ing get-started walkthroughs provide consistent and comprehensive technical guidance for sample apps\", \" that you can lift and shift by using containers, and then move by using multiple deployment choices\", \" in Azure.\\n\\nEach of the following walkthroughs uses the new sample eShopLegacy and eShopModernizing \", \"apps, which are available on GitHub at https://github.com/dotnet-architecture/eShopModernizing .\\n\\n- \", \"Tour of eShop legacy apps (baseline apps to modernize)\\n- Containerize your existing ASP.NET web apps\", \" (WebForms &amp; MVC) with Windows Containers\\n- Containerize your existing WCF services (N-Tier apps\", \") with Windows Containers\\n- Deploy your Windows Containers-based app to Azure VMs\\n- Deploy your Wind\", \"ows Containers-based apps to Kubernetes in Azure Container Service\\n\\n<!-- image -->\\n\\n## Walkthrough 1\", \": Tour of eShop legacy apps\\n\\n## Technical walkthrough availability\\n\\nThe full technical walkthrough i\", \"s available in the eShopModernizing GitHub repo wiki:\\n\\neShopModernizing wiki walkthroughs\\n\\n## Overvi\", \"ew\\n\\nIn this walkthrough, you can explore the initial implementation of three sample legacy applicati\", \"ons. The first two sample web apps have a monolithic architecture, and were created by using classic\", \" ASP.NET. One application is based on ASP.NET 4.x MVC; the second application is based on ASP.NET 4.\", \"x Web Forms. The third app is a 3-Tier app composed by a client WinForms app and a server-side Windo\", \"ws Communication Foundation (WCF) service.\\n\\nAll these applications are available at the eShopModerni\", \"zing GitHub repo .\\n\\n## Goals\\n\\nThe main goal of this walkthrough is simply to get familiar with these\", \" apps, and with their code and configuration. You can configure the apps so that they generate and u\", \"se mock data, without using the SQL database, for testing purposes. This optional config is based on\", \" dependency injection, in a decoupled way.\\n\\n## Scenario 1: ASP.NET Web apps\\n\\nThe figure below shows \", \"the simple scenario of the original legacy ASP.NET web applications.\\n\\nONCONTAINERS\\n\\nA.\\n\\nBrowser with\", \"\\n\\nCatalog editor\\n\\nHAMI\\n\\nNET Black &amp; White Mug\\n\\nMVC app\\n\\n(ASP.NET\\n\\nBRAND TIERCE TURNAME\\n\\nNET Bot \", \"Black Hoodie NET T-SN $7950 1p0g\\n\\nNET Black &amp; White Mug NET\\n\\nPriam White T-Shit\\n\\nPrism White T-S\", \"hit\\n\\nNET Foundallen T-shirt NET Foundation T-shit NET T-Sh $1209 4png\\n\\nRoslyn Red Sheet\\n\\nRoslyn Red \", \"Shast\\n\\nB.\\n\\n100\\n\\n4.x MVC)\\n\\nDetaileDelete\\n\\nHTTP\\n\\neSHOP\\n\\nonCONTAINERS\\n\\nCatalog editor\\n\\nWindows Server\\n\\n\", \"CREATE NEW\\n\\nIIS\\n\\nNAME\\n\\nDESCRIPTION\\n\\nMock data\\n\\n(ASP.NET 4.x Web Forms)\\n\\neshop\\n\\nBRAND TYPE PRICE PICT\", \"URE NAME STOCK RESTOCK MAXSTOCK\\n\\nNET Bot Bleck Hoodie NET T-Shirt $1950 1png\\n\\n100 0\\n\\nCoDe allegelee\\n\", \"\\n<!-- image -->\\n\\nFrom a business domain perspective, both apps offer the same catalog management fea\", \"tures. Members of the eShop enterprise team would use the app to view and edit the product catalog.\\n\", \"\\nThe next figure shows the initial app screenshots.\\n\\n<!-- image -->\\n\\nDependencies in ASP.NET 4.x or \", \"earlier versions (either for MVC or for Web Forms) means that these applications won't run on .NET C\", \"ore unless the code is fully rewritten by using ASP.NET Core MVC.\\n\\n## Scenario 2: WCF service and Wi\", \"nForms client app (3-Tier app)\\n\\nThe figure below shows the simple scenario of the original 3-Tier le\", \"gacy application.\\n\\nProduct\\n\\nWil eShop WinForms e ONCONTAINERS\\n\\nMain Catalog inventory\\n\\nType e-ShopOn\", \"Containers. By Microsoft Corp.\\n\\ntrand Aa\\n\\nName escrotion.\\n\\nNET Bot Black Hoode\\n\\nNET Bot Black Hoode\\n\", \"\\nPrice\\n\\n$19.50\\n\\nWindows Server\\n\\nIIS\\n\\n<!-- image -->\\n\\n## Benefits\\n\\nThe benefits of this walkthrough a\", \"re simple: Just get familiar with the code and initial apps.\\n\\n## Next steps\\n\\nExplore this content mo\", \"re in-depth on the GitHub wiki:\\n\\n- Tour on the baseline ASP.NET MVC and Web Forms \\\"legacy\\\" apps\\n- To\", \"ur on the baseline WCF service and WinForms (3-Tier) \\\"legacy\\\" app\\n\\n## Walkthrough 2: Containerize yo\", \"ur existing .NET applications with Windows Containers\\n\\n## Overview\\n\\nUse Windows Containers to improv\", \"e deployment of existing .NET applications, like those based on MVC, Web Forms, or WCF, to productio\", \"n, development, and test environments.\\n\\n## Goals\\n\\nThe goal of this walkthrough is to show you severa\", \"l options for containerizing an existing .NET Framework application. You can:\\n\\n- Containerize your a\", \"pplication by using Visual Studio 2022 Tools for Docker (Visual Studio 2017 or later versions).\\n- Co\", \"ntainerize your application by manually adding a Dockerfile, and then using the Docker CLI .\\n- Conta\", \"inerize your application by using the Img2Docker tool (an open-source tool from Docker).\\n\\nWinForms\\n\\n\", \"Desktop app\\n\\nMock data\\n\\neShop\\n\\nA.\\n\\nB.\\n\\nBrowser with\\n\\nMVC app\\n\\nDocker host (PC dev environment)\\n\\nWind\", \"ows 10 or later\\n\\nDocker for Windows\\n\\nMock lIS\\n\\nThis walkthrough focuses on the Visual Studio 2022 To\", \"ols for Docker approach, but the other two approaches are fairly similar in regard to using Dockerfi\", \"les. SQL Server application\\n\\nWindows Container\\n\\n## Scenario 1: Containerized ASP.NET web apps\\n\\neshop\", \"\\n\\nProduct\\n\\n(*)\\n\\nFigure below shows the scenario for containerized eShop legacy web apps applications\", \".\\n\\nWeb Forms app\\n\\n<!-- image -->\\n\\n## Scenario 2: Containerized WCF service\\n\\nFigure below shows the s\", \"cenario for a 3-Tier app with a containerized WCF service.\\n\\nele niemi\\n\\nLe:..\\n\\nWinForms\\n\\nDesktop app\\n\", \"\\nMET Ba Baik Hoede MET Bo Bad Hoade |81950\\n\\nMT Bad a wAu Mp MET Fad S He Mg 1830\\n\\nDocker host (PC de\", \"v environment)\\n\\nWindows 10 or later\\n\\nDocker for Windows\\n\\nWCF service (.NET Framework) on\\n\\n<!-- image\", \" -->\\n\\n## Benefits\\n\\nThere are advantages to running your monolithic application in a container. First\", \", you create an image for the application. From that point on, every deployment runs in the same env\", \"ironment. Every container uses the same OS version, has the same version of dependencies installed, \", \"uses the same .NET framework version, and is built by using the same process. Basically, you control\", \" the dependencies of your application by using a Docker image. The dependencies travel with the appl\", \"ication when you deploy the containers.\\n\\nAn additional benefit is that developers can run the applic\", \"ation in the consistent environment that's provided by Windows Containers. Issues that appear only w\", \"ith certain versions can be spotted immediately, instead of surfacing in a staging or production env\", \"ironment. Differences in development environments used by members of the development team matter les\", \"s when applications run in containers.\\n\\nContainerized applications also have a flatter scale-out cur\", \"ve. Containerized apps enable you to have more application and service instances (based on container\", \"s) in a VM or physical machine compared to regular application deployments per machine. This approac\", \"h translates to higher density and fewer required resources, especially when you use orchestrators l\", \"ike Kubernetes.\\n\\nContainerization, in ideal situations, does not require making any changes to the a\", \"pplication code (C#). In most scenarios, you just need the Docker deployment metadata files (Dockerf\", \"iles and Docker Compose files).\\n\\n## Next steps\\n\\nExplore this content more in-depth on the GitHub wik\", \"i:\\n\\n- How to containerize the .NET Framework web apps with Windows Containers and Docker\\n- Adding Do\", \"cker Support to a WCF service\\n\\n## Walkthrough 3: Deploy your Windows Containers -based app to Azure \", \"VMs\\n\\n## Technical walkthrough availability\\n\\nThe full technical walkthrough is available in the eShop\", \"Modernizing GitHub repo wiki: https://github.com/dotnet-architecture/eShopModernizing/wiki/06.-Deplo\", \"ying-your-WindowsContainers -based -app -into -Azure -VMs -(Including-CI-CD)\\n\\n## Overview\\n\\nDeploying\", \" to a Docker host on a Windows Server 2016 Virtual Machine (VM) in Azure lets you quickly set up dev\", \"elopment/test/staging environments. It also gives you a common place for testers or business users t\", \"o validate the app. VMs also can be valid Infrastructure as a Service (IaaS) production environments\", \".\\n\\n## Goals\\n\\nThe goal of this walkthrough is to show you the multiple alternatives you have when you\", \" deploy Windows Containers to Azure VMs that are based on Windows Server 2016 or later versions.\\n\\n##\", \" Scenarios\\n\\nSeveral scenarios are covered in this walkthrough.\\n\\nScenario: Deploy to Azure VM through\", \" the Docker Registry\\n\\nScenario: Deploy to Azure VM through Docker Engine connection\\n\\nDocker Registry\", \"\\n\\nAzure\\n\\nMicrosoft Azure\\n\\nVM for test environment\\n\\nPC dev environment\\n\\nVM for test environment\\n\\nPC d\", \"ev environment\\n\\n## Scenario A: Deploy to an Azure VM from a dev PC through Docker Engine connection \", \"VM 13.91.44.153 or Container Registry\\n\\nASP.NET (.NET Framework) on\\n\\nASP.NET (NET Framework) on\\n\\nWind\", \"ows Server Core Container\\n\\nWindows Server Core Container\\n\\nWindows Server Core Container\\n\\nASP.NET (.N\", \"ET Framework) on\\n\\nWindows Server Core Container\\n\\nDocker engine and Docker CLI docker-compose docker \", \"run Docker engine and Docker CLI Docker engine and Docker CLI Docker engine and Docker CLI ASP.NET a\", \"pp\\n\\n\\u2192\\n\\n<!-- image -->\\n\\nWindows Server Core Container\\n\\nFigure 5 -4. Deploy to an Azure VM from a dev \", \"PC through a Docker Engine connection\\n\\n## Scenario B: Deploy to an Azure VM through a Docker Registr\", \"y\\n\\nFigure 5 -5. Deploy to an Azure VM through a Docker Registry\\n\\n<!-- image -->\\n\\nCode, run,\\n\\ndebug\\n\\n\", \"Scenario: Deploy to Azure VM through CI/CD pipelines\\n\\nA Acrosoft\\n\\n5. Test/staging\\n\\nAzure VM\\n\\n## Scen\", \"ario C: Deploy to an Azure VM from CI/CD pipelines in Azure DevOps Services\\n\\n2\\n\\ncode repo\\n\\n(SCC)\\n\\nCo\", \"de push\\n\\ngit push\\n\\nInner loop\\n\\n1.\\n\\nDev environment\\n\\nVSTS\\n\\nVSTS\\n\\nFigure 5 -6. Deploy to an Azure VM f\", \"rom CI/CD pipelines in Azure DevOps Services\\n\\n<!-- image -->\\n\\n## Azure VMs for Windows Containers\\n\\nA\", \"zure VMs for Windows Containers are VMs based on Windows Server 2016, Windows 10, or later versions,\", \" both with Docker Engine set up. In most cases, Windows Server 2016 is used in the Azure VMs.\\n\\nAzure\", \" currently provides a VM named Windows Server 2016 with Containers. You can use this VM to try the n\", \"ew Windows Server Container feature, with either Windows Server Core or Windows Nano Server. Contain\", \"er OS images are installed, and then the VM is ready to use with Docker.\\n\\n## Benefits\\n\\nAlthough Wind\", \"ows Containers can be deployed to on-premises Windows Server 2016 VMs, when you deploy to Azure, you\", \" get an easier way to get started, with ready-to-use Windows Server Container VMs. You also get a co\", \"mmon online location that's accessible to testers, and automatic scalability through Azure virtual m\", \"achine scale sets.\\n\\n## Next steps\\n\\nExplore this content more in-depth on the GitHub wiki:\\n\\nhttps://g\", \"ithub.com/dotnet-architecture/eShopModernizing/wiki/06.-Deploying-your-WindowsContainers -based -app\", \" -into -Azure -VMs -(Including-CI-CD)\\n\\n## SQL (*)\\n\\nPC Dev Environment\\n\\nWindows 10 or later\\n\\nDocker f\", \"or Windows\\n\\n## Overview\\n\\nAzure Container Instances (ACI) is the quickest way to have a Containers de\", \"v/test/staging environment where you can deploy single instances of containers.\\n\\n## Goals\\n\\nThis walk\", \"through shows you the main scenarios when deploying Windows Containers to Azure Container Instances \", \"(ACI) and how you can deploy eShopModernizing Apps into ACI.\\n\\n## Scenarios\\n\\nThere can be variations \", \"about deploying the eShopModernizing apps into ACI such as deploying just one or all of the apps (MV\", \"C app, WebForms app or WCF service). In the following scenario shown below, you can see the ASP.NET \", \"MVC app plus the SQL Server container both of them deployed as containers into ACI (Azure Container \", \"Instances).\\n\\n<!-- image -->\\n\\n## Benefits\\n\\nAzure Container Instances makes it easy to create and mana\", \"ge Docker containers in Azure, without having to provision virtual machines or adopt a higher-level \", \"service. With ACI, you can directly deploy a Windows container in Azure and expose it to the interne\", \"t with a fully qualified domain name (FQDN)\\n\\nDocker Registry\\n\\n00\\n\\nDocker Hub or\\n\\n## Walkthrough 4: D\", \"eploy your Windows Containers -based apps to Azure Container Instances (ACI) Azure Container Registr\", \"y\\n\\ndocker push\\n\\n## Technical walkthrough availability\\n\\nSQL\\n\\n()\\n\\nThe full technical walkthrough is av\", \"ailable in the eShopModernizing GitHub repo wiki:\\n\\nor\\n\\nDeploying the Apps to ACI (Azure Container In\", \"stances)\\n\\nenvironments\\n\\nA Azure\\n\\nAzure Container Instances\\n\\n(ACI)\\n\\nDNS name\\n\\nin a matter of seconds \", \"(Provided that you have the Windows Container image ready in a Docker registry like Docker Hub or Az\", \"ure Container Registry).\\n\\n## Considerations\\n\\nDeploying Windows Containers with either full .NET Fram\", \"ework / ASP.NET or SQL Server into Azure Container Instances (ACI) is not quite as fast as deploying\", \" to a regular Docker Host (like a Windows Server 2016 with Windows Containers) because the Docker im\", \"age has to be downloaded (pulled from the Docker registry) every time and the sizes of the SQL conta\", \"iner image (15.1 GB) and the ASP.NET container image (13.9 GB) are significantly large, however it i\", \"s much cheaper than maintaining your own docker host (permanently on-line Windows Server 2016 with W\", \"indows Containers VM in Azure) not to mention a whole orchestrator like Kubernetes in Azure (AKS) wh\", \"ich is, on the other hand, a great choice for production deployments.\\n\\nAs the main conclusion, using\", \" Azure Container Instances is a very compelling option for Dev/Test scenarios and for CI/CD pipeline\", \"s.\\n\\n## Next steps\\n\\nExplore this content more in-depth on the GitHub wiki:\\n\\nhttps://github.com/dotnet\", \"-architecture/eShopModernizing/wiki/05.-Deploying-the-Apps-to-ACI(Azure-Container-Instances)\\n\\n## Wal\", \"kthrough 5: Deploy your Windows Containers -based apps to Kubernetes in Azure Container Service\\n\\n## \", \"Technical walkthrough availability\\n\\nThe full technical walkthrough is available in the eShopModerniz\", \"ing GitHub repo wiki:\\n\\nhttps://github.com/dotnet-architecture/eShopModernizing/wiki/04.-How-to-deplo\", \"y-your-WindowsContainers -based -apps -into -Kubernetes -in -Azure -Container -Service -(Including-C\", \"I-CD)\\n\\n## Overview\\n\\nAn application that's based on Windows Containers will quickly need to use platf\", \"orms, moving even further away from IaaS VMs. This approach is needed to easily achieve high scalabi\", \"lity and better automated scalability, and for a significant improvement in automated deployments an\", \"d versioning. You can achieve these goals by using the orchestrator Kubernetes, available in Azure C\", \"ontainer Services .\\n\\nScenario: Direct deployment to a Kubernetes cluster in Azure Container Service\\n\", \"\\nDocker Registry\\n\\nDocker Hub\\n\\nAzure Container Registry\\n\\nAzure\\n\\nPC dev environment\\n\\n## Goals\\n\\nASPNET \", \"app\\n\\nACS\\n\\n\\u2022 Kubernetes cluster - Production\\n\\nK8s Cluster\\n\\nThe goal of this walkthrough is to learn h\", \"ow to deploy a Windows Container\\u2013based application to Kubernetes (also called K8s) in Azure Containe\", \"r Service. Deploying to Kubernetes from scratch is a two -step process: Repository to cluster \\u00b7 Dock\", \"er host Master Node\\n\\n1. Deploy a Kubernetes cluster to Azure Container Service.\\n\\n- Scheduler\\n\\n- Prox\", \"y kubectl'create\\n\\nKubectl (K8s CLI)\\n\\nAzure\\n\\n2. Deploy the application and related resources to the K\", \"ubernetes cluster.\\n\\n## Scenarios\\n\\nExternal access\\n\\nWindows Server 2016 nodes\\n\\nAdditional nodes\\n\\n## S\", \"cenario A: Deploy directly to a Kubernetes cluster from a dev environment\\n\\nMove to a highly availabl\", \"e system like Azure SQL Database for production environments.\\n\\nFigure 5 -7. Deploy directly to a Kub\", \"ernetes cluster from a development environment\\n\\n<!-- image -->\\n\\nScenario: Deploy to Kubernetes throu\", \"gh CI/CD pipelines\\n\\nAzure\\n\\nA Acrosoft\\n\\nContainer Service -\\n\\nKubernetes\\n\\n## Scenario B: Deploy to a K\", \"ubernetes cluster from CI/CD pipelines in Azure DevOps Services Private nel\\n\\nPrOXy\\n\\nCode, run,\\n\\ndebu\", \"g\\n\\nCode\\n\\nPush git push\\n\\nInner loop\\n\\n1.\\n\\nDev environment\\n\\n## VSTS VSTS\\n\\ndocker push\\n\\nAdditional nodes\", \"\\n\\nFigure 5 -8. Deploy to a Kubernetes cluster from CI/CD pipelines in Azure DevOps Services\\n\\n<!-- im\", \"age -->\\n\\n## Benefits\\n\\nThere are many benefits to deploying to a cluster in Kubernetes. The biggest b\", \"enefit is that you get a production-ready environment in which you can scale out the application bas\", \"ed on the number of container instances you want to use (inner-scalability in the existing nodes), a\", \"nd based on the number of nodes or VMs in the cluster (global scalability of the cluster).\\n\\nAzure Co\", \"ntainer Service optimizes popular open-source tools and technologies specifically for Azure. You get\", \" an open solution that offers portability, both for your containers and for your application configu\", \"ration. You select the size, the number of hosts, and the orchestrator tools-Container Service handl\", \"es everything else.\\n\\nWith Kubernetes, developers can progress from thinking about physical and virtu\", \"al machines, to planning a container-centric infrastructure that facilitates the following capabilit\", \"ies, among others:\\n\\n- Applications based on multiple containers\\n- Replicating container instances an\", \"d horizontal autoscaling\\n- Naming and discovering (for example, internal DNS)\\n- Balancing loads\\n\\n2.\\n\", \"\\n- Rolling updates\\n- Distributing secrets\\n- Application health checks\\n\\n## Next steps\\n\\nExplore this c\", \"ontent more in-depth on the GitHub wiki: https://github.com/dotnetarchitecture/eShopModernizing/wiki\", \"/04.-How-to-deploy-your-Windows-Containers-based-apps-intoKubernetes -in -Azure -Container -Service \", \"-(Including-CI-CD)\\n\\n## Walkthrough 6: Deploy your Windows Containers -based apps to Azure App Servic\", \"e for Containers\\n\\n## Technical walkthrough availability\\n\\nThe full technical walkthrough is available\", \" in the eShopModernizing GitHub repo wiki:\\n\\nhttps://github.com/dotnet-architecture/eShopModernizing/\", \"wiki/Deploy-Windows-Container-toAzure -App -Service\\n\\n## Overview\\n\\nA simple containerized application\", \" using Windows Containers can easily be deployed to Azure App Service for Containers. This approach \", \"is the recommended approach for most Windows Containerbased applications.\\n\\n## Goals\\n\\nThe goal of thi\", \"s walkthrough is to learn how to deploy a Windows Container\\u2013based application to Azure App Service f\", \"or Containers from a registry (Docker Hub or Azure Container Registry).\\n\\nScenario: Deploy to Azure A\", \"pp Service (Windows Containers)\\n\\nDocker Registry\\n\\n## Scenario\\n\\nWindows 10\\n\\nASP.NET (NET Framework) o\", \"n\\n\\nWindows Server Core Container\\n\\nASP.NET app\\n\\nSOL Server on\\n\\nWindows Server Core Container\\n\\nSQL\\n\\nAz\", \"ure App Service\\n\\nA Azure\\n\\n(With support for Windows Containers)\\n\\n<!-- image -->\\n\\n## Benefits\\n\\nDeploy\", \"ing to Azure App Service for Containers offers the benefits of containers paired with the PaaS benef\", \"its of Azure App Service. The app service can easily be scaled both vertically and horizontally, and\", \" can be configured to autoscale to meet changing demands. Updates can be performed with zero downtim\", \"e and the configuration of continuous deployment from a registry is easily configured as well.\\n\\n## N\", \"ext steps\\n\\nExplore this content more in-depth on the GitHub wiki: https://github.com/dotnetarchitect\", \"ure/eShopModernizing/wiki/Deploy-Windows-Container-to-Azure-App-Service\\n\\n## Conclusions\\n\\n- Container\", \" -based solutions ultimately provide cost savings benefits. Containers are a solution to deployment \", \"problems because they remove the friction caused by an absence of dependencies in production environ\", \"ments. By removing those issues, it improves Dev/Test, DevOps, and production operations significant\", \"ly.\\n- A Docker container is becoming the standard unit of deployment for any server-based applicatio\", \"n or service.\\n- For production environments, you should use an orchestrator (like Kubernetes) to hos\", \"t scalable containers \\u2013 based applications.\\n- Azure VMs hosting containers are a fast and simple way\", \" to create small Dev/Test environments in the cloud.\\n- Azure SQL Database Managed Instance is recomm\", \"ended by default when migrating your relational databases from existing applications to Azure.\\n- Vis\", \"ual Studio 2022 and Image2Docker are basic tools for you to start modernizing your existing .NET app\", \"lications with Windows Containers by accelerating the getting started learning curve.\\n- When placing\", \" containerized applications in production you will always create or adopt a DevOps culture and DevOp\", \"s tools for CI/CD pipelines, like Azure DevOps Services or Jenkins.\\n- Microsoft Azure provides the m\", \"ost comprehensive and complete environment to modernize your existing .NET Framework applications wi\", \"th Windows Containers, cloud infrastructure and PaaS services.\"]"