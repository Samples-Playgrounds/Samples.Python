run: az logout # <â€“ last line of previous job: insert below this
line

deploy_prod: needs: deploy_staging runs-on: ubuntu-latest

 environment:
   name: PROD
   url: ${{ steps.slot_swap.outputs.url }}

 steps:
 - name: Login via Azure CLI
   uses: azure/login@v1
   with:
     creds: ${{ secrets.AZURE_CREDENTIALS }}

 - name: Swap staging slot into production
   id: slot_swap
   run: |
     az webapp deployment slot swap -g ${{ env.rg-name }} -n ${{ env.app-name }} -s staging
     url=$(az webapp show -g ${{ env.rg-name }} -n ${{ env.app-name }} --query
"defaultHostName" -o tsv)
     echo "::set-output name=url::http://$url"

 - name: az cli logout
   run: az logout