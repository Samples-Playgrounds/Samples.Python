,environment:
0,name: PROD
1,url: ${{ steps.slot_swap.outputs.url }}
2,
3,steps:
4,- name: Login via Azure CLI
5,uses: azure/login@v1
6,with:
7,creds: ${{ secrets.AZURE_CREDENTIALS }}
8,
9,- name: Swap staging slot into production
10,id: slot_swap
11,run: |
12,az webapp deployment slot swap -g ${{ env.rg-name }} -n ${{ env.app-name }} -s staging
13,url=$(az webapp show -g ${{ env.rg-name }} -n ${{ env.app-name }} --query
14,"""defaultHostName"" -o tsv)"
15,"echo ""::set-output name=url::http://$url"""
16,
17,- name: az cli logout
18,run: az logout
19,``` :::
