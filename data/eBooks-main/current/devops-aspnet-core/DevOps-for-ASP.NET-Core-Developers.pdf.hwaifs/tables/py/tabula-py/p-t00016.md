|    | [                                                                              |
|---:|:-------------------------------------------------------------------------------|
|  0 | {                                                                              |
|  1 | "name": "UI:Index:Header",                                                     |
|  2 | "value": "${{ secrets.INDEX_HEADER }}",                                        |
|  3 | "slotSetting": true                                                            |
|  4 | }                                                                              |
|  5 | ]                                                                              |
|  6 |                                                                                |
|  7 | - name: az cli logout                                                          |
|  8 | run: az logout                                                                 |
|  9 |                                                                                |
| 10 | deploy_prod:                                                                   |
| 11 | needs: deploy_staging                                                          |
| 12 | runs-on: ubuntu-latest                                                         |
| 13 |                                                                                |
| 14 | environment:                                                                   |
| 15 | name: PROD                                                                     |
| 16 | url: ${{ steps.slot_swap.outputs.url }}                                        |
| 17 |                                                                                |
| 18 | steps:                                                                         |
| 19 | - name: Login via Azure CLI                                                    |
| 20 | uses: azure/login@v1                                                           |
| 21 | with:                                                                          |
| 22 | creds: ${{ secrets.AZURE_CREDENTIALS }}                                        |
| 23 |                                                                                |
| 24 | - name: Swap staging slot into production                                      |
| 25 | id: slot_swap                                                                  |
| 26 | run: |                                                                         |
| 27 | az webapp deployment slot swap -g ${{ env.rg-name }} -n ${{ env.app-name }} -s |
| 28 | staging                                                                        |
| 29 | url=$(az webapp show -g ${{ env.rg-name }} -n ${{ env.app-name }} --query      |
| 30 | "defaultHostName" -o tsv)                                                      |
| 31 | echo "::set-output name=url::http://$url"                                      |
| 32 |                                                                                |
| 33 | - name: Update config                                                          |
| 34 | uses: Azure/appservice-settings@v1                                             |
| 35 | with:                                                                          |
| 36 | app-name: ${{ env.app-name }}                                                  |
| 37 | app-settings-json: |                                                           |
| 38 | [                                                                              |
| 39 | {                                                                              |
| 40 | "name": "UI:Index:Header",                                                     |
| 41 | "value": "${{ secrets.INDEX_HEADER }}",                                        |
| 42 | "slotSetting": true                                                            |
| 43 | }                                                                              |
| 44 | ]                                                                              |
| 45 |                                                                                |
| 46 | - name: az cli logout                                                          |
| 47 | run: az logout                                                                 |