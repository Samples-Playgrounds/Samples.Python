VI  “Cheat” Sheet
ACNS Bulletin ED–03
February 1995
File management commands
:w name Write edit buffer to file name
:wq Write to file and quit:q! Quit without saving changesZZ Same as :wq:sh Execute shell commands (<ctrl>d)
Window motions
<ctrl>d Scroll down  (half a screen)<ctrl>u Scroll up  (half a screen)<ctrl>f Page forward<ctrl>b Page backward/string Search forward?string Search backward<ctrl>l Redraw screen<ctrl>g Display current line number and
file information
n Repeat searchN Repeat search reverseG Go to last linenG Go to line n
:n Go to line n
z<CR> Reposition window: cursor at topz. Reposition window: cursor in middlez- Reposition window: cursor at bottom
Cursor motions
H Upper left corner (home)M Middle lineL Lower left cornerh Back a characterj Down a linek Up a line^ Beginning of line$ End of linel Forward a characterw One word forwardb Back one wordfc Find c
; Repeat find (find next c)Command mode versus input mode
Vi starts in command mode. The positioning commands
operate only while vi is in command mode. You switch vito input mode by entering any one of several vi input com-mands. (See next section.) Once in input mode, any charac-ter you type is taken to be text and is added to the file. Youcannot execute any commands until you exit input mode.To exit input mode, press the escape ( Esc) key.
Input commands  (end with Esc)
a Append after cursor
i Insert before cursoro Open line belowO Open line above:r file Insert file  after current line
Any of these commands leaves vi in input mode until you
press Esc. Pressing the RETURN key will not take you out
of input mode.
Change commands (Input mode)
cw Change word (Esc)
cc Change line (Esc) - blanks linec$ Change to end of linerc Replace character with c
R Replace (Esc) - typeovers Substitute (Esc) - 1 char with stringS Substitute (Esc) - Rest of line with
text
. Repeat last change
Changes during insert mode
<ctrl>h Back one character
<ctrl>w Back one word<ctrl>u Back to beginning of insertvi Editor “Cheat Sheet”
Invoking vi: vi  filename
Format of vi commands: [count][command] (count repeats the effect of the command)Deletion commands
dd  or ndd Delete n lines to general buffer
dw Delete word to general bufferdnw Delete n words
d) Delete to end of sentencedb Delete previous wordD Delete to end of linex Delete character
Recovering deletions
p Put general buffer after cursorP Put general buffer before cursor
Undo commands
u Undo last changeU Undo all changes on line
Rearrangement commands
yy or Y Yank (copy) line to general buffer“z6yy Yank 6 lines to buffer z
yw Yank word to general buffer“a9dd Delete 9 lines to buffer a
“A9dd Delete 9 lines; Append to buffer a
“ap Put text from buffer a  after cursor
p Put general buffer after cursorP Put general buffer before cursorJ Join lines
Parameters
:set list Show invisible characters
:set nolist Don’t show invisible characters
:set number Show line numbers
:set nonumber Don’t show line numbers
:set autoindent Indent after carriage return
:set noautoindent Turn off autoindent
:set showmatch Show matching sets of
parentheses as they are typed
:set noshowmatch Turn off showmatch
:set showmode Display mode on last line of screen
:set noshowmode Turn off showmode
:set all Show values of all possible
parametersMove text from file old to file new
vi old
“a10yy yank 10 lines to buffer a
:w write work buffer:e new edit new file
“ap put text from a after cursor
:30,60w new Write lines 30 to 60 in file new
Regular expressions (search strings)
^ Matches beginning of line
$ Matches end of line
. Matches any single character
* Matches any previous character
.* Matches any character
Search and replace commands
Syntax:
:[address]s/old_text/new_text/
Address components:
. Current line
n Line number n
.+m Current line plus m lines
$ Last line
/string/ A line that contains "string"
% Entire file
[addr1],[addr2] Specifies a range
Examples:
The following example replaces only the first occur-
rence of Banana with Kumquat in each of 11 linesstarting with the current line (.) and continuing for the10 that follow (.+10).
:.,.+10s/Banana/Kumquat
The following example replaces every occurrence
(caused by the  g at the end of the command) of
apple with pear.
:%s/apple/pear/g
The following example removes the last character from
every line in the file. Use it if every line in the file endswith ^M as the result of a file transfer. Execute it
when the cursor is on the first line of the file.
:%s/.$//