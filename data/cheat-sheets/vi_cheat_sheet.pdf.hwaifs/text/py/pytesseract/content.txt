vi Editor “Cheat Sheet’

Invoking v1: vi filename

Format of vi commands: [count] [command]

Command mode versus input mode

Vi starts in command mode. The positioning commands
operate only while vi is in command mode. You switch vi
to input mode by entering any one of several vi input com-
mands. (See next section.) Once in input mode, any charac-
ter you type is taken to be text and is added to the file. You
cannot execute any commands until you exit input mode.
To exit input mode, press the escape (Esc) key.

Input commands (end with Esc)

a Append after cursor

1 Insert before cursor

O Open line below

O Open line above

r file Insert file after current line

Any of these commands leaves vi in input mode until you
press Esc. Pressing the RETURN key will not take you out
of input mode.

Change commands (Input mode)

cw Change word (Esc)

re Change line (Esc) - blanks line

c$ Change to end of line

rc Replace character with c

R Replace (Esc) - typeover

S Substitute (Esc) - | char with string

S Substitute (Esc) - Rest of line with
text

° Repeat last change

Changes during insert mode

<ctrl>h Back one character
<ctrl>w Back one word
<ctrl>u Back to beginning of insert

"Ww name
:wq

:q!

ZZ,

ish

<ctrl>d
<ctrl>u
<ctrl>f
<ctrl>b
/string

?string
<ctrl>l
<ctrl>g

PT e Te oro sree s

we

VI “Cheat” Sheet
ACNS Bulletin ED-03
February 1995

(count repeats the effect of the command)

File management commands

Write edit buffer to file name
Write to file and quit

Quit without saving changes
Same as :wq

Execute shell commands (<ctrl>d)

Window motions

Scroll down (half a screen)
Scroll up (half a screen)
Page forward

Page backward

Search forward

Search backward

Redraw screen

Display current line number and
file information

Repeat search

Repeat search reverse

Go to last line

Go to line n

Go to line n

Reposition window: cursor at top
Reposition window: cursor in middle
Reposition window: cursor at bottom

Cursor motions

Upper left corner (home)
Middle line

Lower left corner

Back a character

Down a line

Up a line

Beginning of line

End of line

Forward a character
One word forward

Back one word

Find c

Repeat find (find next c)
Deletion commands

dd or ndd
dw

dnw

d)

db

D

x

Delete n lines to general buffer
Delete word to general buffer
Delete n words

Delete to end of sentence
Delete previous word

Delete to end of line

Delete character

Recovering deletions

Pp
P

Put general buffer after cursor
Put general buffer before cursor

Undo commands

u
U

Undo last change
Undo all changes on line

Rearrangement commands

yy or Y

“ZOyy
yw

““a9dd
*“A9dd

Parameters

‘set list
‘set nolist

‘set number
‘set nonumber

‘set autoindent
‘set noautoindent

‘set showmatch

‘set noshowmatch

‘set showmode
‘set noshowmode

‘set all

Yank (copy) line to general buffer
Yank 6 lines to buffer z

Yank word to general buffer
Delete 9 lines to buffer a

Delete 9 lines; Append to buffer a
Put text from buffer a after cursor
Put general buffer after cursor

Put general buffer before cursor
Join lines

Show invisible characters
Don’t show invisible characters

Show line numbers
Don’t show line numbers

Indent after carriage return
Turn off autoindent

Show matching sets of
parentheses as they are typed
Turn off showmatch

Display mode on last line of screen
Turn off showmode

Show values of all possible
parameters

Move text from file o/d to file new

vi old

“a lOyy yank 10 lines to buffer a

"Ww write work buffer

"e new edit new file

“ap put text from a after cursor
:30,60w new Write lines 30 to 60 in file new

Regular expressions (search strings)

A Matches beginning of line
$ Matches end of line
Matches any single character
** Matches any previous character
J Matches any character

Search and replace commands

Syntax:
:[address]s/old text/new text/

Address components:
Current line

n Line number n

+m Current line plus m lines

$ Last line

/string/ A line that contains "string"
% Entire file

[addr] ],[addr2] Specifies a range

Examples:

The following example replaces only the first occur-
rence of Banana with Kumquat in each of 11 lines
starting with the current line (.) and continuing for the
10 that follow (.+10).

:.,-+10s/Banana/Kumquat

The following example replaces every occurrence
(caused by the g at the end of the command) of
apple with pear.

:%s/apple/pear/g
The following example removes the last character from
every line in the file. Use it if every line in the file ends

with *M as the result of a file transfer. Execute it
when the cursor is on the first line of the file.

23s/.S//
